<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>CodingDoge</title>
  <icon>https://www.gravatar.com/avatar/d091400ed78ec5cd8bf36bd5fff7bb8f</icon>
  <subtitle>å…³äºå¼€å‘ã€è®¾è®¡ï¼Œå…³äºç”Ÿæ´»ã€‚</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://codingdoge.cn/"/>
  <updated>2018-01-14T18:00:21.152Z</updated>
  <id>http://codingdoge.cn/</id>
  
  <author>
    <name>CodingDoge</name>
    <email>codingdoge@outlook.com</email>
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>Just a test</title>
    <link href="http://codingdoge.cn/2018/01/15/test/"/>
    <id>http://codingdoge.cn/2018/01/15/test/</id>
    <published>2018-01-14T18:00:21.152Z</published>
    <updated>2018-01-14T18:00:21.152Z</updated>
    
    <content type="html"><![CDATA[<p>aaa</p><h2 id="a-dfadf"><a href="#a-dfadf" class="headerlink" title="a dfadf"></a>a dfadf</h2>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;aaa&lt;/p&gt;
&lt;h2 id=&quot;a-dfadf&quot;&gt;&lt;a href=&quot;#a-dfadf&quot; class=&quot;headerlink&quot; title=&quot;a dfadf&quot;&gt;&lt;/a&gt;a dfadf&lt;/h2&gt;
      
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>Advanced Swift ç¬”è®° â€”â€” å…§å»ºé›†åˆé¡å‹</title>
    <link href="http://codingdoge.cn/2017/08/30/title:%20Advanced%20Swift%20%E7%AC%94%E8%AE%B0%20%E2%80%94%E2%80%94%20%E5%85%A7%E5%BB%BA%E9%9B%86%E5%90%88%E9%A1%9E%E5%9E%8B/"/>
    <id>http://codingdoge.cn/2017/08/30/title: Advanced Swift ç¬”è®° â€”â€” å…§å»ºé›†åˆé¡å‹/</id>
    <published>2017-08-30T07:47:00.000Z</published>
    <updated>2018-01-13T12:22:39.908Z</updated>
    
    <content type="html"><![CDATA[<h2 id="æ•¸çµ„-Array"><a href="#æ•¸çµ„-Array" class="headerlink" title="æ•¸çµ„(Array)"></a>æ•¸çµ„(Array)</h2><p>ç›¡é‡ä¸è¦ä½¿ç”¨ä¸‹æ¨™ç´¢å¼•ï¼Œå¦‚æœä¸‹æ¨™è¶Šç•Œæœƒç›´æ¥å°è‡´crashï¼ˆåœ¨ä¸¦ç™¼æƒ…æ³ä¸‹å°¤å…¶éœ€è¦è€ƒæ…®ï¼‰ã€‚</p><ul><li>è¿­ä»£å…¨éƒ¨</li></ul><figure class="highlight ada"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">for</span> x <span class="keyword">in</span> <span class="keyword">array</span></div></pre></td></tr></table></figure><ul><li>è¿­ä»£é™¤äº†ç¬¬ä¸€å€‹å…ƒç´ ä»¥å¤–çš„å…¶é¤˜éƒ¨åˆ†</li></ul><figure class="highlight ada"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">for</span> x <span class="keyword">in</span> <span class="keyword">array</span>.dropFirst()</div></pre></td></tr></table></figure><ul><li>è¿­ä»£é™¤äº†æœ€å¾Œ5å€‹å…ƒç´ ä»¥å¤–çš„æ•¸çµ„</li></ul><figure class="highlight ada"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">for</span> x <span class="keyword">in</span> <span class="keyword">array</span>.dropLast(<span class="number">5</span>)</div></pre></td></tr></table></figure><ul><li>åˆ—èˆ‰æ•¸çµ„ä¸­çš„å…ƒç´ å’Œå°æ‡‰ä¸‹æ¨™</li></ul><figure class="highlight delphi"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">for</span> (<span class="keyword">index</span>, value) <span class="keyword">in</span> <span class="keyword">array</span>.enumerated()</div></pre></td></tr></table></figure><ul><li>å°‹æ‰¾ä¸€å€‹æŒ‡å®šå…ƒç´ çš„ä½ç½®</li></ul><figure class="highlight xquery"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="number">_</span> = <span class="keyword">array</span>.index &#123;</div><div class="line">    someMatchingLogic($0)</div><div class="line">&#125;</div></pre></td></tr></table></figure><ul><li>å°æ•¸çµ„æ‰€æœ‰å…ƒç´ è®Šå½¢</li></ul><figure class="highlight xquery"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="number">_</span> = <span class="keyword">array</span>.<span class="keyword">map</span> &#123;</div><div class="line">    someTransformation($0)</div><div class="line">&#125;</div></pre></td></tr></table></figure><ul><li>ç¯©é¸ç¬¦åˆæŸå€‹æ¨™æº–çš„å…ƒç´ </li></ul><figure class="highlight xquery"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="number">_</span> = <span class="keyword">array</span>.filter &#123;</div><div class="line">    someCriteria($0)</div><div class="line">&#125;</div></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;æ•¸çµ„-Array&quot;&gt;&lt;a href=&quot;#æ•¸çµ„-Array&quot; class=&quot;headerlink&quot; title=&quot;æ•¸çµ„(Array)&quot;&gt;&lt;/a&gt;æ•¸çµ„(Array)&lt;/h2&gt;&lt;p&gt;ç›¡é‡ä¸è¦ä½¿ç”¨ä¸‹æ¨™ç´¢å¼•ï¼Œå¦‚æœä¸‹æ¨™è¶Šç•Œæœƒç›´æ¥å°è‡´crashï¼ˆåœ¨ä¸¦ç™¼æƒ…æ³ä¸‹å°¤å…¶éœ€è¦è€ƒæ…®ï¼‰ã€‚&lt;/
      
    
    </summary>
    
      <category term="iOS" scheme="http://codingdoge.cn/categories/iOS/"/>
    
    
      <category term="Reading Notes" scheme="http://codingdoge.cn/tags/Reading-Notes/"/>
    
  </entry>
  
  <entry>
    <title>Brew Instruction</title>
    <link href="http://codingdoge.cn/2017/08/30/title:%20Brew%20Instruction/"/>
    <id>http://codingdoge.cn/2017/08/30/title: Brew Instruction/</id>
    <published>2017-08-30T06:26:00.000Z</published>
    <updated>2018-01-13T12:36:00.696Z</updated>
    
    <content type="html"><![CDATA[<p><a href="https://brew.sh" target="_blank" rel="noopener">Brew</a></p><table><thead><tr><th>brew help</th><th>æŸ¥çœ‹æœ‰ä»€éº¼å¯ç”¨çš„æŒ‡ä»¤</th></tr></thead><tbody><tr><td>brew search [someSuit]</td><td>æŸ¥è©¢æœ‰ç„¡someSuit</td></tr><tr><td>brew install [someSuit]</td><td>å®‰è£someSuit</td></tr><tr><td>brew info [someSuit]</td><td>æŸ¥çœ‹someSuitçš„è¨Šæ¯</td></tr><tr><td>brew uninstall [someSuit]</td><td>ç§»é™¤someSuit</td></tr><tr><td>brew list</td><td>åˆ—å‡ºå·²å®‰è£å¥—ä»¶</td></tr><tr><td>brew outdated</td><td>æŸ¥è©¢é‚£äº›å¥—ä»¶å·²éæœŸ</td></tr><tr><td>brew cleanup -n</td><td>åˆªé™¤èˆŠçš„å¥—ä»¶ç‰ˆæœ¬(-n æ˜¯é¡¯ç¤ºåˆªé™¤çš„éç¨‹ï¼Œå¯ä»¥äº†è§£æœ‰å“ªäº›å¥—ä»¶è¢«åˆªé™¤äº†)</td></tr><tr><td>brew upgrade [someSuit]</td><td>æ›´æ–°someSuit</td></tr><tr><td>brew update &amp;&amp; brew upgrade &amp;&amp; brew doctor</td><td>æ›´æ–°Homebrewä¸Šé¢æ‰€æœ‰å¥—ä»¶</td></tr><tr><td>brew dips [someSuit]</td><td>åˆ—å‡ºå®‰è£someSuitéœ€è¦çš„ä¾è³´å¥—ä»¶</td></tr><tr><td>brew â€”prefix</td><td>æŸ¥è©¢brewå®‰è£çš„è·¯å¾‘</td></tr></tbody></table><blockquote><p>åƒè€ƒ:<br><a href="https://gist.github.com/chiehwen/99c215f1ae3965743a4f" target="_blank" rel="noopener">chiehwen/Homebrew æŒ‡ä»¤è©³è§£.md</a><br><a href="http://wjhwang.pixnet.net/blog/post/31998023-homebrew-æŒ‡ä»¤" target="_blank" rel="noopener">Homebrew æŒ‡ä»¤</a></p></blockquote>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;a href=&quot;https://brew.sh&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Brew&lt;/a&gt;&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;brew help&lt;/th&gt;
&lt;th&gt;æŸ¥çœ‹æœ‰ä»€éº¼å¯ç”¨çš„æŒ‡ä»¤&lt;/th&gt;
&lt;/tr&gt;
&lt;
      
    
    </summary>
    
      <category term="Shell" scheme="http://codingdoge.cn/categories/Shell/"/>
    
    
      <category term="Tool" scheme="http://codingdoge.cn/tags/Tool/"/>
    
  </entry>
  
  <entry>
    <title>Advanced Swift ç¬”è®° â€”â€” Tips</title>
    <link href="http://codingdoge.cn/2017/08/20/title:%20Advanced%20Swift%20%E7%AC%94%E8%AE%B0%20%E2%80%94%E2%80%94%20Tips/"/>
    <id>http://codingdoge.cn/2017/08/20/title: Advanced Swift ç¬”è®° â€”â€” Tips/</id>
    <published>2017-08-20T09:35:00.000Z</published>
    <updated>2018-01-13T12:23:01.178Z</updated>
    
    <content type="html"><![CDATA[<h3 id="Curried-Function-æŸ¯é‡ŒåŒ–å‡½æ•¸"><a href="#Curried-Function-æŸ¯é‡ŒåŒ–å‡½æ•¸" class="headerlink" title="Curried Function æŸ¯é‡ŒåŒ–å‡½æ•¸"></a>Curried Function æŸ¯é‡ŒåŒ–å‡½æ•¸</h3><p>ä¸€ä¸ªå‡½æ•°ä¸æ˜¯æ¥å—å¤šä¸ªå‚æ•°ï¼Œè€Œæ˜¯åªæ¥å—éƒ¨åˆ†å‚æ•°ï¼Œç„¶åè¿”å›ä¸€ä¸ªæ¥å—å…¶ä½™å‚æ•°çš„å‡½æ•°ã€‚</p><h3 id="Statically-Dispatched-éœæ…‹æ´¾ç™¼"><a href="#Statically-Dispatched-éœæ…‹æ´¾ç™¼" class="headerlink" title="Statically Dispatched éœæ…‹æ´¾ç™¼"></a>Statically Dispatched éœæ…‹æ´¾ç™¼</h3><p>å®šç¾©åœ¨é¡æˆ–è€…å”è­°ä¸­çš„å‡½æ•¸å°±æ˜¯æ–¹æ³•(Method)ï¼Œä»–å€‘æœ‰ä¸€å€‹éš±å¼çš„<code>self</code>ã€‚ä¸æ˜¯æ–¹æ³•çš„å‡½æ•¸å«åšè‡ªç”±å‡½æ•¸(Free Function)ã€‚è‡ªç”±å‡½æ•°å’Œé‚£äº›åœ¨ç»“æ„ä½“ä¸Šè°ƒç”¨çš„æ–¹æ³•æ˜¯é™æ€æ´¾å‘ (statically dispatched)çš„ã€‚å¯¹äºè¿™äº›å‡½æ•°çš„è°ƒç”¨ï¼Œåœ¨ç¼–è¯‘çš„æ—¶å€™å°±å·²ç»ç¡®å®šäº†ã€‚å¯¹äºé™æ€æ´¾å‘çš„è°ƒç”¨ï¼Œç¼–è¯‘å™¨å¯èƒ½èƒ½å¤Ÿå†…è” (inline)è¿™äº›å‡½æ•°ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå®Œå…¨ä¸å»åšå‡½æ•°è°ƒç”¨ï¼Œè€Œæ˜¯å°†è¿™éƒ¨åˆ†ä»£ç æ›¿æ¢ä¸ºéœ€è¦æ‰§è¡Œçš„å‡½æ•°ã€‚é™æ€æ´¾å‘è¿˜èƒ½å¤Ÿå¸®åŠ©ç¼–è¯‘å™¨ä¸¢å¼ƒæˆ–è€…ç®€åŒ–é‚£äº›åœ¨ç¼–è¯‘æ—¶å°±èƒ½ç¡®å®šä¸ä¼šè¢«å®é™…æ‰§è¡Œçš„ä»£ç ã€‚</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h3 id=&quot;Curried-Function-æŸ¯é‡ŒåŒ–å‡½æ•¸&quot;&gt;&lt;a href=&quot;#Curried-Function-æŸ¯é‡ŒåŒ–å‡½æ•¸&quot; class=&quot;headerlink&quot; title=&quot;Curried Function æŸ¯é‡ŒåŒ–å‡½æ•¸&quot;&gt;&lt;/a&gt;Curried Function æŸ¯é‡ŒåŒ–
      
    
    </summary>
    
      <category term="iOS" scheme="http://codingdoge.cn/categories/iOS/"/>
    
    
      <category term="Reading Notes" scheme="http://codingdoge.cn/tags/Reading-Notes/"/>
    
  </entry>
  
  <entry>
    <title>å‰‘æŒ‡Offer â€”â€” äºŒå‰æœç´¢æ ‘çš„ç¬¬kä¸ªç»“ç‚¹</title>
    <link href="http://codingdoge.cn/2017/08/04/title:%20%E5%89%91%E6%8C%87Offer%20%E2%80%94%E2%80%94%20%E4%BA%8C%E5%8F%89%E6%90%9C%E7%B4%A2%E6%A0%91%E7%9A%84%E7%AC%ACk%E4%B8%AA%E7%BB%93%E7%82%B9/"/>
    <id>http://codingdoge.cn/2017/08/04/title: å‰‘æŒ‡Offer â€”â€” äºŒå‰æœç´¢æ ‘çš„ç¬¬kä¸ªç»“ç‚¹/</id>
    <published>2017-08-04T01:56:00.000Z</published>
    <updated>2018-01-14T16:29:06.979Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>é¢˜ç›®æ¥æº:<strong><a href="https://www.nowcoder.com/practice/ef068f602dde4d28aab2b210e859150a?tpId=13&amp;tqId=11215&amp;tPage=4&amp;rp=4&amp;ru=/ta/coding-interviews&amp;qru=/ta/coding-interviews/question-ranking" target="_blank" rel="noopener">ç‰›å®¢ç½‘</a></strong>  </p></blockquote><hr><h2 id="é¢˜ç›®æè¿°"><a href="#é¢˜ç›®æè¿°" class="headerlink" title="é¢˜ç›®æè¿°"></a>é¢˜ç›®æè¿°</h2><p>ç»™å®šä¸€é¢—äºŒå‰æœç´¢æ ‘ï¼Œè¯·æ‰¾å‡ºå…¶ä¸­çš„ç¬¬kå¤§çš„ç»“ç‚¹ã€‚ä¾‹å¦‚ï¼Œ 5 / \ 3 7 /\ /\ 2 4 6 8 ä¸­ï¼ŒæŒ‰ç»“ç‚¹æ•°å€¼å¤§å°é¡ºåºç¬¬ä¸‰ä¸ªç»“ç‚¹çš„å€¼ä¸º4ã€‚</p><h2 id="è§£é¢˜æ€è·¯"><a href="#è§£é¢˜æ€è·¯" class="headerlink" title="è§£é¢˜æ€è·¯"></a>è§£é¢˜æ€è·¯</h2><ol><li>é€’å½’</li><li>è¿­ä»£<h3 id="way1"><a href="#way1" class="headerlink" title="way1"></a>way1</h3>ä¸­åºéå†ï¼Œæ‰¾åˆ°ç¬¬kä¸ªç»“ç‚¹ã€‚å®Œå…¨æ€§çš„æ¨¡æ‹Ÿå·¦æ ¹å³ï¼Œæ³¨æ„è¿”å›ç»“æœçš„å¤„ç†ã€‚</li></ol><pre><code class="//">TreeNode* KthNode(TreeNode* pRoot, int k) {    if (pRoot) {        TreeNode *node = KthNode(pRoot-&gt;left, k);        if (node) return node;        index++;        if (index == k) return pRoot;        node = KthNode(pRoot-&gt;right, k);        if (node) return node;    }    return NULL;}</code></pre>]]></content>
    
    <summary type="html">
    
      
      
        &lt;blockquote&gt;
&lt;p&gt;é¢˜ç›®æ¥æº:&lt;strong&gt;&lt;a href=&quot;https://www.nowcoder.com/practice/ef068f602dde4d28aab2b210e859150a?tpId=13&amp;amp;tqId=11215&amp;amp;tPage=4&amp;
      
    
    </summary>
    
      <category term="Algorithm" scheme="http://codingdoge.cn/categories/Algorithm/"/>
    
    
      <category term="å‰‘æŒ‡Offer" scheme="http://codingdoge.cn/tags/%E5%89%91%E6%8C%87Offer/"/>
    
  </entry>
  
  <entry>
    <title>é”™è¯¯å¤„ç†</title>
    <link href="http://codingdoge.cn/2017/08/03/title:%20%E9%94%99%E8%AF%AF%E5%A4%84%E7%90%86/"/>
    <id>http://codingdoge.cn/2017/08/03/title: é”™è¯¯å¤„ç†/</id>
    <published>2017-08-03T02:47:00.000Z</published>
    <updated>2018-01-13T12:26:37.175Z</updated>
    
    <content type="html"><![CDATA[<p>é”™è¯¯å¤„ç†ï¼ˆError handlingï¼‰æ˜¯å“åº”é”™è¯¯ä»¥åŠä»é”™è¯¯ä¸­æ¢å¤çš„è¿‡ç¨‹ã€‚Swift æä¾›äº†åœ¨è¿è¡Œæ—¶å¯¹å¯æ¢å¤é”™è¯¯çš„æŠ›å‡ºã€æ•è·ã€ä¼ é€’å’Œæ“ä½œçš„ä¸€ç­‰å…¬æ°‘æ”¯æŒã€‚</p><p>Swift ä¸­æœ‰4ç§å¤„ç†é”™è¯¯çš„æ–¹å¼</p><ul><li>æŠŠå‡½æ•°æŠ›å‡ºçš„é”™è¯¯ä¼ é€’ç»™è°ƒç”¨æ­¤å‡½æ•°çš„ä»£ç </li><li>ç”¨<code>do-catch</code>è¯­å¥å¤„ç†é”™è¯¯</li><li>å°†é”™è¯¯ä½œä¸ºå¯é€‰ç±»å‹å¤„ç†</li><li>æˆ–è€…æ–­è¨€æ­¤é”™è¯¯æ ¹æœ¬ä¸ä¼šå‘ç”Ÿ</li></ul><blockquote><p>Swift ä¸­çš„é”™è¯¯å¤„ç†å¹¶ä¸æ¶‰åŠè§£é™¤è°ƒç”¨æ ˆï¼Œè¿™æ˜¯ä¸€ä¸ªè®¡ç®—ä»£ä»·é«˜æ˜‚çš„è¿‡ç¨‹ã€‚å°±æ­¤è€Œè¨€ï¼Œthrowè¯­å¥çš„æ€§èƒ½ç‰¹æ€§æ˜¯å¯ä»¥å’Œreturnè¯­å¥ç›¸åª²ç¾çš„ã€‚</p></blockquote><p>ä¸€ä¸ª throwing å‡½æ•°å¯ä»¥åœ¨å…¶å†…éƒ¨æŠ›å‡ºé”™è¯¯ï¼Œå¹¶å°†é”™è¯¯ä¼ é€’åˆ°å‡½æ•°<strong>è¢«è°ƒç”¨æ—¶çš„ä½œç”¨åŸŸ</strong>ã€‚</p><blockquote><p>å‚è€ƒ:<br><a href="http://wiki.jikexueyuan.com/project/swift/" target="_blank" rel="noopener"> The Swift Programming Language ä¸­æ–‡ç‰ˆ</a><br><a href="http://swifter.tips" target="_blank" rel="noopener">SWIFT çš„å¿…å¤‡ TIP</a></p></blockquote>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;é”™è¯¯å¤„ç†ï¼ˆError handlingï¼‰æ˜¯å“åº”é”™è¯¯ä»¥åŠä»é”™è¯¯ä¸­æ¢å¤çš„è¿‡ç¨‹ã€‚Swift æä¾›äº†åœ¨è¿è¡Œæ—¶å¯¹å¯æ¢å¤é”™è¯¯çš„æŠ›å‡ºã€æ•è·ã€ä¼ é€’å’Œæ“ä½œçš„ä¸€ç­‰å…¬æ°‘æ”¯æŒã€‚&lt;/p&gt;
&lt;p&gt;Swift ä¸­æœ‰4ç§å¤„ç†é”™è¯¯çš„æ–¹å¼&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;æŠŠå‡½æ•°æŠ›å‡ºçš„é”™è¯¯ä¼ é€’ç»™è°ƒç”¨æ­¤å‡½æ•°çš„ä»£ç &lt;/l
      
    
    </summary>
    
      <category term="iOS" scheme="http://codingdoge.cn/categories/iOS/"/>
    
    
      <category term="Swift" scheme="http://codingdoge.cn/tags/Swift/"/>
    
  </entry>
  
  <entry>
    <title>Dispatch åœ¨swiftä¸­çš„ä½¿ç”¨</title>
    <link href="http://codingdoge.cn/2017/08/03/title:%20Dispatch%20%E5%9C%A8swift%E4%B8%AD%E7%9A%84%E4%BD%BF%E7%94%A8/"/>
    <id>http://codingdoge.cn/2017/08/03/title: Dispatch åœ¨swiftä¸­çš„ä½¿ç”¨/</id>
    <published>2017-08-03T01:49:00.000Z</published>
    <updated>2018-01-13T12:28:30.884Z</updated>
    
    <content type="html"><![CDATA[<h2 id="åˆ›å»ºé˜Ÿåˆ—"><a href="#åˆ›å»ºé˜Ÿåˆ—" class="headerlink" title="åˆ›å»ºé˜Ÿåˆ—"></a>åˆ›å»ºé˜Ÿåˆ—</h2><p>å½“groupé‡Œæ‰€æœ‰äº‹ä»¶éƒ½å®ŒæˆGCD APIæœ‰ä¸¤ç§æ–¹å¼å‘é€é€šçŸ¥ï¼Œç¬¬ä¸€ç§æ˜¯dispatch_group_waitï¼Œä¼šé˜»å¡å½“å‰è¿›ç¨‹ï¼Œç­‰æ‰€æœ‰ä»»åŠ¡éƒ½å®Œæˆæˆ–ç­‰å¾…è¶…æ—¶ã€‚ç¬¬äºŒç§æ–¹æ³•æ˜¯ä½¿ç”¨dispatch_group_notifyï¼Œå¼‚æ­¥æ‰§è¡Œé—­åŒ…ï¼Œä¸ä¼šé˜»å¡ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div></pre></td><td class="code"><pre><div class="line">func downloadPhotosWithCompletion(completion: BatchPhotoDownloadingCompletionClosure?) &#123;</div><div class="line">     dispatch_async(GlobalUserInitiatedQueue) &#123; // å› ä¸ºdispatch_group_waitä¼šç§Ÿå¡å½“å‰è¿›ç¨‹ï¼Œæ‰€ä»¥è¦ä½¿ç”¨dispatch_asyncå°†æ•´ä¸ªæ–¹æ³•è¦æ”¾åˆ°åå°é˜Ÿåˆ—æ‰èƒ½å¤Ÿä¿è¯ä¸»çº¿ç¨‹ä¸è¢«é˜»å¡</div><div class="line">          var storedError: NSError!</div><div class="line">          var downloadGroup = dispatch_group_create() // åˆ›å»ºä¸€ä¸ªdispatch group</div><div class="line"></div><div class="line">          for address in [OverlyAttachedGirlfriendURLString,</div><div class="line">               SuccessKidURLString,</div><div class="line">               LotsOfFacesURLString]</div><div class="line">          &#123;</div><div class="line">               let url = NSURL(string: address)</div><div class="line">               dispatch_group_enter(downloadGroup) // dispatch_group_enteræ˜¯é€šçŸ¥dispatch groupä»»åŠ¡å¼€å§‹äº†ï¼Œdispatch_group_enterå’Œdispatch_group_leaveæ˜¯æˆå¯¹è°ƒç”¨ï¼Œä¸ç„¶ç¨‹åºå°±å´©æºƒäº†ã€‚</div><div class="line">               let photo = DownloadPhoto(url: url!) &#123;</div><div class="line">                    image, error in</div><div class="line">                    if let error = error &#123;</div><div class="line">                         storedError = error</div><div class="line">                    &#125;</div><div class="line">                    dispatch_group_leave(downloadGroup) // ä¿æŒå’Œdispatch_group_enteré…å¯¹ã€‚é€šçŸ¥ä»»åŠ¡å·²ç»å®Œæˆ</div><div class="line">               &#125;</div><div class="line">               PhotoManager.sharedManager.addPhoto(photo)</div><div class="line">          &#125;</div><div class="line"></div><div class="line">          dispatch_group_wait(downloadGroup, DISPATCH_TIME_FOREVER) // dispatch_group_waitç­‰å¾…æ‰€æœ‰ä»»åŠ¡éƒ½å®Œæˆç›´åˆ°è¶…æ—¶ã€‚å¦‚æœä»»åŠ¡å®Œæˆå‰å°±è¶…æ—¶äº†ï¼Œå‡½æ•°ä¼šè¿”å›ä¸€ä¸ªéé›¶å€¼ï¼Œå¯ä»¥é€šè¿‡è¿”å›å€¼åˆ¤æ–­æ˜¯å¦è¶…æ—¶ã€‚ä¹Ÿå¯ä»¥ç”¨DISPATCH_TIME_FOREVERè¡¨ç¤ºä¸€ç›´ç­‰ã€‚</div><div class="line">          dispatch_async(GlobalMainQueue) &#123; // è¿™é‡Œå¯ä»¥ä¿è¯æ‰€æœ‰å›¾ç‰‡ä»»åŠ¡éƒ½å®Œæˆï¼Œç„¶ååœ¨main queueé‡ŒåŠ å…¥å®Œæˆåè¦å¤„ç†çš„é—­åŒ…ï¼Œä¼šåœ¨main queueé‡Œæ‰§è¡Œã€‚</div><div class="line">               if let completion = completion &#123; // æ‰§è¡Œé—­åŒ…å†…å®¹</div><div class="line">                    completion(error: storedError)</div><div class="line">               &#125;</div><div class="line">          &#125;</div><div class="line">     &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure><h2 id="Serial-Queues"><a href="#Serial-Queues" class="headerlink" title="Serial Queues"></a>Serial Queues</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">private let serialQueue = DispatchQueue(label: â€œserialQueueâ€)</div><div class="line">private var dictionary: [String: Any] = [:]</div><div class="line"></div><div class="line">public func set(_ value: Any, forKey key: String) &#123;</div><div class="line">    serialQueue.sync &#123;</div><div class="line">        dictionary[key] = value</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">public func object(forKey key: String) -&gt; Any? &#123;</div><div class="line">    var result: Any?</div><div class="line">       </div><div class="line">    serialQueue.sync &#123;</div><div class="line">        result = storage[key]</div><div class="line">    &#125;</div><div class="line">    // returns after serialQueue is finished operation</div><div class="line">    // beacuse serialQueue is run synchronously</div><div class="line">    return result</div><div class="line">&#125;</div></pre></td></tr></table></figure><h2 id="Concurrent-Queues"><a href="#Concurrent-Queues" class="headerlink" title="Concurrent Queues"></a>Concurrent Queues</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line">private let concurrentQueue = DispatchQueue(label: &quot;concurrentQueue&quot;, attributes: .concurrent)</div><div class="line">private var dictionary: [String: Any] = [:]</div><div class="line">    </div><div class="line">public func set(_ value: Any?, forKey key: String) &#123;</div><div class="line">    concurrentQueue.async &#123;</div><div class="line">        self.storage[key] = value</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">public func object(forKey key: String) -&gt; Any? &#123;</div><div class="line">    var result: Any?</div><div class="line"></div><div class="line">    concurrentQueue.sync &#123;</div><div class="line">        result = storage[key]</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    // returns after concurrentQueue is finished operation</div><div class="line">    // beacuse concurrentQueue is run synchronously</div><div class="line">    return result</div><div class="line">&#125;</div></pre></td></tr></table></figure><h2 id="Concurrent-Queue-with-Barrier"><a href="#Concurrent-Queue-with-Barrier" class="headerlink" title="Concurrent Queue with Barrier"></a>Concurrent Queue with Barrier</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line">private let concurrentQueue = DispatchQueue(label: &quot;concurrentQueue&quot;, attributes: .concurrent)</div><div class="line">private var dictionary: [String: Any] = [:]</div><div class="line">    </div><div class="line">public func set(_ value: Any?, forKey key: String) &#123;</div><div class="line">    // .barrier flag ensures that within the queue all reading is done</div><div class="line">    // before the below writing is performed and</div><div class="line">    // pending readings start after below writing is performed</div><div class="line">    concurrentQueue.async(flags: .barrier) &#123;</div><div class="line">        self.storage[key] = value</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">public func object(forKey key: String) -&gt; Any? &#123;</div><div class="line">    var result: Any?</div><div class="line"></div><div class="line">    concurrentQueue.sync &#123;</div><div class="line">        result = storage[key]</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    // returns after concurrentQueue is finished operation</div><div class="line">    // beacuse concurrentQueue is run synchronously</div><div class="line">    return result</div><div class="line">&#125;</div></pre></td></tr></table></figure><h3 id="å»¶æ—¶"><a href="#å»¶æ—¶" class="headerlink" title="å»¶æ—¶"></a>å»¶æ—¶</h3><figure class="highlight livescript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div></pre></td><td class="code"><pre><div class="line">typealias <span class="function"><span class="title">Task</span> = <span class="params">(_ cancel: Bool)</span> -&gt;</span> Void</div><div class="line"></div><div class="line">    func delay<span class="function"><span class="params">(time: TimeInterval, task: @escaping ()-&gt;())</span> -&gt;</span> Task? &#123;</div><div class="line">        func dispatch_later<span class="function"><span class="params">(block: @escaping ()-&gt;())</span> &#123;</span></div><div class="line">            <span class="title">DispatchQueue</span>.<span class="title">main</span>.<span class="title">asyncAfter</span><span class="params">(deadline: DispatchTime.now()+time, execute: block)</span></div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="title">var</span> <span class="title">closure</span>: <span class="params">(()-&gt;())</span>? = <span class="title">task</span></div><div class="line">        <span class="title">var</span> <span class="title">result</span>: <span class="title">Task</span>?</div><div class="line"></div><div class="line">        <span class="title">let</span> <span class="title">delayedClosure</span>: <span class="title">Task</span> = &#123; <span class="title">cancel</span> <span class="title">in</span></div><div class="line">            <span class="title">if</span> <span class="title">let</span> <span class="title">internalClosure</span> = <span class="title">closure</span> &#123;</div><div class="line">                <span class="title">if</span> <span class="title">cancel</span> == <span class="title">false</span> &#123;</div><div class="line">                    <span class="title">DispatchQueue</span>.<span class="title">main</span>.<span class="title">async</span> &#123;</div><div class="line">                        <span class="title">internalClosure</span><span class="params">()</span></div><div class="line">                    &#125;</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">            <span class="title">closure</span> = <span class="title">nil</span></div><div class="line">            <span class="title">result</span> = <span class="title">nil</span></div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="title">result</span> = <span class="title">delayedClosure</span></div><div class="line">        <span class="title">dispatch_later</span> &#123;</div><div class="line">            <span class="title">if</span> <span class="title">let</span> <span class="title">delayedClosure</span> = <span class="title">result</span> &#123;</div><div class="line">                <span class="title">delayedClosure</span><span class="params">(<span class="literal">false</span>)</span></div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        </div><div class="line">        <span class="title">return</span> <span class="title">result</span></div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    <span class="title">func</span> <span class="title">cancel</span><span class="params">(task: Task?)</span> &#123;</div><div class="line">        <span class="title">task</span>?<span class="params">(<span class="literal">true</span>)</span></div><div class="line">    &#125;</div></pre></td></tr></table></figure><h3 id="ç½‘ç»œåœºæ™¯å¼‚æ­¥å¼€å¯ä¸‹è½½ã€å–æ¶ˆä¸‹è½½ï¼Œå¼€å§‹ä¸‹è½½å‰ä¿è¯æ²¡æœ‰é—ç•™ä¸‹è½½ä»»åŠ¡"><a href="#ç½‘ç»œåœºæ™¯å¼‚æ­¥å¼€å¯ä¸‹è½½ã€å–æ¶ˆä¸‹è½½ï¼Œå¼€å§‹ä¸‹è½½å‰ä¿è¯æ²¡æœ‰é—ç•™ä¸‹è½½ä»»åŠ¡" class="headerlink" title="ç½‘ç»œåœºæ™¯å¼‚æ­¥å¼€å¯ä¸‹è½½ã€å–æ¶ˆä¸‹è½½ï¼Œå¼€å§‹ä¸‹è½½å‰ä¿è¯æ²¡æœ‰é—ç•™ä¸‹è½½ä»»åŠ¡"></a>ç½‘ç»œåœºæ™¯å¼‚æ­¥å¼€å¯ä¸‹è½½ã€å–æ¶ˆä¸‹è½½ï¼Œå¼€å§‹ä¸‹è½½å‰ä¿è¯æ²¡æœ‰é—ç•™ä¸‹è½½ä»»åŠ¡</h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">fileprivate</span> <span class="keyword">let</span> barrierQueue = <span class="type">DispatchQueue</span>(label: <span class="string">"com.meitu.meipu.videoCache.barrierQueue"</span>)</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">downloader</span><span class="params">(url: URL)</span></span> &#123;</div><div class="line">        barrierQueue.sync &#123; [<span class="keyword">weak</span> <span class="keyword">self</span>] <span class="keyword">in</span></div><div class="line">            <span class="comment">// add downloader task</span></div><div class="line">        &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">cancel</span><span class="params">()</span></span> &#123;</div><div class="line">    barrierQueue.async(group: <span class="literal">nil</span>, qos: .<span class="keyword">default</span>, flags: .barrier) &#123;</div><div class="line">        <span class="comment">// cacle task    </span></div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure><blockquote><p>å‚è€ƒ:<br><a href="https://swiftcafe.io/2016/10/16/swift-gcd/" target="_blank" rel="noopener">GCD åœ¨ Swift 3 ä¸­çš„ç©å„¿æ³•</a><br><a href="http://swift.gg/2016/05/05/the-gcd-handbook/" target="_blank" rel="noopener">GCD ä½¿ç”¨æŒ‡å—</a><br><a href="http://swift.gg/2016/11/30/grand-central-dispatch/" target="_blank" rel="noopener">Swift 3 ä¸­çš„ GCD ä¸ Dispatch Queue</a><br><a href="https://www.appcoda.com.tw/grand-central-dispatch/" target="_blank" rel="noopener">Swift 3å­¸ç¿’æŒ‡å—ï¼šé‡æ–°èªè­˜GCDæ‡‰ç”¨</a><br><a href="http://blog.csdn.net/hello_hwc/article/details/54293280" target="_blank" rel="noopener">GCDç²¾è®²ï¼ˆSwift 3ï¼‰</a></p></blockquote>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;åˆ›å»ºé˜Ÿåˆ—&quot;&gt;&lt;a href=&quot;#åˆ›å»ºé˜Ÿåˆ—&quot; class=&quot;headerlink&quot; title=&quot;åˆ›å»ºé˜Ÿåˆ—&quot;&gt;&lt;/a&gt;åˆ›å»ºé˜Ÿåˆ—&lt;/h2&gt;&lt;p&gt;å½“groupé‡Œæ‰€æœ‰äº‹ä»¶éƒ½å®ŒæˆGCD APIæœ‰ä¸¤ç§æ–¹å¼å‘é€é€šçŸ¥ï¼Œç¬¬ä¸€ç§æ˜¯dispatch_group_waitï¼Œä¼šé˜»å¡å½“å‰è¿›ç¨‹
      
    
    </summary>
    
      <category term="iOS" scheme="http://codingdoge.cn/categories/iOS/"/>
    
    
      <category term="Swift" scheme="http://codingdoge.cn/tags/Swift/"/>
    
  </entry>
  
  <entry>
    <title>Dispatch</title>
    <link href="http://codingdoge.cn/2017/08/02/title:%20Dispatch/"/>
    <id>http://codingdoge.cn/2017/08/02/title: Dispatch/</id>
    <published>2017-08-02T12:01:00.000Z</published>
    <updated>2018-01-13T04:59:21.648Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>Execute code concurrently on multicore hardware by submitting work to dispatch queues managed by the system.</p></blockquote><p>åœ¨å¤šæ ¸ç¡¬ä»¶ä¸Šï¼Œé€šè¿‡æäº¤ä»»åŠ¡åˆ°ç”±è¿™ä¸ªç³»ç»Ÿç®¡ç†çš„æ´¾é£é˜Ÿåˆ—ä¸Šï¼Œå¹¶å‘çš„æ‰§è¡Œä»£ç ã€‚</p><p>ä¸€ç§æŠŠä¿è¯å›è°ƒä¼šåœ¨ä¸»çº¿ç¨‹æ‰§è¡Œçš„æ–¹æ³•:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">#ifndef dispatch_main_async_safe</div><div class="line">#define dispatch_main_async_safe(block)\</div><div class="line">    if (strcmp(dispatch_queue_get_label(DISPATCH_CURRENT_QUEUE_LABEL), dispatch_queue_get_label(dispatch_get_main_queue())) == 0) &#123;\</div><div class="line">    block();\</div><div class="line">    &#125; else &#123;\</div><div class="line">    dispatch_async(dispatch_get_main_queue(), block);\</div><div class="line">    &#125;</div><div class="line">#endif</div></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">dispatch_queue_t queue = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0);</div><div class="line">dispatch_group_t group = dispatch_group_create();</div><div class="line">for(id obj in array)</div><div class="line">    dispatch_group_async(group, queue, ^&#123;</div><div class="line">        [self doSomethingIntensiveWith:obj];</div><div class="line">    &#125;);</div><div class="line">dispatch_group_wait(group, DISPATCH_TIME_FOREVER);</div><div class="line">dispatch_release(group);</div><div class="line"> </div><div class="line">[self doSomethingWith:array];</div></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">dispatch_queue_t queue = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0);</div><div class="line">dispatch_group_t group = dispatch_group_create();</div><div class="line">for(id obj in array)</div><div class="line">    dispatch_group_async(group, queue, ^&#123;</div><div class="line">        [self doSomethingIntensiveWith:obj];</div><div class="line">    &#125;);</div><div class="line">dispatch_group_notify(group, queue, ^&#123;</div><div class="line">    [self doSomethingWith:array];</div><div class="line">&#125;);</div><div class="line">dispatch_release(group);</div></pre></td></tr></table></figure><h3 id="dispatch-barrier-syncå’Œdispatch-barrier-async"><a href="#dispatch-barrier-syncå’Œdispatch-barrier-async" class="headerlink" title="dispatch_barrier_syncå’Œdispatch_barrier_async"></a>dispatch_barrier_syncå’Œdispatch_barrier_async</h3><table><thead><tr><th>common</th><th>different</th></tr></thead><tbody><tr><td>ç­‰å¾…åœ¨å®ƒå‰é¢æ’å…¥é˜Ÿåˆ—çš„ä»»åŠ¡å…ˆæ‰§è¡Œå®Œ</td><td>dispatch_barrier_syncå°†è‡ªå·±çš„ä»»åŠ¡æ’å…¥åˆ°é˜Ÿåˆ—çš„æ—¶å€™ï¼Œéœ€è¦ç­‰å¾…è‡ªå·±çš„ä»»åŠ¡ç»“æŸä¹‹åæ‰ä¼šç»§ç»­æ’å…¥è¢«å†™åœ¨å®ƒåé¢çš„ä»»åŠ¡ï¼Œç„¶åæ‰§è¡Œå®ƒä»¬</td></tr><tr><td>ç­‰å¾…ä»–ä»¬è‡ªå·±çš„ä»»åŠ¡æ‰§è¡Œå®Œå†æ‰§è¡Œåé¢çš„ä»»åŠ¡</td><td>dispatch_barrier_asyncå°†è‡ªå·±çš„ä»»åŠ¡æ’å…¥åˆ°é˜Ÿåˆ—ä¹‹åï¼Œä¸ä¼šç­‰å¾…è‡ªå·±çš„ä»»åŠ¡ç»“æŸï¼Œå®ƒä¼šç»§ç»­æŠŠåé¢çš„ä»»åŠ¡æ’å…¥åˆ°é˜Ÿåˆ—ï¼Œç„¶åç­‰å¾…è‡ªå·±çš„ä»»åŠ¡ç»“æŸåæ‰æ‰§è¡Œåé¢ä»»åŠ¡</td></tr></tbody></table><blockquote><p>å‚è€ƒ:<br><a href="http://www.dreamingwish.com/article/grand-central-dispatch-basic-1.html" target="_blank" rel="noopener">GCDå…¥é—¨ï¼ˆä¸€ï¼‰: åŸºæœ¬æ¦‚å¿µå’ŒDispatch Queue</a><br><a href="https://bestswifter.com/deep-gcd/" target="_blank" rel="noopener">æ·±å…¥ç†è§£GCD</a><br><a href="https://objccn.io/issue-2-3/" target="_blank" rel="noopener">åº•å±‚å¹¶å‘ API</a><br><a href="http://blog.jimmyis.in/dispatch_once/" target="_blank" rel="noopener">GCD ä¸­ dispatch_once çš„æ€§èƒ½ä¸å®ç°</a><br><a href="http://www.devtalking.com/articles/read-concurrency-programming-guide-1/" target="_blank" rel="noopener">è¯» Concurrency Programming Guide ç¬”è®°ï¼ˆä¸€ï¼‰</a><br><a href="https://github.com/ming1016/study/wiki/iOSå¹¶å‘ç¼–ç¨‹" target="_blank" rel="noopener">iOSå¹¶å‘ç¼–ç¨‹</a></p></blockquote>]]></content>
    
    <summary type="html">
    
      
      
        &lt;blockquote&gt;
&lt;p&gt;Execute code concurrently on multicore hardware by submitting work to dispatch queues managed by the system.&lt;/p&gt;
&lt;/blockquot
      
    
    </summary>
    
      <category term="iOS" scheme="http://codingdoge.cn/categories/iOS/"/>
    
    
      <category term="å¤šçº¿ç¨‹" scheme="http://codingdoge.cn/tags/%E5%A4%9A%E7%BA%BF%E7%A8%8B/"/>
    
  </entry>
  
  <entry>
    <title>å‰‘æŒ‡Offer â€”â€” æœ€å°çš„kä¸ªæ•°</title>
    <link href="http://codingdoge.cn/2017/08/01/title:%20%E5%89%91%E6%8C%87Offer%20%E2%80%94%E2%80%94%20%E6%9C%80%E5%B0%8F%E7%9A%84k%E4%B8%AA%E6%95%B0/"/>
    <id>http://codingdoge.cn/2017/08/01/title: å‰‘æŒ‡Offer â€”â€” æœ€å°çš„kä¸ªæ•°/</id>
    <published>2017-08-01T02:20:00.000Z</published>
    <updated>2018-01-14T16:32:50.507Z</updated>
    
    <content type="html"><![CDATA[<hr><h2 id="é¢˜ç›®æè¿°"><a href="#é¢˜ç›®æè¿°" class="headerlink" title="é¢˜ç›®æè¿°"></a>é¢˜ç›®æè¿°</h2><p>è¾“å…¥nä¸ªæ•´æ•°ï¼Œæ‰¾å‡ºå…¶ä¸­æœ€å°çš„Kä¸ªæ•°ã€‚ä¾‹å¦‚è¾“å…¥4,5,1,6,2,7,3,8è¿™8ä¸ªæ•°å­—ï¼Œåˆ™æœ€å°çš„4ä¸ªæ•°å­—æ˜¯1,2,3,4ã€‚(å¾ˆå…¸å‹çš„é¢˜ç›®äº†)</p><h2 id="è§£é¢˜æ€è·¯"><a href="#è§£é¢˜æ€è·¯" class="headerlink" title="è§£é¢˜æ€è·¯"></a>è§£é¢˜æ€è·¯</h2><ol><li>æ’å…¥æˆ–è€…å†’æ³¡æ’åºï¼Œä¼˜åŒ–ç‚¹åœ¨è®°å½•å·²æ’å¥½çš„ä¸ªæ•°(O(n*k))</li><li>æœ€å°å †(O(nlogk))</li><li>å¿«æ’æ€æƒ³(O(n))</li></ol><h3 id="way1"><a href="#way1" class="headerlink" title="way1"></a>way1</h3><p>ä¸ä¸Šä»£ç äº†ã€‚</p><h3 id="way2"><a href="#way2" class="headerlink" title="way2"></a>way2</h3><p>ä¸Šä¸ªå»ºå †çš„ç®—æ³•ï¼Œé€šç”¨ã€è§£è€¦ã€æ˜“æµ‹è¯•ğŸ˜‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div></pre></td><td class="code"><pre><div class="line">void HeapAdjust(int H[],int s, int length)  </div><div class="line">&#123;  </div><div class="line">    int tmp  = H[s];  </div><div class="line">    int child = 2*s+1; //å·¦å­©å­ç»“ç‚¹çš„ä½ç½®ã€‚(i+1 ä¸ºå½“å‰è°ƒæ•´ç»“ç‚¹çš„å³å­©å­ç»“ç‚¹çš„ä½ç½®)  </div><div class="line">    while (child &lt; length) &#123;  </div><div class="line">        if(child+1 &lt;length &amp;&amp; H[child]&lt;H[child+1]) &#123; // å¦‚æœå³å­©å­å¤§äºå·¦å­©å­(æ‰¾åˆ°æ¯”å½“å‰å¾…è°ƒæ•´ç»“ç‚¹å¤§çš„å­©å­ç»“ç‚¹)  </div><div class="line">            ++child ;  </div><div class="line">        &#125;  </div><div class="line">        if(H[s]&lt;H[child]) &#123;  // å¦‚æœè¾ƒå¤§çš„å­ç»“ç‚¹å¤§äºçˆ¶ç»“ç‚¹  </div><div class="line">            H[s] = H[child]; // é‚£ä¹ˆæŠŠè¾ƒå¤§çš„å­ç»“ç‚¹å¾€ä¸Šç§»åŠ¨ï¼Œæ›¿æ¢å®ƒçš„çˆ¶ç»“ç‚¹  </div><div class="line">            s = child;       // é‡æ–°è®¾ç½®s ,å³å¾…è°ƒæ•´çš„ä¸‹ä¸€ä¸ªç»“ç‚¹çš„ä½ç½®  </div><div class="line">            child = 2*s+1;  </div><div class="line">        &#125;  else &#123;            // å¦‚æœå½“å‰å¾…è°ƒæ•´ç»“ç‚¹å¤§äºå®ƒçš„å·¦å³å­©å­ï¼Œåˆ™ä¸éœ€è¦è°ƒæ•´ï¼Œç›´æ¥é€€å‡º  </div><div class="line">             break;  </div><div class="line">        &#125;  </div><div class="line">        H[s] = tmp;         // å½“å‰å¾…è°ƒæ•´çš„ç»“ç‚¹æ”¾åˆ°æ¯”å…¶å¤§çš„å­©å­ç»“ç‚¹ä½ç½®ä¸Š  </div><div class="line">    &#125;  </div><div class="line">    print(H,length);  </div><div class="line">&#125;  </div><div class="line"></div><div class="line">/** </div><div class="line"> * åˆå§‹å †è¿›è¡Œè°ƒæ•´ </div><div class="line"> * å°†H[0..length-1]å»ºæˆå † </div><div class="line"> * è°ƒæ•´å®Œä¹‹åç¬¬ä¸€ä¸ªå…ƒç´ æ˜¯åºåˆ—çš„æœ€å°çš„å…ƒç´  </div><div class="line"> */  </div><div class="line">void BuildingHeap(int H[], int length)  </div><div class="line">&#123;   </div><div class="line">    //æœ€åä¸€ä¸ªæœ‰å­©å­çš„èŠ‚ç‚¹çš„ä½ç½® i=  (length -1) / 2  </div><div class="line">    for (int i = (length -1) / 2 ; i &gt;= 0; i--)  </div><div class="line">    &#123;</div><div class="line">    cout &lt;&lt; &quot;i: &quot; &lt;&lt; i &lt;&lt; endl;</div><div class="line">    HeapAdjust(H,i,length);</div><div class="line">    &#125;</div><div class="line">&#125;  </div><div class="line">/** </div><div class="line"> * å †æ’åºç®—æ³• </div><div class="line"> */  </div><div class="line">void HeapSort(int H[],int length)  </div><div class="line">&#123;  </div><div class="line">    //åˆå§‹å †  </div><div class="line">    BuildingHeap(H, length);  </div><div class="line">    //ä»æœ€åä¸€ä¸ªå…ƒç´ å¼€å§‹å¯¹åºåˆ—è¿›è¡Œè°ƒæ•´  </div><div class="line">    for (int i = length - 1; i &gt; 0; --i)  </div><div class="line">    &#123;  </div><div class="line">        //äº¤æ¢å †é¡¶å…ƒç´ H[0]å’Œå †ä¸­æœ€åä¸€ä¸ªå…ƒç´   </div><div class="line">        int temp = H[i]; H[i] = H[0]; H[0] = temp;  </div><div class="line">        //æ¯æ¬¡äº¤æ¢å †é¡¶å…ƒç´ å’Œå †ä¸­æœ€åä¸€ä¸ªå…ƒç´ ä¹‹åï¼Œéƒ½è¦å¯¹å †è¿›è¡Œè°ƒæ•´  </div><div class="line">        HeapAdjust(H,0,i);  </div><div class="line">  &#125;  </div><div class="line">&#125;</div></pre></td></tr></table></figure><h3 id="way3"><a href="#way3" class="headerlink" title="way3"></a>way3</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div></pre></td><td class="code"><pre><div class="line">int Partition(vector&lt;int&gt; &amp;input, int begin, int end)</div><div class="line">&#123;</div><div class="line">trueint first = begin;</div><div class="line">trueint last = end;</div><div class="line">trueint pivot = input[first];</div><div class="line">truewhile (first &lt; last)</div><div class="line">true&#123;</div><div class="line">truetruewhile (first &lt; last &amp;&amp; input[last] &gt;= pivot) last--;</div><div class="line">truetrueinput[first] = input[last];</div><div class="line">truetruewhile (first &lt; last &amp;&amp; input[first] &lt;= pivot) first++;</div><div class="line">truetrueinput[last] = input[first];</div><div class="line">true&#125;</div><div class="line">trueinput[first] = pivot;</div><div class="line">truereturn first;</div><div class="line">&#125;</div><div class="line">vector&lt;int&gt; GetLeastNumbers_Solution(vector&lt;int&gt; &amp;input, int k)</div><div class="line">&#123;</div><div class="line">trueint len=input.size();</div><div class="line">truevector&lt;int&gt; res;</div><div class="line">trueif(len==0||k&gt;len||k&lt;=0) return res;</div><div class="line">trueif(len==k) return input;</div><div class="line">trueint start=0;</div><div class="line">trueint end=len-1;</div><div class="line">trueint index=Partition(input,start,end);</div><div class="line">truewhile(index!=(k-1))</div><div class="line">true&#123;</div><div class="line">truetrueif(index&gt;k-1)</div><div class="line">truetrue&#123;</div><div class="line">truetruetrueend=index-1;</div><div class="line">truetruetrueindex=Partition(input,start,end);</div><div class="line">truetrue&#125;</div><div class="line">truetrueelse</div><div class="line">truetrue&#123;</div><div class="line">truetruetruestart=index+1;</div><div class="line">truetruetrueindex=Partition(input,start,end);</div><div class="line">truetrue&#125;</div><div class="line">true&#125;</div><div class="line">truefor (int i = 0; i &lt; k; i++)</div><div class="line">truetrueres.push_back(input[i]);</div><div class="line">truereturn res;</div><div class="line">&#125;</div></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;hr&gt;
&lt;h2 id=&quot;é¢˜ç›®æè¿°&quot;&gt;&lt;a href=&quot;#é¢˜ç›®æè¿°&quot; class=&quot;headerlink&quot; title=&quot;é¢˜ç›®æè¿°&quot;&gt;&lt;/a&gt;é¢˜ç›®æè¿°&lt;/h2&gt;&lt;p&gt;è¾“å…¥nä¸ªæ•´æ•°ï¼Œæ‰¾å‡ºå…¶ä¸­æœ€å°çš„Kä¸ªæ•°ã€‚ä¾‹å¦‚è¾“å…¥4,5,1,6,2,7,3,8è¿™8ä¸ªæ•°å­—ï¼Œåˆ™æœ€å°çš„4ä¸ªæ•°å­—æ˜¯1,2,3
      
    
    </summary>
    
      <category term="Algorithm" scheme="http://codingdoge.cn/categories/Algorithm/"/>
    
    
      <category term="å‰‘æŒ‡Offer" scheme="http://codingdoge.cn/tags/%E5%89%91%E6%8C%87Offer/"/>
    
  </entry>
  
  <entry>
    <title>å¹¶å‘(concurrency)å’Œå¹¶è¡Œ(parallelism)</title>
    <link href="http://codingdoge.cn/2017/07/27/title:%20%E5%B9%B6%E5%8F%91(concurrency)%E5%92%8C%E5%B9%B6%E8%A1%8C(parallelism)/"/>
    <id>http://codingdoge.cn/2017/07/27/title: å¹¶å‘(concurrency)å’Œå¹¶è¡Œ(parallelism)/</id>
    <published>2017-07-27T04:29:00.000Z</published>
    <updated>2018-01-13T14:00:58.116Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>â€œå¹¶å‘â€æŒ‡çš„æ˜¯ç¨‹åºçš„ç»“æ„ï¼Œâ€œå¹¶è¡Œâ€æŒ‡çš„æ˜¯ç¨‹åºè¿è¡Œæ—¶çš„çŠ¶æ€</p></blockquote><h2 id="å¹¶è¡Œï¼ˆparallelismï¼‰"><a href="#å¹¶è¡Œï¼ˆparallelismï¼‰" class="headerlink" title="å¹¶è¡Œï¼ˆparallelismï¼‰"></a>å¹¶è¡Œï¼ˆparallelismï¼‰</h2><p>è¿™ä¸ªæ¦‚å¿µå¾ˆå¥½ç†è§£ã€‚æ‰€è°“å¹¶è¡Œï¼Œå°±æ˜¯åŒæ—¶æ‰§è¡Œçš„æ„æ€ï¼Œæ— éœ€è¿‡åº¦è§£è¯»ã€‚åˆ¤æ–­ç¨‹åºæ˜¯å¦å¤„äºå¹¶è¡Œçš„çŠ¶æ€ï¼Œå°±çœ‹åŒä¸€æ—¶åˆ»æ˜¯å¦æœ‰è¶…è¿‡ä¸€ä¸ªâ€œå·¥ä½œå•ä½â€åœ¨è¿è¡Œå°±å¥½äº†ã€‚æ‰€ä»¥ï¼Œå•çº¿ç¨‹æ°¸è¿œæ— æ³•è¾¾åˆ°å¹¶è¡ŒçŠ¶æ€ã€‚</p><p>è¦è¾¾åˆ°å¹¶è¡ŒçŠ¶æ€ï¼Œæœ€ç®€å•çš„å°±æ˜¯åˆ©ç”¨å¤šçº¿ç¨‹å’Œå¤šè¿›ç¨‹ã€‚</p><h2 id="å¹¶å‘ï¼ˆconcurrencyï¼‰"><a href="#å¹¶å‘ï¼ˆconcurrencyï¼‰" class="headerlink" title="å¹¶å‘ï¼ˆconcurrencyï¼‰"></a>å¹¶å‘ï¼ˆconcurrencyï¼‰</h2><p>è¦ç†è§£â€œå¹¶å‘â€è¿™ä¸ªæ¦‚å¿µï¼Œå¿…é¡»å¾—æ¸…æ¥šï¼Œå¹¶å‘æŒ‡çš„æ˜¯ç¨‹åºçš„â€œç»“æ„â€ã€‚å½“æˆ‘ä»¬è¯´è¿™ä¸ªç¨‹åºæ˜¯å¹¶å‘çš„ï¼Œå®é™…ä¸Šï¼Œè¿™å¥è¯åº”å½“è¡¨è¿°æˆâ€œè¿™ä¸ªç¨‹åºé‡‡ç”¨äº†æ”¯æŒå¹¶å‘çš„è®¾è®¡â€ã€‚å¥½ï¼Œæ—¢ç„¶å¹¶å‘æŒ‡çš„æ˜¯äººä¸ºè®¾è®¡çš„ç»“æ„ï¼Œé‚£ä¹ˆæ€æ ·çš„ç¨‹åºç»“æ„æ‰å«åšæ”¯æŒå¹¶å‘çš„è®¾è®¡ï¼Ÿ</p><p><strong>æ­£ç¡®çš„å¹¶å‘è®¾è®¡çš„æ ‡å‡†æ˜¯ï¼šä½¿å¤šä¸ªæ“ä½œå¯ä»¥åœ¨é‡å çš„æ—¶é—´æ®µå†…è¿›è¡Œ(two tasks can start, run, and complete in overlapping time periods)ã€‚</strong></p><p>è¿™å¥è¯çš„é‡ç‚¹æœ‰ä¸¤ä¸ªã€‚æˆ‘ä»¬å…ˆçœ‹â€œï¼ˆæ“ä½œï¼‰åœ¨é‡å çš„æ—¶é—´æ®µå†…è¿›è¡Œâ€è¿™ä¸ªæ¦‚å¿µã€‚å®ƒæ˜¯å¦å°±æ˜¯æˆ‘ä»¬å‰é¢è¯´åˆ°çš„å¹¶è¡Œå‘¢ï¼Ÿæ˜¯ï¼Œä¹Ÿä¸æ˜¯ã€‚å¹¶è¡Œï¼Œå½“ç„¶æ˜¯åœ¨é‡å çš„æ—¶é—´æ®µå†…æ‰§è¡Œï¼Œä½†æ˜¯å¦å¤–ä¸€ç§æ‰§è¡Œæ¨¡å¼ï¼Œä¹Ÿå±äºåœ¨é‡å æ—¶é—´æ®µå†…è¿›è¡Œã€‚è¿™å°±æ˜¯<a href="https://zh.wikipedia.org/wiki/åç¨‹" target="_blank" rel="noopener">åç¨‹</a>ã€‚</p><p>ä½¿ç”¨åç¨‹æ—¶ï¼Œç¨‹åºçš„æ‰§è¡Œçœ‹èµ·æ¥å¾€å¾€æ˜¯è¿™ä¸ªæ ·å­ï¼š<br><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="http://oo8snaf4x.bkt.clouddn.com/15011301882675.jpg" alt="" title="">                </div>                <div class="image-caption"></div>            </figure></p><p>task1, task2 æ˜¯ä¸¤æ®µä¸åŒçš„ä»£ç ï¼Œæ¯”å¦‚ä¸¤ä¸ªå‡½æ•°ï¼Œå…¶ä¸­é»‘è‰²å—ä»£è¡¨æŸæ®µä»£ç æ­£åœ¨æ‰§è¡Œã€‚æ³¨æ„ï¼Œè¿™é‡Œä»å§‹è‡³ç»ˆï¼Œåœ¨ä»»ä½•ä¸€ä¸ªæ—¶é—´ç‚¹ä¸Šéƒ½åªæœ‰ä¸€æ®µä»£ç åœ¨æ‰§è¡Œï¼Œä½†æ˜¯ï¼Œç”±äº task1 å’Œ task2 åœ¨é‡å çš„æ—¶é—´æ®µå†…æ‰§è¡Œï¼Œæ‰€ä»¥è¿™æ˜¯ä¸€ä¸ªæ”¯æŒå¹¶å‘çš„è®¾è®¡ã€‚ä¸å¹¶è¡Œä¸åŒï¼Œå•æ ¸å•çº¿ç¨‹èƒ½æ”¯æŒå¹¶å‘ã€‚</p><blockquote><p><strong>Different concurrent designs enable different ways to parallelize</strong></p></blockquote>]]></content>
    
    <summary type="html">
    
      
      
        &lt;blockquote&gt;
&lt;p&gt;â€œå¹¶å‘â€æŒ‡çš„æ˜¯ç¨‹åºçš„ç»“æ„ï¼Œâ€œå¹¶è¡Œâ€æŒ‡çš„æ˜¯ç¨‹åºè¿è¡Œæ—¶çš„çŠ¶æ€&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&quot;å¹¶è¡Œï¼ˆparallelismï¼‰&quot;&gt;&lt;a href=&quot;#å¹¶è¡Œï¼ˆparallelismï¼‰&quot; class=&quot;headerlink&quot; title=
      
    
    </summary>
    
      <category term="OS" scheme="http://codingdoge.cn/categories/OS/"/>
    
    
  </entry>
  
  <entry>
    <title>iOS ä¿æŒç•Œé¢æµç•…çš„æŠ€å·§</title>
    <link href="http://codingdoge.cn/2017/07/25/title:%20iOS%20%E4%BF%9D%E6%8C%81%E7%95%8C%E9%9D%A2%E6%B5%81%E7%95%85%E7%9A%84%E6%8A%80%E5%B7%A7/"/>
    <id>http://codingdoge.cn/2017/07/25/title: iOS ä¿æŒç•Œé¢æµç•…çš„æŠ€å·§/</id>
    <published>2017-07-25T06:21:00.000Z</published>
    <updated>2018-01-14T16:35:13.663Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p><a href="http://blog.ibireme.com/2015/11/12/smooth_user_interfaces_for_ios/" target="_blank" rel="noopener">iOS ä¿æŒç•Œé¢æµç•…çš„æŠ€å·§</a></p></blockquote><h2 id="CPU-èµ„æºæ¶ˆè€—åŸå› å’Œè§£å†³æ–¹æ¡ˆ"><a href="#CPU-èµ„æºæ¶ˆè€—åŸå› å’Œè§£å†³æ–¹æ¡ˆ" class="headerlink" title="CPU èµ„æºæ¶ˆè€—åŸå› å’Œè§£å†³æ–¹æ¡ˆ"></a>CPU èµ„æºæ¶ˆè€—åŸå› å’Œè§£å†³æ–¹æ¡ˆ</h2><h3 id="å¯¹è±¡åˆ›å»º"><a href="#å¯¹è±¡åˆ›å»º" class="headerlink" title="å¯¹è±¡åˆ›å»º"></a>å¯¹è±¡åˆ›å»º</h3><p>å¯¹è±¡çš„åˆ›å»ºä¼šåˆ†é…å†…å­˜ã€è°ƒæ•´å±æ€§ã€ç”šè‡³è¿˜æœ‰è¯»å–æ–‡ä»¶ç­‰æ“ä½œï¼Œæ¯”è¾ƒæ¶ˆè€— CPU èµ„æºã€‚å°½é‡ç”¨è½»é‡çš„å¯¹è±¡ä»£æ›¿é‡é‡çš„å¯¹è±¡ï¼Œå¯ä»¥å¯¹æ€§èƒ½æœ‰æ‰€ä¼˜åŒ–ã€‚æ¯”å¦‚ CALayer æ¯” UIView è¦è½»é‡è®¸å¤šï¼Œé‚£ä¹ˆä¸éœ€è¦å“åº”è§¦æ‘¸äº‹ä»¶çš„æ§ä»¶ï¼Œç”¨ CALayer æ˜¾ç¤ºä¼šæ›´åŠ åˆé€‚ã€‚å¦‚æœå¯¹è±¡ä¸æ¶‰åŠ UI æ“ä½œï¼Œåˆ™å°½é‡æ”¾åˆ°åå°çº¿ç¨‹å»åˆ›å»ºï¼Œä½†å¯æƒœçš„æ˜¯åŒ…å«æœ‰ CALayer çš„æ§ä»¶ï¼Œéƒ½åªèƒ½åœ¨ä¸»çº¿ç¨‹åˆ›å»ºå’Œæ“ä½œã€‚é€šè¿‡ Storyboard åˆ›å»ºè§†å›¾å¯¹è±¡æ—¶ï¼Œå…¶èµ„æºæ¶ˆè€—ä¼šæ¯”ç›´æ¥é€šè¿‡ä»£ç åˆ›å»ºå¯¹è±¡è¦å¤§éå¸¸å¤šï¼Œåœ¨æ€§èƒ½æ•æ„Ÿçš„ç•Œé¢é‡Œï¼ŒStoryboard å¹¶ä¸æ˜¯ä¸€ä¸ªå¥½çš„æŠ€æœ¯é€‰æ‹©ã€‚</p><p>å°½é‡æ¨è¿Ÿå¯¹è±¡åˆ›å»ºçš„æ—¶é—´ï¼Œå¹¶æŠŠå¯¹è±¡çš„åˆ›å»ºåˆ†æ•£åˆ°å¤šä¸ªä»»åŠ¡ä¸­å»ã€‚å°½ç®¡è¿™å®ç°èµ·æ¥æ¯”è¾ƒéº»çƒ¦ï¼Œå¹¶ä¸”å¸¦æ¥çš„ä¼˜åŠ¿å¹¶ä¸å¤šï¼Œä½†å¦‚æœæœ‰èƒ½åŠ›åšï¼Œè¿˜æ˜¯è¦å°½é‡å°è¯•ä¸€ä¸‹ã€‚å¦‚æœå¯¹è±¡å¯ä»¥å¤ç”¨ï¼Œå¹¶ä¸”å¤ç”¨çš„ä»£ä»·æ¯”é‡Šæ”¾ã€åˆ›å»ºæ–°å¯¹è±¡è¦å°ï¼Œé‚£ä¹ˆè¿™ç±»å¯¹è±¡åº”å½“å°½é‡æ”¾åˆ°ä¸€ä¸ªç¼“å­˜æ± é‡Œå¤ç”¨ã€‚</p><h3 id="å¯¹è±¡è°ƒæ•´"><a href="#å¯¹è±¡è°ƒæ•´" class="headerlink" title="å¯¹è±¡è°ƒæ•´"></a>å¯¹è±¡è°ƒæ•´</h3><p>å¯¹è±¡çš„è°ƒæ•´ä¹Ÿç»å¸¸æ˜¯æ¶ˆè€— CPU èµ„æºçš„åœ°æ–¹ã€‚è¿™é‡Œç‰¹åˆ«è¯´ä¸€ä¸‹ CALayerï¼šCALayer å†…éƒ¨å¹¶æ²¡æœ‰å±æ€§ï¼Œå½“è°ƒç”¨å±æ€§æ–¹æ³•æ—¶ï¼Œå®ƒå†…éƒ¨æ˜¯é€šè¿‡è¿è¡Œæ—¶ resolveInstanceMethod ä¸ºå¯¹è±¡ä¸´æ—¶æ·»åŠ ä¸€ä¸ªæ–¹æ³•ï¼Œå¹¶æŠŠå¯¹åº”å±æ€§å€¼ä¿å­˜åˆ°å†…éƒ¨çš„ä¸€ä¸ª Dictionary é‡Œï¼ŒåŒæ—¶è¿˜ä¼šé€šçŸ¥ delegateã€åˆ›å»ºåŠ¨ç”»ç­‰ç­‰ï¼Œéå¸¸æ¶ˆè€—èµ„æºã€‚UIView çš„å…³äºæ˜¾ç¤ºç›¸å…³çš„å±æ€§ï¼ˆæ¯”å¦‚ frame/bounds/transformï¼‰ç­‰å®é™…ä¸Šéƒ½æ˜¯ CALayer å±æ€§æ˜ å°„æ¥çš„ï¼Œæ‰€ä»¥å¯¹ UIView çš„è¿™äº›å±æ€§è¿›è¡Œè°ƒæ•´æ—¶ï¼Œæ¶ˆè€—çš„èµ„æºè¦è¿œå¤§äºä¸€èˆ¬çš„å±æ€§ã€‚å¯¹æ­¤ä½ åœ¨åº”ç”¨ä¸­ï¼Œåº”è¯¥å°½é‡å‡å°‘ä¸å¿…è¦çš„å±æ€§ä¿®æ”¹ã€‚</p><p>å½“è§†å›¾å±‚æ¬¡è°ƒæ•´æ—¶ï¼ŒUIViewã€CALayer ä¹‹é—´ä¼šå‡ºç°å¾ˆå¤šæ–¹æ³•è°ƒç”¨ä¸é€šçŸ¥ï¼Œæ‰€ä»¥åœ¨ä¼˜åŒ–æ€§èƒ½æ—¶ï¼Œåº”è¯¥å°½é‡é¿å…è°ƒæ•´è§†å›¾å±‚æ¬¡ã€æ·»åŠ å’Œç§»é™¤è§†å›¾ã€‚</p><h3 id="å¯¹è±¡é”€æ¯"><a href="#å¯¹è±¡é”€æ¯" class="headerlink" title="å¯¹è±¡é”€æ¯"></a>å¯¹è±¡é”€æ¯</h3><p>å¯¹è±¡çš„é”€æ¯è™½ç„¶æ¶ˆè€—èµ„æºä¸å¤šï¼Œä½†ç´¯ç§¯èµ·æ¥ä¹Ÿæ˜¯ä¸å®¹å¿½è§†çš„ã€‚é€šå¸¸å½“å®¹å™¨ç±»æŒæœ‰å¤§é‡å¯¹è±¡æ—¶ï¼Œå…¶é”€æ¯æ—¶çš„èµ„æºæ¶ˆè€—å°±éå¸¸æ˜æ˜¾ã€‚åŒæ ·çš„ï¼Œå¦‚æœå¯¹è±¡å¯ä»¥æ”¾åˆ°åå°çº¿ç¨‹å»é‡Šæ”¾ï¼Œé‚£å°±æŒªåˆ°åå°çº¿ç¨‹å»ã€‚è¿™é‡Œæœ‰ä¸ªå° Tipï¼šæŠŠå¯¹è±¡æ•è·åˆ° block ä¸­ï¼Œç„¶åæ‰”åˆ°åå°é˜Ÿåˆ—å»éšä¾¿å‘é€ä¸ªæ¶ˆæ¯ä»¥é¿å…ç¼–è¯‘å™¨è­¦å‘Šï¼Œå°±å¯ä»¥è®©å¯¹è±¡åœ¨åå°çº¿ç¨‹é”€æ¯äº†ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">NSArray *tmp = self.array;</div><div class="line">self.array = nil;</div><div class="line">dispatch_async(queue, ^&#123;</div><div class="line">    [tmp class];</div><div class="line">&#125;);</div></pre></td></tr></table></figure><h3 id="å¸ƒå±€è®¡ç®—"><a href="#å¸ƒå±€è®¡ç®—" class="headerlink" title="å¸ƒå±€è®¡ç®—"></a>å¸ƒå±€è®¡ç®—</h3><p>è§†å›¾å¸ƒå±€çš„è®¡ç®—æ˜¯ App ä¸­æœ€ä¸ºå¸¸è§çš„æ¶ˆè€— CPU èµ„æºçš„åœ°æ–¹ã€‚å¦‚æœèƒ½åœ¨åå°çº¿ç¨‹æå‰è®¡ç®—å¥½è§†å›¾å¸ƒå±€ã€å¹¶ä¸”å¯¹è§†å›¾å¸ƒå±€è¿›è¡Œç¼“å­˜ï¼Œé‚£ä¹ˆè¿™ä¸ªåœ°æ–¹åŸºæœ¬å°±ä¸ä¼šäº§ç”Ÿæ€§èƒ½é—®é¢˜äº†ã€‚</p><p>ä¸è®ºé€šè¿‡ä½•ç§æŠ€æœ¯å¯¹è§†å›¾è¿›è¡Œå¸ƒå±€ï¼Œå…¶æœ€ç»ˆéƒ½ä¼šè½åˆ°å¯¹ UIView.frame/bounds/center ç­‰å±æ€§çš„è°ƒæ•´ä¸Šã€‚ä¸Šé¢ä¹Ÿè¯´è¿‡ï¼Œå¯¹è¿™äº›å±æ€§çš„è°ƒæ•´éå¸¸æ¶ˆè€—èµ„æºï¼Œæ‰€ä»¥å°½é‡æå‰è®¡ç®—å¥½å¸ƒå±€ï¼Œåœ¨éœ€è¦æ—¶ä¸€æ¬¡æ€§è°ƒæ•´å¥½å¯¹åº”å±æ€§ï¼Œè€Œä¸è¦å¤šæ¬¡ã€é¢‘ç¹çš„è®¡ç®—å’Œè°ƒæ•´è¿™äº›å±æ€§ã€‚</p><h3 id="Autolayout"><a href="#Autolayout" class="headerlink" title="Autolayout"></a>Autolayout</h3><p>Autolayout æ˜¯è‹¹æœæœ¬èº«æå€¡çš„æŠ€æœ¯ï¼Œåœ¨å¤§éƒ¨åˆ†æƒ…å†µä¸‹ä¹Ÿèƒ½å¾ˆå¥½çš„æå‡å¼€å‘æ•ˆç‡ï¼Œä½†æ˜¯ Autolayout å¯¹äºå¤æ‚è§†å›¾æ¥è¯´å¸¸å¸¸ä¼šäº§ç”Ÿä¸¥é‡çš„æ€§èƒ½é—®é¢˜ã€‚éšç€è§†å›¾æ•°é‡çš„å¢é•¿ï¼ŒAutolayout å¸¦æ¥çš„ CPU æ¶ˆè€—ä¼šå‘ˆæŒ‡æ•°çº§ä¸Šå‡ã€‚å…·ä½“æ•°æ®å¯ä»¥çœ‹è¿™ä¸ªæ–‡ç« ï¼š<a href="http://pilky.me/36/ã€‚" target="_blank" rel="noopener">http://pilky.me/36/ã€‚</a> å¦‚æœä½ ä¸æƒ³æ‰‹åŠ¨è°ƒæ•´ frame ç­‰å±æ€§ï¼Œä½ å¯ä»¥ç”¨ä¸€äº›å·¥å…·æ–¹æ³•æ›¿ä»£ï¼ˆæ¯”å¦‚å¸¸è§çš„ left/right/top/bottom/width/height å¿«æ·å±æ€§ï¼‰ï¼Œæˆ–è€…ä½¿ç”¨ ComponentKitã€AsyncDisplayKit ç­‰æ¡†æ¶ã€‚</p><h3 id="æ–‡æœ¬è®¡ç®—"><a href="#æ–‡æœ¬è®¡ç®—" class="headerlink" title="æ–‡æœ¬è®¡ç®—"></a>æ–‡æœ¬è®¡ç®—</h3><p>å¦‚æœä¸€ä¸ªç•Œé¢ä¸­åŒ…å«å¤§é‡æ–‡æœ¬ï¼ˆæ¯”å¦‚å¾®åšå¾®ä¿¡æœ‹å‹åœˆç­‰ï¼‰ï¼Œæ–‡æœ¬çš„å®½é«˜è®¡ç®—ä¼šå ç”¨å¾ˆå¤§ä¸€éƒ¨åˆ†èµ„æºï¼Œå¹¶ä¸”ä¸å¯é¿å…ã€‚å¦‚æœä½ å¯¹æ–‡æœ¬æ˜¾ç¤ºæ²¡æœ‰ç‰¹æ®Šè¦æ±‚ï¼Œå¯ä»¥å‚è€ƒä¸‹ UILabel å†…éƒ¨çš„å®ç°æ–¹å¼ï¼šç”¨ [NSAttributedString boundingRectWithSize:options:context:] æ¥è®¡ç®—æ–‡æœ¬å®½é«˜ï¼Œç”¨ -[NSAttributedString drawWithRect:options:context:] æ¥ç»˜åˆ¶æ–‡æœ¬ã€‚å°½ç®¡è¿™ä¸¤ä¸ªæ–¹æ³•æ€§èƒ½ä¸é”™ï¼Œä½†ä»æ—§éœ€è¦æ”¾åˆ°åå°çº¿ç¨‹è¿›è¡Œä»¥é¿å…é˜»å¡ä¸»çº¿ç¨‹ã€‚</p><p>å¦‚æœä½ ç”¨ CoreText ç»˜åˆ¶æ–‡æœ¬ï¼Œé‚£å°±å¯ä»¥å…ˆç”Ÿæˆ CoreText æ’ç‰ˆå¯¹è±¡ï¼Œç„¶åè‡ªå·±è®¡ç®—äº†ï¼Œå¹¶ä¸” CoreText å¯¹è±¡è¿˜èƒ½ä¿ç•™ä»¥ä¾›ç¨åç»˜åˆ¶ä½¿ç”¨ã€‚</p><h3 id="æ–‡æœ¬æ¸²æŸ“"><a href="#æ–‡æœ¬æ¸²æŸ“" class="headerlink" title="æ–‡æœ¬æ¸²æŸ“"></a>æ–‡æœ¬æ¸²æŸ“</h3><p>å±å¹•ä¸Šèƒ½çœ‹åˆ°çš„æ‰€æœ‰æ–‡æœ¬å†…å®¹æ§ä»¶ï¼ŒåŒ…æ‹¬ UIWebViewï¼Œåœ¨åº•å±‚éƒ½æ˜¯é€šè¿‡ CoreText æ’ç‰ˆã€ç»˜åˆ¶ä¸º Bitmap æ˜¾ç¤ºçš„ã€‚å¸¸è§çš„æ–‡æœ¬æ§ä»¶ ï¼ˆUILabelã€UITextView ç­‰ï¼‰ï¼Œå…¶æ’ç‰ˆå’Œç»˜åˆ¶éƒ½æ˜¯åœ¨ä¸»çº¿ç¨‹è¿›è¡Œçš„ï¼Œå½“æ˜¾ç¤ºå¤§é‡æ–‡æœ¬æ—¶ï¼ŒCPU çš„å‹åŠ›ä¼šéå¸¸å¤§ã€‚å¯¹æ­¤è§£å†³æ–¹æ¡ˆåªæœ‰ä¸€ä¸ªï¼Œé‚£å°±æ˜¯è‡ªå®šä¹‰æ–‡æœ¬æ§ä»¶ï¼Œç”¨ TextKit æˆ–æœ€åº•å±‚çš„ CoreText å¯¹æ–‡æœ¬å¼‚æ­¥ç»˜åˆ¶ã€‚å°½ç®¡è¿™å®ç°èµ·æ¥éå¸¸éº»çƒ¦ï¼Œä½†å…¶å¸¦æ¥çš„ä¼˜åŠ¿ä¹Ÿéå¸¸å¤§ï¼ŒCoreText å¯¹è±¡åˆ›å»ºå¥½åï¼Œèƒ½ç›´æ¥è·å–æ–‡æœ¬çš„å®½é«˜ç­‰ä¿¡æ¯ï¼Œé¿å…äº†å¤šæ¬¡è®¡ç®—ï¼ˆè°ƒæ•´ UILabel å¤§å°æ—¶ç®—ä¸€éã€UILabel ç»˜åˆ¶æ—¶å†…éƒ¨å†ç®—ä¸€éï¼‰ï¼›CoreText å¯¹è±¡å ç”¨å†…å­˜è¾ƒå°‘ï¼Œå¯ä»¥ç¼“å­˜ä¸‹æ¥ä»¥å¤‡ç¨åå¤šæ¬¡æ¸²æŸ“ã€‚</p><h3 id="å›¾ç‰‡çš„è§£ç "><a href="#å›¾ç‰‡çš„è§£ç " class="headerlink" title="å›¾ç‰‡çš„è§£ç "></a>å›¾ç‰‡çš„è§£ç </h3><p>å½“ä½ ç”¨ UIImage æˆ– CGImageSource çš„é‚£å‡ ä¸ªæ–¹æ³•åˆ›å»ºå›¾ç‰‡æ—¶ï¼Œå›¾ç‰‡æ•°æ®å¹¶ä¸ä¼šç«‹åˆ»è§£ç ã€‚å›¾ç‰‡è®¾ç½®åˆ° UIImageView æˆ–è€… CALayer.contents ä¸­å»ï¼Œå¹¶ä¸” CALayer è¢«æäº¤åˆ° GPU å‰ï¼ŒCGImage ä¸­çš„æ•°æ®æ‰ä¼šå¾—åˆ°è§£ç ã€‚è¿™ä¸€æ­¥æ˜¯å‘ç”Ÿåœ¨ä¸»çº¿ç¨‹çš„ï¼Œå¹¶ä¸”ä¸å¯é¿å…ã€‚å¦‚æœæƒ³è¦ç»•å¼€è¿™ä¸ªæœºåˆ¶ï¼Œå¸¸è§çš„åšæ³•æ˜¯åœ¨åå°çº¿ç¨‹å…ˆæŠŠå›¾ç‰‡ç»˜åˆ¶åˆ° CGBitmapContext ä¸­ï¼Œç„¶åä» Bitmap ç›´æ¥åˆ›å»ºå›¾ç‰‡ã€‚ç›®å‰å¸¸è§çš„ç½‘ç»œå›¾ç‰‡åº“éƒ½è‡ªå¸¦è¿™ä¸ªåŠŸèƒ½ã€‚</p><h3 id="å›¾åƒçš„ç»˜åˆ¶"><a href="#å›¾åƒçš„ç»˜åˆ¶" class="headerlink" title="å›¾åƒçš„ç»˜åˆ¶"></a>å›¾åƒçš„ç»˜åˆ¶</h3><p>å›¾åƒçš„ç»˜åˆ¶é€šå¸¸æ˜¯æŒ‡ç”¨é‚£äº›ä»¥ CG å¼€å¤´çš„æ–¹æ³•æŠŠå›¾åƒç»˜åˆ¶åˆ°ç”»å¸ƒä¸­ï¼Œç„¶åä»ç”»å¸ƒåˆ›å»ºå›¾ç‰‡å¹¶æ˜¾ç¤ºè¿™æ ·ä¸€ä¸ªè¿‡ç¨‹ã€‚è¿™ä¸ªæœ€å¸¸è§çš„åœ°æ–¹å°±æ˜¯ [UIView drawRect:] é‡Œé¢äº†ã€‚ç”±äº CoreGraphic æ–¹æ³•é€šå¸¸éƒ½æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œæ‰€ä»¥å›¾åƒçš„ç»˜åˆ¶å¯ä»¥å¾ˆå®¹æ˜“çš„æ”¾åˆ°åå°çº¿ç¨‹è¿›è¡Œã€‚ä¸€ä¸ªç®€å•å¼‚æ­¥ç»˜åˆ¶çš„è¿‡ç¨‹å¤§è‡´å¦‚ä¸‹ï¼ˆå®é™…æƒ…å†µä¼šæ¯”è¿™ä¸ªå¤æ‚å¾—å¤šï¼Œä½†åŸç†åŸºæœ¬ä¸€è‡´ï¼‰ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">- (void)display &#123;</div><div class="line">    dispatch_async(backgroundQueue, ^&#123;</div><div class="line">        CGContextRef ctx = CGBitmapContextCreate(...);</div><div class="line">        // draw in context...</div><div class="line">        CGImageRef img = CGBitmapContextCreateImage(ctx);</div><div class="line">        CFRelease(ctx);</div><div class="line">        dispatch_async(mainQueue, ^&#123;</div><div class="line">            layer.contents = img;</div><div class="line">        &#125;);</div><div class="line">    &#125;);</div><div class="line">&#125;</div></pre></td></tr></table></figure><h2 id="GPU-èµ„æºæ¶ˆè€—åŸå› å’Œè§£å†³æ–¹æ¡ˆ"><a href="#GPU-èµ„æºæ¶ˆè€—åŸå› å’Œè§£å†³æ–¹æ¡ˆ" class="headerlink" title="GPU èµ„æºæ¶ˆè€—åŸå› å’Œè§£å†³æ–¹æ¡ˆ"></a>GPU èµ„æºæ¶ˆè€—åŸå› å’Œè§£å†³æ–¹æ¡ˆ</h2><p>ç›¸å¯¹äº CPU æ¥è¯´ï¼ŒGPU èƒ½å¹²çš„äº‹æƒ…æ¯”è¾ƒå•ä¸€ï¼šæ¥æ”¶æäº¤çš„çº¹ç†ï¼ˆTextureï¼‰å’Œé¡¶ç‚¹æè¿°ï¼ˆä¸‰è§’å½¢ï¼‰ï¼Œåº”ç”¨å˜æ¢ï¼ˆtransformï¼‰ã€æ··åˆå¹¶æ¸²æŸ“ï¼Œç„¶åè¾“å‡ºåˆ°å±å¹•ä¸Šã€‚é€šå¸¸ä½ æ‰€èƒ½çœ‹åˆ°çš„å†…å®¹ï¼Œä¸»è¦ä¹Ÿå°±æ˜¯çº¹ç†ï¼ˆå›¾ç‰‡ï¼‰å’Œå½¢çŠ¶ï¼ˆä¸‰è§’æ¨¡æ‹Ÿçš„çŸ¢é‡å›¾å½¢ï¼‰ä¸¤ç±»ã€‚</p><h3 id="çº¹ç†çš„æ¸²æŸ“"><a href="#çº¹ç†çš„æ¸²æŸ“" class="headerlink" title="çº¹ç†çš„æ¸²æŸ“"></a>çº¹ç†çš„æ¸²æŸ“</h3><p>æ‰€æœ‰çš„ Bitmapï¼ŒåŒ…æ‹¬å›¾ç‰‡ã€æ–‡æœ¬ã€æ …æ ¼åŒ–çš„å†…å®¹ï¼Œæœ€ç»ˆéƒ½è¦ç”±å†…å­˜æäº¤åˆ°æ˜¾å­˜ï¼Œç»‘å®šä¸º GPU Textureã€‚ä¸è®ºæ˜¯æäº¤åˆ°æ˜¾å­˜çš„è¿‡ç¨‹ï¼Œè¿˜æ˜¯ GPU è°ƒæ•´å’Œæ¸²æŸ“ Texture çš„è¿‡ç¨‹ï¼Œéƒ½è¦æ¶ˆè€—ä¸å°‘ GPU èµ„æºã€‚å½“åœ¨è¾ƒçŸ­æ—¶é—´æ˜¾ç¤ºå¤§é‡å›¾ç‰‡æ—¶ï¼ˆæ¯”å¦‚ TableView å­˜åœ¨éå¸¸å¤šçš„å›¾ç‰‡å¹¶ä¸”å¿«é€Ÿæ»‘åŠ¨æ—¶ï¼‰ï¼ŒCPU å ç”¨ç‡å¾ˆä½ï¼ŒGPU å ç”¨éå¸¸é«˜ï¼Œç•Œé¢ä»ç„¶ä¼šæ‰å¸§ã€‚é¿å…è¿™ç§æƒ…å†µçš„æ–¹æ³•åªèƒ½æ˜¯å°½é‡å‡å°‘åœ¨çŸ­æ—¶é—´å†…å¤§é‡å›¾ç‰‡çš„æ˜¾ç¤ºï¼Œå°½å¯èƒ½å°†å¤šå¼ å›¾ç‰‡åˆæˆä¸ºä¸€å¼ è¿›è¡Œæ˜¾ç¤ºã€‚</p><p>å½“å›¾ç‰‡è¿‡å¤§ï¼Œè¶…è¿‡ GPU çš„æœ€å¤§çº¹ç†å°ºå¯¸æ—¶ï¼Œå›¾ç‰‡éœ€è¦å…ˆç”± CPU è¿›è¡Œé¢„å¤„ç†ï¼Œè¿™å¯¹ CPU å’Œ GPU éƒ½ä¼šå¸¦æ¥é¢å¤–çš„èµ„æºæ¶ˆè€—ã€‚ç›®å‰æ¥è¯´ï¼ŒiPhone 4S ä»¥ä¸Šæœºå‹ï¼Œçº¹ç†å°ºå¯¸ä¸Šé™éƒ½æ˜¯ 4096x4096ï¼Œæ›´è¯¦ç»†çš„èµ„æ–™å¯ä»¥çœ‹è¿™é‡Œï¼šiosres.comã€‚æ‰€ä»¥ï¼Œå°½é‡ä¸è¦è®©å›¾ç‰‡å’Œè§†å›¾çš„å¤§å°è¶…è¿‡è¿™ä¸ªå€¼ã€‚</p><h3 id="è§†å›¾çš„æ··åˆ-Composing"><a href="#è§†å›¾çš„æ··åˆ-Composing" class="headerlink" title="è§†å›¾çš„æ··åˆ (Composing)"></a>è§†å›¾çš„æ··åˆ (Composing)</h3><p>å½“å¤šä¸ªè§†å›¾ï¼ˆæˆ–è€…è¯´ CALayerï¼‰é‡å åœ¨ä¸€èµ·æ˜¾ç¤ºæ—¶ï¼ŒGPU ä¼šé¦–å…ˆæŠŠä»–ä»¬æ··åˆåˆ°ä¸€èµ·ã€‚å¦‚æœè§†å›¾ç»“æ„è¿‡äºå¤æ‚ï¼Œæ··åˆçš„è¿‡ç¨‹ä¹Ÿä¼šæ¶ˆè€—å¾ˆå¤š GPU èµ„æºã€‚ä¸ºäº†å‡è½»è¿™ç§æƒ…å†µçš„ GPU æ¶ˆè€—ï¼Œåº”ç”¨åº”å½“å°½é‡å‡å°‘è§†å›¾æ•°é‡å’Œå±‚æ¬¡ï¼Œå¹¶åœ¨ä¸é€æ˜çš„è§†å›¾é‡Œæ ‡æ˜ opaque å±æ€§ä»¥é¿å…æ— ç”¨çš„ Alpha é€šé“åˆæˆã€‚å½“ç„¶ï¼Œè¿™ä¹Ÿå¯ä»¥ç”¨ä¸Šé¢çš„æ–¹æ³•ï¼ŒæŠŠå¤šä¸ªè§†å›¾é¢„å…ˆæ¸²æŸ“ä¸ºä¸€å¼ å›¾ç‰‡æ¥æ˜¾ç¤ºã€‚</p><h3 id="å›¾å½¢çš„ç”Ÿæˆ"><a href="#å›¾å½¢çš„ç”Ÿæˆ" class="headerlink" title="å›¾å½¢çš„ç”Ÿæˆ"></a>å›¾å½¢çš„ç”Ÿæˆ</h3><p>CALayer çš„ borderã€åœ†è§’ã€é˜´å½±ã€é®ç½©ï¼ˆmaskï¼‰ï¼ŒCASharpLayer çš„çŸ¢é‡å›¾å½¢æ˜¾ç¤ºï¼Œé€šå¸¸ä¼šè§¦å‘ç¦»å±æ¸²æŸ“ï¼ˆoffscreen renderingï¼‰ï¼Œè€Œç¦»å±æ¸²æŸ“é€šå¸¸å‘ç”Ÿåœ¨ GPU ä¸­ã€‚å½“ä¸€ä¸ªåˆ—è¡¨è§†å›¾ä¸­å‡ºç°å¤§é‡åœ†è§’çš„ CALayerï¼Œå¹¶ä¸”å¿«é€Ÿæ»‘åŠ¨æ—¶ï¼Œå¯ä»¥è§‚å¯Ÿåˆ° GPU èµ„æºå·²ç»å æ»¡ï¼Œè€Œ CPU èµ„æºæ¶ˆè€—å¾ˆå°‘ã€‚è¿™æ—¶ç•Œé¢ä»ç„¶èƒ½æ­£å¸¸æ»‘åŠ¨ï¼Œä½†å¹³å‡å¸§æ•°ä¼šé™åˆ°å¾ˆä½ã€‚ä¸ºäº†é¿å…è¿™ç§æƒ…å†µï¼Œå¯ä»¥å°è¯•å¼€å¯ CALayer.shouldRasterize å±æ€§ï¼Œä½†è¿™ä¼šæŠŠåŸæœ¬ç¦»å±æ¸²æŸ“çš„æ“ä½œè½¬å«åˆ° CPU ä¸Šå»ã€‚å¯¹äºåªéœ€è¦åœ†è§’çš„æŸäº›åœºåˆï¼Œä¹Ÿå¯ä»¥ç”¨ä¸€å¼ å·²ç»ç»˜åˆ¶å¥½çš„åœ†è§’å›¾ç‰‡è¦†ç›–åˆ°åŸæœ¬è§†å›¾ä¸Šé¢æ¥æ¨¡æ‹Ÿç›¸åŒçš„è§†è§‰æ•ˆæœã€‚æœ€å½»åº•çš„è§£å†³åŠæ³•ï¼Œå°±æ˜¯æŠŠéœ€è¦æ˜¾ç¤ºçš„å›¾å½¢åœ¨åå°çº¿ç¨‹ç»˜åˆ¶ä¸ºå›¾ç‰‡ï¼Œé¿å…ä½¿ç”¨åœ†è§’ã€é˜´å½±ã€é®ç½©ç­‰å±æ€§ã€‚</p><blockquote><p>å‚è€ƒ:<br><a href="https://blog.ibireme.com/2015/11/12/smooth_user_interfaces_for_ios/" target="_blank" rel="noopener">iOS ä¿æŒç•Œé¢æµç•…çš„æŠ€å·§</a></p></blockquote>]]></content>
    
    <summary type="html">
    
      
      
        &lt;blockquote&gt;
&lt;p&gt;&lt;a href=&quot;http://blog.ibireme.com/2015/11/12/smooth_user_interfaces_for_ios/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;iOS ä¿æŒç•Œé¢æµç•…çš„æŠ€å·§&lt;/a
      
    
    </summary>
    
      <category term="iOS" scheme="http://codingdoge.cn/categories/iOS/"/>
    
    
      <category term="UI" scheme="http://codingdoge.cn/tags/UI/"/>
    
  </entry>
  
  <entry>
    <title>å‰‘æŒ‡Offer â€”â€” æ»‘åŠ¨çª—å£çš„æœ€å¤§å€¼</title>
    <link href="http://codingdoge.cn/2017/07/25/title:%20%E5%89%91%E6%8C%87Offer%20%E2%80%94%E2%80%94%20%E6%BB%91%E5%8A%A8%E7%AA%97%E5%8F%A3%E7%9A%84%E6%9C%80%E5%A4%A7%E5%80%BC/"/>
    <id>http://codingdoge.cn/2017/07/25/title: å‰‘æŒ‡Offer â€”â€” æ»‘åŠ¨çª—å£çš„æœ€å¤§å€¼/</id>
    <published>2017-07-25T02:43:00.000Z</published>
    <updated>2018-01-14T16:38:57.866Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>é¢˜ç›®æ¥æº:<strong><a href="https://www.nowcoder.com/practice/1624bc35a45c42c0bc17d17fa0cba788?tpId=13&amp;tqId=11217&amp;tPage=4&amp;rp=4&amp;ru=/ta/coding-interviews&amp;qru=/ta/coding-interviews/question-ranking" target="_blank" rel="noopener">æ»‘åŠ¨çª—å£çš„æœ€å¤§å€¼</a></strong></p></blockquote><hr><h2 id="é¢˜ç›®æè¿°"><a href="#é¢˜ç›®æè¿°" class="headerlink" title="é¢˜ç›®æè¿°"></a>é¢˜ç›®æè¿°</h2><p>ç»™å®šä¸€ä¸ªæ•°ç»„å’Œæ»‘åŠ¨çª—å£çš„å¤§å°ï¼Œæ‰¾å‡ºæ‰€æœ‰æ»‘åŠ¨çª—å£é‡Œæ•°å€¼çš„æœ€å¤§å€¼ã€‚ä¾‹å¦‚ï¼Œå¦‚æœè¾“å…¥æ•°ç»„<code>{2,3,4,2,6,2,5,1}</code>åŠæ»‘åŠ¨çª—å£çš„å¤§å°3ï¼Œé‚£ä¹ˆä¸€å…±å­˜åœ¨6ä¸ªæ»‘åŠ¨çª—å£ï¼Œä»–ä»¬çš„æœ€å¤§å€¼åˆ†åˆ«ä¸º<code>{4,4,6,6,6,5}</code>ï¼› é’ˆå¯¹æ•°ç»„<code>{2,3,4,2,6,2,5,1}</code>çš„æ»‘åŠ¨çª—å£æœ‰ä»¥ä¸‹6ä¸ªï¼š <code>{[2,3,4],2,6,2,5,1}</code>ï¼Œ <code>{2,[3,4,2],6,2,5,1}</code>ï¼Œ <code>{2,3,[4,2,6],2,5,1}</code>ï¼Œ <code>{2,3,4,[2,6,2],5,1}</code>ï¼Œ <code>{2,3,4,2,[6,2,5],1}</code>ï¼Œ <code>{2,3,4,2,6,[2,5,1]}</code>ã€‚</p><h2 id="è§£é¢˜æ€è·¯"><a href="#è§£é¢˜æ€è·¯" class="headerlink" title="è§£é¢˜æ€è·¯"></a>è§£é¢˜æ€è·¯</h2><p>ç”¨ä¸€ä¸ªåŒç«¯é˜Ÿåˆ—ç»´æŠ¤å½“å‰æ»‘åŠ¨çª—å£çš„çŠ¶æ€ï¼Œé˜Ÿé¦–æ˜¯å½“å‰çª—å£æœ€å¤§å€¼çš„ä¸‹æ ‡ï¼Œå½“çª—å£æ»‘åŠ¨è¿›å…¥ä¸€ä¸ªæ–°å€¼kæ—¶ï¼Œkä»é˜Ÿå°¾ä¾æ¬¡å‘å‰æ¯”è¾ƒï¼Œæ¯”kå°çš„å…¨éƒ¨å‡ºé˜Ÿï¼Œä¿éšœäº†kçš„æƒé‡åº”æœ‰çš„ä½ç½®</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line">vector&lt;int&gt; maxInWindows(const vector&lt;int&gt; &amp;num, unsigned int size) &#123;</div><div class="line">truevector&lt;int&gt; ans;</div><div class="line">truedeque&lt;int&gt; q;</div><div class="line">trueif (num.size() &lt; size || size == 0) </div><div class="line">true   return ans;</div><div class="line">truefor (int i = 0; i &lt; size; i++) &#123;</div><div class="line">true   while(!q.empty() &amp;&amp; num[i] &gt; num[q.back()])</div><div class="line">true   q.pop_back();</div><div class="line">true   q.push_back(i);</div><div class="line">true&#125;</div><div class="line">truefor (int i = size; i &lt; num.size(); i++) &#123;</div><div class="line">true   ans.push_back(num[q.front()]);</div><div class="line">true   while (!q.empty() &amp;&amp; num[i] &gt;= num[q.back()])</div><div class="line">true       q.pop_back();</div><div class="line">true   while (!q.empty() &amp;&amp; q.front() &lt;= i-size)</div><div class="line">true       q.pop_front();</div><div class="line">true   q.push_back(i);</div><div class="line">true&#125;</div><div class="line">trueans.push_back(num[q.front()]);</div><div class="line">truereturn ans;</div><div class="line">&#125;</div></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;blockquote&gt;
&lt;p&gt;é¢˜ç›®æ¥æº:&lt;strong&gt;&lt;a href=&quot;https://www.nowcoder.com/practice/1624bc35a45c42c0bc17d17fa0cba788?tpId=13&amp;amp;tqId=11217&amp;amp;tPage=4&amp;
      
    
    </summary>
    
      <category term="Algorithm" scheme="http://codingdoge.cn/categories/Algorithm/"/>
    
    
      <category term="å‰‘æŒ‡Offer" scheme="http://codingdoge.cn/tags/%E5%89%91%E6%8C%87Offer/"/>
    
  </entry>
  
  <entry>
    <title>Remove Duplicates from Sorted Array</title>
    <link href="http://codingdoge.cn/2017/07/23/title:%20Remove%20Duplicates%20from%20Sorted%20Array%20%20/"/>
    <id>http://codingdoge.cn/2017/07/23/title: Remove Duplicates from Sorted Array  /</id>
    <published>2017-07-23T15:56:00.000Z</published>
    <updated>2018-01-14T16:41:30.178Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>é¢˜ç›®æ¥æºLeetCode: <strong><a href="https://leetcode.com/problems/remove-duplicates-from-sorted-array/" target="_blank" rel="noopener">LeetCode OJ</a></strong>  </p></blockquote><hr><h2 id="é¢˜ç›®æè¿°"><a href="#é¢˜ç›®æè¿°" class="headerlink" title="é¢˜ç›®æè¿°"></a>é¢˜ç›®æè¿°</h2><p>Given a sorted array, remove the duplicates in place such that each element appear only once and return the new length.<br>Do not allocate extra space for another array, you must do this in place with constant memory.<br>For example,<br>Given input array nums = [1,1,2],<br>Your function should return length = 2, with the first two elements of nums being 1 and 2 respectively. It doesnâ€™t matter what you leave beyond the new length.  </p><h2 id="é¢˜ç›®è§£é‡Š"><a href="#é¢˜ç›®è§£é‡Š" class="headerlink" title="é¢˜ç›®è§£é‡Š"></a>é¢˜ç›®è§£é‡Š</h2><p>ç»™å‡ºä¸€ä¸ªsorted array(æ„æ€æ˜¯æŒ‡å·²ç»æ’å¥½åºäº†?)ï¼Œå¤„ç†åæ•°ç»„é‡Œæ¯ä¸€ä¸ªå…ƒç´ åªèƒ½å‡ºç°ä¸€æ¬¡ï¼Œè¿”å›å¤„ç†åçš„æ•°ç»„é•¿åº¦ã€‚<br>ä¸èƒ½ä½¿ç”¨é¢å¤–çš„æ•°ç»„ç©ºé—´ï¼Œåªèƒ½ç”¨å·²ç»ç»™å‡ºçš„ç¡®å®šçš„å†…å­˜ç©ºé—´ã€‚  </p><h2 id="åˆ†æ"><a href="#åˆ†æ" class="headerlink" title="åˆ†æ"></a>åˆ†æ</h2><p>å› ä¸ºä¸å¤ªæ‡‚sorted arrayå…·ä½“æŒ‡çš„ä»€ä¹ˆï¼Œç¬¬ä¸€æ¬¡åšçš„æ—¶å€™ä»¥ä¸ºæ•°ç»„æ˜¯éšæœºçš„ï¼Œç›¸åŒå…ƒç´ å‡ºç°çš„ä½ç½®æ˜¯éšæœºçš„ï¼Œç„¶åé¢˜ç›®ä¹Ÿæ²¡ç»™å‡ºlimit timeï¼Œéšæ‰‹å°±å†™äº†ä¸€ä¸ªO(n^3)  </p><figure class="highlight maxima"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">for</span>(int i = <span class="number">0</span>; i &lt; <span class="built_in">num</span>; i++)&#123;  </div><div class="line">true<span class="keyword">for</span>(int j = i+<span class="number">1</span>; j &lt; <span class="built_in">num</span>; j++)&#123;  </div><div class="line">truetrue<span class="keyword">if</span>(<span class="built_in">array</span>[i] == <span class="built_in">array</span>[j])&#123;  </div><div class="line"> <span class="keyword">for</span>(int k = j; k &lt; <span class="built_in">num</span>-<span class="number">1</span>; k++)  </div><div class="line"> <span class="built_in">array</span>[k] = <span class="built_in">array</span>[k+<span class="number">1</span>];  </div><div class="line"> <span class="built_in">num</span>--;  </div><div class="line"> j--;  </div><div class="line"> &#125;  </div><div class="line"> &#125;  </div><div class="line">&#125;</div></pre></td></tr></table></figure><p>è‡ªç„¶æ˜¯Täº†ã€‚ç„¶åå°±æŠŠsorted arrayå½“åšå·²ç»æ’å¥½åºçš„æ•°ç»„ï¼Œé‚£å°±å®¹æ˜“å¤šäº†ï¼Œç®—æ³•ä¹Ÿéƒ½æ˜¯O(1)ï¼Œä¸€çœ‹ä»£ç å°±æ˜ç™½ï¼Œæ°´é¢˜ï¼Œç›´æ¥ä¸Šä»£ç ã€‚  </p><h3 id="way1"><a href="#way1" class="headerlink" title="way1"></a>way1</h3><figure class="highlight axapta"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">if</span> (nums.empty()) <span class="keyword">return</span> <span class="number">0</span>;  </div><div class="line">   <span class="keyword">int</span> <span class="keyword">index</span> = <span class="number">0</span>;  </div><div class="line">   <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; nums.size(); i++) &#123;  </div><div class="line">      <span class="keyword">if</span> (nums[<span class="keyword">index</span>] != nums[i])  </div><div class="line">         nums[++<span class="keyword">index</span>] = nums[i];  </div><div class="line"> &#125;  </div><div class="line"><span class="keyword">return</span> <span class="keyword">index</span> + <span class="number">1</span>;</div></pre></td></tr></table></figure><h3 id="way2-STL"><a href="#way2-STL" class="headerlink" title="way2 STL"></a>way2 STL</h3><figure class="highlight lisp"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">return distance(<span class="name">nums</span>.begin(), unique(<span class="name">nums</span>.begin(), nums.end()))<span class="comment">;</span></div></pre></td></tr></table></figure><ul><li><p>std::distance<br>template<class inputiterator=""><br>typename iterator_traits<inputiterator>::difference_type<br>  distance (InputIterator first, InputIterator last);<br>Return distance between iterators<br>Calculates the number of elements between first and last.<br><a href="http://www.cplusplus.com/reference/iterator/distance/" target="_blank" rel="noopener">c++ reference</a>  </inputiterator></class></p></li><li><p>std::unique<br>equality (1)<br>template <class forwarditerator=""><br>ForwardIterator unique (ForwardIterator first, ForwardIterator last);<br>predicate (2)<br>template <class forwarditerator,="" class="" binarypredicate=""><br>ForwardIterator unique (ForwardIterator first, ForwardIterator last,</class></class></p><pre><code>BinaryPredicate pred);  </code></pre><p>Remove consecutive duplicates in range<br>Removes all but the first element from every consecutive group of equivalent elements in the range [first,last).<br><a href="http://www.cplusplus.com/reference/algorithm/unique/?kw=unique" target="_blank" rel="noopener">c++ reference</a>  </p></li></ul><h2 id="ç›¸å…³é¢˜ç›®"><a href="#ç›¸å…³é¢˜ç›®" class="headerlink" title="ç›¸å…³é¢˜ç›®"></a>ç›¸å…³é¢˜ç›®</h2><p><a href="https://leetcode.com/problems/remove-duplicates-from-sorted-array-ii/" target="_blank" rel="noopener">RemoveDuplicatesfromSortedArrayII</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;blockquote&gt;
&lt;p&gt;é¢˜ç›®æ¥æºLeetCode: &lt;strong&gt;&lt;a href=&quot;https://leetcode.com/problems/remove-duplicates-from-sorted-array/&quot; target=&quot;_blank&quot; rel=&quot;noop
      
    
    </summary>
    
      <category term="Algorithm" scheme="http://codingdoge.cn/categories/Algorithm/"/>
    
    
      <category term="LeetCode" scheme="http://codingdoge.cn/tags/LeetCode/"/>
    
  </entry>
  
  <entry>
    <title>å¸¸è§æ’åºç®—æ³•æ€»ç»“</title>
    <link href="http://codingdoge.cn/2017/07/23/title:%20%E5%B8%B8%E8%A7%81%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95%E6%80%BB%E7%BB%93%20%20/"/>
    <id>http://codingdoge.cn/2017/07/23/title: å¸¸è§æ’åºç®—æ³•æ€»ç»“  /</id>
    <published>2017-07-23T15:56:00.000Z</published>
    <updated>2018-01-14T16:45:17.006Z</updated>
    
    <content type="html"><![CDATA[<p>æ’åºç®—æ³•ä¸€èˆ¬åˆ†ä¸ºï¼š</p><ol><li>å†…éƒ¨æ’åº(In-place sort)<br> ä¸å ç”¨é¢å¤–å†…å­˜æˆ–è€…å ç”¨å¸¸æ•°å†…å­˜ï¼Œå¦‚ï¼šæ’å…¥æ’åºã€é€‰æ‹©æ’åºã€å†’æ³¡æ’åºã€å †æ’åºã€å¿«é€Ÿæ’åºã€‚</li><li>å¤–éƒ¨æ’åº(Out-place sort)<br> å› ä¸ºæ’åºæ•°æ®å¤§ï¼Œå¯ç”¨å†…å­˜ä¸€æ¬¡ä¸èƒ½å®¹çº³æ‰€æœ‰æ’åºè®°å½•ï¼Œæ’åºè¿‡ç¨‹ä¸­éœ€è¦è®¿é—®å¤–å­˜ï¼Œå¦‚ï¼šå½’å¹¶æ’åºã€è®¡æ•°æ’åºã€åŸºæ•°æ’åºã€æ¡¶æ’åºã€‚</li></ol><p>ä¹Ÿåˆ†ä¸ºï¼š</p><ol><li>ç¨³å®šçš„æ’åº(stable sort)<br> æ’å…¥æ’åºã€å†’æ³¡æ’åºã€å½’å¹¶æ’åºã€è®¡æ•°æ’åºã€åŸºæ•°æ’åºã€æ¡¶æ’åºã€‚</li><li>ä¸ç¨³å®šçš„æ’åº(unstable sort)<br> é€‰æ‹©æ’åºã€å¿«é€Ÿæ’åºã€å †æ’åºã€‚<blockquote><p>ç®—æ³•çš„ç¨³å®šæ€§ï¼šå‡å®šåœ¨å¾…æ’åºçš„è®°å½•åºåˆ—ä¸­ï¼Œå­˜åœ¨å¤šä¸ªå…·æœ‰ç›¸åŒçš„å…³é”®å­—çš„è®°å½•ï¼Œè‹¥ç»è¿‡æ’åºï¼Œè¿™äº›è®°å½•çš„ç›¸å¯¹æ¬¡åºä¿æŒä¸å˜ï¼Œå³åœ¨åŸåºåˆ—ä¸­ï¼Œri=rjï¼Œä¸”riåœ¨rjä¹‹å‰ï¼Œè€Œåœ¨æ’åºåçš„åºåˆ—ä¸­ï¼Œriä»åœ¨rjä¹‹å‰ï¼Œåˆ™ç§°è¿™ç§æ’åºç®—æ³•æ˜¯ç¨³å®šçš„ï¼›å¦åˆ™ç§°ä¸ºä¸ç¨³å®šçš„ã€‚  </p><hr><p>ä¸ç¨³å®šç®—æ³•çš„æ”¹è¿›ï¼šåªéœ€è¦åœ¨æ¯ä¸ªè¾“å…¥å…ƒç´ åŠ ä¸€ä¸ªindexï¼Œè¡¨ç¤ºåˆå§‹æ—¶çš„æ•°ç»„ç´¢å¼•ï¼Œå½“ä¸ç¨³å®šçš„ç®—æ³•æ’å¥½åºåï¼Œå¯¹äºç›¸åŒçš„å…ƒç´ å¯¹indexæ’åºå³å¯ã€‚</p></blockquote></li></ol><h2 id="æ’å…¥æ’åº"><a href="#æ’å…¥æ’åº" class="headerlink" title="æ’å…¥æ’åº"></a>æ’å…¥æ’åº</h2><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="http://oo8snaf4x.bkt.clouddn.com/14918530488431.gif?imageView2/0/q/100" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><p>æœ€ä¼˜å¤æ‚åº¦ï¼šå½“è¾“å…¥æ•°ç»„å°±æ˜¯æ’å¥½åºçš„æ—¶å€™ï¼Œå¤æ‚åº¦ä¸ºO(n)ï¼Œè€Œå¿«é€Ÿæ’åºåœ¨è¿™ç§æƒ…å†µä¸‹ä¼šäº§ç”ŸO(n^2)çš„å¤æ‚åº¦ã€‚<br>æœ€å·®å¤æ‚åº¦ï¼šå½“è¾“å…¥æ•°ç»„ä¸ºå€’åºæ—¶ï¼Œå¤æ‚åº¦ä¸ºO(n^2)ã€‚</p><blockquote><p>æ’å…¥æ’åºæ¯”è¾ƒé€‚åˆç”¨äºâ€œå°‘é‡å…ƒç´ çš„æ•°ç»„â€ã€‚æ’å…¥æ’åºæ¯”è¾ƒé€‚åˆç”¨äºâ€œå°‘é‡å…ƒç´ çš„æ•°ç»„â€ã€‚</p></blockquote><h3 id="1-ç›´æ¥æ’å…¥æ’åºï¼ˆStraight-Insertion-Sortï¼‰"><a href="#1-ç›´æ¥æ’å…¥æ’åºï¼ˆStraight-Insertion-Sortï¼‰" class="headerlink" title="1.ç›´æ¥æ’å…¥æ’åºï¼ˆStraight Insertion Sortï¼‰"></a>1.ç›´æ¥æ’å…¥æ’åºï¼ˆStraight Insertion Sortï¼‰</h3><hr><p>å·¥ä½œåŸç†æ˜¯é€šè¿‡æ„å»ºæœ‰åºåºåˆ—ï¼Œå¯¹äºæœªæ’åºæ•°æ®ï¼Œåœ¨å·²æ’åºåºåˆ—ä¸­ä»åå‘å‰æ‰«æï¼Œæ‰¾åˆ°ç›¸åº”ä½ç½®å¹¶æ’å…¥ã€‚å…·ä½“ç®—æ³•æè¿°å¦‚ä¸‹ï¼š</p><ol><li>ä»ç¬¬ä¸€ä¸ªå…ƒç´ å¼€å§‹ï¼Œè¯¥å…ƒç´ å¯ä»¥è®¤ä¸ºå·²ç»è¢«æ’åº</li><li>å–å‡ºä¸‹ä¸€ä¸ªå…ƒç´ ï¼Œåœ¨å·²ç»æ’åºçš„å…ƒç´ åºåˆ—ä¸­ä»åå‘å‰æ‰«æ</li><li>å¦‚æœè¯¥å…ƒç´ ï¼ˆå·²æ’åºï¼‰å¤§äºæ–°å…ƒç´ ï¼Œå°†è¯¥å…ƒç´ ç§»åˆ°ä¸‹ä¸€ä½ç½®</li><li>é‡å¤æ­¥éª¤3ï¼Œç›´åˆ°æ‰¾åˆ°å·²æ’åºçš„å…ƒç´ å°äºæˆ–è€…ç­‰äºæ–°å…ƒç´ çš„ä½ç½®</li><li>å°†æ–°å…ƒç´ æ’å…¥åˆ°è¯¥ä½ç½®å</li><li>é‡å¤æ­¥éª¤2~5</li></ol><p>ç›´æ¥æ’å…¥æ’åºç¤ºä¾‹ï¼š<br><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="http://oo8snaf4x.bkt.clouddn.com/14918534447677.jpg?imageView2/0/q/100" alt="" title="">                </div>                <div class="image-caption"></div>            </figure></p><blockquote><p>å¦‚æœæ’åºæ—¶ç¢°åˆ°ç›¸ç­‰çš„å…ƒç´ ï¼Œæ¯”è¾ƒåä¼šæŠŠç›¸ç­‰çš„å…ƒç´ æ”¾åœ¨åé¢ï¼Œæ‰€ä»¥è¿™ä¸¤ä¸ªç›¸ç­‰çš„å…ƒç´ ä¹‹é—´çš„å‰åé¡ºåºæ²¡æœ‰æ”¹å˜ï¼Œæ’åºæ˜¯ç¨³å®šçš„ã€‚</p></blockquote><p>ç®—æ³•çš„å®ç°ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">InsertSort</span><span class="params">(<span class="keyword">int</span> a[], <span class="keyword">int</span> n)</span></span></div><div class="line">&#123;</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; n; i++)</div><div class="line">    &#123;</div><div class="line">        <span class="keyword">if</span>(a[i] &lt; a[i<span class="number">-1</span>])   <span class="comment">//è‹¥ç¬¬iä¸ªå…ƒç´ å¤§äºi-1å…ƒç´ ï¼Œç›´æ¥æ’å…¥ã€‚å°äºçš„è¯ï¼Œç§»åŠ¨æœ‰åºè¡¨åæ’å…¥</span></div><div class="line">        &#123;</div><div class="line">            <span class="keyword">int</span> j = i<span class="number">-1</span>;</div><div class="line">            <span class="keyword">int</span> temp = a[i];    <span class="comment">//å­˜å‚¨å¾…æ’åºå…ƒç´ </span></div><div class="line">            a[i] = a[i<span class="number">-1</span>];      <span class="comment">//å…ˆåç§»ä¸€ä¸ªå…ƒç´ </span></div><div class="line">            <span class="keyword">while</span>(x &lt; a[j] &amp;&amp; j &gt;= <span class="number">0</span>)     <span class="comment">//æŸ¥æ‰¾åœ¨æœ‰åºè¡¨ä¸­çš„æ’å…¥ä½ç½®ï¼Œå¹¶æ³¨æ„è¾¹ç•Œåˆ¤æ–­</span></div><div class="line">            &#123;</div><div class="line">                a[j+<span class="number">1</span>] = a[j];</div><div class="line">                j--;         <span class="comment">//å…ƒç´ åç§»</span></div><div class="line">            &#125;</div><div class="line">            a[j+<span class="number">1</span>] = temp;      <span class="comment">//æ’å…¥åˆ°æ­£ç¡®ä½ç½®</span></div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure><blockquote><p>å¦‚æœæ¯”è¾ƒæ“ä½œçš„ä»£ä»·æ¯”äº¤æ¢æ“ä½œå¤§çš„è¯ï¼Œå¯ä»¥é‡‡ç”¨äºŒåˆ†æŸ¥æ‰¾æ³•æ¥å‡å°‘æ¯”è¾ƒæ“ä½œçš„æ•°ç›®ã€‚ç›´æ¥æ’å…¥æ’åºç®—æ³•çš„ä¼˜åŒ–ç®—æ³•æœ‰ï¼šäºŒåˆ†æ’å…¥æ’åºï¼Œ2-è·¯æ’å…¥æ’åºã€‚</p></blockquote><h3 id="2-å¸Œå°”æ’åºï¼ˆShellâ€™s-Sortï¼‰"><a href="#2-å¸Œå°”æ’åºï¼ˆShellâ€™s-Sortï¼‰" class="headerlink" title="2.å¸Œå°”æ’åºï¼ˆShellâ€™s Sortï¼‰"></a>2.å¸Œå°”æ’åºï¼ˆShellâ€™s Sortï¼‰</h3><hr><p>å¸Œå°”æ’åºï¼Œä¹Ÿç§°é€’å‡å¢é‡æ’åºç®—æ³•ï¼Œæ˜¯æ’å…¥æ’åºçš„ä¸€ç§æ›´é«˜æ•ˆçš„æ”¹è¿›ç‰ˆæœ¬ã€‚å®ƒæ˜¯åŸºäºæ’å…¥æ’åºçš„ä»¥ä¸‹ä¸¤ç‚¹æ€§è´¨è€Œæå‡ºæ”¹è¿›æ–¹æ³•çš„ï¼š</p><ul><li>æ’å…¥æ’åºåœ¨å¯¹å‡ ä¹å·²ç»æ’å¥½åºçš„æ•°æ®æ“ä½œæ—¶ï¼Œæ•ˆç‡é«˜ï¼Œå³å¯ä»¥è¾¾åˆ°çº¿æ€§æ’åºçš„æ•ˆç‡</li><li>ä½†æ’å…¥æ’åºä¸€èˆ¬æ¥è¯´æ˜¯ä½æ•ˆçš„ï¼Œå› ä¸ºæ’å…¥æ’åºæ¯æ¬¡åªèƒ½å°†æ•°æ®ç§»åŠ¨ä¸€ä½</li></ul><p>åŸºæœ¬åŸç†æ˜¯å…ˆå°†æ•´ä¸ªå¾…æ’åºçš„è®°å½•åºåˆ—åˆ†å‰²æˆä¸ºè‹¥å¹²å­åºåˆ—åˆ†åˆ«è¿›è¡Œç›´æ¥æ’å…¥æ’åºï¼Œå¾…æ•´ä¸ªåºåˆ—ä¸­çš„è®°å½•â€œåŸºæœ¬æœ‰åºâ€æ—¶ï¼Œå†å¯¹å…¨ä½“è®°å½•è¿›è¡Œä¾æ¬¡ç›´æ¥æ’å…¥æ’åºã€‚ç®—æ³•å…·ä½“æè¿°å¦‚ä¸‹ï¼š</p><ol><li>é€‰æ‹©ä¸€ä¸ªæ­¥é•¿ï¼Œå…¶è®¾è®¡è€…Donald Shellæœ€åˆå»ºè®®æ­¥é•¿é€‰æ‹©ä¸º<strong>n/2</strong>å¹¶ä¸”å¯¹æ­¥é•¿å–åŠç›´åˆ°æ­¥é•¿è¾¾åˆ°1ï¼›</li><li>ä»¥æ­¥é•¿ä¸ºé—´éš”å¯¹åºåˆ—è¿›è¡Œæ’åºï¼›</li><li>é‡å¤æ­¥éª¤2ç›´åˆ°æ­¥é•¿ä¸º1ã€‚</li></ol><p>å¸Œå°”æ’åºçš„ç¤ºä¾‹ï¼š<br><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="http://oo8snaf4x.bkt.clouddn.com/14918802730993.jpg?imageView2/0/q/100" alt="" title="">                </div>                <div class="image-caption"></div>            </figure></p><blockquote><p>å¸Œå°”æ’åºæ˜¯ä¸ç¨³å®šçš„ã€‚</p></blockquote><p>ç®—æ³•çš„å®ç°ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">ShellInsertSort</span><span class="params">(<span class="keyword">int</span> a[], <span class="keyword">int</span> n)</span></span></div><div class="line">&#123;</div><div class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> gap=n&gt;&gt;<span class="number">1</span>; gap&gt;<span class="number">0</span>; gap&gt;&gt;=<span class="number">1</span>) <span class="comment">// ç¡®å®šæ­¥é•¿ï¼Œç›´åˆ°æ­¥é•¿ä¸º1</span></div><div class="line">    &#123;</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i=gap; i&lt;n; i++) <span class="comment">// ä»¥æ­¥é•¿ä¸ºé—´éš”è¿›è¡Œæ’åº</span></div><div class="line">        &#123;</div><div class="line">            <span class="keyword">int</span> temp = a[i];</div><div class="line">            <span class="keyword">int</span> j;</div><div class="line">            <span class="keyword">for</span> (j=i-gap; j&gt;=<span class="number">0</span>&amp;&amp;a[j]&gt;temp; j-=gap)   <span class="comment">// æ’åºç»†èŠ‚</span></div><div class="line">            a[j+gap] = a[j];</div><div class="line">            a[j+gap] = temp;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure><p>å¯èƒ½å¸Œå°”æ’åºæœ€é‡è¦çš„åœ°æ–¹åœ¨äºå½“ç”¨è¾ƒå°æ­¥é•¿æ’åºåï¼Œä»¥å‰ç”¨çš„è¾ƒå¤§æ­¥é•¿ä»ç„¶æ˜¯æœ‰åºçš„ã€‚å·²çŸ¥çš„æœ€å¥½æ­¥é•¿åºåˆ—æ˜¯ç”±Sedgewickæå‡ºçš„(1, 5, 19, 41, 109,â€¦)ï¼Œè¯¥åºåˆ—çš„é¡¹æ¥è‡ªä¸¤ä¸ªç®—å¼<a href="http://faculty.simpson.edu/lydia.sinapova/www/cmsc250/LN250_Weiss/L12-ShellSort.htm#increments" target="_blank" rel="noopener">[1]</a>ã€‚è¿™é¡¹ç ”ç©¶ä¹Ÿè¡¨æ˜â€œæ¯”è¾ƒåœ¨å¸Œå°”æ’åºä¸­æ˜¯æœ€ä¸»è¦çš„æ“ä½œï¼Œè€Œä¸æ˜¯äº¤æ¢ã€‚â€ç”¨è¿™æ ·æ­¥é•¿åºåˆ—çš„å¸Œå°”æ’åºæ¯”æ’å…¥æ’åºè¦å¿«ï¼Œç”šè‡³åœ¨å°æ•°ç»„ä¸­æ¯”å¿«é€Ÿæ’åºå’Œå †æ’åºè¿˜å¿«ï¼Œä½†æ˜¯åœ¨æ¶‰åŠå¤§é‡æ•°æ®æ—¶å¸Œå°”æ’åºè¿˜æ˜¯æ¯”å¿«é€Ÿæ’åºæ…¢ã€‚</p><h2 id="é€‰æ‹©æ’åº"><a href="#é€‰æ‹©æ’åº" class="headerlink" title="é€‰æ‹©æ’åº"></a>é€‰æ‹©æ’åº</h2><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="http://oo8snaf4x.bkt.clouddn.com/14918816323841.gif?imageView2/0/q/100" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h3 id="ç®€å•é€‰æ‹©æ’åºï¼ˆSimple-Selection-Sortï¼‰"><a href="#ç®€å•é€‰æ‹©æ’åºï¼ˆSimple-Selection-Sortï¼‰" class="headerlink" title="ç®€å•é€‰æ‹©æ’åºï¼ˆSimple Selection Sortï¼‰"></a>ç®€å•é€‰æ‹©æ’åºï¼ˆSimple Selection Sortï¼‰</h3><hr><p>åŸºæœ¬åŸç†æ˜¯åœ¨è¦æ’åºçš„ä¸€ç»„æ•°ä¸­ï¼Œé€‰å‡ºæœ€å°ï¼ˆæˆ–è€…æœ€å¤§ï¼‰çš„ä¸€ä¸ªæ•°ä¸ç¬¬1ä¸ªä½ç½®çš„æ•°äº¤æ¢ï¼›ç„¶ååœ¨å‰©ä¸‹çš„æ•°å½“ä¸­å†æ‰¾æœ€å°ï¼ˆæˆ–è€…æœ€å¤§ï¼‰çš„ä¸ç¬¬2ä¸ªä½ç½®çš„æ•°äº¤æ¢ï¼Œä¾æ¬¡ç±»æ¨ï¼Œç›´åˆ°ç¬¬n-1ä¸ªå…ƒç´ ï¼ˆå€’æ•°ç¬¬äºŒä¸ªæ•°ï¼‰å’Œç¬¬nä¸ªå…ƒç´ ï¼ˆæœ€åä¸€ä¸ªæ•°ï¼‰æ¯”è¾ƒä¸ºæ­¢ã€‚ç®—æ³•çš„å…·ä½“æè¿°å¦‚ä¸‹ï¼š</p><ol><li>ç¬¬ä¸€è¶Ÿï¼Œä»n ä¸ªè®°å½•ä¸­æ‰¾å‡ºå…³é”®ç æœ€å°çš„è®°å½•ä¸ç¬¬ä¸€ä¸ªè®°å½•äº¤æ¢ï¼›</li><li><p>ç¬¬äºŒè¶Ÿï¼Œä»ç¬¬äºŒä¸ªè®°å½•å¼€å§‹çš„n-1 ä¸ªè®°å½•ä¸­å†é€‰å‡ºå…³é”®ç æœ€å°çš„è®°å½•ä¸ç¬¬äºŒä¸ªè®°å½•äº¤æ¢ï¼›</p></li><li><p>ä»¥æ­¤ç±»æ¨â€¦..</p></li><li><p>ç¬¬iè¶Ÿï¼Œåˆ™ä»ç¬¬i ä¸ªè®°å½•å¼€å§‹çš„n-i+1 ä¸ªè®°å½•ä¸­é€‰å‡ºå…³é”®ç æœ€å°çš„è®°å½•ä¸ç¬¬i ä¸ªè®°å½•äº¤æ¢ï¼Œ</p></li></ol><p>ç›´åˆ°æ•´ä¸ªåºåˆ—æŒ‰å…³é”®ç æœ‰åºã€‚</p><p>ç®€å•é€‰æ‹©æ’åºçš„ç¤ºä¾‹ï¼š<br><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="http://oo8snaf4x.bkt.clouddn.com/14918818530845.jpg?imageView2/0/q/100" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><br>ç®—æ³•å®ç°ï¼š</p><figure class="highlight arduino"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">void</span> SelectSort(<span class="keyword">int</span> a[], <span class="keyword">int</span> n)</div><div class="line">&#123;</div><div class="line">true<span class="keyword">int</span> <span class="built_in">min</span> = a[<span class="number">0</span>];</div><div class="line">true<span class="built_in">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++)</div><div class="line">true&#123;</div><div class="line">truetrue<span class="built_in">for</span> (<span class="keyword">int</span> j = i; j &lt; n; j++)<span class="comment">// æ¯æ¬¡é€‰å‡ºåºåˆ—ä¸­æœ€å°çš„æ•°</span></div><div class="line">truetruetrue<span class="built_in">if</span> (a[j] &lt; <span class="built_in">min</span>)</div><div class="line">truetruetruetrue<span class="built_in">min</span> = a[j];</div><div class="line">truetruea[i] = <span class="built_in">min</span>;<span class="comment">// å°†æ¯æ¬¡é€‰å¥½çš„æ•°æ”¾åœ¨æ­£ç¡®çš„ä½ç½®</span></div><div class="line">true&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure><blockquote><p>é€‰æ‹©æ’åºæ˜¯ç¨³å®šçš„ã€‚</p></blockquote><p>é€‰æ‹©æ’åºçš„äº¤æ¢æ“ä½œä»‹äº<strong>0</strong>å’Œ<strong>(n-1)</strong>æ¬¡ä¹‹é—´ã€‚é€‰æ‹©æ’åºçš„æ¯”è¾ƒæ“ä½œä¸º<strong>n(n-1)</strong>æ¬¡ä¹‹é—´ã€‚é€‰æ‹©æ’åºçš„èµ‹å€¼æ“ä½œä»‹äº<strong>0</strong>å’Œ<strong>3(n-1)</strong>æ¬¡ä¹‹é—´ã€‚<br>æ¯”è¾ƒæ¬¡æ•°<strong>O(n^2 )</strong>ï¼Œæ¯”è¾ƒæ¬¡æ•°ä¸å…³é”®å­—çš„åˆå§‹çŠ¶æ€æ— å…³ï¼Œæ€»çš„æ¯”è¾ƒæ¬¡æ•°<strong>N=(n-1)+(n-2)+â€¦+1=n(n-1)/2</strong>ã€‚äº¤æ¢æ¬¡æ•°<strong>O(n)</strong>ï¼Œæœ€å¥½æƒ…å†µæ˜¯ï¼Œå·²ç»æœ‰åºï¼Œäº¤æ¢<strong>0</strong>æ¬¡ï¼›æœ€åæƒ…å†µæ˜¯ï¼Œé€†åºï¼Œäº¤æ¢<strong>n-1</strong>æ¬¡ã€‚äº¤æ¢æ¬¡æ•°æ¯”å†’æ³¡æ’åºè¾ƒå°‘ï¼Œç”±äºäº¤æ¢æ‰€éœ€CPUæ—¶é—´æ¯”æ¯”è¾ƒæ‰€éœ€çš„CPUæ—¶é—´å¤šï¼Œ<strong>n</strong>å€¼è¾ƒå°æ—¶ï¼Œé€‰æ‹©æ’åºæ¯”å†’æ³¡æ’åºå¿«ã€‚<br>åŸåœ°æ“ä½œå‡ ä¹æ˜¯é€‰æ‹©æ’åºçš„å”¯ä¸€ä¼˜ç‚¹ï¼Œå½“ç©ºé—´å¤æ‚åº¦è¦æ±‚è¾ƒé«˜æ—¶ï¼Œå¯ä»¥è€ƒè™‘é€‰æ‹©æ’åºï¼›å®é™…é€‚ç”¨çš„åœºåˆéå¸¸ç½•è§ã€‚</p><h4 id="ç®€å•æ’åºçš„æ”¹è¿›â€”â€”äºŒå…ƒé€‰æ‹©æ’åº"><a href="#ç®€å•æ’åºçš„æ”¹è¿›â€”â€”äºŒå…ƒé€‰æ‹©æ’åº" class="headerlink" title="ç®€å•æ’åºçš„æ”¹è¿›â€”â€”äºŒå…ƒé€‰æ‹©æ’åº"></a>ç®€å•æ’åºçš„æ”¹è¿›â€”â€”äºŒå…ƒé€‰æ‹©æ’åº</h4><p>ç®€å•é€‰æ‹©æ’åºï¼Œæ¯è¶Ÿå¾ªç¯åªèƒ½ç¡®å®šä¸€ä¸ªå…ƒç´ æ’åºåçš„å®šä½ã€‚æˆ‘ä»¬å¯ä»¥è€ƒè™‘æ”¹è¿›ä¸ºæ¯è¶Ÿå¾ªç¯ç¡®å®šä¸¤ä¸ªå…ƒç´ ï¼ˆå½“å‰è¶Ÿæœ€å¤§å’Œæœ€å°è®°å½•ï¼‰çš„ä½ç½®,ä»è€Œå‡å°‘æ’åºæ‰€éœ€çš„å¾ªç¯æ¬¡æ•°ã€‚æ”¹è¿›åå¯¹nä¸ªæ•°æ®è¿›è¡Œæ’åºï¼Œæœ€å¤šåªéœ€è¿›è¡Œ[n/2]è¶Ÿå¾ªç¯å³å¯ã€‚å…·ä½“å®ç°å¦‚ä¸‹ï¼š</p><figure class="highlight arduino"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">void</span> SelectSort(<span class="keyword">int</span> r[],<span class="keyword">int</span> n) &#123;  </div><div class="line">    <span class="keyword">int</span> i ,j , <span class="built_in">min</span> ,<span class="built_in">max</span>, tmp;  </div><div class="line">    <span class="built_in">for</span> (i=<span class="number">1</span> ;i &lt;= n/<span class="number">2</span>;i++) &#123;    </div><div class="line">        <span class="comment">// åšä¸è¶…è¿‡n/2è¶Ÿé€‰æ‹©æ’åº   </span></div><div class="line">        <span class="built_in">min</span> = i; <span class="built_in">max</span> = i ; <span class="comment">//åˆ†åˆ«è®°å½•æœ€å¤§å’Œæœ€å°å…³é”®å­—è®°å½•ä½ç½®  </span></div><div class="line">        <span class="built_in">for</span> (j= i+<span class="number">1</span>; j&lt;= n-i; j++) &#123;  </div><div class="line">            <span class="built_in">if</span> (r[j] &gt; r[<span class="built_in">max</span>]) &#123;   </div><div class="line">                <span class="built_in">max</span> = j ; <span class="built_in">continue</span> ;   </div><div class="line">            &#125;    </div><div class="line">            <span class="built_in">if</span> (r[j]&lt; r[<span class="built_in">min</span>]) &#123;   </div><div class="line">                <span class="built_in">min</span> = j ;   </div><div class="line">            &#125;     </div><div class="line">      &#125;    </div><div class="line">      <span class="comment">//è¯¥äº¤æ¢æ“ä½œè¿˜å¯åˆ†æƒ…å†µè®¨è®ºä»¥æé«˜æ•ˆç‡  </span></div><div class="line">      tmp = r[i<span class="number">-1</span>]; r[i<span class="number">-1</span>] = r[<span class="built_in">min</span>]; r[<span class="built_in">min</span>] = tmp;  </div><div class="line">      tmp = r[n-i]; r[n-i] = r[<span class="built_in">max</span>]; r[<span class="built_in">max</span>] = tmp;  </div><div class="line">    &#125;   </div><div class="line">&#125;</div></pre></td></tr></table></figure><h3 id="å †æ’åºï¼ˆHeap-Sortï¼‰"><a href="#å †æ’åºï¼ˆHeap-Sortï¼‰" class="headerlink" title="å †æ’åºï¼ˆHeap Sortï¼‰"></a>å †æ’åºï¼ˆHeap Sortï¼‰</h3><hr><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="http://oo8snaf4x.bkt.clouddn.com/14918826895959.gif?imageView2/0/q/100" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><p>å †æ’åºæ˜¯æŒ‡åˆ©ç”¨å †è¿™ç§æ•°æ®ç»“æ„æ‰€è®¾è®¡çš„ä¸€ç§æ’åºç®—æ³•ã€‚å…¶åŸºæœ¬åŸç†å¦‚ä¸‹ï¼š<br>å †æ˜¯ä¸€ä¸ªè¿‘ä¼¼å®Œå…¨äºŒå‰æ ‘çš„ç»“æ„ï¼Œå¹¶åŒæ—¶æ»¡è¶³å †ç§¯çš„æ€§è´¨ï¼šå³å­ç»“ç‚¹çš„é”®å€¼æˆ–ç´¢å¼•æ€»æ˜¯å°äºï¼ˆæˆ–è€…å¤§äºï¼‰å®ƒçš„çˆ¶èŠ‚ç‚¹ã€‚<br>è‹¥ä»¥ä¸€ç»´æ•°ç»„å­˜å‚¨ä¸€ä¸ªå †ï¼Œåˆ™å †å¯¹åº”ä¸€æ£µå®Œå…¨äºŒå‰æ ‘ï¼Œä¸”æ‰€æœ‰éå¶ç»“ç‚¹çš„å€¼å‡ä¸å¤§äº(æˆ–ä¸å°äº)å…¶å­å¥³çš„å€¼ï¼Œæ ¹ç»“ç‚¹ï¼ˆå †é¡¶å…ƒç´ ï¼‰çš„å€¼æ˜¯æœ€å°(æˆ–æœ€å¤§)çš„ã€‚å¦‚ï¼š</p><ol><li>å¤§é¡¶å †åºåˆ—ï¼šï¼ˆ96, 83, 27, 38, 11, 09)</li><li>å°é¡¶å †åºåˆ—ï¼šï¼ˆ12, 36, 24, 85, 47, 30, 53, 91ï¼‰<figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="http://oo8snaf4x.bkt.clouddn.com/14918830727069.jpg?imageView2/0/q/100" alt="" title="">                </div>                <div class="image-caption"></div>            </figure>  </li></ol><p>åˆå§‹æ—¶æŠŠnä¸ªæ•°çš„åºåˆ—çœ‹ä½œæ˜¯ä¸€æ£µé¡ºåºå­˜å‚¨çš„äºŒå‰æ ‘ï¼ˆä¸€ç»´æ•°ç»„å­˜å‚¨äºŒå‰æ ‘ï¼‰ï¼Œè°ƒæ•´å®ƒä»¬çš„å­˜å‚¨åºï¼Œä½¿ä¹‹æˆä¸ºä¸€ä¸ªå †ï¼Œå°†å †é¡¶å…ƒç´ è¾“å‡ºï¼Œå¾—åˆ°nä¸ªå…ƒç´ ä¸­æœ€å°(æˆ–æœ€å¤§)çš„å…ƒç´ ï¼Œè¿™æ—¶å †çš„æ ¹èŠ‚ç‚¹çš„æ•°æœ€å°ï¼ˆæˆ–è€…æœ€å¤§ï¼‰ã€‚ç„¶åå¯¹å‰é¢(n-1)ä¸ªå…ƒç´ é‡æ–°è°ƒæ•´ä½¿ä¹‹æˆä¸ºå †ï¼Œè¾“å‡ºå †é¡¶å…ƒç´ ï¼Œå¾—åˆ°nä¸ªå…ƒç´ ä¸­æ¬¡å°(æˆ–æ¬¡å¤§)çš„å…ƒç´ ã€‚ä¾æ­¤ç±»æ¨ï¼Œç›´åˆ°åªæœ‰ä¸¤ä¸ªèŠ‚ç‚¹çš„å †ï¼Œå¹¶å¯¹å®ƒä»¬ä½œäº¤æ¢ï¼Œæœ€åå¾—åˆ°æœ‰nä¸ªèŠ‚ç‚¹çš„æœ‰åºåºåˆ—ã€‚ç§°è¿™ä¸ªè¿‡ç¨‹ä¸ºå †æ’åºã€‚<br>å› æ­¤ï¼Œå®ç°å †æ’åºéœ€è§£å†³ä¸¤ä¸ªé—®é¢˜ï¼š</p><ol><li>å¦‚ä½•å°†n ä¸ªå¾…æ’åºçš„æ•°å»ºæˆå †ï¼›</li><li>è¾“å‡ºå †é¡¶å…ƒç´ åï¼Œæ€æ ·è°ƒæ•´å‰©ä½™n-1 ä¸ªå…ƒç´ ï¼Œä½¿å…¶æˆä¸ºä¸€ä¸ªæ–°å †ã€‚</li></ol><p>é¦–å…ˆè®¨è®ºç¬¬äºŒä¸ªé—®é¢˜ï¼šè¾“å‡ºå †é¡¶å…ƒç´ åï¼Œå¯¹å‰©ä½™n-1å…ƒç´ é‡æ–°å»ºæˆå †çš„è°ƒæ•´è¿‡ç¨‹ã€‚è°ƒæ•´å°é¡¶å †çš„æ–¹æ³•ï¼š</p><ol><li>è®¾æœ‰m ä¸ªå…ƒç´ çš„å †ï¼Œè¾“å‡ºå †é¡¶å…ƒç´ åï¼Œå‰©ä¸‹m-1 ä¸ªå…ƒç´ ã€‚å°†å †åº•å…ƒç´ é€å…¥å †é¡¶ï¼ˆï¼ˆæœ€åä¸€ä¸ªå…ƒç´ ä¸å †é¡¶è¿›è¡Œäº¤æ¢ï¼‰ï¼Œå †è¢«ç ´åï¼Œå…¶åŸå› ä»…æ˜¯æ ¹ç»“ç‚¹ä¸æ»¡è¶³å †çš„æ€§è´¨ã€‚</li><li>å°†æ ¹ç»“ç‚¹ä¸å·¦ã€å³å­æ ‘ä¸­è¾ƒå°å…ƒç´ çš„è¿›è¡Œäº¤æ¢ã€‚</li><li>è‹¥ä¸å·¦å­æ ‘äº¤æ¢ï¼šå¦‚æœå·¦å­æ ‘å †è¢«ç ´åï¼Œå³å·¦å­æ ‘çš„æ ¹ç»“ç‚¹ä¸æ»¡è¶³å †çš„æ€§è´¨ï¼Œåˆ™é‡å¤æ–¹æ³• 2.</li><li>è‹¥ä¸å³å­æ ‘äº¤æ¢ï¼Œå¦‚æœå³å­æ ‘å †è¢«ç ´åï¼Œå³å³å­æ ‘çš„æ ¹ç»“ç‚¹ä¸æ»¡è¶³å †çš„æ€§è´¨ã€‚åˆ™é‡å¤æ–¹æ³• 2.</li><li>ç»§ç»­å¯¹ä¸æ»¡è¶³å †æ€§è´¨çš„å­æ ‘è¿›è¡Œä¸Šè¿°äº¤æ¢æ“ä½œï¼Œç›´åˆ°å¶å­ç»“ç‚¹ï¼Œå †è¢«å»ºæˆã€‚</li></ol><p>ç§°è¿™ä¸ªè‡ªæ ¹ç»“ç‚¹åˆ°å¶å­ç»“ç‚¹çš„è°ƒæ•´è¿‡ç¨‹ä¸ºç­›é€‰ã€‚å¦‚å›¾ï¼š<br><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="http://oo8snaf4x.bkt.clouddn.com/14918847712647.jpg?imageView2/0/q/100" alt="" title="">                </div>                <div class="image-caption"></div>            </figure></p><p>å†è®¨è®ºå¯¹n ä¸ªå…ƒç´ åˆå§‹å»ºå †çš„è¿‡ç¨‹ã€‚<br>å»ºå †æ–¹æ³•ï¼šå¯¹åˆå§‹åºåˆ—å»ºå †çš„è¿‡ç¨‹ï¼Œå°±æ˜¯ä¸€ä¸ªåå¤è¿›è¡Œç­›é€‰çš„è¿‡ç¨‹ã€‚</p><ol><li>nä¸ªç»“ç‚¹çš„å®Œå…¨äºŒå‰æ ‘ï¼Œåˆ™æœ€åä¸€ä¸ªç»“ç‚¹æ˜¯ç¬¬ä¸ªç»“ç‚¹çš„å­æ ‘ã€‚</li><li>ç­›é€‰ä»ç¬¬ä¸ªç»“ç‚¹ä¸ºæ ¹çš„å­æ ‘å¼€å§‹ï¼Œè¯¥å­æ ‘æˆä¸ºå †ã€‚</li><li>ä¹‹åå‘å‰ä¾æ¬¡å¯¹å„ç»“ç‚¹ä¸ºæ ¹çš„å­æ ‘è¿›è¡Œç­›é€‰ï¼Œä½¿ä¹‹æˆä¸ºå †ï¼Œç›´åˆ°æ ¹ç»“ç‚¹ã€‚</li></ol><p>å¦‚å›¾å»ºå †åˆå§‹è¿‡ç¨‹ï¼šæ— åºåºåˆ—ï¼šï¼ˆ49ï¼Œ38ï¼Œ65ï¼Œ97ï¼Œ76ï¼Œ13ï¼Œ27ï¼Œ49ï¼‰<br><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="http://oo8snaf4x.bkt.clouddn.com/14918848199034.jpg?imageView2/0/q/100" alt="" title="">                </div>                <div class="image-caption"></div>            </figure></p><p>ç®—æ³•çš„å®ç°ï¼š</p><figure class="highlight glsl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/** </span></div><div class="line"> * å·²çŸ¥H[sâ€¦m]é™¤äº†H[s] å¤–å‡æ»¡è¶³å †çš„å®šä¹‰ </div><div class="line"> * è°ƒæ•´H[s],ä½¿å…¶æˆä¸ºå¤§é¡¶å †.å³å°†å¯¹ç¬¬sä¸ªç»“ç‚¹ä¸ºæ ¹çš„å­æ ‘ç­›é€‰,  </div><div class="line"> * </div><div class="line"> * @param Hæ˜¯å¾…è°ƒæ•´çš„å †æ•°ç»„ </div><div class="line"> * @param sæ˜¯å¾…è°ƒæ•´çš„æ•°ç»„å…ƒç´ çš„ä½ç½® </div><div class="line"> * @param lengthæ˜¯æ•°ç»„çš„é•¿åº¦ </div><div class="line"> * </div><div class="line"> */  </div><div class="line"><span class="type">void</span> HeapAdjust(<span class="type">int</span> H[],<span class="type">int</span> s, <span class="type">int</span> <span class="built_in">length</span>)  </div><div class="line">&#123;  </div><div class="line">    <span class="type">int</span> tmp  = H[s];  </div><div class="line">    <span class="type">int</span> child = <span class="number">2</span>*s+<span class="number">1</span>; <span class="comment">//å·¦å­©å­ç»“ç‚¹çš„ä½ç½®ã€‚(i+1 ä¸ºå½“å‰è°ƒæ•´ç»“ç‚¹çš„å³å­©å­ç»“ç‚¹çš„ä½ç½®)  </span></div><div class="line">    <span class="keyword">while</span> (child &lt; <span class="built_in">length</span>)</div><div class="line">    &#123;  </div><div class="line">        <span class="keyword">if</span>(child+<span class="number">1</span> &lt;<span class="built_in">length</span> &amp;&amp; H[child]&lt;H[child+<span class="number">1</span>])  <span class="comment">// å¦‚æœå³å­©å­å¤§äºå·¦å­©å­(æ‰¾åˆ°æ¯”å½“å‰å¾…è°ƒæ•´ç»“ç‚¹å¤§çš„å­©å­ç»“ç‚¹)  </span></div><div class="line">            ++child;  </div><div class="line">        <span class="keyword">if</span>(H[s]&lt;H[child])</div><div class="line">        &#123;  <span class="comment">// å¦‚æœè¾ƒå¤§çš„å­ç»“ç‚¹å¤§äºçˆ¶ç»“ç‚¹  </span></div><div class="line">            H[s] = H[child]; <span class="comment">// é‚£ä¹ˆæŠŠè¾ƒå¤§çš„å­ç»“ç‚¹å¾€ä¸Šç§»åŠ¨ï¼Œæ›¿æ¢å®ƒçš„çˆ¶ç»“ç‚¹  </span></div><div class="line">            s = child;       <span class="comment">// é‡æ–°è®¾ç½®s ,å³å¾…è°ƒæ•´çš„ä¸‹ä¸€ä¸ªç»“ç‚¹çš„ä½ç½®  </span></div><div class="line">            child = <span class="number">2</span>*s+<span class="number">1</span>;  </div><div class="line">        &#125;</div><div class="line">        <span class="keyword">else</span>            <span class="comment">// å¦‚æœå½“å‰å¾…è°ƒæ•´ç»“ç‚¹å¤§äºå®ƒçš„å·¦å³å­©å­ï¼Œåˆ™ä¸éœ€è¦è°ƒæ•´ï¼Œç›´æ¥é€€å‡º  </span></div><div class="line">             <span class="keyword">break</span>;   </div><div class="line">        H[s] = tmp;         <span class="comment">// å½“å‰å¾…è°ƒæ•´çš„ç»“ç‚¹æ”¾åˆ°æ¯”å…¶å¤§çš„å­©å­ç»“ç‚¹ä½ç½®ä¸Š  </span></div><div class="line">    &#125;   </div><div class="line">&#125;  </div><div class="line"></div><div class="line"><span class="comment">/** </span></div><div class="line"> * åˆå§‹å †è¿›è¡Œè°ƒæ•´ </div><div class="line"> * å°†H[0..length-1]å»ºæˆå † </div><div class="line"> * è°ƒæ•´å®Œä¹‹åç¬¬ä¸€ä¸ªå…ƒç´ æ˜¯åºåˆ—çš„æœ€å°çš„å…ƒç´  </div><div class="line"> */  </div><div class="line"><span class="type">void</span> BuildingHeap(<span class="type">int</span> H[], <span class="type">int</span> <span class="built_in">length</span>)  </div><div class="line">&#123;   </div><div class="line">    <span class="comment">//æœ€åä¸€ä¸ªæœ‰å­©å­çš„èŠ‚ç‚¹çš„ä½ç½® i=  (length -1) / 2  </span></div><div class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = (<span class="built_in">length</span> <span class="number">-1</span>) / <span class="number">2</span> ; i &gt;= <span class="number">0</span>; i--)  </div><div class="line">        HeapAdjust(H,i,<span class="built_in">length</span>);</div><div class="line">&#125;  </div><div class="line"><span class="comment">/** </span></div><div class="line"> * å †æ’åºç®—æ³• </div><div class="line"> */  </div><div class="line"><span class="type">void</span> HeapSort(<span class="type">int</span> H[],<span class="type">int</span> <span class="built_in">length</span>)  </div><div class="line">&#123;  </div><div class="line">    <span class="comment">//åˆå§‹å †  </span></div><div class="line">    BuildingHeap(H, <span class="built_in">length</span>);  </div><div class="line">    <span class="comment">//ä»æœ€åä¸€ä¸ªå…ƒç´ å¼€å§‹å¯¹åºåˆ—è¿›è¡Œè°ƒæ•´  </span></div><div class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="built_in">length</span> - <span class="number">1</span>; i &gt; <span class="number">0</span>; --i)  </div><div class="line">    &#123;  </div><div class="line">        <span class="comment">//äº¤æ¢å †é¡¶å…ƒç´ H[0]å’Œå †ä¸­æœ€åä¸€ä¸ªå…ƒç´   </span></div><div class="line">        <span class="type">int</span> temp = H[i]; H[i] = H[<span class="number">0</span>]; H[<span class="number">0</span>] = temp;  </div><div class="line">        <span class="comment">//æ¯æ¬¡äº¤æ¢å †é¡¶å…ƒç´ å’Œå †ä¸­æœ€åä¸€ä¸ªå…ƒç´ ä¹‹åï¼Œéƒ½è¦å¯¹å †è¿›è¡Œè°ƒæ•´  </span></div><div class="line">        HeapAdjust(H,<span class="number">0</span>,i);  </div><div class="line">  &#125;  </div><div class="line">&#125;</div></pre></td></tr></table></figure><blockquote><p>å †æ’åºæ˜¯ä¸ç¨³å®šçš„ã€‚</p></blockquote><p>è®¾æ ‘æ·±åº¦ä¸ºkï¼Œ<figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="http://oo8snaf4x.bkt.clouddn.com/14918856456281.jpg?imageView2/0/q/100)ã€‚ä»æ ¹åˆ°å¶çš„ç­›é€‰ï¼Œå…ƒç´ æ¯”è¾ƒæ¬¡æ•°è‡³å¤š2(k-1" alt="" title="">                </div>                <div class="image-caption"></div>            </figure>æ¬¡ï¼Œäº¤æ¢è®°å½•è‡³å¤šk æ¬¡ã€‚æ‰€ä»¥ï¼Œåœ¨å»ºå¥½å †åï¼Œæ’åºè¿‡ç¨‹ä¸­çš„ç­›é€‰æ¬¡æ•°ä¸è¶…è¿‡ä¸‹å¼ï¼š<br><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="http://oo8snaf4x.bkt.clouddn.com/14918856037036.jpg?imageView2/0/q/100" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><br>è€Œå»ºå †æ—¶çš„æ¯”è¾ƒæ¬¡æ•°ä¸è¶…è¿‡4n æ¬¡ï¼Œå› æ­¤å †æ’åºæœ€åæƒ…å†µä¸‹ï¼Œæ—¶é—´å¤æ‚åº¦ä¹Ÿä¸ºï¼šO(nlogn )ã€‚</p><h2 id="äº¤æ¢æ’åº"><a href="#äº¤æ¢æ’åº" class="headerlink" title="äº¤æ¢æ’åº"></a>äº¤æ¢æ’åº</h2><h3 id="å†’æ³¡æ’åºï¼ˆBubble-Sortï¼‰"><a href="#å†’æ³¡æ’åºï¼ˆBubble-Sortï¼‰" class="headerlink" title="å†’æ³¡æ’åºï¼ˆBubble Sortï¼‰"></a>å†’æ³¡æ’åºï¼ˆBubble Sortï¼‰</h3><hr><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="http://oo8snaf4x.bkt.clouddn.com/14918857702506.gif?imageView2/0/q/100" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><p>å†’æ³¡æ’åºé‡å¤åœ°èµ°è®¿è¿‡è¦æ’åºçš„æ•°åˆ—ï¼Œä¸€æ¬¡æ¯”è¾ƒä¸¤ä¸ªå…ƒç´ ï¼Œå¦‚æœä»–ä»¬çš„é¡ºåºé”™è¯¯å°±æŠŠä»–ä»¬äº¤æ¢è¿‡æ¥ã€‚<br>å†’æ³¡æ’åºç¤ºä¾‹ï¼š<br><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="http://oo8snaf4x.bkt.clouddn.com/14918858207359.jpg?imageView2/0/q/100" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><br>ç®—æ³•çš„å®ç°ï¼š</p><figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">void <span class="keyword">bubbleSort(int </span>a[], int n)</div><div class="line">&#123;  </div><div class="line">    for(int i =<span class="number">0</span> <span class="comment">; i&lt; n-1; ++i)</span></div><div class="line">        for(int <span class="keyword">j </span>= <span class="number">0</span><span class="comment">; j &lt; n-i-1; ++j) </span></div><div class="line">            if(a[<span class="keyword">j] </span>&gt; a[<span class="keyword">j+1]) </span> </div><div class="line">            &#123;  </div><div class="line">                int tmp = a[<span class="keyword">j];</span></div><div class="line">                a[<span class="keyword">j] </span>= a[<span class="keyword">j+1];</span></div><div class="line">                a[<span class="keyword">j+1] </span>= tmp<span class="comment">;  </span></div><div class="line">            &#125; </div><div class="line">&#125;</div></pre></td></tr></table></figure><blockquote><p>å†’æ³¡æ’åºæ˜¯ç¨³å®šçš„ã€‚</p></blockquote><h4 id="å†’æ³¡ç®—æ³•çš„æ”¹è¿›"><a href="#å†’æ³¡ç®—æ³•çš„æ”¹è¿›" class="headerlink" title="å†’æ³¡ç®—æ³•çš„æ”¹è¿›"></a>å†’æ³¡ç®—æ³•çš„æ”¹è¿›</h4><p>å¯¹å†’æ³¡æ’åºå¸¸è§çš„æ”¹è¿›æ–¹æ³•æ˜¯åŠ å…¥ä¸€æ ‡å¿—æ€§å˜é‡exchangeï¼Œç”¨äºæ ‡å¿—æŸä¸€è¶Ÿæ’åºè¿‡ç¨‹ä¸­æ˜¯å¦æœ‰æ•°æ®äº¤æ¢ï¼Œå¦‚æœè¿›è¡ŒæŸä¸€è¶Ÿæ’åºæ—¶å¹¶æ²¡æœ‰è¿›è¡Œæ•°æ®äº¤æ¢ï¼Œåˆ™è¯´æ˜æ•°æ®å·²ç»æŒ‰è¦æ±‚æ’åˆ—å¥½ï¼Œå¯ç«‹å³ç»“æŸæ’åºï¼Œé¿å…ä¸å¿…è¦çš„æ¯”è¾ƒè¿‡ç¨‹ã€‚æœ¬æ–‡å†æä¾›ä»¥ä¸‹ä¸¤ç§æ”¹è¿›ç®—æ³•ï¼š</p><ol><li>è®¾ç½®ä¸€æ ‡å¿—æ€§å˜é‡pos,ç”¨äºè®°å½•æ¯è¶Ÿæ’åºä¸­æœ€åä¸€æ¬¡è¿›è¡Œäº¤æ¢çš„ä½ç½®ã€‚ç”±äºposä½ç½®ä¹‹åçš„è®°å½•å‡å·²äº¤æ¢åˆ°ä½,æ•…åœ¨è¿›è¡Œä¸‹ä¸€è¶Ÿæ’åºæ—¶åªè¦æ‰«æåˆ°posä½ç½®å³å¯ã€‚<br>æ”¹è¿›åç®—æ³•å¦‚ä¸‹ï¼š</li></ol><figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">Bubble_1</span> <span class="params">( <span class="keyword">int</span> r[], <span class="keyword">int</span> n)</span></span></div><div class="line">&#123;  </div><div class="line">    <span class="keyword">int</span> i = n <span class="number">-1</span>;  <span class="comment">//åˆå§‹æ—¶,æœ€åä½ç½®ä¿æŒä¸å˜  </span></div><div class="line">    <span class="keyword">while</span> (i &gt; <span class="number">0</span>)</div><div class="line">    &#123;   </div><div class="line">        <span class="keyword">int</span> pos= <span class="number">0</span>; <span class="comment">//æ¯è¶Ÿå¼€å§‹æ—¶,æ— è®°å½•äº¤æ¢  </span></div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; i; j++)  </div><div class="line">            <span class="keyword">if</span> (r[j] &gt; r[j+<span class="number">1</span>])</div><div class="line">            &#123;  </div><div class="line">                pos = j; <span class="comment">//è®°å½•äº¤æ¢çš„ä½ç½®   </span></div><div class="line">                <span class="keyword">int</span> tmp = r[j];</div><div class="line">                r[j] = r[j+<span class="number">1</span>];</div><div class="line">                r[j+<span class="number">1</span>] = tmp;  </div><div class="line">            &#125;   </div><div class="line">        i = pos; <span class="comment">//ä¸ºä¸‹ä¸€è¶Ÿæ’åºä½œå‡†å¤‡  </span></div><div class="line">     &#125;   </div><div class="line">&#125;</div></pre></td></tr></table></figure><ol><li>ä¼ ç»Ÿå†’æ³¡æ’åºä¸­æ¯ä¸€è¶Ÿæ’åºæ“ä½œåªèƒ½æ‰¾åˆ°ä¸€ä¸ªæœ€å¤§å€¼æˆ–æœ€å°å€¼,æˆ‘ä»¬è€ƒè™‘åˆ©ç”¨åœ¨æ¯è¶Ÿæ’åºä¸­è¿›è¡Œæ­£å‘å’Œåå‘ä¸¤éå†’æ³¡çš„æ–¹æ³•ä¸€æ¬¡å¯ä»¥å¾—åˆ°ä¸¤ä¸ªæœ€ç»ˆå€¼(æœ€å¤§è€…å’Œæœ€å°è€…) , ä»è€Œä½¿æ’åºè¶Ÿæ•°å‡ ä¹å‡å°‘äº†ä¸€åŠã€‚<br>æ”¹è¿›åçš„ç®—æ³•ä¸ºï¼š</li></ol><figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line">void <span class="keyword">Bubble_2 </span>(int r[], int n)</div><div class="line">&#123;  </div><div class="line">    int low = <span class="number">0</span><span class="comment">;   </span></div><div class="line">    int high = n-1<span class="comment">; //è®¾ç½®å˜é‡çš„åˆå§‹å€¼  </span></div><div class="line">    int tmp, <span class="keyword">j; </span> </div><div class="line">    while (low &lt; high)</div><div class="line">    &#123;  </div><div class="line">        for (<span class="keyword">j </span>= low<span class="comment">; j &lt; high; ++j) //æ­£å‘å†’æ³¡,æ‰¾åˆ°æœ€å¤§è€…  </span></div><div class="line">            if (r[<span class="keyword">j] </span>&gt; r[<span class="keyword">j+1])</span></div><div class="line">            &#123;  </div><div class="line">                tmp = r[<span class="keyword">j];</span></div><div class="line">                r[<span class="keyword">j]=r[j+1];</span></div><div class="line">                r[<span class="keyword">j+1]=tmp; </span> </div><div class="line">            &#125;   </div><div class="line">        --high<span class="comment">;                 //ä¿®æ”¹highå€¼, å‰ç§»ä¸€ä½  </span></div><div class="line">        for (<span class="keyword">j </span>= high<span class="comment">; j &gt; low; --j) //åå‘å†’æ³¡,æ‰¾åˆ°æœ€å°è€…  </span></div><div class="line">            if (r[<span class="keyword">j] </span>&lt; r[<span class="keyword">j-1])</span></div><div class="line">            &#123;  </div><div class="line">                tmp = r[<span class="keyword">j];</span></div><div class="line">                r[<span class="keyword">j]=r[j-1];</span></div><div class="line">                r[<span class="keyword">j-1]=tmp; </span> </div><div class="line">            &#125;  </div><div class="line">        ++low<span class="comment">;                  //ä¿®æ”¹lowå€¼,åç§»ä¸€ä½  </span></div><div class="line">    &#125;   </div><div class="line">&#125;</div></pre></td></tr></table></figure><h3 id="å¿«é€Ÿæ’åºï¼ˆQuick-Sortï¼‰"><a href="#å¿«é€Ÿæ’åºï¼ˆQuick-Sortï¼‰" class="headerlink" title="å¿«é€Ÿæ’åºï¼ˆQuick Sortï¼‰"></a>å¿«é€Ÿæ’åºï¼ˆQuick Sortï¼‰</h3><hr><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="http://oo8snaf4x.bkt.clouddn.com/14918867109600.gif?imageView2/0/q/100" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><p>å¿«é€Ÿæ’åºåˆç§°åˆ’åˆ†äº¤æ¢æ’åºï¼ˆpartition-exchange sortï¼‰ï¼Œä½¿ç”¨åˆ†æ²»æ³•ï¼ˆDivide and conquerï¼‰ç­–ç•¥æ¥æŠŠä¸€ä¸ªåºåˆ—ï¼ˆlistï¼‰åˆ†ä¸ºä¸¤ä¸ªå­åºåˆ—ï¼ˆsub-listsï¼‰ã€‚å…¶ç®—æ³•æè¿°ä¸ºï¼š</p><ol><li>ä»æ•°åˆ—ä¸­æŒ‘å‡ºä¸€ä¸ªå…ƒç´ ï¼Œç§°ä¸ºâ€åŸºå‡†â€ï¼ˆpivotï¼‰ã€‚</li><li>é‡æ–°æ’åºæ•°åˆ—ï¼Œæ‰€æœ‰æ¯”åŸºå‡†å€¼å°çš„å…ƒç´ æ‘†æ”¾åœ¨åŸºå‡†å‰é¢ï¼Œæ‰€æœ‰æ¯”åŸºå‡†å€¼å¤§çš„å…ƒç´ æ‘†åœ¨åŸºå‡†åé¢ï¼ˆç›¸åŒçš„æ•°å¯ä»¥åˆ°ä»»ä¸€è¾¹ï¼‰ã€‚åœ¨è¿™ä¸ªåˆ†åŒºç»“æŸä¹‹åï¼Œè¯¥åŸºå‡†å°±å¤„äºæ•°åˆ—çš„ä¸­é—´ä½ç½®ã€‚è¿™ä¸ªç§°ä¸ºåˆ†åŒºï¼ˆpartitionï¼‰æ“ä½œã€‚</li><li>é€’å½’åœ°ï¼ˆrecursivelyï¼‰æŠŠå°äºåŸºå‡†å€¼å…ƒç´ çš„å­æ•°åˆ—å’Œå¤§äºåŸºå‡†å€¼å…ƒç´ çš„å­æ•°åˆ—æ’åºã€‚</li></ol><p>å¿«é€Ÿæ’åºçš„ç¤ºä¾‹ï¼š</p><ol><li><p>ä¸€è¶Ÿæ’åºçš„è¿‡ç¨‹</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="http://oo8snaf4x.bkt.clouddn.com/14918869209728.jpg?imageView2/0/q/100" alt="" title="">                </div>                <div class="image-caption"></div>            </figure></li><li><p>æ’åºçš„å…¨è¿‡ç¨‹</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="http://oo8snaf4x.bkt.clouddn.com/14918869418896.jpg?imageView2/0/q/100" alt="" title="">                </div>                <div class="image-caption"></div>            </figure></li></ol><p>ç®—æ³•çš„å®ç°ï¼ˆé€’å½’ï¼‰ï¼š</p><figure class="highlight maxima"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line">void quickSort_recursive(int a[], int low, int high)</div><div class="line">&#123;</div><div class="line">    int <span class="built_in">first</span> = low;</div><div class="line">    int <span class="built_in">last</span> = high;</div><div class="line">    int <span class="built_in">key</span> = a[<span class="built_in">first</span>];</div><div class="line">    <span class="keyword">if</span>(low &gt;= high)</div><div class="line">        <span class="built_in">return</span> ;</div><div class="line">    <span class="keyword">while</span>(<span class="built_in">first</span> &lt; <span class="built_in">last</span>)</div><div class="line">    &#123;</div><div class="line">        <span class="keyword">while</span>((<span class="built_in">first</span> &lt; <span class="built_in">last</span>)&amp;&amp;(<span class="built_in">key</span> &lt;= a[<span class="built_in">last</span>]))</div><div class="line">            <span class="built_in">last</span>--;</div><div class="line">        a[<span class="built_in">first</span>] = a[<span class="built_in">last</span>];</div><div class="line">        <span class="keyword">while</span>((<span class="built_in">first</span> &lt; <span class="built_in">last</span>)&amp;&amp;(<span class="built_in">key</span> &gt;= a[<span class="built_in">first</span>]))</div><div class="line">            <span class="built_in">first</span>++;</div><div class="line">        a[<span class="built_in">last</span>] = a[<span class="built_in">first</span>];</div><div class="line">    &#125;</div><div class="line">    a[<span class="built_in">first</span>] = <span class="built_in">key</span>;</div><div class="line">    quickSort_recursive(a, low, <span class="built_in">first</span>-<span class="number">1</span>);</div><div class="line">    quickSort_recursive(a, <span class="built_in">first</span>+<span class="number">1</span>, high);</div><div class="line">&#125;</div></pre></td></tr></table></figure><blockquote><p>å¿«é€Ÿæ’åºæ˜¯ä¸ç¨³å®šçš„ã€‚<br>å¿«æ’è¿­ä»£ç®—æ³•:ç»´æŠ¤ä¸€ä¸ªæ ˆï¼Œå­˜æ”¾åˆ’åˆ†çš„èµ·ç‚¹ç»ˆç‚¹</p></blockquote><p>åœ¨å¹³å‡çŠ¶å†µä¸‹ï¼Œæ’åºnä¸ªé¡¹ç›®è¦ÎŸ(nlogn)æ¬¡æ¯”è¾ƒã€‚åœ¨æœ€åçŠ¶å†µä¸‹ï¼ˆæ­£åºæˆ–é€†åºï¼‰åˆ™éœ€è¦ÎŸ(n^2 )æ¬¡æ¯”è¾ƒï¼Œå–å†³äºå…¶é€’å½’æ ‘çš„é«˜åº¦ã€‚äº‹å®ä¸Šï¼Œå¿«é€Ÿæ’åºé€šå¸¸æ˜æ˜¾æ¯”å…¶ä»–ÎŸ(nlogn)ç®—æ³•æ›´å¿«ï¼Œå› ä¸ºå®ƒçš„å†…éƒ¨å¾ªç¯ï¼ˆinner loopï¼‰å¯ä»¥åœ¨å¤§éƒ¨åˆ†çš„æ¶æ„ä¸Šå¾ˆæœ‰æ•ˆç‡åœ°è¢«å®ç°å‡ºæ¥ã€‚å¿«é€Ÿæ’åºæ˜¯ä¸€ä¸ªä¸ç¨³å®šçš„æ’åºæ–¹æ³•ã€‚</p><h2 id="å½’å¹¶æ’åºï¼ˆMerge-Sortï¼‰"><a href="#å½’å¹¶æ’åºï¼ˆMerge-Sortï¼‰" class="headerlink" title="å½’å¹¶æ’åºï¼ˆMerge Sortï¼‰"></a>å½’å¹¶æ’åºï¼ˆMerge Sortï¼‰</h2><hr><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="http://oo8snaf4x.bkt.clouddn.com/14918886605315.gif?imageView2/0/q/100" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><p>å½’å¹¶ï¼ˆMergeï¼‰æ’åºæ³•æ˜¯å°†ä¸¤ä¸ªï¼ˆæˆ–ä¸¤ä¸ªä»¥ä¸Šï¼‰æœ‰åºè¡¨åˆå¹¶æˆä¸€ä¸ªæ–°çš„æœ‰åºè¡¨ï¼Œå³æŠŠå¾…æ’åºåºåˆ—åˆ†ä¸ºè‹¥å¹²ä¸ªå­åºåˆ—ï¼Œæ¯ä¸ªå­åºåˆ—æ˜¯æœ‰åºçš„ã€‚ç„¶åå†æŠŠæœ‰åºå­åºåˆ—åˆå¹¶ä¸ºæ•´ä½“æœ‰åºåºåˆ—ã€‚</p><h3 id="é€’å½’æ³•"><a href="#é€’å½’æ³•" class="headerlink" title="é€’å½’æ³•"></a>é€’å½’æ³•</h3><ol><li>å°†åºåˆ—æ¯ç›¸é‚»ä¸¤ä¸ªæ•°å­—è¿›è¡Œå½’å¹¶æ“ä½œï¼Œå½¢æˆfloor(n/2)ä¸ªåºåˆ—ï¼Œæ’åºåæ¯ä¸ªåºåˆ—åŒ…å«ä¸¤ä¸ªå…ƒç´ </li><li>å°†ä¸Šè¿°åºåˆ—å†æ¬¡å½’å¹¶ï¼Œå½¢æˆfloor(n/4)ä¸ªåºåˆ—ï¼Œæ¯ä¸ªåºåˆ—åŒ…å«å››ä¸ªå…ƒç´ </li><li>é‡å¤æ­¥éª¤2ï¼Œç›´åˆ°æ‰€æœ‰å…ƒç´ æ’åºå®Œæ¯•</li></ol><p>ç®—æ³•å®ç°ï¼š</p><figure class="highlight verilog"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">void</span> merge_sort_recursive(<span class="keyword">int</span> arr[], <span class="keyword">int</span> <span class="keyword">reg</span>[], <span class="keyword">int</span> start, <span class="keyword">int</span> <span class="keyword">end</span>)</div><div class="line">&#123;</div><div class="line">    <span class="keyword">if</span> (start &gt;= <span class="keyword">end</span>)</div><div class="line">        <span class="keyword">return</span>;</div><div class="line">    <span class="keyword">int</span> len = <span class="keyword">end</span> - start, mid = (len &gt;&gt; <span class="number">1</span>) + start;</div><div class="line">    <span class="keyword">int</span> start1 = start, end1 = mid;</div><div class="line">    <span class="keyword">int</span> start2 = mid + <span class="number">1</span>, end2 = <span class="keyword">end</span>;</div><div class="line">    merge_sort_recursive(arr, <span class="keyword">reg</span>, start1, end1);</div><div class="line">    merge_sort_recursive(arr, <span class="keyword">reg</span>, start2, end2);</div><div class="line">    <span class="keyword">int</span> k = start;</div><div class="line">    <span class="keyword">while</span> (start1 &lt;= end1 &amp;&amp; start2 &lt;= end2)</div><div class="line">        <span class="keyword">reg</span>[k++] = arr[start1] &lt; arr[start2] ? arr[start1++] : arr[start2++];</div><div class="line">    <span class="keyword">while</span> (start1 &lt;= end1)</div><div class="line">        <span class="keyword">reg</span>[k++] = arr[start1++];</div><div class="line">    <span class="keyword">while</span> (start2 &lt;= end2)</div><div class="line">        <span class="keyword">reg</span>[k++] = arr[start2++];</div><div class="line">    <span class="keyword">for</span> (k = start; k &lt;= <span class="keyword">end</span>; k++)</div><div class="line">        arr[k] = <span class="keyword">reg</span>[k];</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">void</span> merge_sort(<span class="keyword">int</span> arr[], <span class="keyword">const</span> <span class="keyword">int</span> len)</div><div class="line">&#123;</div><div class="line">true<span class="keyword">int</span> <span class="keyword">reg</span>[len];</div><div class="line">truemerge_sort_recursive(arr, <span class="keyword">reg</span>, <span class="number">0</span>, len - <span class="number">1</span>);</div><div class="line">&#125;</div></pre></td></tr></table></figure><h4 id="ä¸¤è·¯å½’å¹¶çš„é€’å½’ç®—æ³•"><a href="#ä¸¤è·¯å½’å¹¶çš„é€’å½’ç®—æ³•" class="headerlink" title="ä¸¤è·¯å½’å¹¶çš„é€’å½’ç®—æ³•"></a>ä¸¤è·¯å½’å¹¶çš„é€’å½’ç®—æ³•</h4><figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">MSort</span><span class="params">(ElemType *r, ElemType *rf,<span class="keyword">int</span> s, <span class="keyword">int</span> t)</span>  </span></div><div class="line">&#123;   </div><div class="line">    ElemType *rf2;  </div><div class="line">    <span class="keyword">if</span>(s==t) r[s] = rf[s];  </div><div class="line">    <span class="keyword">else</span>  </div><div class="line">    &#123;   </div><div class="line">        <span class="keyword">int</span> m=(s+t)/<span class="number">2</span>;          <span class="comment">/*å¹³åˆ†*p è¡¨*/</span>  </div><div class="line">        MSort(r, rf2, s, m);        <span class="comment">/*é€’å½’åœ°å°†p[sâ€¦m]å½’å¹¶ä¸ºæœ‰åºçš„p2[sâ€¦m]*/</span>  </div><div class="line">        MSort(r, rf2, m+<span class="number">1</span>, t);      <span class="comment">/*é€’å½’åœ°å°†p[m+1â€¦t]å½’å¹¶ä¸ºæœ‰åºçš„p2[m+1â€¦t]*/</span>  </div><div class="line">        Merge(rf2, rf, s, m+<span class="number">1</span>,t);   <span class="comment">/*å°†p2[sâ€¦m]å’Œp2[m+1â€¦t]å½’å¹¶åˆ°p1[sâ€¦t]*/</span>  </div><div class="line">    &#125;  </div><div class="line">&#125;  </div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">MergeSort_recursive</span><span class="params">(ElemType *r, ElemType *rf, <span class="keyword">int</span> n)</span>  </span></div><div class="line">&#123;   <span class="comment">/*å¯¹é¡ºåºè¡¨*p ä½œå½’å¹¶æ’åº*/</span>  </div><div class="line">    MSort(r, rf,<span class="number">0</span>, n<span class="number">-1</span>);  </div><div class="line">&#125;</div></pre></td></tr></table></figure><h3 id="è¿­ä»£æ³•"><a href="#è¿­ä»£æ³•" class="headerlink" title="è¿­ä»£æ³•"></a>è¿­ä»£æ³•</h3><ol><li>ç”³è¯·ç©ºé—´ï¼Œä½¿å…¶å¤§å°ä¸ºä¸¤ä¸ªå·²ç»æ’åºåºåˆ—ä¹‹å’Œï¼Œè¯¥ç©ºé—´ç”¨æ¥å­˜æ”¾åˆå¹¶åçš„åºåˆ—ï¼›</li><li>è®¾å®šä¸¤ä¸ªæŒ‡é’ˆï¼Œæœ€åˆä½ç½®åˆ†åˆ«ä¸ºä¸¤ä¸ªå·²ç»æ’åºåºåˆ—çš„èµ·å§‹ä½ç½®ï¼›</li><li>æ¯”è¾ƒä¸¤ä¸ªæŒ‡é’ˆæ‰€æŒ‡å‘çš„å…ƒç´ ï¼Œé€‰æ‹©ç›¸å¯¹å°çš„å…ƒç´ æ”¾å…¥åˆ°åˆå¹¶ç©ºé—´ï¼Œå¹¶ç§»åŠ¨æŒ‡é’ˆåˆ°ä¸‹ä¸€ä½ç½®ï¼›</li><li>é‡å¤æ­¥éª¤3ç›´åˆ°æŸä¸€æŒ‡é’ˆåˆ°è¾¾åºåˆ—å°¾ï¼›</li><li>å°†å¦ä¸€åºåˆ—å‰©ä¸‹çš„æ‰€æœ‰å…ƒç´ ç›´æ¥å¤åˆ¶åˆ°åˆå¹¶åºåˆ—å°¾ï¼›</li></ol><p>ç®—æ³•å®ç°ï¼š</p><figure class="highlight vbscript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div></pre></td><td class="code"><pre><div class="line">void merge_sort_iteration(<span class="built_in">int</span> arr[], <span class="built_in">int</span> <span class="built_in">len</span>)</div><div class="line">&#123;</div><div class="line">    <span class="built_in">int</span>* a = arr;</div><div class="line">    <span class="built_in">int</span>* b = <span class="keyword">new</span> <span class="built_in">int</span>[<span class="built_in">len</span>];</div><div class="line">    <span class="keyword">for</span> (<span class="built_in">int</span> seg = <span class="number">1</span>; seg &lt; <span class="built_in">len</span>; seg += seg)</div><div class="line">    &#123;</div><div class="line">        <span class="keyword">for</span> (<span class="built_in">int</span> start = <span class="number">0</span>; start &lt; <span class="built_in">len</span>; start += seg + seg)</div><div class="line">        &#123;</div><div class="line">            <span class="built_in">int</span> low = start, <span class="built_in">mid</span> = min(start + seg, <span class="built_in">len</span>), high = min(start + seg + seg, <span class="built_in">len</span>);</div><div class="line">            <span class="built_in">int</span> k = low;</div><div class="line">            <span class="built_in">int</span> start1 = low, end1 = <span class="built_in">mid</span>;</div><div class="line">            <span class="built_in">int</span> start2 = <span class="built_in">mid</span>, end2 = high;</div><div class="line">            <span class="keyword">while</span> (start1 &lt; end1 &amp;&amp; start2 &lt; end2)</div><div class="line">                b[k++] = a[start1] &lt; a[start2] ? a[start1++] : a[start2++];</div><div class="line">            <span class="keyword">while</span> (start1 &lt; end1)</div><div class="line">                b[k++] = a[start1++];</div><div class="line">            <span class="keyword">while</span> (start2 &lt; end2)</div><div class="line">                b[k++] = a[start2++];</div><div class="line">        &#125;</div><div class="line">        T* temp = a;</div><div class="line">        a = b;</div><div class="line">        b = temp;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">if</span> (a != arr)</div><div class="line">    &#123;</div><div class="line">        <span class="keyword">for</span> (<span class="built_in">int</span> i = <span class="number">0</span>; i &lt; <span class="built_in">len</span>; i++)</div><div class="line">            b[i] = a[i];</div><div class="line">        b = a;</div><div class="line">    &#125;</div><div class="line">    delete[] b;</div><div class="line">&#125;</div></pre></td></tr></table></figure><blockquote><p>å½’å¹¶æ’åºæ˜¯ç¨³å®šçš„ã€‚</p></blockquote><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><h3 id="å„ç§æ’åºçš„ç¨³å®šæ€§ï¼Œæ—¶é—´å¤æ‚åº¦å’Œç©ºé—´å¤æ‚åº¦æ€»ç»“ï¼š"><a href="#å„ç§æ’åºçš„ç¨³å®šæ€§ï¼Œæ—¶é—´å¤æ‚åº¦å’Œç©ºé—´å¤æ‚åº¦æ€»ç»“ï¼š" class="headerlink" title="å„ç§æ’åºçš„ç¨³å®šæ€§ï¼Œæ—¶é—´å¤æ‚åº¦å’Œç©ºé—´å¤æ‚åº¦æ€»ç»“ï¼š"></a>å„ç§æ’åºçš„ç¨³å®šæ€§ï¼Œæ—¶é—´å¤æ‚åº¦å’Œç©ºé—´å¤æ‚åº¦æ€»ç»“ï¼š</h3><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="http://oo8snaf4x.bkt.clouddn.com/14918924354057.jpg?imageView2/0/q/100" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><blockquote><p>å‚è€ƒèµ„æ–™æœ‰ï¼š<br>çœŸå®çš„å½’å®¿â€”â€”<a href="http://blog.csdn.net/hguisu/article/details/7776068" target="_blank" rel="noopener">å…«å¤§æ’åºç®—æ³•</a><br>xiazdongâ€”â€”<a href="http://blog.csdn.net/xiazdong/article/details/8462393" target="_blank" rel="noopener">ä¹å¤§æ’åºç®—æ³•å†æ€»ç»“</a><br><a href="https://zh.wikipedia.org/wiki/Wikipedia:é¦–é¡µ" target="_blank" rel="noopener">wikipedia</a></p></blockquote>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;æ’åºç®—æ³•ä¸€èˆ¬åˆ†ä¸ºï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;å†…éƒ¨æ’åº(In-place sort)&lt;br&gt; ä¸å ç”¨é¢å¤–å†…å­˜æˆ–è€…å ç”¨å¸¸æ•°å†…å­˜ï¼Œå¦‚ï¼šæ’å…¥æ’åºã€é€‰æ‹©æ’åºã€å†’æ³¡æ’åºã€å †æ’åºã€å¿«é€Ÿæ’åºã€‚&lt;/li&gt;
&lt;li&gt;å¤–éƒ¨æ’åº(Out-place sort)&lt;br&gt; å› ä¸ºæ’åºæ•°æ®å¤§ï¼Œå¯ç”¨å†…å­˜ä¸€
      
    
    </summary>
    
      <category term="Algorithm" scheme="http://codingdoge.cn/categories/Algorithm/"/>
    
    
  </entry>
  
  <entry>
    <title>Search in Rotated Sorted Array</title>
    <link href="http://codingdoge.cn/2017/07/23/title:%20Search%20in%20Rotated%20Sorted%20Array%20%20/"/>
    <id>http://codingdoge.cn/2017/07/23/title: Search in Rotated Sorted Array  /</id>
    <published>2017-07-23T15:56:00.000Z</published>
    <updated>2018-01-12T14:25:37.504Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>é¢˜ç›®æ¥æºLeetCode: <strong><a href="https://leetcode.com/problems/search-in-rotated-sorted-array/" target="_blank" rel="noopener">LeetCode OJ</a></strong>  </p></blockquote><hr><blockquote><p>é¢˜ç›®æè¿°: Suppose a sorted array is rotated at some pivot unknown to you beforehand.<br>(i.e., 0 1 2 4 5 6 7 might become 4 5 6 7 0 1 2).<br>You are given a target value to search. If found in the array return its index, otherwise return -1.<br>You may assume no duplicate exists in the array.  </p></blockquote><h2 id="é¢˜ç›®è§£é‡Š"><a href="#é¢˜ç›®è§£é‡Š" class="headerlink" title="é¢˜ç›®è§£é‡Š"></a>é¢˜ç›®è§£é‡Š</h2><p>ä¸€ä¸ªæ’å¥½åºçš„æ•°ç»„ï¼Œä¸çŸ¥é“ä»¥å“ªä¸ªç‚¹ä¸ºä¸­å¿ƒæ—‹è½¬äº†(éƒ¨åˆ†æœ‰åº)ï¼Œä½ çš„ä»»åŠ¡æ˜¯æŸ¥æ‰¾ç»™å®šçš„æ•°æ˜¯å¦å­˜åœ¨æ•°ç»„ä¸­ã€‚åœ¨çš„è¯è¿”å›ä¸‹æ ‡ï¼Œä¸åœ¨çš„è¯è¿”å›ï¼1. </p><h2 id="åˆ†æ"><a href="#åˆ†æ" class="headerlink" title="åˆ†æ"></a>åˆ†æ</h2><p>æŸ¥æ‰¾é¦–å…ˆæƒ³åˆ°O(log(n))çš„äºŒåˆ†æŸ¥æ‰¾ï¼Œä½†æ˜¯äºŒåˆ†æŸ¥æ‰¾çš„å‰ææ˜¯æœ‰åºæ•°ç»„ã€‚é¢˜ç›®é‡Œä¸€ä¸ªæœ‰åºæ•°ç»„æ—‹è½¬åå˜æˆäº†éƒ¨åˆ†æœ‰åºã€‚é€šè¿‡æ¯”è¾ƒä¸¤ç«¯å¤§å°æ‰¾åˆ°å¢åºéƒ¨åˆ†ã€‚  </p><blockquote><p>eg: 4 5 6 0 1 2 3<br>first = 4, mid = 0, last = 3ï¼Œ<br>é€šè¿‡æ¯”è¾ƒfirst,mid,lastæ‰¾åˆ°å¢åºéƒ¨åˆ†ã€‚<br>åœ¨è¿™ä¸ªä¾‹å­ä¸­ä¸º1 2 3ï¼Œ<br>ç„¶ååˆ¤æ–­targetæ˜¯å¦åœ¨è¿™ä¸ªå¢åºå­åºåˆ—ä¸­ï¼Œ<br>å¦‚æœåœ¨åˆ™ç›´æ¥ç”¨äºŒåˆ†æŸ¥æ‰¾ï¼Œ<br>ä¸åœ¨åˆ™åœ¨å¦ä¸€éƒ¨åˆ†(ä¾‹å­ä¸­ä¸º4 5 6 0)ä¸­ç»§ç»­åˆ†è§£ã€‚</p></blockquote><h3 id="Code"><a href="#Code" class="headerlink" title="Code"></a>Code</h3><pre><code class="//">int search(const vector&lt;int&gt;&amp; nums, int target){    int first = 0;    int last = nums.size();    while(first != last)    {        const int mid = (first+last)&gt;&gt;1;    // ä½¿ç”¨ä½è¿ç®—åŠ é€Ÿ        if(nums[mid] == target)            return mid;        if(nums[first] &lt;= nums[mid])    // æ‰¾åˆ°å¢åºå­åºåˆ—            if(nums[first]&lt;=target &amp;&amp; target&lt;nums[mid])    // æ‰¾åˆ°targetåœ¨å“ªä¸ªéƒ¨åˆ†                last = mid;            else                first = mid+1;        else            if(nums[mid]&lt;target &amp;&amp; target&lt;=nums[last-1])                first = mid+1;            else                last = mid;    }    return -1;}</code></pre><h1 id="æ‹“å±•"><a href="#æ‹“å±•" class="headerlink" title="æ‹“å±•"></a>æ‹“å±•</h1><p>å½“æ•°ç»„ä¸ºæ— åºæ—¶çš„äºŒåˆ†æŸ¥æ‰¾  </p><h2 id="åˆ†æ-1"><a href="#åˆ†æ-1" class="headerlink" title="åˆ†æ"></a>åˆ†æ</h2><p>ä¸€ç§æ˜¯å…ˆæ’åºå†äºŒåˆ†ï¼Œä¸€ç§æ˜¯ç»“åˆå¿«æ’æ€æƒ³ï¼Œæ¯æ¬¡é€‰æ‹©ä¸€ä¸ªå…³é”®å­—ï¼Œæ¯”ä»–å¤§çš„æ”¾å³è¾¹ï¼Œæ¯”ä»–å°çš„æ”¾å·¦è¾¹ï¼Œç„¶åå†æ¯”è¾ƒä»–å’Œéœ€è¦æŸ¥æ‰¾çš„æ•°çš„å…³ç³»ï¼Œå†é€‰æ‹©åŒºé—´è¿›è¡Œè¿­ä»£ã€‚å¦‚æœéœ€è¦è¿”å›æŸ¥æ‰¾æ•°çš„ä¸‹æ ‡ï¼Œåˆ™æ·»åŠ ä¸€ä¸ªçºªå½•ä¸‹æ ‡çš„æ•°ç»„ï¼Œè¿™æ ·æ’å¥½åºåä¹Ÿèƒ½çŸ¥é“å½“å‰æ•°åœ¨åŸå§‹æ•°ç»„ä¸­çš„ä½ç½®ã€‚  </p><blockquote><p>åˆå§‹æ•°ç»„3 1 2 5 4 7 0 6<br>mid = key = 3 è¿›è¡Œä¸€æ¬¡å¿«æ’å¡«å‘<br>å¾—åˆ°æ•°ç»„0 1 2 3 4 7 5 6<br>æ¯”è¾ƒmidä¸target<br>å¦‚æœtarget&gt;midåˆ™è¿­ä»£midååŠéƒ¨åˆ†<br>å¦‚æœtarget&lt;midåˆ™è¿­ä»£midå‰åŠéƒ¨åˆ†<br>ç›´åˆ°æ‰¾åˆ°target  </p></blockquote><h3 id="Code-1"><a href="#Code-1" class="headerlink" title="Code"></a>Code</h3><pre><code class="//">int BinarySearch(vector&lt;int&gt;&amp; nums, int target){    int num = nums.size();    int index[num];        // indexæ•°ç»„çºªå½•ä¸‹æ ‡ ä»¥ä¾¿èƒ½æ‰¾åˆ°åœ¨æ•°ç»„çš„åˆå§‹ä½ç½®    for(int i = 0; i &lt; num; i++)    // åˆå§‹åŒ–indexæ•°ç»„        index[i] = i;    int l, r, m, sl, sr, mIndex;    l = 0, r = num-1;    while(l&lt;=r)        // å¼€å§‹è¿­ä»£    {        mIndex = index[l], m = nums[l];        sl = l, sr = r;        while(sl&lt;sr)    // å¿«æ’æ€æƒ³ï¼Œå·¦å³å¡«å‘ï¼Œå¹¶ç”¨indexè®°å½•ä½ç½®        {            while(sl&lt;sr &amp;&amp; m&lt;nums[sr])                sr--;            nums[sl] = nums[sr];            index[sl] = index[sr];            while(sl&lt;sr &amp;&amp; m&gt;nums[sl])                sl++;            nums[sr] = nums[sl];            index[sr] = index[sl];        }        nums[sl] = m;        index[sl] = mIndex;        if(m == target)            return mIndex;        if(target &gt; m)        // åˆ¤æ–­targetåœ¨å“ªä¸ªåŒºé—´            l = sl+1;        else            r = sl-1;    }    return -1;}</code></pre><h2 id="ç›¸å…³é¢˜ç›®"><a href="#ç›¸å…³é¢˜ç›®" class="headerlink" title="ç›¸å…³é¢˜ç›®"></a>ç›¸å…³é¢˜ç›®</h2><p><a href="https://leetcode.com/problems/search-in-rotated-sorted-array-ii/" target="_blank" rel="noopener">Search in Rotated Sorted Array II</a>  </p><h2 id="ç›¸å…³é¢˜ç›®åˆ†æ"><a href="#ç›¸å…³é¢˜ç›®åˆ†æ" class="headerlink" title="ç›¸å…³é¢˜ç›®åˆ†æ"></a>ç›¸å…³é¢˜ç›®åˆ†æ</h2><p>å› ä¸ºå…è®¸å‡ºç°é‡å¤æ•°å­—ï¼Œä½†æ˜¯æ•°ç»„è¿˜æ˜¯éƒ¨åˆ†æœ‰åºçš„ï¼Œæ‰€ä»¥è·³è¿‡é‡å¤æ•°å­—å³å¯  </p><h3 id="Code-2"><a href="#Code-2" class="headerlink" title="Code"></a>Code</h3><pre><code class="//">int search(const vector&lt;int&gt;&amp; nums, int target){    int first = 0;    int last = nums.size();    while(first != last)    {            const int mid = (first+last)&gt;&gt;1;        if(nums[mid] == target)            return mid;        if(nums[first] &lt; nums[mid])            if(nums[first]&lt;=target &amp;&amp; target&lt;nums[mid])                last = mid;            else                first = mid+1;        else if(nums[first] &gt; nums[mid])        {            if(nums[mid]&lt;target &amp;&amp; target&lt;=nums[last-1])                first = mid+1;            else                last = mid;        }        else    // ç‰¹åˆ¤ç›¸ç­‰æ—¶è·³è¿‡            first++;    }    return -1;}</code></pre>]]></content>
    
    <summary type="html">
    
      
      
        &lt;blockquote&gt;
&lt;p&gt;é¢˜ç›®æ¥æºLeetCode: &lt;strong&gt;&lt;a href=&quot;https://leetcode.com/problems/search-in-rotated-sorted-array/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;
      
    
    </summary>
    
      <category term="Algorithm" scheme="http://codingdoge.cn/categories/Algorithm/"/>
    
    
      <category term="LeetCode" scheme="http://codingdoge.cn/tags/LeetCode/"/>
    
  </entry>
  
  <entry>
    <title>CocoaPods å®‰è£…åŠä¸€èˆ¬ä½¿ç”¨</title>
    <link href="http://codingdoge.cn/2017/07/23/title:%20CocoaPods%20%E5%AE%89%E8%A3%85%E5%8F%8A%E4%B8%80%E8%88%AC%E4%BD%BF%E7%94%A8/"/>
    <id>http://codingdoge.cn/2017/07/23/title: CocoaPods å®‰è£…åŠä¸€èˆ¬ä½¿ç”¨/</id>
    <published>2017-07-23T15:47:00.000Z</published>
    <updated>2018-01-13T05:06:34.464Z</updated>
    
    <content type="html"><![CDATA[<h2 id="WHAT-IS-COCOAPODS"><a href="#WHAT-IS-COCOAPODS" class="headerlink" title="WHAT IS COCOAPODS"></a>WHAT IS <a href="https://cocoapods.org" target="_blank" rel="noopener">COCOAPODS</a></h2><p>CocoaPods is a dependency manager for Swift and Objective-C Cocoa projects.CocoaPods can help you scale your projects elegantly.</p><h2 id="INSTALL"><a href="#INSTALL" class="headerlink" title="INSTALL"></a>INSTALL</h2><p>CocoaPodsæ˜¯åŸºäºrubyå»ºç«‹çš„ï¼Œè¦ç¡®ä¿ä½ çš„ç”µè„‘é‡Œè£…æœ‰Rubyï¼Œä¸è¿‡Macéƒ½æ˜¯è‡ªå¸¦Rubyçš„ï¼Œä½ å¯ä»¥ç”¨<a href="https://rvm.io" target="_blank" rel="noopener">rvm</a>æ¥ç®¡ç†ä½ çš„ruby.</p><blockquote><p> <a href="https://ruby-china.org/wiki/rvm-guide" target="_blank" rel="noopener">RVM å®ç”¨æŒ‡å— Â· Ruby China</a><br>ç„¶åæˆ‘ä»¬ä½¿ç”¨Rubygemæ¥å®‰è£…cocoapods.<br>ç”±äºGFWçš„åŸå› æˆ‘ä»¬ä¸èƒ½è®¿é—®cocoapods.orgï¼Œä½¿ç”¨æ·˜å®çš„Rubyé•œåƒæ¥ä»£æ›¿ï¼š</p><ol><li>åˆ é™¤è‡ªå¸¦çš„Rubyé•œåƒ<br><code>$ gem sources --remove https://rubygems.org/</code></li><li>æ·»åŠ æ·˜å®çš„é•œåƒ<br><code>$ gem sources -a https://gems.ruby-china.org/</code><br>ï¼ˆå¦‚æœè¿™ä¸ªé•œåƒä¸èƒ½ç”¨ï¼Œå°±ç”¨<a href="https://gems.ruby-china.org/" target="_blank" rel="noopener">https://gems.ruby-china.org/</a><br>ï¼‰</li><li>å¯ä»¥ç”¨<code>$ gem sources -l</code>æ¥æ£€éªŒã€‚æˆåŠŸå³æ˜¾ç¤ºä»¥ä¸‹ç»“æœï¼š<figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="http://oo8snaf4x.bkt.clouddn.com/FF76DDA8-EC18-438C-B921-8603D4688C1D.png?imageView2/0/q/100" alt="FF76DDA8-EC18-438C-B921-8603D4688C1D" title="">                </div>                <div class="image-caption">FF76DDA8-EC18-438C-B921-8603D4688C1D</div>            </figure></li></ol></blockquote><ol><li>å®‰è£…CocoaPods<br><code>$ sudo gem install cocoapods</code></li><li>é…ç½®CocoaPods<br><code>$ pod setup</code></li></ol><p>å¦‚æœå®‰è£…å¤±è´¥çš„è¯ï¼Œæ ¹æ®æŠ¥é”™å»è§£å†³é—®é¢˜ï¼Œæ¯”å¦‚gemæ²¡æ›´æ–°ï¼Œrubyç‰ˆæœ¬ç­‰ã€‚<br>å¸¸è§é—®é¢˜ï¼š<br><figure class="highlight plain"><figcaption><span>While executing gem ... (Errno::EPERM)</span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">Operation not permitted - /usr/bin/xcodeproj</div></pre></td></tr></table></figure></p><p><a href="https://segmentfault.com/q/1010000002926243" target="_blank" rel="noopener">å®‰è£…Cocoapodsï¼Œ æ›´æ–°gemå‡ºç°çš„é—®é¢˜ã€‚ - SegmentFault</a><br><a href="http://stackoverflow.com/questions/30812777/cannot-install-cocoa-pods-after-uninstalling-results-in-error/30851030#30851030" target="_blank" rel="noopener">ios - Cannot install cocoa pods after uninstalling, results in error - Stack Overflow</a></p><h2 id="Using-CocoaPods"><a href="#Using-CocoaPods" class="headerlink" title="Using CocoaPods"></a>Using CocoaPods</h2><ol><li>ä½¿ç”¨ä¹‹å‰ä½ è¦ç¡®ä¿ä½ æ‰€æƒ³ç”¨çš„åº“å­˜åœ¨CocoaPodsä¸­ï¼š(æ‹¿AFNetworkingä¸¾ä¾‹)<br><code>$ pod search AFNetworking</code><br>ç¬¬ä¸€æ¬¡æœç´¢ä¼šéœ€è¦å»ºç«‹ç´¢å¼•ï¼Œæ¯”è¾ƒæ…¢ä¸€äº›ã€‚</li><li><p>æœç´¢å®Œæˆåä¼šåˆ—ä¸¾å‡ºç»“æœå’Œç‰ˆæœ¬ï¼š</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="http://oo8snaf4x.bkt.clouddn.com/37122577-4CDC-48C9-9B25-4B943D983810.png?imageView2/0/q/100" alt="37122577-4CDC-48C9-9B25-4B943D983810" title="">                </div>                <div class="image-caption">37122577-4CDC-48C9-9B25-4B943D983810</div>            </figure></li><li><p>ç„¶åé€šè¿‡åˆ›å»º<a href="https://guides.cocoapods.org/using/the-podfile.html" target="_blank" rel="noopener">Podfile</a>æ–‡ä»¶æ¥æ·»åŠ ä¾èµ–å…³ç³»</p></li><li>å…ˆ<code>cd</code>è¿›ä½ é¡¹ç›®æ‰€åœ¨çš„ç›®å½•(ç®€ä»‹é‡Œé¢å¯ä»¥ç›´æ¥å¤åˆ¶è·¯å¾„) </li><li>åˆ©ç”¨vimåˆ›å»ºPodfileæ–‡ä»¶<br><code>$ vim Podfile</code></li><li>ç„¶åè¾“å…¥ï¼š<figure class="highlight delphi"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">platform</span> :ios, <span class="string">'10.0'</span></div><div class="line"></div><div class="line">target <span class="string">'TargetName'</span> <span class="keyword">do</span></div><div class="line">pod <span class="string">'AFNetworking'</span>, <span class="string">'~&gt; 3.0'</span></div><div class="line"><span class="keyword">end</span></div></pre></td></tr></table></figure></li></ol><blockquote><p>æ–‡å­—çš„æ„æ€æ˜¯ï¼Œå½“å‰AFNetworkingæ”¯æŒçš„iOSæœ€é«˜ç‰ˆæœ¬æ˜¯iOS 10.0ï¼Œâ€™TargetNameâ€™ä¸ºä½ é¡¹ç›®çš„åç§°ï¼Œè¦ä¸‹è½½çš„AFNetworkingç‰ˆæœ¬æ˜¯3.0<br>ä¿å­˜é€€å‡ºã€‚</p><ol><li>è¿è¡Œ<code>$ pod install</code><br>å®Œæˆåä¼šå‡ºç°<br>æç¤ºä½¿ç”¨â€™XXX.xcworkspaceâ€™æ–‡ä»¶æ¥ä»£æ›¿ä¹‹å‰çš„â€™XXX.xcodeprojâ€™æ–‡ä»¶æ‰“å¼€é¡¹ç›®ã€‚<br>æ‰“å¼€é¡¹ç›®åä¼šå‘ç°<br>é‡Œé¢æœ‰äº†æˆ‘ä»¬æƒ³è¦åŠ è¿›æ¥çš„åº“ï¼Œå¯ä»¥<code>#import</code>è¿›æ¥äº†ã€‚</li></ol></blockquote><ol><li>å¢åŠ æ–°çš„åº“<br>å¦‚æœä½¿ç”¨è¿‡ç¨‹ä¸­æˆ‘è¿˜æƒ³æ·»åŠ å…¶ä»–çš„åº“æ€ä¹ˆåŠï¼Œåªè¦åœ¨Podfileé‡Œé¢æ¥ç€æ·»åŠ ï¼Œç„¶åç»ˆç«¯å†æ‰§è¡Œ<code>pod install</code>å°±å¯ä»¥äº†ã€‚</li><li>æ›´æ–°CocoaPodsä¸­çš„åº“<br>ç¬¬ä¸‰æ–¹åº“ä»¬éƒ½æœ‰äººåœ¨ç»´æŠ¤å‡çº§ï¼Œæˆ‘ä»¬éœ€è¦éš”æ–­æ—¶é—´å°±è¦æ›´æ–°ä¸‹æˆ‘ä»¬å·¥ç¨‹ä¸­ç¬¬ä¸‰æ–¹åº“çš„ç‰ˆæœ¬ã€‚åªéœ€è¦ç»ˆç«¯è¾“å…¥å‘½ä»¤<code>pod update</code>å°±å¯ä»¥äº†ã€‚</li><li>åˆ é™¤CocoaPodsä¸­çš„æŸäº›åº“<br>å½“æˆ‘ä»¬éœ€è¦å»æ‰æŸä¸ªç¬¬ä¸‰æ–¹åº“æ—¶ï¼Œåªéœ€è¦åœ¨Podfileåˆ é™¤è¯¥å¼•å…¥è¯¥åº“çš„è¯­å¥ï¼Œç„¶åæ‰§è¡Œ<code>pod update</code>æˆ–è€…<code>pod install</code>å°±å¯ä»¥äº†ã€‚</li><li>å‡çº§CocoaPods<br><code>sudo gem install cocoapods</code></li></ol>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;WHAT-IS-COCOAPODS&quot;&gt;&lt;a href=&quot;#WHAT-IS-COCOAPODS&quot; class=&quot;headerlink&quot; title=&quot;WHAT IS COCOAPODS&quot;&gt;&lt;/a&gt;WHAT IS &lt;a href=&quot;https://cocoapods.
      
    
    </summary>
    
      <category term="iOS" scheme="http://codingdoge.cn/categories/iOS/"/>
    
    
      <category term="Tool" scheme="http://codingdoge.cn/tags/Tool/"/>
    
  </entry>
  
  <entry>
    <title>selfä¸superçš„åŒºåˆ«</title>
    <link href="http://codingdoge.cn/2017/07/23/title:%20self%E4%B8%8Esuper%E7%9A%84%E5%8C%BA%E5%88%AB%20/"/>
    <id>http://codingdoge.cn/2017/07/23/title: selfä¸superçš„åŒºåˆ« /</id>
    <published>2017-07-23T15:47:00.000Z</published>
    <updated>2018-01-14T16:47:12.060Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>åŸæ–‡<a href="http://blog.csdn.net/evilotus/article/details/7284290" target="_blank" rel="noopener"><strong>CSDN evilotus</strong></a><br>æœ‰æ‰€æ•´ç†  </p><hr><p>åœ¨<strong>ObjC</strong>ä¸­çš„ç±»å®ç°ä¸­ç»å¸¸çœ‹åˆ°è¿™ä¸¤ä¸ªå…³é”®å­—â€<strong>self</strong>â€å’Œâ€<strong>super</strong>â€ï¼Œä»¥ä»¥å‰<strong>oop</strong>è¯­è¨€çš„ç»éªŒï¼Œæ‹¿<strong>c++</strong>ä¸ºä¾‹ï¼Œ<strong>self</strong>ç›¸å½“äº<strong>this</strong>ï¼Œ<strong>super</strong>ç›¸å½“äºè°ƒç”¨çˆ¶ç±»çš„æ–¹æ³•ï¼Œè¿™ä¹ˆçœ‹èµ·æ¥æ˜¯å¾ˆå®¹æ˜“ç†è§£çš„ã€‚ä½†æ˜¯å®ƒä»¬çœŸæ­£æ˜¯å¦‚ä½•è°ƒç”¨çš„å‘¢? ä½ çŸ¥é“å—?  </p></blockquote><ul><li>ä»¥ä¸‹é¢çš„ä»£ç ä¸ºä¾‹ï¼š</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div></pre></td><td class="code"><pre><div class="line">@interface Person:NSObject</div><div class="line">&#123;</div><div class="line">trueNSString*  name;</div><div class="line">&#125;</div><div class="line">    (void) setName:(NSString) yourName;</div><div class="line">@end//Person  </div><div class="line">@interface PersonMe:Person</div><div class="line">&#123;</div><div class="line">trueNSUInteger age;</div><div class="line">&#125;</div><div class="line">    (void) setAge:(NSUInteger) age;</div><div class="line">    (void) setName:(NSString*) yourName andAge:(NSUInteger) age;</div><div class="line">@end// PersonMe  </div><div class="line">@implementation PersonMe</div><div class="line">(void) setName:(NSString*) yourName andAge:(NSUInteger) age</div><div class="line">&#123;</div><div class="line">true[self setAge:age];</div><div class="line">true[super setName:yourName];</div><div class="line">&#125;</div><div class="line">@end// PersonMe  </div><div class="line">int main(int argc, char* argv[]) &#123;</div><div class="line">NSAutoreleasePool* pool = [[NSAutoreleasePool alloc] init]</div><div class="line">PersonMe* me = [[PersonMe alloc] init];</div><div class="line">[me setName: @&quot;asdf&quot; andAge: 18];</div><div class="line">[me release];</div><div class="line">[pool drain];</div><div class="line">return 0;</div><div class="line">&#125;</div></pre></td></tr></table></figure><p>ä¸Šé¢æœ‰ç®€å•çš„ä¸¤ä¸ªç±»ï¼Œåœ¨å­ç±»<strong>PersonMe</strong>ä¸­è°ƒç”¨äº†è‡ªå·±ç±»ä¸­çš„<strong>setAge</strong>å’Œçˆ¶ç±»ä¸­çš„<strong>setName</strong>ï¼Œè¿™äº›ä»£ç çœ‹èµ·æ¥å¾ˆå¥½ç†è§£ï¼Œæ²¡ä»€ä¹ˆé—®é¢˜ã€‚ ç„¶åæˆ‘åœ¨<strong>setName:andAge</strong>çš„æ–¹æ³•ä¸­åŠ å…¥ä¸¤è¡Œ:  </p><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">NSLog(@&quot;self &apos; class is %@&quot;, [self class]);</div><div class="line">NSLog(@&quot;super&apos; class is %@&quot;, [super class]);</div><div class="line">```  </div><div class="line"></div><div class="line">è¿™æ ·åœ¨è°ƒç”¨æ—¶ï¼Œä¼šæ‰“å‡ºæ¥è¿™ä¸¤ä¸ªçš„**class**ï¼Œå…ˆçŒœä¸‹å§ï¼Œä¼šæ‰“å°å‡ºä»€ä¹ˆï¼Ÿ æŒ‰ç…§ä»¥å‰*oop*è¯­è¨€çš„ç»éªŒï¼Œè¿™é‡Œåº”è¯¥ä¼šè¾“å‡º:***self &apos; s class is PersonMe super &apos; s class is Person***</div><div class="line"></div><div class="line">ä½†æ˜¯ç¼–è¯‘è¿è¡Œåï¼Œå¯ä»¥å‘ç°ç»“æœæ˜¯ï¼š</div><div class="line"></div><div class="line">``` // </div><div class="line">self &apos;s class is PersonMe</div><div class="line">super &apos; s class is PersonMe</div></pre></td></tr></table></figure><p><strong>self</strong>çš„<strong>class</strong>å’Œé¢„æƒ³çš„ä¸€æ ·ï¼Œæ€ä¹ˆ<strong>super</strong>çš„<strong>class</strong>ä¹Ÿæ˜¯<strong>PersonMe</strong>?  </p><h3 id="çœŸç›¸"><a href="#çœŸç›¸" class="headerlink" title="çœŸç›¸"></a>çœŸç›¸</h3><p><strong>self</strong>æ˜¯ç±»çš„éšè—çš„å‚æ•°ï¼ŒæŒ‡å‘å½“å‰å½“å‰è°ƒç”¨æ–¹æ³•çš„ç±»ï¼Œå¦ä¸€ä¸ªéšè—å‚æ•°æ˜¯<strong>_cmd</strong>ï¼Œä»£è¡¨å½“å‰ç±»æ–¹æ³•çš„<strong>selector</strong>ã€‚è¿™é‡Œåªå…³æ³¨è¿™ä¸ª<strong>self</strong>ã€‚<strong>super</strong>æ˜¯ä¸ªå•¥ï¼Ÿ<strong>super</strong>å¹¶ä¸æ˜¯éšè—çš„å‚æ•°ï¼Œå®ƒåªæ˜¯ä¸€ä¸ª<strong>â€œç¼–è¯‘å™¨æŒ‡ç¤ºç¬¦â€</strong>ï¼Œå®ƒå’Œ<strong>self</strong>æŒ‡å‘çš„æ˜¯ç›¸åŒçš„æ¶ˆæ¯æ¥æ”¶è€…ï¼Œæ‹¿ä¸Šé¢çš„ä»£ç ä¸ºä¾‹ï¼Œä¸è®ºæ˜¯ç”¨<strong>[self setName]</strong>è¿˜æ˜¯<strong>[super setName]</strong>ï¼Œæ¥æ”¶<strong>â€œsetNameâ€</strong>è¿™ä¸ªæ¶ˆæ¯çš„æ¥æ”¶è€…éƒ½æ˜¯<strong>PersonMe* me</strong>è¿™ä¸ªå¯¹è±¡ã€‚ä¸åŒçš„æ˜¯ï¼Œ<strong>super</strong>å‘Šè¯‰ç¼–è¯‘å™¨ï¼Œå½“è°ƒç”¨<strong>setName</strong>çš„æ–¹æ³•æ—¶ï¼Œè¦å»è°ƒç”¨çˆ¶ç±»çš„æ–¹æ³•ï¼Œè€Œä¸æ˜¯æœ¬ç±»é‡Œçš„ã€‚</p><p>å½“ä½¿ç”¨<strong>self</strong>è°ƒç”¨æ–¹æ³•æ—¶ï¼Œä¼šä»<strong>å½“å‰ç±»</strong>çš„æ–¹æ³•åˆ—è¡¨ä¸­å¼€å§‹æ‰¾ï¼Œå¦‚æœæ²¡æœ‰ï¼Œå°±ä»<strong>çˆ¶ç±»</strong>ä¸­å†æ‰¾ï¼›è€Œå½“ä½¿ç”¨<strong>supervæ—¶ï¼Œåˆ™ä»</strong>çˆ¶ç±»**çš„æ–¹æ³•åˆ—è¡¨ä¸­å¼€å§‹æ‰¾ã€‚ç„¶åè°ƒç”¨çˆ¶ç±»çš„è¿™ä¸ªæ–¹æ³•ã€‚</p><h3 id="One-more-step"><a href="#One-more-step" class="headerlink" title="One more step"></a>One more step</h3><p>è¿™ç§æœºåˆ¶åˆ°åº•åº•å±‚æ˜¯å¦‚ä½•å®ç°çš„ï¼Ÿå…¶å®å½“è°ƒç”¨ç±»æ–¹æ³•çš„æ—¶å€™ï¼Œç¼–è¯‘å™¨ä¼šå°†æ–¹æ³•è°ƒç”¨è½¬æˆä¸€ä¸ªCå‡½æ•°æ–¹æ³•è°ƒç”¨ï¼Œappleçš„objcRuntimeRefä¸Šè¯´ï¼š</p><blockquote><p>Sending Messages<br>When it encounters a method invocation, the compiler might generate a call to any of several functions to perform the actual message dispatch, depending on the receiver, the return value, and the arguments. You can use these functions to dynamically invoke methods from your own plain C code, or to use argument forms not permitted by NSObjectâ€™s performâ€¦ methods. These functions are declared in <code>/usr/include/objc/objc-runtime.h</code>.  </p><ul><li>objc_msgSend sends a message with a simple return value to an instance of a class.  </li><li>objc_msgSend_stret sends a message with a data-structure return value to an instance of<br>a class.  </li><li>objc_msgSendSuper sends a message with a simple return value to the superclass of an instance of a class.  </li><li>objc_msgSendSuper_stret sends a message with a data-structure return value to the superclass of an instance of a class.  </li></ul></blockquote><p>å¯ä»¥çœ‹åˆ°ä¼šè½¬æˆè°ƒç”¨ä¸Šé¢4ä¸ªæ–¹æ³•ä¸­çš„ä¸€ä¸ªï¼Œç”±äº<code>_stret</code>ç³»åˆ—çš„å’Œæ²¡æœ‰<code>_stret</code>çš„é‚£ä¸¤ä¸ªç±»ä¼¼ï¼Œå…ˆåªå…³æ³¨<code>objc_msgSend</code>å’Œ<code>objc_msgSendSuper</code>ä¸¤ä¸ªæ–¹æ³•ã€‚</p><p>å½“ä½¿ç”¨<code>[self setName]</code>è°ƒç”¨æ—¶ï¼Œä¼šä½¿ç”¨<code>objc_msgSend</code>çš„å‡½æ•°ï¼Œå…ˆçœ‹ä¸‹<code>objc_msgSend</code>çš„å‡½æ•°å®šä¹‰:  </p><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">id objc_msgSend(id theReceiver, SEL theSelector, ...)</div></pre></td></tr></table></figure><p>ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯æ¶ˆæ¯æ¥æ”¶è€…ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯è°ƒç”¨çš„å…·ä½“ç±»æ–¹æ³•çš„<code>selector</code>ï¼Œåé¢æ˜¯<code>selector</code>æ–¹æ³•çš„å¯å˜å‚æ•°ã€‚æˆ‘ä»¬å…ˆä¸ç®¡è¿™ä¸ªå¯å˜å‚æ•°ï¼Œä»¥<code>[self setName:]</code>ä¸ºä¾‹ï¼Œç¼–è¯‘å™¨ä¼šæ›¿æ¢æˆè°ƒç”¨<code>objc_msgSend</code>çš„å‡½æ•°è°ƒç”¨ï¼Œå…¶ä¸­theReceiveræ˜¯<code>self</code>ï¼ŒtheSelectoræ˜¯ <code>@selector(setName:)</code>ï¼Œè¿™ä¸ªselectoræ˜¯ä»å½“å‰<code>self</code>çš„classçš„æ–¹æ³•åˆ—è¡¨å¼€å§‹æ‰¾çš„setNameï¼Œå½“æ‰¾åˆ°åæŠŠå¯¹åº”çš„ selectorä¼ é€’è¿‡å»ã€‚</p><p>è€Œå½“ä½¿ç”¨<code>[super setName]</code>è°ƒç”¨æ—¶ï¼Œä¼šä½¿ç”¨<code>objc_msgSendSuper</code>å‡½æ•°ï¼Œçœ‹ä¸‹<code>objc_msgSendSuper</code>çš„å‡½æ•°å®šä¹‰ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">id objc_msgSendSuper(struct objc_super *super, SEL op, ...)</div></pre></td></tr></table></figure><p>ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ä¸ª<code>objc_super</code>çš„ç»“æ„ä½“ï¼Œç¬¬äºŒä¸ªå‚æ•°è¿˜æ˜¯ç±»ä¼¼ä¸Šé¢çš„ç±»æ–¹æ³•çš„<code>selector</code>ï¼Œå…ˆçœ‹ä¸‹<code>objc_super</code>è¿™ä¸ªç»“æ„ä½“æ˜¯ä»€ä¹ˆä¸œè¥¿ï¼š  </p><pre><code class="//">struct objc_super  {      id receiver;      Class superClass;  };</code></pre><p>å¯ä»¥çœ‹åˆ°è¿™ä¸ªç»“æ„ä½“åŒ…å«äº†ä¸¤ä¸ªæˆå‘˜ï¼Œä¸€ä¸ªæ˜¯receiverï¼Œè¿™ä¸ªç±»ä¼¼ä¸Šé¢<code>objc_msgSend</code>çš„ç¬¬ä¸€ä¸ªå‚æ•°receiverï¼Œç¬¬äºŒä¸ªæˆå‘˜æ˜¯è®° å½•å†™<code>super</code>è¿™ä¸ªç±»çš„çˆ¶ç±»æ˜¯ä»€ä¹ˆï¼Œæ‹¿ä¸Šé¢çš„ä»£ç ä¸ºä¾‹ï¼Œå½“ç¼–è¯‘å™¨é‡åˆ°<code>PersonMe</code>é‡Œ<code>setName:andAge</code>æ–¹æ³•é‡Œçš„<code>[super setName:]</code>æ—¶ï¼Œå¼€å§‹åšè¿™å‡ ä¸ªäº‹:  </p><ol><li><p>æ„å»º<code>objc_super</code>çš„ç»“æ„ä½“ï¼Œæ­¤æ—¶è¿™ä¸ªç»“æ„ä½“çš„ç¬¬ä¸€ä¸ªæˆå‘˜å˜é‡receiverå°±æ˜¯<code>PersonMe* me</code>ï¼Œå’Œ<code>self</code>ç›¸åŒã€‚è€Œç¬¬äºŒä¸ªæˆå‘˜å˜é‡<code>superClass</code>å°±æ˜¯æŒ‡ç±»<code>Person</code>ï¼Œå› ä¸º<code>PersonMe</code>çš„è¶…ç±»å°±æ˜¯è¿™ä¸ª<code>Person</code>ã€‚</p></li><li><p>è°ƒç”¨<code>objc_msgSendSuper</code>çš„æ–¹æ³•ï¼Œå°†è¿™ä¸ªç»“æ„ä½“å’ŒsetNameçš„selä¼ é€’è¿‡å»ã€‚å‡½æ•°é‡Œé¢åœ¨åšçš„äº‹æƒ…ç±»ä¼¼è¿™æ ·ï¼šä»<code>objc_super</code>ç»“æ„ä½“æŒ‡å‘çš„<code>superClass</code>çš„æ–¹æ³•åˆ—è¡¨å¼€å§‹æ‰¾setNameçš„selectorï¼Œæ‰¾åˆ°åå†ä»¥ objc_super-&gt;receiverå»è°ƒç”¨è¿™ä¸ªselectorï¼Œå¯èƒ½ä¹Ÿä¼šä½¿ç”¨objc_msgSendè¿™ä¸ªå‡½æ•°ï¼Œä¸è¿‡æ­¤æ—¶çš„ç¬¬ä¸€ä¸ªå‚æ•° theReceiverå°±æ˜¯objc_super-&gt;receiverï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯ä»objc_super-&gt;superClassä¸­æ‰¾åˆ° çš„selector</p></li></ol><p>é‡Œé¢çš„è°ƒç”¨æœºåˆ¶å¤§ä½“å°±æ˜¯è¿™æ ·äº†ï¼Œä»¥ä¸Šé¢çš„åˆ†æï¼Œå›è¿‡å¤´æ¥çœ‹å¼€å§‹çš„ä»£ç ï¼Œå½“è¾“å‡º[self class]å’Œ[super class]æ—¶ï¼Œæ˜¯ä¸ªæ€æ ·çš„è¿‡ç¨‹ã€‚</p><p>å½“ä½¿ç”¨[self class]æ—¶ï¼Œè¿™æ—¶çš„selfæ˜¯PersonMeï¼Œåœ¨ä½¿ç”¨objc_msgSendæ—¶ï¼Œç¬¬ä¸€ä¸ªå‚æ•°æ˜¯receiverä¹Ÿå°±æ˜¯selfï¼Œä¹Ÿæ˜¯ PersonMe* meè¿™ä¸ªå®ä¾‹ã€‚ç¬¬äºŒä¸ªå‚æ•°ï¼Œè¦å…ˆæ‰¾åˆ°classè¿™ä¸ªæ–¹æ³•çš„selectorï¼Œå…ˆä»PersonMeè¿™ä¸ªç±»å¼€å§‹æ‰¾ï¼Œæ²¡æœ‰ï¼Œç„¶ååˆ°PersonMeçš„çˆ¶ç±» Personä¸­å»æ‰¾ï¼Œä¹Ÿæ²¡æœ‰ï¼Œå†å»Personçš„çˆ¶ç±»NSObjectå»æ‰¾ï¼Œä¸€å±‚ä¸€å±‚å‘ä¸Šæ‰¾ä¹‹åï¼Œåœ¨NSObjectçš„ç±»ä¸­å‘ç°è¿™ä¸ªclassæ–¹æ³•ï¼Œè€Œ NSObjectçš„è¿™ä¸ªclassæ–¹æ³•ï¼Œå°±æ˜¯è¿”å›receiverçš„ç±»åˆ«ï¼Œæ‰€ä»¥è¿™é‡Œè¾“å‡ºPersonMeã€‚</p><p>å½“ä½¿ç”¨[super class]æ—¶ï¼Œè¿™æ—¶è¦è½¬æ¢æˆobjc_msgSendSuperçš„æ–¹æ³•ã€‚å…ˆæ„é€ objc_superçš„ç»“æ„ä½“å§ï¼Œç¬¬ä¸€ä¸ªæˆå‘˜å˜é‡å°±æ˜¯self, ç¬¬äºŒä¸ªæˆå‘˜å˜é‡æ˜¯Personï¼Œç„¶åè¦æ‰¾classè¿™ä¸ªselectorï¼Œå…ˆå»superClassä¹Ÿå°±æ˜¯Personä¸­å»æ‰¾ï¼Œæ²¡æœ‰ï¼Œç„¶åå»Person çš„çˆ¶ç±»ä¸­å»æ‰¾ï¼Œç»“æœè¿˜æ˜¯åœ¨NSObjectä¸­æ‰¾åˆ°äº†ã€‚ç„¶åå†…éƒ¨ä½¿ç”¨å‡½æ•°objc_msgSend(objc_super-&gt;receiver, @selector(class)) å»è°ƒç”¨ï¼Œæ­¤æ—¶å·²ç»å’Œæˆ‘ä»¬ç”¨[self class]è°ƒç”¨æ—¶ç›¸åŒäº†ï¼Œæ­¤æ—¶çš„receiverè¿˜æ˜¯PersonMe* meï¼Œæ‰€ä»¥è¿™é‡Œè¿”å›çš„ä¹Ÿæ˜¯PersonMeã€‚</p><p>Furthor more åœ¨ç±»çš„æ–¹æ³•åˆ—è¡¨å¯»æ‰¾ä¸€ä¸ªæ–¹æ³•æ—¶ï¼Œè¿˜ç‰µæ¶‰åˆ°ä¸€ä¸ªæ¦‚å¿µç±»å¯¹è±¡çš„isaæŒ‡é’ˆå’Œobjcçš„meta-classæ¦‚å¿µï¼Œè¿™é‡Œå°±ä¸å†è¯¦ç»†ä»‹ç»ã€‚</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;blockquote&gt;
&lt;p&gt;åŸæ–‡&lt;a href=&quot;http://blog.csdn.net/evilotus/article/details/7284290&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;&lt;strong&gt;CSDN evilotus&lt;/stro
      
    
    </summary>
    
      <category term="iOS" scheme="http://codingdoge.cn/categories/iOS/"/>
    
    
      <category term="OC" scheme="http://codingdoge.cn/tags/OC/"/>
    
      <category term="è½¬è½½" scheme="http://codingdoge.cn/tags/%E8%BD%AC%E8%BD%BD/"/>
    
  </entry>
  
  <entry>
    <title>è§†é¢‘å¼€å‘</title>
    <link href="http://codingdoge.cn/2017/07/23/title:%20%E8%A7%86%E9%A2%91%E5%BC%80%E5%8F%91/"/>
    <id>http://codingdoge.cn/2017/07/23/title: è§†é¢‘å¼€å‘/</id>
    <published>2017-07-23T15:47:00.000Z</published>
    <updated>2018-01-13T05:06:57.320Z</updated>
    
    <content type="html"><![CDATA[<p>ä¸‹é¢æœƒä»‹ç´¹è¦–é »çš„ä¸€äº›åŸºæœ¬çŸ¥è­˜ï¼Œå’Œåœ¨iOSä¸Šå¯¦ç¾è¦–é »æ’­æ”¾å’Œç·©å­˜çš„å¹¾ç¨®æ–¹æ¡ˆã€‚</p><blockquote><ul><li><strong>è½¯è§£ç å’Œç¡¬è§£ç </strong><br>GPUè§£ç å°±æ˜¯æ‰€è°“çš„ç¡¬è§£ç ï¼ŒCPUè§£ç å°±æ˜¯è½¯è§£ç ã€‚iOSæä¾›çš„æ’­æ”¾å™¨ç±»ä½¿ç”¨çš„æ˜¯ç¡¬è§£ç ï¼Œæ‰€ä»¥è§†é¢‘æ’­æ”¾å¯¹CPUä¸ä¼šæœ‰å¾ˆå¤§çš„å‹åŠ›ï¼Œä½†æ˜¯æ”¯æŒçš„æ’­æ”¾æ ¼å¼æ¯”è¾ƒå•ä¸€ï¼Œä¸€èˆ¬å°±æ˜¯MP4ã€MOVã€M4Vè¿™å‡ ä¸ªã€‚</li><li><strong>HTTP Live Streaming</strong><br>HTTP Live Streamingï¼ˆç¼©å†™æ˜¯ HLSï¼‰æ˜¯ä¸€ä¸ªç”±è‹¹æœå…¬å¸æå‡ºçš„åŸºäºHTTPçš„æµåª’ä½“ç½‘ç»œä¼ è¾“åè®®ã€‚å®ƒçš„å·¥ä½œåŸç†æ˜¯æŠŠæ•´ä¸ªæµåˆ†æˆä¸€ä¸ªä¸ªå°çš„åŸºäºHTTPçš„æ–‡ä»¶æ¥ä¸‹è½½ï¼Œæ¯æ¬¡åªä¸‹è½½ä¸€äº›ã€‚å½“åª’ä½“æµæ­£åœ¨æ’­æ”¾æ—¶ï¼Œå®¢æˆ·ç«¯å¯ä»¥é€‰æ‹©ä»è®¸å¤šä¸åŒçš„å¤‡ç”¨æºä¸­ä»¥ä¸åŒçš„é€Ÿç‡ä¸‹è½½åŒæ ·çš„èµ„æºï¼Œå…è®¸æµåª’ä½“ä¼šè¯é€‚åº”ä¸åŒçš„æ•°æ®é€Ÿç‡ã€‚æ”¯æŒçš„è§†é¢‘æµç¼–ç ä¸ºH.264ã€‚æˆ‘ä»¬åœ¨è§†é¢‘ç½‘ç«™ä¸Šçœ‹åˆ°çš„M3U8åç¼€çš„æ’­æ”¾é“¾æ¥å°±æ˜¯ä½¿ç”¨HLSåè®®çš„è§†é¢‘ã€‚HLSä¼˜ç‚¹ï¼Œ1ã€çœ‹å®Œä¸€æ®µç¼“å­˜ä¸€æ®µï¼Œé˜²æ­¢åªçœ‹ä¸€æ®µè§†é¢‘ä½†æ˜¯æŠŠæ•´ä¸ªè§†é¢‘æ–‡ä»¶éƒ½ç¼“å­˜ä¸‹æ¥çš„ç”¨æˆ·ï¼Œå‡å°‘æœåŠ¡å™¨å‹åŠ›å’ŒèŠ‚çœæµé‡ã€‚2ã€æ ¹æ®ç”¨æˆ·ç½‘é€Ÿåˆ‡æ¢ä¸åŒçš„ç ç‡ï¼Œå…¼é¡¾æµç¨‹æ€§å’Œæ¸…æ™°åº¦ã€‚</li></ul></blockquote><h1 id="æ’­æ”¾"><a href="#æ’­æ”¾" class="headerlink" title="æ’­æ”¾"></a>æ’­æ”¾</h1><p>å®ç°è§†é¢‘æ’­æ”¾çš„ä¸¤ä¸ªæ–¹æ¡ˆã€‚</p><hr><h2 id="ä¸€ã€è‡ªå·±å®ç°å¯¹æ•°æ®ç¼–ç è§£ç "><a href="#ä¸€ã€è‡ªå·±å®ç°å¯¹æ•°æ®ç¼–ç è§£ç " class="headerlink" title="ä¸€ã€è‡ªå·±å®ç°å¯¹æ•°æ®ç¼–ç è§£ç "></a>ä¸€ã€è‡ªå·±å®ç°å¯¹æ•°æ®ç¼–ç è§£ç </h2><p>å¯ä»¥åœ¨ä¸€äº›å¼€æºæ’­æ”¾å™¨ä¸Šè¿›è¡ŒäºŒæ¬¡å¼€å‘ï¼Œå¦‚Bilibiliçš„<a href="https://github.com/Bilibili/ijkplayer" target="_blank" rel="noopener">ijkplayer</a>ï¼Œæˆ–è€…ç›´æ¥å¯¹<a href="https://github.com/FFmpeg/FFmpeg" target="_blank" rel="noopener">FFmpeg</a>å¼€å‘ï¼Œä¼˜ç‚¹åœ¨æ•´ä¸ªæ’­æ”¾è¿‡ç¨‹å¯æ§ï¼Œä¸ºåç»­è¿›è¡Œç¼“å­˜ã€æµé‡æ§åˆ¶ã€ç ç‡åˆ‡æ¢ç­‰å¼€å‘æä¾›äº†åŸºç¡€ï¼Œç¼ºç‚¹æ˜¯å¤æ‚ï¼Œè¦æ±‚é«˜ï¼Œå·¥ç¨‹é‡å¤§ã€‚</p><hr><h2 id="äºŒã€AVFoundation"><a href="#äºŒã€AVFoundation" class="headerlink" title="äºŒã€AVFoundation"></a>äºŒã€AVFoundation</h2><p>Media Assets, Playback and Editing. ä½¿ç”¨Appleè‡ªæœ‰æ¡†æ¶ã€‚</p><h3 id="AVAsset"><a href="#AVAsset" class="headerlink" title="AVAsset"></a>AVAsset</h3><blockquote><p>AVAsset is an abstract, immutable class used to model timed audiovisual media such as videos and sounds. An asset may contain one or more tracks that are intended to be presented or processed together, each of a uniform media type, including but not limited to audio, video, text, closed captions, and subtitles.</p></blockquote><p>Audiovisual mediaçš„èµ„æºç±»ï¼Œé€šå¸¸é€šè¿‡<code>AVURLAsset</code>ç”¨URLæ¥å®ä¾‹åŒ–ï¼Œå¯ä»¥ç”¨<a href="https://developer.apple.com/download/more/" target="_blank" rel="noopener">Atom Inspector</a>(ä¸€ä¸ªAppleæä¾›çš„ç”¨æ¥æŸ¥çœ‹è§†é¢‘ä¿¡æ¯çš„å·¥å…·)æ¥è§‚å¯Ÿä¸€ä¸ªè§†é¢‘çš„å±æ€§ï¼Œå†å»<code>AVAsset</code>ä¸­å¯¹åº”å…¶å±æ€§ã€‚</p><table><thead><tr><th>AVAssetå±æ€§</th><th>è§†é¢‘æ–‡ä»¶å±æ€§</th></tr></thead><tbody><tr><td>duration: CMTime</td><td>duration, timescaleæ—¶é•¿å’Œæ—¶é—´å°ºåº¦</td></tr><tr><td>preferredRate: Float</td><td>é»˜è®¤é€Ÿåº¦</td></tr><tr><td>preferredVolume: Float</td><td>é»˜è®¤éŸ³é‡</td></tr><tr><td>creationDate: AVMetadataItem?</td><td>è§†é¢‘åˆ›å»ºæ—¶é—´</td></tr><tr><td>tracks: [AVAssetTrack]</td><td>è½¨é“</td></tr><tr><td>trackGroups: [AVAssetTrackGroup]</td><td>è½¨é“ç»„</td></tr><tr><td>lyrics: String?</td><td>å½“å‰è¯­è¨€ç¯å¢ƒåˆé€‚çš„æ­Œè¯</td></tr><tr><td>metadata: [AVMetadataItem]</td><td>å…ƒæ•°æ®</td></tr></tbody></table><h3 id="AVPlayer"><a href="#AVPlayer" class="headerlink" title="AVPlayer"></a>AVPlayer</h3><blockquote><p>An AVPlayer is a controller object used to manage the playback and timing of a media asset. It provides the interface to control the playerâ€™s transport behavior such as its ability to play, pause, change the playback rate, and seek to various points in time within the mediaâ€™s timeline. You can use an AVPlayer to play local and remote file-based media, such as QuickTime movies and MP3 audio files, as well as audiovisual media served using HTTP Live Streaming.</p></blockquote><p>AVPlayeræ˜¯ä¸€ä¸ªæ§åˆ¶å¯¹è±¡ç”¨äºç®¡ç†åª’ä½“assetçš„æ’­æ”¾ï¼Œå®ƒæä¾›äº†ç›¸å…³çš„æ¥å£æ§åˆ¶æ’­æ”¾å™¨çš„è¡Œä¸ºï¼Œæ¯”å¦‚ï¼šæ’­æ”¾ã€æš‚åœã€æ”¹å˜æ’­æ”¾çš„é€Ÿç‡ã€è·³è½¬åˆ°åª’ä½“æ—¶é—´è½´ä¸Šçš„æŸä¸€ä¸ªç‚¹ï¼ˆç®€å•ç†è§£å°±æ˜¯å®ç°æ‹–åŠ¨åŠŸèƒ½æ˜¾ç¤ºå¯¹åº”çš„è§†é¢‘ä½ç½®å†…å®¹ï¼‰ã€‚æˆ‘ä»¬èƒ½å¤Ÿä½¿ç”¨AVPlayeræ’­æ”¾æœ¬åœ°å’Œè¿œç¨‹çš„åª’ä½“æ–‡ä»¶ï¼ˆä½¿ç”¨ HTTP Live Streamingï¼‰ï¼Œæ¯”å¦‚ï¼š QuickTime movies å’Œ MP3 audio filesï¼Œæ‰€ä»¥AVPlayerå¯ä»¥æ»¡è¶³éŸ³è§†é¢‘æ’­æ”¾çš„åŸºæœ¬éœ€æ±‚ã€‚<br><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="http://oo8snaf4x.bkt.clouddn.com/15009677046266.png?imageView2/0/q/100" alt="AVFoundationçš„å±‚æ¬¡" title="">                </div>                <div class="image-caption">AVFoundationçš„å±‚æ¬¡</div>            </figure></p><h3 id="AVPlayerItem"><a href="#AVPlayerItem" class="headerlink" title="AVPlayerItem"></a>AVPlayerItem</h3><blockquote><p>AVPlayerItem models the timing and presentation state of an asset played by an AVPlayer object. It provides the interface to seek to various times in the media, determine its presentation size, identify its current time, and much more. </p></blockquote><p><code>AVPlayerItem</code>æ˜¯ä¸€ä¸ªè´Ÿè´£å¤„ç†<code>AVAsset</code>çš„èµ„æºå¹¶é€šè¿‡<code>AVPlayer</code>æ¥æ’­æ”¾çš„è½½ä½“ï¼Œæä¾›äº†<code>seek</code>ã€ç¡®å®šæ˜¾ç¤ºå¤§å°ã€IDã€æ—¶é—´ç­‰çš„æ¥å£ã€‚</p><h3 id="AVPlayerLayer"><a href="#AVPlayerLayer" class="headerlink" title="AVPlayerLayer"></a>AVPlayerLayer</h3><blockquote><p>AVPlayerLayer is a subclass of CALayer to which an AVPlayer object can direct its visual output. It can be used as the backing layer for a UIView or NSView or can be manually added to the layer hierarchy to present your video content on screen.</p></blockquote><p>è´Ÿè´£<code>AVPlayer</code>çš„è§†é¢‘è¾“å‡ºå±•ç¤ºã€‚</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="http://oo8snaf4x.bkt.clouddn.com/15012312808745.png?imageView2/0/q/100" alt="ä¾èµ–å…³ç³»å›¾" title="">                </div>                <div class="image-caption">ä¾èµ–å…³ç³»å›¾</div>            </figure><h3 id="ç®€å•ä½¿ç”¨"><a href="#ç®€å•ä½¿ç”¨" class="headerlink" title="ç®€å•ä½¿ç”¨"></a>ç®€å•ä½¿ç”¨</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">class AVPlayerTestView: UIView &#123;</div><div class="line">    let view: UIView? = nil</div><div class="line">    func initPlayerView() &#123;</div><div class="line">        guard let url = URL.init(string: &quot;http://meipu1.video.meipai.com/5e81c08e-2850-4fbd-bfc4-4ded297f9f1c.mp&quot;) else &#123; return &#125;</div><div class="line">        let asset = AVAsset.init(url: url)</div><div class="line">        let item = AVPlayerItem.init(asset: asset)</div><div class="line">        let player = AVPlayer.init(playerItem: item)</div><div class="line">        let playerLayer = AVPlayerLayer.init(layer: player)</div><div class="line">        view?.layer.addSublayer(playerLayer)</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure><p>è®¾ç½®å¥½ä¸€ä¸ª<code>AVPlayer</code>çš„ä¾èµ–å…³ç³»å’Œè¾“å‡ºå›¾å±‚åï¼Œ<code>AVPlayerItem</code>ä¼šæ ¹æ®ä½ çš„URLå»è¯·æ±‚æ•°æ®ï¼Œè‡ªå·±å†…éƒ¨åšç¼“å†²ç„¶åæ’­æ”¾ã€‚æˆ‘ä»¬éœ€è¦åšçš„æ˜¯ç”¨KVOç›‘å¬<code>AVPlayerItem</code>å†…éƒ¨å‡ ä¸ªå…³é”®å±æ€§çš„çŠ¶æ€ï¼Œç„¶ååšå‡ºæˆ‘ä»¬çš„å¤„ç†ã€‚</p><table><thead><tr><th>AVPlayerItemå±æ€§</th><th>çŠ¶æ€</th></tr></thead><tbody><tr><td>status: AVPlayerItemStatus</td><td></td></tr><tr><td>.unknown: AVPlayerItemStatus</td><td>æœªçŸ¥çŠ¶æ€</td></tr><tr><td>.readyToPlay: AVPlayerItemStatus</td><td>å‡†å¤‡å¥½å»æ’­æ”¾</td></tr><tr><td>.failed: AVPlayerItemStatus</td><td>èµ„æºæ— æ³•è¢«æ’­æ”¾</td></tr><tr><td>loadedTimeRanges: [NSValue]</td><td>åŠ è½½äº†çš„èµ„æºçš„æ—¶é—´èŒƒå›´(ä¸€èˆ¬ç”¨æ¥æ›´æ–°ç¼“å†²UI)</td></tr><tr><td>playbackBufferEmpty: Bool</td><td>æ²¡æœ‰ç¼“å†²æ•°æ®</td></tr><tr><td>playbackLikelyToKeepUp: Bool</td><td>æœ‰è¶³å¤Ÿçš„ç¼“å†²å¤§è‡´èƒ½æ’­æ”¾æ— å¡é¡¿</td></tr></tbody></table><blockquote><p>General State Observations: You can use Key-value observing (KVO) to observe state changes to many of the playerâ€™s dynamic properties, such as its currentItem or its playback rate. You should register and unregister for KVO change notifications on the main thread. This avoids the possibility of receiving a partial notification if a change is being made on another thread. AVFoundation invokes observeValue(forKeyPath:of:change:context:) on the main thread, even if the change operation is made on another thread.</p><hr><p>åŸºæœ¬çŠ¶æ€è§‚å¯Ÿè€…ï¼šä½ èƒ½å¤Ÿä½¿ç”¨KVOæ¥è§‚å¯ŸplayeråŠ¨æ€å±æ€§çš„çŠ¶æ€æ”¹å˜ï¼Œæ¯”å¦‚åƒï¼š currentItem æˆ–è€…å®ƒçš„æ’­æ”¾é€Ÿåº¦ã€‚æˆ‘ä»¬åº”è¯¥åœ¨ä¸»çº¿ç¨‹æ³¨å†Œå’Œå»é™¤KVOï¼Œè¿™èƒ½å¤Ÿé¿å…å¦‚æœåœ¨å…¶å®ƒçº¿ç¨‹å‘é€æ”¹å˜è€Œå¯¼è‡´æ¥æ”¶å±€éƒ¨é€šçŸ¥ï¼Œå½“å‘ç”Ÿé€šçŸ¥ï¼ŒAVFoundationå°†åœ¨ä¸»çº¿ç¨‹è°ƒç”¨observeValue(forKeyPath:of:change:context:) æ–¹æ³•ï¼Œå³ä½¿æ˜¯åœ¨å…¶ä»–çº¿ç¨‹å‘ç”Ÿã€‚</p></blockquote><p>KVOèƒ½å¤Ÿå¾ˆå¥½çš„è§‚å¯Ÿç”Ÿæˆçš„çŠ¶æ€ï¼Œä½†æ˜¯å¹¶ä¸èƒ½å¤Ÿè§‚å¯Ÿæ’­æ”¾æ—¶é—´çš„æ”¹å˜ï¼Œæ‰€ä»¥AVPlayeræä¾›äº†ä¸¤ä¸ªæ–¹æ³•æ¥è§‚å¯Ÿæ—¶é—´çš„æ”¹å˜:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">/*</div><div class="line">    @param interval</div><div class="line">    è°ƒç”¨blockçš„æ—¶é—´é—´éš”</div><div class="line">    @param queue</div><div class="line">    æ¨èä½¿ç”¨ä¸²è¡Œé˜Ÿåˆ—ï¼Œæ”¾åœ¨ä¸»çº¿ç¨‹å°±è¡Œäº†ï¼Œå¹¶è¡Œé˜Ÿåˆ—ä¼šäº§ç”Ÿä¸æ˜ç¡®çš„ç»“æœ</div><div class="line">*/</div><div class="line">func addPeriodicTimeObserver(forInterval interval: CMTime, queue: DispatchQueue?, using block: @escaping (CMTime) -&gt; Void) -&gt; Any &#123;</div><div class="line">    // å¯ä»¥åœ¨é‡Œé¢å»è®¾ç½®æ§åˆ¶çŠ¶æ€ï¼Œåˆ·æ–°è¿›åº¦UI</div><div class="line">&#125;</div><div class="line"></div><div class="line">func addBoundaryTimeObserver(forTimes times: [NSValue], queue: DispatchQueue?, using block: @escaping () -&gt; Void) -&gt; Any</div></pre></td></tr></table></figure><blockquote><p>Tips:</p><ul><li>åˆ›å»ºå¤šä¸ª<code>AVPlayerLayer</code>åªæœ‰æœ€è¿‘çš„layeræ‰ä¼šæ˜¾ç¤ºè§†é¢‘å¸§</li><li>å¯ä»¥åˆ›å»ºå¤šä¸ª<code>AVPlayerItem</code>æ¥æ›¿æ¢<code>AVPlayer</code>çš„å½“å‰itemï¼Œ<code>func replaceCurrentItem(with item: AVPlayerItem?)</code></li><li>ç›‘å¬åè¦æ³¨æ„æ§åˆ¶ç›‘å¬çš„ç”Ÿå‘½å‘¨æœŸ</li></ul></blockquote><h1 id="ç¼“å­˜"><a href="#ç¼“å­˜" class="headerlink" title="ç¼“å­˜"></a>ç¼“å­˜</h1><p>Appleè‡ªæœ‰çš„æ¡†æ¶æ˜¯æ²¡æœ‰æä¾›ç¼“å­˜åŠŸèƒ½çš„ï¼Œ<code>AVPlayer</code>ä¹Ÿæ²¡æœ‰æä¾›ç›´æ¥è·å–å…¶ä¸‹è½½æ•°æ®çš„æ¥å£ï¼Œæ‰€ä»¥æƒ³åšç¼“å­˜åªèƒ½è‡ªå·±æ¥å®Œæ•´çš„å®ç°ã€‚ä¸‹é¢æœ‰å‡ ä¸ªæ–¹æ¡ˆã€‚</p><h2 id="ä¸€ã€è‡ªå·±å®ç°çš„æ’­æ”¾å™¨"><a href="#ä¸€ã€è‡ªå·±å®ç°çš„æ’­æ”¾å™¨" class="headerlink" title="ä¸€ã€è‡ªå·±å®ç°çš„æ’­æ”¾å™¨"></a>ä¸€ã€è‡ªå·±å®ç°çš„æ’­æ”¾å™¨</h2><p>è¿™ç§æƒ…å†µå¤§å¤šæ˜¯æ ¹æ®ä¸‹è½½æ¥çš„æ•°æ®è§£ç æ’­æ”¾ï¼Œä¸‹è½½çš„æ—¶å€™åšä¸‹ç¼“å­˜å°±å¥½äº†</p><h2 id="äºŒã€è‡ªå¸¦æ’­æ”¾å™¨-LocalServer"><a href="#äºŒã€è‡ªå¸¦æ’­æ”¾å™¨-LocalServer" class="headerlink" title="äºŒã€è‡ªå¸¦æ’­æ”¾å™¨+LocalServer"></a>äºŒã€è‡ªå¸¦æ’­æ”¾å™¨+LocalServer</h2><p>åœ¨iOSæœ¬åœ°å¼€å¯<code>Local Server</code>æœåŠ¡ï¼Œç„¶å<code>MPMoviePlayerController</code>è¯·æ±‚æœ¬åœ°<code>Local Server</code>æœåŠ¡ã€‚æœ¬åœ°<code>Local Server</code>æœåŠ¡å†ä¸åœçš„å»å¯¹åº”çš„è§†é¢‘åœ°å€è·å–è§†é¢‘æµã€‚æœ¬åœ°Local Serverè¯·æ±‚çš„æ—¶å€™ï¼Œå°±å¯ä»¥æŠŠè§†é¢‘æµç¼“å­˜åœ¨æœ¬åœ°ã€‚<a href="http://code4app.com/ios/è§†é¢‘è¾¹ä¸‹è½½è¾¹æ’­æ”¾/5292c381cb7e8445678b5ac2#" target="_blank" rel="noopener">Demoæ¥æº:Code4App</a></p><h2 id="ä¸‰ã€AVPlayer-AVMutableComposition-AVAssetExportSession"><a href="#ä¸‰ã€AVPlayer-AVMutableComposition-AVAssetExportSession" class="headerlink" title="ä¸‰ã€AVPlayer+AVMutableComposition+AVAssetExportSession"></a>ä¸‰ã€AVPlayer+AVMutableComposition+AVAssetExportSession</h2><p>åŸç†æ˜¯ç›´æ¥ç»™<code>AVPlayer</code>ä¼ URLï¼Œè®©å…¶å†…éƒ¨è‡ªå·±å»å¤„ç†æ•°æ®ä¸‹è½½ï¼Œç„¶åé€šè¿‡<code>AVMutableComposition</code>å’Œ<code>AVAssetExportSession</code>ä»<code>AVAsset</code>æå–è§†é¢‘çš„æ•°æ®è¿›è¡Œç¼“å­˜ã€‚</p><h3 id="AVMutableComposition"><a href="#AVMutableComposition" class="headerlink" title="AVMutableComposition"></a>AVMutableComposition</h3><blockquote><p>AVMutableComposition is a mutable subclass of AVComposition you use when you want to create a new composition from existing assets. You can add and remove tracks, and you can add, remove, and scale time ranges.</p></blockquote><p>ä½œç”¨æ˜¯ä»ç°æœ‰çš„<code>AVAsset</code>ä¸­åˆ›å»ºå‡ºä¸€ä¸ªæ–°çš„<code>AVComposition</code>ï¼Œä½¿ç”¨è€…èƒ½å¤Ÿä»åˆ«çš„assetä¸­æå–ä»–ä»¬çš„éŸ³é¢‘è½¨é“æˆ–è§†é¢‘è½¨é“ï¼Œå¹¶ä¸”æŠŠå®ƒä»¬æ·»åŠ åˆ°æ–°å»ºçš„compositionä¸­ã€‚</p><h3 id="AVAssetExportSession"><a href="#AVAssetExportSession" class="headerlink" title="AVAssetExportSession"></a>AVAssetExportSession</h3><blockquote><p>An AVAssetExportSession object transcodes the contents of an AVAsset source object to create an output of the form described by a specified export preset.</p></blockquote><p>ä½œç”¨æ˜¯æŠŠ<code>AVAsset</code>è§£ç è¾“å‡ºåˆ°æœ¬åœ°æ–‡ä»¶ä¸­ã€‚</p><p>å…³é”®éœ€è¦æŠŠåŸå…ˆçš„<code>AVAsset(AVURLAsset)</code>å®ç°çš„æ•°æ®æå–å‡ºæ¥åæ‹¼æ¥æˆå¦ä¸€ä¸ª<code>AVAsset(AVComposition)</code>çš„æ•°æ®ç„¶åè§£ç è¾“å‡ºï¼Œç”±äºé€šè¿‡ç½‘ç»œurlä¸‹è½½ä¸‹æ¥çš„è§†é¢‘æ²¡æœ‰ä¿å­˜è§†é¢‘çš„åŸå§‹æ•°æ®ï¼ˆè‹¹æœæ²¡æœ‰æš´éœ²æ¥å£ç»™æˆ‘ä»¬è·å–ï¼‰ï¼Œä¸‹è½½åæ’­æ”¾çš„avassetä¸èƒ½ä½¿ç”¨<code>AVAssetExportSession</code>è¾“å‡ºåˆ°æœ¬åœ°æ–‡ä»¶ï¼Œè¦æ›²çº¿åœ°æŠŠä¸‹è½½ä¸‹æ¥çš„è§†é¢‘é€šè¿‡é‡æ„æˆå¦å¤–ä¸€ä¸ª<code>AVAsset</code>å®ä¾‹æ‰èƒ½è¾“å‡ºã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line">NSString *documentDirectory = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES)[0];</div><div class="line">NSString *myPathDocument = [documentDirectory stringByAppendingPathComponent:[NSString stringWithFormat:@&quot;%@.mp4&quot;,[_source.videoUrl MD5]]];</div><div class="line"></div><div class="line"></div><div class="line">NSURL *fileUrl = [NSURL fileURLWithPath:myPathDocument];</div><div class="line"></div><div class="line">if (asset != nil) &#123;</div><div class="line">AVMutableComposition *mixComposition = [[AVMutableComposition alloc]init];</div><div class="line">AVMutableCompositionTrack *firstTrack = [mixComposition addMutableTrackWithMediaType:AVMediaTypeVideo preferredTrackID:kCMPersistentTrackID_Invalid];</div><div class="line">[firstTrack insertTimeRange:CMTimeRangeMake(kCMTimeZero, asset.duration) ofTrack:[[asset tracksWithMediaType:AVMediaTypeVideo]objectAtIndex:0] atTime:kCMTimeZero error:nil];</div><div class="line"></div><div class="line">AVMutableCompositionTrack *audioTrack = [mixComposition addMutableTrackWithMediaType:AVMediaTypeAudio preferredTrackID:kCMPersistentTrackID_Invalid];</div><div class="line">[audioTrack insertTimeRange:CMTimeRangeMake(kCMTimeZero, asset.duration) ofTrack:[[asset tracksWithMediaType:AVMediaTypeAudio]objectAtIndex:0] atTime:kCMTimeZero error:nil];</div><div class="line"></div><div class="line">AVAssetExportSession *exporter = [[AVAssetExportSession alloc]initWithAsset:mixComposition presetName:AVAssetExportPresetHighestQuality];</div><div class="line">exporter.outputURL = fileUrl;</div><div class="line">if (exporter.supportedFileTypes) &#123;</div><div class="line">exporter.outputFileType = [exporter.supportedFileTypes objectAtIndex:0] ;</div><div class="line">exporter.shouldOptimizeForNetworkUse = YES;</div><div class="line">[exporter exportAsynchronouslyWithCompletionHandler:^&#123;</div><div class="line"></div><div class="line">&#125;];</div><div class="line"></div><div class="line">&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure><h2 id="å››ã€AVPlayer-AVAssetResourceLoader"><a href="#å››ã€AVPlayer-AVAssetResourceLoader" class="headerlink" title="å››ã€AVPlayer+AVAssetResourceLoader"></a>å››ã€AVPlayer+AVAssetResourceLoader</h2><h3 id="AVAssetResourceLoadingRequest"><a href="#AVAssetResourceLoadingRequest" class="headerlink" title="AVAssetResourceLoadingRequest"></a>AVAssetResourceLoadingRequest</h3><blockquote><p>An AVAssetResourceLoader object mediates resource requests from an AVURLAsset object with a delegate object that you provide. When a request arrives, the resource loader asks your delegate if it is able to handle the request and reports the results back to the asset.<br><code>AVAssetResourceLoader</code>åè°ƒæ¥è‡ª<code>AVURLAsset</code>çš„èµ„æºè¯·æ±‚ï¼Œä½ éœ€è¦å®ç°å®ƒçš„<code>delegate</code>ã€‚å½“æ”¶åˆ°ä¸€ä¸ªè¯·æ±‚æ—¶ï¼Œ<code>ResourceLoader</code>è¯¢é—®ä½ çš„<code>delegate</code>æ˜¯å¦èƒ½å¤„ç†å¹¶å°†ç»“æœè¿”å›ç»™<code>asset</code>ã€‚</p></blockquote><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="http://oo8snaf4x.bkt.clouddn.com/15003581605281.jpg?imageView2/0/q/100" alt="AVPlayerå’ŒAVAssetResourceLoaderçš„å±‚æ¬¡ç»“æ„" title="">                </div>                <div class="image-caption">AVPlayerå’ŒAVAssetResourceLoaderçš„å±‚æ¬¡ç»“æ„</div>            </figure><p><code>AVAssetResourceLoader</code>é€šè¿‡ä½ æä¾›çš„å§”æ‰˜å¯¹è±¡å»è°ƒèŠ‚<code>AVURLAsset</code>æ‰€éœ€è¦çš„åŠ è½½èµ„æºã€‚è€Œå¾ˆé‡è¦çš„ä¸€ç‚¹æ˜¯ï¼Œ<code>AVAssetResourceLoader</code>ä»…åœ¨<code>AVURLAsset</code>ä¸çŸ¥é“å¦‚ä½•å»åŠ è½½è¿™ä¸ªURLèµ„æºæ—¶æ‰ä¼šè¢«è°ƒç”¨ï¼Œå°±æ˜¯è¯´ä½ æä¾›çš„å§”æ‰˜å¯¹è±¡åœ¨<code>AVURLAsset</code>ä¸çŸ¥é“å¦‚ä½•åŠ è½½èµ„æºæ—¶æ‰ä¼šå¾—åˆ°è°ƒç”¨ã€‚ä¸€èˆ¬æˆ‘ä»¬å¯ä»¥æ›´æ”¹URLçš„schemeç”¨æ¥éšè—çœŸå®çš„URLã€‚å¦‚ï¼š</p><blockquote><p>å‚è€ƒ<br><a href="http://www.cnblogs.com/kenshincui/p/4186022.html#video" target="_blank" rel="noopener">iOSå¼€å‘ç³»åˆ—â€“éŸ³é¢‘æ’­æ”¾ã€å½•éŸ³ã€è§†é¢‘æ’­æ”¾ã€æ‹ç…§ã€è§†é¢‘å½•åˆ¶</a><br><a href="http://blog.csdn.net/longshihua/article/details/53909733" target="_blank" rel="noopener">AVplayerå®ç°æ’­æ”¾æœ¬åœ°å’Œç½‘ç»œè§†é¢‘ï¼ˆSwift3.0ï¼‰</a><br><a href="http://www.cnblogs.com/zy1987/p/5028624.html" target="_blank" rel="noopener">iOSè§†é¢‘æµå¼€å‘ï¼ˆ2ï¼‰â€”è§†é¢‘æ’­æ”¾</a><br><a href="http://msching.github.io/blog/2016/05/24/audio-in-ios-9/" target="_blank" rel="noopener">iOSéŸ³é¢‘æ’­æ”¾ (ä¹)ï¼šè¾¹æ’­è¾¹ç¼“å­˜</a><br><a href="http://sky-weihao.github.io/2015/10/06/Video-streaming-and-caching-in-iOS/" target="_blank" rel="noopener">iOSéŸ³è§†é¢‘å®ç°è¾¹ä¸‹è½½è¾¹æ’­æ”¾</a><br><a href="http://www.jianshu.com/p/9805be76ee68" target="_blank" rel="noopener">AVFoundation(äºŒ)ï¼šæ ¸å¿ƒAVAsset</a><br><a href="http://1199game.com/2016/10/avfoundation-2/" target="_blank" rel="noopener">AVFoundationç¼–ç¨‹æŒ‡å—2-ç”¨AVPlayeræ’­æ”¾è§†é¢‘</a><br><a href="http://www.jianshu.com/p/c6be05ffe418" target="_blank" rel="noopener">AV Foundationç³»åˆ—ï¼ˆäº”ï¼‰åª’ä½“ç»„åˆ</a></p></blockquote>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;ä¸‹é¢æœƒä»‹ç´¹è¦–é »çš„ä¸€äº›åŸºæœ¬çŸ¥è­˜ï¼Œå’Œåœ¨iOSä¸Šå¯¦ç¾è¦–é »æ’­æ”¾å’Œç·©å­˜çš„å¹¾ç¨®æ–¹æ¡ˆã€‚&lt;/p&gt;
&lt;blockquote&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;è½¯è§£ç å’Œç¡¬è§£ç &lt;/strong&gt;&lt;br&gt;GPUè§£ç å°±æ˜¯æ‰€è°“çš„ç¡¬è§£ç ï¼ŒCPUè§£ç å°±æ˜¯è½¯è§£ç ã€‚iOSæä¾›çš„æ’­æ”¾å™¨ç±»ä½¿ç”¨çš„æ˜¯ç¡¬è§£ç ï¼Œæ‰€ä»¥è§†
      
    
    </summary>
    
      <category term="iOS" scheme="http://codingdoge.cn/categories/iOS/"/>
    
    
      <category term="Swift" scheme="http://codingdoge.cn/tags/Swift/"/>
    
  </entry>
  
  <entry>
    <title>æœ‰é™çŠ¶æ€æœºåœ¨iOSä¸­çš„åº”ç”¨</title>
    <link href="http://codingdoge.cn/2017/07/23/title:%20%E6%9C%89%E9%99%90%E7%8A%B6%E6%80%81%E6%9C%BA%E5%9C%A8iOS%E4%B8%AD%E7%9A%84%E5%BA%94%E7%94%A8/"/>
    <id>http://codingdoge.cn/2017/07/23/title: æœ‰é™çŠ¶æ€æœºåœ¨iOSä¸­çš„åº”ç”¨/</id>
    <published>2017-07-23T15:47:00.000Z</published>
    <updated>2018-01-13T05:06:26.865Z</updated>
    
    <content type="html"><![CDATA[<p>æœ‰é™çŠ¶æ€æœº(Finite-State Machine, FSM)ï¼Œæ˜¯è¡¨ç¤ºæœ‰é™ä¸ªçŠ¶æ€ä»¥åŠåœ¨è¿™äº›çŠ¶æ€ä¹‹é—´çš„è½¬ç§»å’ŒåŠ¨ä½œç­‰è¡Œä¸ºçš„æ•°å­¦æ¨¡å‹ã€‚</p><p>å…¶å®æˆ‘ä»¬å¹³å¸¸å’Œå¾ˆå¤šçŠ¶æ€æœºéƒ½æ‰“è¿‡äº¤é“ï¼Œæ¯”å¦‚æ­£åˆ™è¡¨è¾¾å¼ã€ç½‘ç»œåè®®ï¼ˆå¦‚TCPåè®®çŠ¶æ€æœºï¼‰ã€æ¸¸æˆè®¾è®¡ã€å­—ç¬¦ä¸²åŒ¹é…ç­‰ç­‰ï¼Œå¯èƒ½å¤§å¤šæ•°æ—¶å€™æˆ‘ä»¬éƒ½æ²¡æ„è¯†åˆ°ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬ç®€ç•¥äº†è§£ä¸‹çŠ¶æ€æœºã€‚</p><h2 id="åŸºæœ¬æ¦‚å¿µ"><a href="#åŸºæœ¬æ¦‚å¿µ" class="headerlink" title="åŸºæœ¬æ¦‚å¿µ"></a>åŸºæœ¬æ¦‚å¿µ</h2><ul><li>çŠ¶æ€(state): æŒ‡çš„æ˜¯å¯¹è±¡åœ¨å…¶ç”Ÿå‘½å‘¨æœŸä¸­çš„ä¸€ç§çŠ¶å†µï¼Œå¤„äºæŸä¸ªç‰¹å®šçŠ¶æ€ä¸­çš„å¯¹è±¡å¿…ç„¶ä¼šæ»¡è¶³æŸäº›æ¡ä»¶ã€æ‰§è¡ŒæŸäº›åŠ¨ä½œæˆ–è€…æ˜¯ç­‰å¾…æŸäº›äº‹ä»¶ï¼Œè€Œä¸”çŠ¶æ€æ˜¯ç›¸å¯¹ç¨³å®šçš„ï¼Œå¦‚æœæ²¡æœ‰å¤–éƒ¨æ¡ä»¶çš„è§¦å‘ï¼Œä¸€ä¸ªçŠ¶æ€ä¼šä¸€ç›´æŒç»­ä¸‹å»ã€‚</li><li>äº‹ä»¶(event): æŒ‡çš„æ˜¯å¯¹çŠ¶æ€æœºæ¥è®²æ˜¯æœ‰æ„ä¹‰çš„é‚£äº›äº‹æƒ…ã€‚äº‹ä»¶é€šå¸¸ä¼šå¼•èµ·çŠ¶æ€çš„å˜è¿ï¼Œä¿ƒä½¿çŠ¶æ€æœºä»ä¸€ç§çŠ¶æ€åˆ‡æ¢åˆ°å¦ä¸€ç§çŠ¶æ€ã€‚</li><li>è½¬æ¢(transition): æŒ‡çš„æ˜¯ä¸¤ä¸ªçŠ¶æ€ä¹‹é—´çš„ä¸€ç§å…³ç³»ï¼Œè¡¨æ˜å¯¹è±¡å°†åœ¨ç¬¬ä¸€ä¸ªçŠ¶æ€ä¸­æ‰§è¡Œä¸€å®šçš„åŠ¨ä½œï¼Œå¹¶å°†åœ¨æŸä¸ªäº‹ä»¶å‘ç”Ÿçš„åŒæ—¶æŸä¸ªç‰¹å®šæ¡ä»¶æ»¡è¶³æ—¶è¿›å…¥ç¬¬äºŒä¸ªçŠ¶æ€ã€‚</li><li>åŠ¨ä½œ(action): æŒ‡çš„æ˜¯çŠ¶æ€æœºä¸­å¯ä»¥æ‰§è¡Œçš„é‚£äº›æ“ä½œï¼Œå½“äº‹ä»¶è¢«æ»¡è¶³æˆ–è€…çŠ¶æ€å˜è¿æ—¶æ‰§è¡ŒåŠ¨ä½œï¼ŒåŠ¨ä½œä¸æ˜¯å¿…éœ€çš„ã€‚</li></ul><p>å¦‚ä¸‹å›¾çŠ¶æ€è¡¨ï¼š<br><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="http://oo8snaf4x.bkt.clouddn.com/15001875969881.jpg?imageView2/0/q/100" alt="" title="">                </div>                <div class="image-caption"></div>            </figure></p><blockquote><p>å…³äºçŠ¶æ€æœºçš„è¯¦ç»†çŸ¥è¯†å¯ä»¥å‚è€ƒï¼š<br><a href="http://state-machine.com/psicc2/index.php" target="_blank" rel="noopener">UMLçŠ¶æ€å›¾çš„å®ç”¨C/C++è®¾è®¡</a><br><a href="http://erlang.org/doc/man/gen_fsm.html" target="_blank" rel="noopener">ERLANG</a></p></blockquote><h2 id="åœ¨iOSä¸­çš„ä½¿ç”¨"><a href="#åœ¨iOSä¸­çš„ä½¿ç”¨" class="headerlink" title="åœ¨iOSä¸­çš„ä½¿ç”¨"></a>åœ¨iOSä¸­çš„ä½¿ç”¨</h2><h3 id="èƒŒæ™¯"><a href="#èƒŒæ™¯" class="headerlink" title="èƒŒæ™¯"></a>èƒŒæ™¯</h3><p>å‡è®¾æˆ‘ä»¬è¦è®¾è®¡ä¸€æ¬¾ç½‘ç»œè§†é¢‘æ’­æ”¾å™¨ï¼Œæœ‰åŸºæœ¬çš„æ’­æ”¾ã€æš‚åœåŠŸèƒ½ï¼Œå½“ç¼“å†²å¥½æ—¶å¯ä»¥è¿›è¡Œæ’­æ”¾ï¼Œå½“URLé”™è¯¯æˆ–è€…è§†é¢‘èµ„æºé”™è¯¯æ—¶æ’­æ”¾å¤±è´¥ï¼Œæˆ‘ä»¬å‘ç°ï¼Œå½“æˆ‘ä»¬å»æè¿°ä¸€ä¸ªäº‹ç‰©ä»¥åŠå®ƒçš„åŠŸèƒ½æ—¶ï¼Œæ€»æ˜¯ç¦»ä¸å¼€å®ƒçš„çŠ¶æ€ï¼Œå¦‚è¿™ä¸ªæ’­æ”¾å™¨ï¼Œæˆ‘ä»¬å¯ä»¥å®šä¹‰å®ƒæœ‰æ’­æ”¾å¤±è´¥ã€ç¼“å†²ä¸­ã€å°†è¦æ’­æ”¾â€¦ç­‰ç­‰çŠ¶æ€ã€‚</p><h3 id="è®¾è®¡"><a href="#è®¾è®¡" class="headerlink" title="è®¾è®¡"></a>è®¾è®¡</h3><p>æˆ‘ä»¬å¯ä»¥ç”¨çŠ¶æ€æœºå»å®ç°è¿™æ ·çš„åŠŸèƒ½ã€‚ </p><ul><li>å…ˆè®¾å®šæ’­æ”¾å™¨å¯èƒ½å‡ºç°çš„çŠ¶æ€ï¼š</li></ul><figure class="highlight crystal"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">enum</span> <span class="title">VideoPlayerState</span> &#123;</span></div><div class="line">    <span class="keyword">case</span> failed,           <span class="regexp">//</span> æ’­æ”¾å¤±è´¥</div><div class="line">         buffering,        <span class="regexp">//</span> ç¼“å†²ä¸­</div><div class="line">         readyToPlay,      <span class="regexp">//</span> å°†è¦æ’­æ”¾</div><div class="line">         playing,          <span class="regexp">//</span> æ’­æ”¾ä¸­</div><div class="line">         paused,           <span class="regexp">//</span> æ’­æ”¾æš‚åœ</div><div class="line">         finished          /<span class="regexp">/ æ’­æ”¾å®Œæ¯•</span></div><div class="line">&#125;</div></pre></td></tr></table></figure><ul><li>ç„¶åå®šä¹‰å½“çŠ¶æ€å‘ç”Ÿå˜æ¢åï¼Œé’ˆå¯¹æŸä¸ªçŠ¶æ€æˆ‘å¸Œæœ›å®ƒå»æ‰§è¡Œä¸€äº›é€»è¾‘é‡Œçš„åŠ¨ä½œ</li></ul><figure class="highlight stylus"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line"><span class="selector-tag">var</span> state: VideoPlayerState = <span class="selector-class">.paused</span> &#123;</div><div class="line">    didSet &#123;</div><div class="line">        switch state &#123;</div><div class="line">            case <span class="selector-class">.failed</span>:</div><div class="line">            <span class="comment">// å½“è§†é¢‘åŠ è½½å¤±è´¥æ—¶ï¼Œæˆ‘å¸Œæœ›å»æ‰§è¡Œçš„ä¸€äº›äº‹ä»¶ï¼Œæ¯”å¦‚å¼¹å‡ºæç¤ºæ¡†</span></div><div class="line">            popReminderView()</div><div class="line">            </div><div class="line">            case <span class="selector-class">.buffering</span>:</div><div class="line">            </div><div class="line">            case <span class="selector-class">.readyToPlay</span>:</div><div class="line">            </div><div class="line">            case <span class="selector-class">.playing</span>:</div><div class="line">            </div><div class="line">            case <span class="selector-class">.paused</span>:</div><div class="line">            </div><div class="line">            case <span class="selector-class">.finished</span>:</div><div class="line">            </div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure><ul><li>åœ¨å†™æˆ‘ä»¬çš„ä¸šåŠ¡é€»è¾‘æ—¶ï¼Œç›¸åº”çš„å»æ›´æ”¹æ’­æ”¾å™¨çš„çŠ¶æ€</li></ul><figure class="highlight stylus"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// æ¯”å¦‚æˆ‘ä»¬é‡å†™ç½‘ç»œå±‚çš„ä¸€äº›æ–¹æ³•ï¼Œå½“ç¼“å†²å¥½æ—¶å‡†å¤‡æ’­æ”¾</span></div><div class="line"><span class="function"><span class="title">networkRequestCompletion</span><span class="params">()</span></span> &#123;</div><div class="line"></div><div class="line">    state = <span class="selector-class">.readyToPlay</span></div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure><p>è¿™æ ·ï¼Œé€šè¿‡<code>state</code>æˆ‘ä»¬èƒ½å¾ˆæ¸…æ™°çš„çŸ¥é“ç°åœ¨æ’­æ”¾å™¨æ˜¯ä»€ä¹ˆæ ·åº”è¯¥åšä»€ä¹ˆäº‹ï¼Œåœ¨æˆ‘ä»¬çš„ä¸šåŠ¡é€»è¾‘ä¸­ï¼Œå½“çŠ¶æ€å˜åŒ–æ—¶é€šè¿‡<code>didSet</code>æˆ‘ä»¬èƒ½å¾ˆæ–¹ä¾¿çš„å»å“åº”å¯¹åº”çŠ¶æ€ä¸‹åº”è¯¥æ‰§è¡Œçš„è¡Œä¸ºã€‚</p><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>æ•´ç¯‡æ–‡ç« è´¨é‡æˆ–è®¸ä¸æ˜¯å¾ˆé«˜ï¼Œå› ä¸ºè¿˜æ²¡æœ‰å¤§é‡çš„ä»£ç å®è·µè®©æˆ‘å»æœ‰ä¸€ä¸ªæ›´æ·±æ›´å…¨çš„ä½“ä¼šï¼Œä½†æ˜¯å¸Œæœ›èƒ½å¸¦ç»™æˆ‘è‡ªå·±å’Œè¯»è€…ä»¬ä¸€ç‚¹æŠ›ç –å¼•ç‰çš„æ•ˆæœã€‚æˆ‘ä»¬åœ¨ç¼–ç ã€è®¾è®¡è¿‡ç¨‹ä¸­ï¼Œå¤šå»æ€è€ƒä¸€äº›ï¼Œä»€ä¹ˆåœ°æ–¹ç”¨ä»€ä¹ˆæ ·çš„æ¨¡å¼æ›´å¥½ï¼Œæ¯”å¦‚çŠ¶æ€æœºï¼Œæ¥ä½¿æˆ‘ä»¬çš„ä»£ç æ›´è§£è€¦ï¼Œæ˜“ç»´æŠ¤ï¼Œé«˜æ‰©å±•ã€‚</p><blockquote><p>è¿™é‡Œæœ‰ä¸€ç¯‡å…³äº<a href="http://www.jianshu.com/p/5eb45c64f3e3" target="_blank" rel="noopener">Objective-cçŠ¶æ€æœºçš„å®ç°</a>ï¼Œæ›´æŠ½è±¡ï¼Œå…¶ä¸­ç”¨åˆ°çš„æšä¸¾å€¼è‡ªåŠ¨è½¬å­—ç¬¦ä¸²é€šç”¨æ–¹æ¡ˆå¾ˆæœ‰æ„æ€ï¼ŒåŒæ—¶å¯ä»¥å‚è€ƒè¿™ç¯‡ã€Š<a href="http://blog.csdn.net/songrotek/article/details/8929963" target="_blank" rel="noopener">iOSå¼€å‘é«˜çº§:ä½¿ç”¨å®å®šä¹‰macros</a>ã€‹å…³äºå®å®šä¹‰çš„ä½¿ç”¨ã€‚<br>è¿™ç¯‡ã€Š<a href="http://studentdeng.github.io/blog/2014/11/05/ios-architecture2/" target="_blank" rel="noopener">iOS APP æ¶æ„æ¼«è°ˆäºŒ</a>ã€‹åˆ—ä¸¾äº†å¾ˆå…·ä½“çš„è¿ç”¨åœºæ™¯ï¼Œå¯ä»¥å‚è€ƒã€‚<br>åŒæ—¶å‚è€ƒçš„æ–‡ç« æœ‰ï¼š</p><ul><li><a href="http://helloitworks.com/754.html" target="_blank" rel="noopener">æœ‰é™çŠ¶æ€æœº</a></li><li><a href="http://www.cnblogs.com/chencheng/archive/2012/06/25/2562660.html" target="_blank" rel="noopener">æœ‰é™çŠ¶æ€æœºï¼ˆFSMï¼‰çš„è®¾è®¡ä¸å®ç°</a></li></ul><p>å…³äºçŠ¶æ€è®°çš„å¼€æºåº“æ¨èï¼š</p><ul><li>Objective-C: <a href="https://github.com/blakewatters/TransitionKit" target="_blank" rel="noopener">TransitionKit</a></li><li>Swift:<a href="https://github.com/ReactKit/SwiftTask" target="_blank" rel="noopener">SwiftTask</a></li></ul></blockquote>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;æœ‰é™çŠ¶æ€æœº(Finite-State Machine, FSM)ï¼Œæ˜¯è¡¨ç¤ºæœ‰é™ä¸ªçŠ¶æ€ä»¥åŠåœ¨è¿™äº›çŠ¶æ€ä¹‹é—´çš„è½¬ç§»å’ŒåŠ¨ä½œç­‰è¡Œä¸ºçš„æ•°å­¦æ¨¡å‹ã€‚&lt;/p&gt;
&lt;p&gt;å…¶å®æˆ‘ä»¬å¹³å¸¸å’Œå¾ˆå¤šçŠ¶æ€æœºéƒ½æ‰“è¿‡äº¤é“ï¼Œæ¯”å¦‚æ­£åˆ™è¡¨è¾¾å¼ã€ç½‘ç»œåè®®ï¼ˆå¦‚TCPåè®®çŠ¶æ€æœºï¼‰ã€æ¸¸æˆè®¾è®¡ã€å­—ç¬¦ä¸²åŒ¹é…ç­‰ç­‰ï¼Œå¯èƒ½å¤§å¤šæ•°æ—¶å€™æˆ‘ä»¬
      
    
    </summary>
    
      <category term="iOS" scheme="http://codingdoge.cn/categories/iOS/"/>
    
    
  </entry>
  
  <entry>
    <title>Objective-Cå£°æ˜åœ¨å¤´æ–‡ä»¶å’Œå®ç°æ–‡ä»¶ä¸­çš„åŒºåˆ«</title>
    <link href="http://codingdoge.cn/2017/07/23/title:%20Objective-C%E5%A3%B0%E6%98%8E%E5%9C%A8%E5%A4%B4%E6%96%87%E4%BB%B6%E5%92%8C%E5%AE%9E%E7%8E%B0%E6%96%87%E4%BB%B6%E4%B8%AD%E7%9A%84%E5%8C%BA%E5%88%AB%20%20/"/>
    <id>http://codingdoge.cn/2017/07/23/title: Objective-Cå£°æ˜åœ¨å¤´æ–‡ä»¶å’Œå®ç°æ–‡ä»¶ä¸­çš„åŒºåˆ«  /</id>
    <published>2017-07-23T15:47:00.000Z</published>
    <updated>2018-01-14T16:53:10.421Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>è½¬è‡ª<a href="http://codecloud.net/objective-c-6782.html" target="_blank" rel="noopener">codecloud</a>(æœ‰æ•´ç†)</p></blockquote><h2 id="è°ƒè¯•ç¨‹åºçš„æ—¶å€™ï¼Œçªç„¶æƒ³åˆ°è¿™ä¸ªé—®é¢˜ï¼Œç™¾åº¦ä¸€ä¸‹å‘ç°æœ‰ä¸å°‘è¿™æ–¹é¢çš„é—®ç­”ï¼Œç²—ç•¥æ€»ç»“ä¸€ä¸‹"><a href="#è°ƒè¯•ç¨‹åºçš„æ—¶å€™ï¼Œçªç„¶æƒ³åˆ°è¿™ä¸ªé—®é¢˜ï¼Œç™¾åº¦ä¸€ä¸‹å‘ç°æœ‰ä¸å°‘è¿™æ–¹é¢çš„é—®ç­”ï¼Œç²—ç•¥æ€»ç»“ä¸€ä¸‹" class="headerlink" title="è°ƒè¯•ç¨‹åºçš„æ—¶å€™ï¼Œçªç„¶æƒ³åˆ°è¿™ä¸ªé—®é¢˜ï¼Œç™¾åº¦ä¸€ä¸‹å‘ç°æœ‰ä¸å°‘è¿™æ–¹é¢çš„é—®ç­”ï¼Œç²—ç•¥æ€»ç»“ä¸€ä¸‹:"></a>è°ƒè¯•ç¨‹åºçš„æ—¶å€™ï¼Œçªç„¶æƒ³åˆ°è¿™ä¸ªé—®é¢˜ï¼Œç™¾åº¦ä¸€ä¸‹å‘ç°æœ‰ä¸å°‘è¿™æ–¹é¢çš„é—®ç­”ï¼Œç²—ç•¥æ€»ç»“ä¸€ä¸‹:</h2><ul><li>å±æ€§å†™åœ¨.hæ–‡ä»¶ä¸­å’Œåœ¨.mæ–‡ä»¶ä¸­æœ‰ä»€ä¹ˆåŒºåˆ«?</li></ul><p>Objective-Cä¸­æœ‰åˆ†ç±»å’Œç±»æ‰©å±•çš„æ¦‚å¿µï¼Œè€Œå®ç°æ–‡ä»¶ä¸­çš„ç±»å£°æ˜å®é™…ä¸Šå°±æ˜¯ç±»æ‰©å±•.</p><blockquote><p>@interfaceéƒ¨åˆ†ä¸ºç±»æ‰©å±•ï¼ˆextensionï¼‰</p></blockquote><p>å…¶è¢«è®¾è®¡å‡ºæ¥å°±æ˜¯ä¸ºäº†è§£å†³ä¸¤ä¸ªé—®é¢˜çš„</p><ol><li>å®šä¹‰ç±»ç§æœ‰æ–¹æ³•çš„åœ°æ–¹ï¼Œä¹Ÿå°±æ˜¯ä¸‹é¢è¯´åˆ°çš„åŒºåˆ«ä¸€</li><li>å®ç°public readonly,private readwriteçš„propertyï¼ˆæ„æ€æ˜¯åœ¨hå¤´æ–‡ä»¶ä¸­å®šä¹‰ä¸€ä¸ªå±æ€§å¯¹å¤–æ˜¯readonlyçš„ï¼Œä½†åœ¨ç±»çš„å†…éƒ¨å¸Œæœ›æ˜¯å¯è¯»å†™çš„ï¼Œæ‰€ä»¥å¯ä»¥åœ¨mæºæ–‡ä»¶ä¸­çš„@interfaceéƒ¨åˆ†é‡æ–°å®šä¹‰æ­¤å±æ€§ä¸ºreadwriteï¼Œæ­¤æ—¶æ­¤å±æ€§å¯¹å¤–æ˜¯åªè¯»çš„ï¼Œå¯¹å†…æ˜¯è¯»å†™çš„ï¼‰.  </li></ol><p>æ­¤å¤–ï¼Œä¹Ÿå¯åœ¨æ­¤éƒ¨åˆ†ç”³æ˜å˜é‡å’Œå±æ€§ï¼Œä½†ç”³æ˜çš„å˜é‡ï¼Œå±æ€§å’Œæ–¹æ³•å‡ä¸ºç§æœ‰çš„ï¼Œåªèƒ½å¤Ÿè¢«å½“å‰ç±»è®¿é—®ï¼Œç›¸å½“äºprivateã€‚</p><h3 id="åŒºåˆ«ä¸€ï¼š"><a href="#åŒºåˆ«ä¸€ï¼š" class="headerlink" title="åŒºåˆ«ä¸€ï¼š"></a>åŒºåˆ«ä¸€ï¼š</h3><p>å±æ€§åœ¨.hæ–‡ä»¶ä¸­å’Œåœ¨.mä¸­å£°æ˜æ˜¯æœ‰åŒºåˆ«çš„ã€‚åŒºåˆ«å°±æ˜¯ï¼Œåœ¨.hæ–‡ä»¶ä¸­å£°æ˜çš„å±æ€§ï¼Œå¤–éƒ¨ç±»å¯ä»¥é€šè¿‡â€œç±»å®ä¾‹.å±æ€§â€æ¥è°ƒç”¨ï¼Œä½†åœ¨.mä¸­å£°æ˜çš„åˆ™ä¸å¯ä»¥ï¼Œè·å–å’Œè®¾ç½®çš„æ–¹æ³•ï¼Œåªèƒ½æ˜¯é€šè¿‡setValue:forKeyå’ŒvalueForKeyæ¥å®ç°ã€‚</p><p>æˆå‘˜å˜é‡ï¼Œæœ‰ä¸‰ç§æƒé™ï¼Œå°±æ˜¯å¤§å®¶éƒ½çŸ¥é“çš„@privateã€@protectedã€@public ï¼Œå†™åœ¨.mæ–‡ä»¶ä¸­æ—¶ï¼Œç›¸å½“äºæ˜¯@privateæƒé™ï¼Œå­ç±»æ— æ³•è®¿é—®ï¼ŒéªŒè¯äº†ä¸€ä¸‹ï¼Œåšæƒé™ä¿®æ”¹ä¹Ÿæ— æ•ˆã€‚è€Œå†™åœ¨.hæ–‡ä»¶ä¸­ï¼Œé»˜è®¤æ˜¯@protectedæƒé™ï¼Œå­ç±»å¯ä»¥è®¿é—®ï¼Œå¯ä»¥åšæƒé™ä¿®æ”¹ã€‚å› ä¸ºè®¿é—®æƒé™æŒ‡é’ˆå¯¹.hæ–‡ä»¶ã€‚.hæ–‡ä»¶ä¸­æˆå‘˜å˜é‡ï¼Œå¤–éƒ¨ç±»å¯¹å…¶çš„è°ƒç”¨ï¼Œè·ŸC++ä¸€æ ·ï¼Œç”¨-&gt;æ¥è°ƒç”¨ã€‚</p><h3 id="åŒºåˆ«äºŒ"><a href="#åŒºåˆ«äºŒ" class="headerlink" title="åŒºåˆ«äºŒ"></a>åŒºåˆ«äºŒ</h3><p>è¿™æ ·å¯ä»¥æé«˜ç¼–è¯‘æ•ˆç‡ï¼Œé¿å…é‡å¤ç¼–è¯‘ã€‚<br>å› ä¸ºåˆ†å¼€çš„è¯åªéœ€è¦ç¼–è¯‘ä¸€æ¬¡ç”Ÿæˆå¯¹åº”çš„.objæ–‡ä»¶åï¼Œå†æ¬¡åº”ç”¨è¯¥ç±»çš„åœ°æ–¹ï¼Œè¿™ä¸ªç±»å°±ä¸ä¼šè¢«å†æ¬¡ç¼–è¯‘ï¼Œä»è€Œå¤§å¤§æé«˜äº†æ•ˆç‡ã€‚è¿™æ ·å¯ä»¥æé«˜ç¼–è¯‘æ•ˆç‡ï¼Œé¿å…é‡å¤ç¼–è¯‘.</p><blockquote><p>æ€ä¹ˆå»è§£é‡Šå‘¢â€¦å…¶å®è¿™æ˜¯ä¸€ä¸ªé¢å‘å¯¹è±¡çš„æ€æƒ³ï¼Œæ‰€è°“â€æé«˜â€çš„æ¯”è¾ƒå¯¹è±¡ï¼Œåº”è¯¥æ˜¯ç›´æ¥å°†æ–¹æ³•å†™åˆ°å…·ä½“å‡½æ•°é‡Œçš„å®ç°æ–¹å¼.<br>hä¸ºç¼–è¯‘å™¨æä¾›ä¸€ä¸ªç´¢å¼•ã€å£°æ˜ï¼Œè¿æ¥objå¯¹è±¡å’Œä¸»ç¨‹åº.<br>ç¼–è¯‘å™¨åœ¨ç¼–è¯‘çš„æ—¶å€™ï¼Œå¦‚æœéœ€è¦ï¼Œåˆ™å»æŸ¥æ‰¾hï¼Œæ‰¾åˆ°äº†hï¼Œå†æ‰¾å¯¹åº”çš„objï¼Œå°±å¯ä»¥æ‰¾åˆ°ç±»çš„æ–¹æ³•äº†.<br>ä½†æ˜¯å¦‚æœç›´æ¥å†™å…¥åˆ°åŒä¸€ä¸ªæ–‡ä»¶ï¼ˆä¾‹å¦‚hppï¼‰ï¼Œä¸»ç¨‹åºæ²¡æœ‰ç´¢å¼•ï¼Œä¹Ÿä¸æ¸…æ¥šå…·ä½“çš„ç±»å®ç°äº†æ²¡æœ‰ï¼Œåªèƒ½ä¸€æ¬¡æ¬¡é‡å¤çš„ç¼–è¯‘ç›¸åŒçš„ä»£ç ï¼Œè¿™æ ·å®é™…ä¸Šæ²¡æœ‰æŠŠè¿™ä¸ªç±»è¯¥æœ‰çš„ä¸œè¥¿æŠ½è±¡å‡ºæ¥.<br>å¯¹äºå‡½æ•°å£°æ˜åœ¨å¤´æ–‡ä»¶ä¸­ï¼Œåœ¨å®ç°æ–‡ä»¶ä¸­å®ç°ï¼Œä¹Ÿæ˜¯é¿å…é‡å¤ç¼–è¯‘ï¼Œå‡½æ•°å¯ä»¥å¤šæ¬¡å£°æ˜ï¼Œä½†åªèƒ½å®ç°ä¸€æ¬¡.</p></blockquote><h2 id="å¤´æ–‡ä»¶ç›¸å¯¹äºå®ç°æ–‡ä»¶çš„ä½œç”¨åœ¨äº"><a href="#å¤´æ–‡ä»¶ç›¸å¯¹äºå®ç°æ–‡ä»¶çš„ä½œç”¨åœ¨äº" class="headerlink" title="å¤´æ–‡ä»¶ç›¸å¯¹äºå®ç°æ–‡ä»¶çš„ä½œç”¨åœ¨äº:"></a>å¤´æ–‡ä»¶ç›¸å¯¹äºå®ç°æ–‡ä»¶çš„ä½œç”¨åœ¨äº:</h2><ol><li><p>å¤´æ–‡ä»¶å¯ä»¥é¢„å…ˆå‘Šè¯‰ç¼–è¯‘å™¨ä¸€äº›å¿…è¦çš„å£°æ˜,è®©ç¼–è¯‘å™¨é¡ºåˆ©è¿›è¡Œä¸‹å»,åœ¨è¿æ¥å®ç°ä»¥å‰.æœªå¿…å‡ºç°å®é™…çš„å®šä¹‰.</p><pre><code>å¤´æ–‡ä»¶çš„æ„ä¹‰åœ¨:* ä½¿å¾—ç¨‹åºç®€æ˜,æ¸…æ™°.* é¿å…äº†é‡å¤ç¼–å†™ç›¸åŒçš„å£°æ˜ä»£ç .</code></pre></li><li><strong>.cå’Œ</strong>.hæ–‡ä»¶æ²¡æœ‰å¿…ç„¶çš„è”ç³».</li></ol><h2 id="å…³äºå¤´æ–‡ä»¶å’Œå®ç°æ–‡ä»¶çš„ç¼–è¯‘è¿æ¥çš„è¿‡ç¨‹"><a href="#å…³äºå¤´æ–‡ä»¶å’Œå®ç°æ–‡ä»¶çš„ç¼–è¯‘è¿æ¥çš„è¿‡ç¨‹" class="headerlink" title="å…³äºå¤´æ–‡ä»¶å’Œå®ç°æ–‡ä»¶çš„ç¼–è¯‘è¿æ¥çš„è¿‡ç¨‹"></a>å…³äºå¤´æ–‡ä»¶å’Œå®ç°æ–‡ä»¶çš„ç¼–è¯‘è¿æ¥çš„è¿‡ç¨‹</h2><p>å…¶å®è¦ç†è§£Cæ–‡ä»¶ä¸å¤´æ–‡ä»¶æœ‰ä»€ä¹ˆä¸åŒä¹‹å¤„ï¼Œé¦–å…ˆéœ€è¦å¼„æ˜ç™½ç¼–è¯‘å™¨çš„å·¥ä½œè¿‡ç¨‹ï¼Œä¸€èˆ¬è¯´æ¥ç¼–è¯‘å™¨ä¼šåšä»¥ä¸‹å‡ ä¸ªè¿‡ç¨‹:</p><ol><li>é¢„å¤„ç†é˜¶æ®µ</li><li>è¯æ³•ä¸è¯­æ³•åˆ†æé˜¶æ®µ</li><li>ç¼–è¯‘é˜¶æ®µï¼Œé¦–å…ˆç¼–è¯‘æˆçº¯æ±‡ç¼–è¯­å¥ï¼Œå†å°†ä¹‹æ±‡ç¼–æˆè·ŸCPUç›¸å…³çš„äºŒè¿›åˆ¶ç ï¼Œç”Ÿæˆå„ä¸ªç›®æ ‡æ–‡ä»¶</li><li>è¿æ¥é˜¶æ®µï¼Œå°†å„ä¸ªç›®æ ‡æ–‡ä»¶ä¸­çš„å„æ®µä»£ç è¿›è¡Œç»å¯¹åœ°å€å®šä½ï¼Œç”Ÿæˆè·Ÿç‰¹å®šå¹³å°ç›¸å…³çš„å¯æ‰§è¡Œæ–‡ä»¶ï¼Œå½“ç„¶ï¼Œæœ€åè¿˜å¯ä»¥ç”¨<code>objcopy</code>ç”Ÿæˆçº¯äºŒè¿›åˆ¶<br>ç ï¼Œä¹Ÿå°±æ˜¯å»æ‰äº†æ–‡ä»¶æ ¼å¼ä¿¡æ¯.</li></ol><p>ç¼–è¯‘å™¨åœ¨ç¼–è¯‘æ—¶æ˜¯ä»¥Cæ–‡ä»¶ä¸ºå•ä½è¿›è¡Œçš„ï¼Œä¹Ÿå°±æ˜¯è¯´å¦‚æœä½ çš„é¡¹ç›®ä¸­ä¸€ä¸ªCæ–‡ä»¶éƒ½æ²¡æœ‰ï¼Œé‚£ä¹ˆä½ çš„é¡¹ç›®å°†æ— æ³•ç¼–è¯‘ï¼Œè¿æ¥å™¨æ˜¯ä»¥ç›®æ ‡æ–‡ä»¶ä¸ºå•ä½ï¼Œå®ƒå°†ä¸€ä¸ªæˆ–å¤šä¸ªç›®æ ‡æ–‡ä»¶è¿›è¡Œå‡½æ•°ä¸å˜é‡çš„é‡å®šä½ï¼Œç”Ÿæˆæœ€ç»ˆçš„å¯æ‰§è¡Œæ–‡ä»¶ï¼Œåœ¨PCä¸Šçš„ç¨‹åºå¼€å‘ï¼Œä¸€èˆ¬éƒ½æœ‰ä¸€ä¸ª<code>main</code>å‡½æ•°ï¼Œè¿™æ˜¯å„ä¸ªç¼–è¯‘å™¨çš„çº¦å®šï¼Œå½“ç„¶ï¼Œä½ å¦‚æœè‡ªå·±å†™è¿æ¥å™¨è„šæœ¬çš„è¯ï¼Œå¯ä»¥ä¸ç”¨<code>main</code>å‡½æ•°ä½œä¸ºç¨‹åºå…¥å£ï¼ï¼ï¼</p><p>æœ‰äº†è¿™äº›åŸºç¡€çŸ¥è¯†ï¼Œå†è¨€å½’æ­£ä¼ ï¼Œä¸ºäº†ç”Ÿæˆä¸€ä¸ªæœ€ç»ˆçš„å¯æ‰§è¡Œæ–‡ä»¶ï¼Œå°±éœ€è¦ä¸€äº›ç›®æ ‡æ–‡ä»¶ï¼Œä¹Ÿå°±æ˜¯éœ€è¦Cæ–‡ä»¶ï¼Œè€Œè¿™äº›Cæ–‡ä»¶ä¸­åˆéœ€è¦ä¸€ä¸ªmainå‡½æ•°ä½œä¸ºå¯æ‰§è¡Œç¨‹åºçš„å…¥å£ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±ä»ä¸€ä¸ªCæ–‡ä»¶å…¥æ‰‹ï¼Œå‡å®šè¿™ä¸ªCæ–‡ä»¶å†…å®¹å¦‚ä¸‹ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> \<span class="meta-string">&lt;stdio.h&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> â€œmytest.hâ€</span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span> argc,<span class="keyword">char</span> **argv)</span></span></div><div class="line">&#123;</div><div class="line">test = <span class="number">25</span>;</div><div class="line"><span class="built_in">printf</span>(â€œtestâ€¦â€¦â€¦â€¦â€¦..%d\nâ€,test);</div><div class="line">&#125;</div></pre></td></tr></table></figure><p>å¤´æ–‡ä»¶å†…å®¹å¦‚ä¸‹:<br><code>int test;</code></p><h3 id="ç°åœ¨ä»¥è¿™ä¸ªä¾‹å­æ¥è®²è§£ç¼–è¯‘å™¨çš„å·¥ä½œ"><a href="#ç°åœ¨ä»¥è¿™ä¸ªä¾‹å­æ¥è®²è§£ç¼–è¯‘å™¨çš„å·¥ä½œ" class="headerlink" title="ç°åœ¨ä»¥è¿™ä¸ªä¾‹å­æ¥è®²è§£ç¼–è¯‘å™¨çš„å·¥ä½œ:"></a>ç°åœ¨ä»¥è¿™ä¸ªä¾‹å­æ¥è®²è§£ç¼–è¯‘å™¨çš„å·¥ä½œ:</h3><ol><li><p>é¢„å¤„ç†é˜¶æ®µ:<br>ç¼–è¯‘å™¨ä»¥Cæ–‡ä»¶ä½œä¸ºä¸€ä¸ªå•å…ƒï¼Œé¦–å…ˆè¯»è¿™ä¸ªCæ–‡ä»¶ï¼Œå‘ç°ç¬¬ä¸€å¥ä¸ç¬¬äºŒå¥æ˜¯åŒ…å«ä¸€ä¸ªå¤´æ–‡ä»¶ï¼Œå°±ä¼šåœ¨æ‰€æœ‰æœç´¢è·¯å¾„ä¸­å¯»æ‰¾è¿™ä¸¤ä¸ªæ–‡ä»¶ï¼Œæ‰¾åˆ°ä¹‹åï¼Œå°±ä¼šå°†ç›¸åº”å¤´æ–‡ä»¶ä¸­å†å»å¤„ç†å®ï¼Œå˜é‡ï¼Œå‡½æ•°å£°æ˜ï¼ŒåµŒå¥—çš„å¤´æ–‡ä»¶åŒ…å«ç­‰ï¼Œæ£€æµ‹ä¾èµ–å…³ç³»ï¼Œè¿›è¡Œå®æ›¿æ¢ï¼Œçœ‹æ˜¯å¦æœ‰é‡å¤å®šä¹‰ä¸å£°æ˜çš„æƒ…å†µå‘ç”Ÿï¼Œæœ€åå°†é‚£äº›æ–‡ä»¶ä¸­æ‰€æœ‰çš„ä¸œä¸œå…¨éƒ¨æ‰«æè¿›è¿™ä¸ªå½“å‰çš„Cæ–‡ä»¶ä¸­ï¼Œå½¢æˆä¸€ä¸ªä¸­é—´â€œCæ–‡ä»¶â€</p></li><li><p>ç¼–è¯‘é˜¶æ®µ:<br>åœ¨ä¸Šä¸€æ­¥ä¸­ç›¸å½“äºå°†é‚£ä¸ªå¤´æ–‡ä»¶ä¸­çš„testå˜é‡æ‰«æè¿›äº†ä¸€ä¸ªä¸­é—´Cæ–‡ä»¶ï¼Œé‚£ä¹ˆtestå˜é‡å°±å˜æˆäº†è¿™ä¸ªæ–‡ä»¶ä¸­çš„ä¸€ä¸ªå…¨å±€å˜é‡ï¼Œæ­¤æ—¶å°±å°†æ‰€æœ‰è¿™ä¸ªä¸­é—´Cæ–‡ä»¶çš„æ‰€æœ‰å˜é‡ï¼Œå‡½æ•°åˆ†é…ç©ºé—´ï¼Œå°†å„ä¸ªå‡½æ•°ç¼–è¯‘æˆäºŒè¿›åˆ¶ç ï¼ŒæŒ‰ç…§ç‰¹å®šç›®æ ‡æ–‡ä»¶æ ¼å¼ç”Ÿæˆç›®æ ‡æ–‡ä»¶ï¼Œåœ¨è¿™ç§æ ¼å¼çš„ç›®æ ‡æ–‡ä»¶ä¸­è¿›è¡Œå„ä¸ªå…¨å±€å˜é‡ï¼Œå‡½æ•°çš„ç¬¦å·æè¿°ï¼Œå°†è¿™äº›äºŒè¿›åˆ¶ç æŒ‰ç…§ä¸€å®šçš„æ ‡å‡†ç»„ç»‡æˆä¸€ä¸ªç›®æ ‡æ–‡ä»¶</p></li><li><p>è¿æ¥é˜¶æ®µ:<br>å°†ä¸Šä¸€æ­¥æˆç”Ÿçš„å„ä¸ªç›®æ ‡æ–‡ä»¶ï¼Œæ ¹æ®ä¸€äº›å‚æ•°ï¼Œè¿æ¥ç”Ÿæˆæœ€ç»ˆçš„å¯æ‰§è¡Œæ–‡ä»¶ï¼Œä¸»è¦çš„å·¥ä½œå°±æ˜¯é‡å®šä½å„ä¸ªç›®æ ‡æ–‡ä»¶çš„å‡½æ•°ï¼Œå˜é‡ç­‰ï¼Œç›¸å½“äºå°†ä¸ªç›®æ ‡æ–‡ä»¶ä¸­çš„äºŒè¿›åˆ¶ç æŒ‰ä¸€å®šçš„è§„èŒƒåˆåˆ°ä¸€ä¸ªæ–‡ä»¶ä¸­  </p></li></ol><h2 id="å†å›åˆ°Cæ–‡ä»¶ä¸å¤´æ–‡ä»¶å„å†™ä»€ä¹ˆå†…å®¹çš„è¯é¢˜ä¸Šï¼š"><a href="#å†å›åˆ°Cæ–‡ä»¶ä¸å¤´æ–‡ä»¶å„å†™ä»€ä¹ˆå†…å®¹çš„è¯é¢˜ä¸Šï¼š" class="headerlink" title="å†å›åˆ°Cæ–‡ä»¶ä¸å¤´æ–‡ä»¶å„å†™ä»€ä¹ˆå†…å®¹çš„è¯é¢˜ä¸Šï¼š"></a>å†å›åˆ°Cæ–‡ä»¶ä¸å¤´æ–‡ä»¶å„å†™ä»€ä¹ˆå†…å®¹çš„è¯é¢˜ä¸Šï¼š</h2><p>ç†è®ºä¸Šæ¥è¯´Cæ–‡ä»¶ä¸å¤´æ–‡ä»¶é‡Œçš„å†…å®¹ï¼Œåªè¦æ˜¯Cè¯­è¨€æ‰€æ”¯æŒçš„ï¼Œæ— è®ºå†™ä»€ä¹ˆéƒ½å¯ä»¥çš„ï¼Œæ¯”å¦‚ä½ åœ¨å¤´æ–‡ä»¶ä¸­å†™å‡½æ•°ä½“ï¼Œåªè¦åœ¨ä»»ä½•ä¸€ä¸ªCæ–‡ä»¶åŒ…å«æ­¤å¤´æ–‡ä»¶å°±å¯ä»¥å°†è¿™ä¸ªå‡½æ•°ç¼–è¯‘æˆç›®æ ‡æ–‡ä»¶çš„ä¸€éƒ¨åˆ†ï¼ˆç¼–è¯‘æ˜¯ä»¥Cæ–‡ä»¶ä¸ºå•ä½çš„ï¼Œå¦‚æœä¸åœ¨ä»»ä½•Cæ–‡ä»¶ä¸­åŒ…å«æ­¤å¤´æ–‡ä»¶çš„è¯ï¼Œè¿™æ®µä»£ç å°±å½¢åŒè™šè®¾ï¼‰ï¼Œä½ å¯ä»¥åœ¨Cæ–‡ä»¶ä¸­è¿›è¡Œå‡½æ•°å£°æ˜ï¼Œå˜é‡å£°æ˜ï¼Œç»“æ„ä½“å£°æ˜ï¼Œè¿™ä¹Ÿä¸æˆé—®é¢˜ï¼ï¼ï¼<br>é‚£ä¸ºä½•ä¸€å®šè¦åˆ†æˆå¤´æ–‡ä»¶ä¸Cæ–‡ä»¶å‘¢ï¼Ÿåˆä¸ºä½•ä¸€èˆ¬éƒ½åœ¨å¤´ä»¶ä¸­è¿›è¡Œå‡½æ•°ï¼Œå˜é‡å£°æ˜ï¼Œå®å£°æ˜ï¼Œç»“æ„ä½“å£°æ˜å‘¢ï¼Ÿè€Œåœ¨Cæ–‡ä»¶ä¸­å»è¿›è¡Œå˜é‡å®šä¹‰ï¼Œå‡½æ•°å®ç°å‘¢ï¼Ÿï¼Ÿ<br>åŸå› å¦‚ä¸‹:</p><ol><li><p>å¦‚æœåœ¨å¤´æ–‡ä»¶ä¸­å®ç°ä¸€ä¸ªå‡½æ•°ä½“ï¼Œé‚£ä¹ˆå¦‚æœåœ¨å¤šä¸ªCæ–‡ä»¶ä¸­å¼•ç”¨å®ƒï¼Œè€Œä¸”åˆåŒæ—¶ç¼–è¯‘å¤šä¸ªCæ–‡ä»¶ï¼Œå°†å…¶ç”Ÿæˆçš„ç›®æ ‡æ–‡ä»¶è¿æ¥æˆä¸€ä¸ªå¯æ‰§è¡Œæ–‡ä»¶ï¼Œåœ¨æ¯ä¸ªå¼•ç”¨æ­¤å¤´æ–‡ä»¶çš„Cæ–‡ä»¶æ‰€ç”Ÿæˆçš„ç›®æ ‡æ–‡ä»¶ä¸­ï¼Œéƒ½æœ‰ä¸€ä»½è¿™ä¸ªå‡½æ•°çš„ä»£ç ï¼Œå¦‚æœè¿™æ®µå‡½æ•°åˆæ²¡æœ‰å®šä¹‰æˆå±€éƒ¨å‡½æ•°ï¼Œé‚£ä¹ˆåœ¨è¿æ¥æ—¶ï¼Œå°±ä¼šå‘ç°å¤šä¸ªç›¸åŒçš„å‡½æ•°ï¼Œå°±ä¼šæŠ¥é”™</p></li><li><p>å¦‚æœåœ¨å¤´æ–‡ä»¶ä¸­å®šä¹‰å…¨å±€å˜é‡ï¼Œå¹¶ä¸”å°†æ­¤å…¨å±€å˜é‡èµ‹åˆå€¼ï¼Œé‚£ä¹ˆåœ¨å¤šä¸ªå¼•ç”¨æ­¤å¤´æ–‡ä»¶çš„Cæ–‡ä»¶ä¸­åŒæ ·å­˜åœ¨ç›¸åŒå˜é‡åçš„æ‹·è´ï¼Œå…³é”®æ˜¯æ­¤å˜é‡è¢«èµ‹äº†åˆå€¼ï¼Œæ‰€ä»¥ç¼–è¯‘å™¨å°±ä¼šå°†æ­¤å˜é‡æ”¾å…¥DATAæ®µï¼Œæœ€ç»ˆåœ¨è¿æ¥é˜¶æ®µï¼Œä¼šåœ¨DATAæ®µä¸­å­˜åœ¨å¤šä¸ªç›¸åŒçš„å˜é‡ï¼Œå®ƒæ— æ³•å°†è¿™äº›å˜é‡ç»Ÿä¸€æˆä¸€ä¸ªå˜é‡ï¼Œä¹Ÿå°±æ˜¯ä»…ä¸ºæ­¤å˜é‡åˆ†é…ä¸€ä¸ªç©ºé—´ï¼Œè€Œä¸æ˜¯å¤šä»½ç©ºé—´ï¼Œå‡å®šè¿™ä¸ªå˜é‡åœ¨å¤´æ–‡ä»¶æ²¡æœ‰èµ‹åˆå€¼ï¼Œç¼–è¯‘å™¨å°±ä¼šå°†ä¹‹æ”¾å…¥BSSæ®µï¼Œè¿æ¥å™¨ä¼šå¯¹BSSæ®µçš„å¤šä¸ªåŒåå˜é‡ä»…åˆ†é…ä¸€ä¸ªå­˜å‚¨ç©ºé—´</p></li><li><p>å¦‚æœåœ¨Cæ–‡ä»¶ä¸­å£°æ˜å®ï¼Œç»“æ„ä½“ï¼Œå‡½æ•°ç­‰ï¼Œé‚£ä¹ˆæˆ‘è¦åœ¨å¦ä¸€ä¸ªCæ–‡ä»¶ä¸­å¼•ç”¨ç›¸åº”çš„å®ï¼Œç»“æ„ä½“ï¼Œå°±å¿…é¡»å†åšä¸€æ¬¡é‡å¤çš„å·¥ä½œï¼Œå¦‚æœæˆ‘æ”¹äº†ä¸€ä¸ªCæ–‡ä»¶ä¸­çš„ä¸€ä¸ªå£°æ˜ï¼Œé‚£ä¹ˆåˆå¿˜äº†æ”¹å…¶å®ƒCæ–‡ä»¶ä¸­çš„å£°æ˜ï¼Œè¿™ä¸å°±å‡ºäº†å¤§é—®é¢˜äº†ï¼Œç¨‹åºçš„é€»è¾‘å°±å˜æˆäº†ä½ ä¸å¯æƒ³è±¡çš„äº†ï¼Œå¦‚æœæŠŠè¿™äº›å…¬å…±çš„ä¸œä¸œæ”¾åœ¨ä¸€ä¸ªå¤´æ–‡ä»¶ä¸­ï¼Œæƒ³ç”¨å®ƒçš„Cæ–‡ä»¶å°±åªéœ€è¦å¼•ç”¨ä¸€ä¸ªå°±OKäº†ï¼ï¼ï¼è¿™æ ·å²‚ä¸æ–¹ä¾¿ï¼Œè¦æ”¹æŸä¸ªå£°æ˜çš„æ—¶å€™ï¼Œåªéœ€è¦åŠ¨ä¸€ä¸‹å¤´æ–‡ä»¶å°±è¡Œäº†</p></li><li><p>åœ¨å¤´æ–‡ä»¶ä¸­å£°æ˜ç»“æ„ä½“ï¼Œå‡½æ•°ç­‰ï¼Œå½“ä½ éœ€è¦å°†ä½ çš„ä»£ç å°è£…æˆä¸€ä¸ªåº“ï¼Œè®©åˆ«äººæ¥ç”¨ä½ çš„ä»£ç ï¼Œä½ åˆä¸æƒ³å…¬å¸ƒæºç ï¼Œé‚£ä¹ˆäººå®¶å¦‚ä½•åˆ©ç”¨ä½ çš„åº“å‘¢ï¼Ÿä¹Ÿå°±æ˜¯å¦‚ä½•åˆ©ç”¨ä½ çš„åº“ä¸­çš„å„ä¸ªå‡½æ•°å‘¢ï¼Ÿï¼Ÿä¸€ç§æ–¹æ³•æ˜¯å…¬å¸ƒæºç ï¼Œåˆ«äººæƒ³æ€ä¹ˆç”¨å°±æ€ä¹ˆç”¨ï¼Œå¦ä¸€ç§æ˜¯æä¾›å¤´æ–‡ä»¶ï¼Œåˆ«äººä»å¤´æ–‡ä»¶ä¸­çœ‹ä½ çš„å‡½æ•°åŸå‹ï¼Œè¿™æ ·äººå®¶æ‰çŸ¥é“å¦‚ä½•è°ƒç”¨ä½ å†™çš„å‡½æ•°ï¼Œå°±å¦‚åŒä½ è°ƒç”¨printfå‡½æ•°ä¸€æ ·ï¼Œé‡Œé¢çš„å‚æ•°æ˜¯æ€æ ·çš„ï¼Ÿï¼Ÿä½ æ˜¯æ€ä¹ˆçŸ¥é“çš„ï¼Ÿï¼Ÿè¿˜ä¸æ˜¯çœ‹äººå®¶çš„å¤´æ–‡ä»¶ä¸­çš„ç›¸å…³å£°æ˜å•Šï¼ï¼ï¼å½“ç„¶è¿™äº›ä¸œä¸œéƒ½æˆäº†Cæ ‡å‡†ï¼Œå°±ç®—ä¸çœ‹äººå®¶çš„å¤´æ–‡ä»¶ï¼Œä½ ä¸€æ ·å¯ä»¥çŸ¥é“æ€ä¹ˆä½¿ç”¨.</p></li></ol>]]></content>
    
    <summary type="html">
    
      
      
        &lt;blockquote&gt;
&lt;p&gt;è½¬è‡ª&lt;a href=&quot;http://codecloud.net/objective-c-6782.html&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;codecloud&lt;/a&gt;(æœ‰æ•´ç†)&lt;/p&gt;
&lt;/blockquote&gt;
&lt;
      
    
    </summary>
    
      <category term="iOS" scheme="http://codingdoge.cn/categories/iOS/"/>
    
    
      <category term="OC" scheme="http://codingdoge.cn/tags/OC/"/>
    
      <category term="è½¬è½½" scheme="http://codingdoge.cn/tags/%E8%BD%AC%E8%BD%BD/"/>
    
  </entry>
  
  <entry>
    <title>xcodeå¸¸ç”¨å¿«æ·é”®åŠå…¶ä»–åŠŸèƒ½</title>
    <link href="http://codingdoge.cn/2017/07/23/title:%20xcode%E5%B8%B8%E7%94%A8%E5%BF%AB%E6%8D%B7%E9%94%AE%E5%8F%8A%E5%85%B6%E4%BB%96%E5%8A%9F%E8%83%BD/"/>
    <id>http://codingdoge.cn/2017/07/23/title: xcodeå¸¸ç”¨å¿«æ·é”®åŠå…¶ä»–åŠŸèƒ½/</id>
    <published>2017-07-23T15:47:00.000Z</published>
    <updated>2018-01-13T05:05:53.756Z</updated>
    
    <content type="html"><![CDATA[<h3 id="å¿«æ·é”®"><a href="#å¿«æ·é”®" class="headerlink" title="å¿«æ·é”®"></a>å¿«æ·é”®</h3><hr><p>Command+Rç”Ÿæˆå¹¶è¿è¡Œç¨‹åº<br>Command+Båªç”Ÿæˆç¨‹åºè€Œä¸è¿è¡Œå®ƒ<br>Command+Tæ–°å»ºé€‰é¡¹å¡  </p><h3 id="æ ‡è®°"><a href="#æ ‡è®°" class="headerlink" title="æ ‡è®°"></a>æ ‡è®°</h3><hr><p>// MARK: - \<label name=""><br>// TODO: \<text you="" want="" to="" remember=""><br>// FIXME: \<text you="" want="" to="" remember="">  </text></text></label></p><h3 id="å°åŠŸèƒ½"><a href="#å°åŠŸèƒ½" class="headerlink" title="å°åŠŸèƒ½"></a>å°åŠŸèƒ½</h3><hr><p>Product&gt;Cleanåˆ é™¤ç”Ÿæˆçš„ä¸­é—´æ–‡ä»¶</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h3 id=&quot;å¿«æ·é”®&quot;&gt;&lt;a href=&quot;#å¿«æ·é”®&quot; class=&quot;headerlink&quot; title=&quot;å¿«æ·é”®&quot;&gt;&lt;/a&gt;å¿«æ·é”®&lt;/h3&gt;&lt;hr&gt;
&lt;p&gt;Command+Rç”Ÿæˆå¹¶è¿è¡Œç¨‹åº&lt;br&gt;Command+Båªç”Ÿæˆç¨‹åºè€Œä¸è¿è¡Œå®ƒ&lt;br&gt;Command+Tæ–°å»ºé€‰é¡¹å¡  &lt;/
      
    
    </summary>
    
      <category term="iOS" scheme="http://codingdoge.cn/categories/iOS/"/>
    
    
      <category term="Tool" scheme="http://codingdoge.cn/tags/Tool/"/>
    
  </entry>
  
  <entry>
    <title>OCä¸­ARC forbids explicit message send of &#39;...&#39;é”™è¯¯</title>
    <link href="http://codingdoge.cn/2017/07/23/title:%20OC%E4%B8%ADARC%20forbids%20explicit%20message%20send%20of%20&#39;...&#39;%E9%94%99%E8%AF%AF%20%20/"/>
    <id>http://codingdoge.cn/2017/07/23/title: OCä¸­ARC forbids explicit message send of &#39;...&#39;é”™è¯¯  /</id>
    <published>2017-07-23T15:25:00.000Z</published>
    <updated>2018-01-14T17:00:06.700Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>è½¬è‡ª<a href="http://blog.csdn.net/hahahacff/article/details/39859901" target="_blank" rel="noopener"><strong>CSDN hahahacff</strong></a><br>æœ‰æ‰€æ•´ç†</p></blockquote><h3 id="ARC-forbids-explicit-message-send-ofâ€™retainCountâ€™"><a href="#ARC-forbids-explicit-message-send-ofâ€™retainCountâ€™" class="headerlink" title="ARC forbids explicit message send ofâ€™retainCountâ€™"></a>ARC forbids explicit message send ofâ€™retainCountâ€™</h3><ul><li>åŒâ€™releaseâ€™ç­‰ç­‰<figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="http://oo8snaf4x.bkt.clouddn.com/15159489066776.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure>å¾ˆæ˜¾ç„¶ï¼Œæ˜¯<strong>ARC</strong>çš„é—®é¢˜ã€‚<br>é”™è¯¯åŸå› ï¼šåœ¨åˆ›å»ºå·¥ç¨‹çš„æ—¶å€™ç‚¹é€‰äº†<strong>â€œUse Automatic Reference Countingâ€</strong>é€‰é¡¹,ä½†æ˜¯åˆè°ƒç”¨äº†å¯¹è±¡çš„<strong>retainCount</strong>æ–¹æ³•</li></ul><h2 id="ARCæ˜¯ä»€ä¹ˆ"><a href="#ARCæ˜¯ä»€ä¹ˆ" class="headerlink" title="ARCæ˜¯ä»€ä¹ˆ?"></a>ARCæ˜¯ä»€ä¹ˆ?</h2><p>ARCæ˜¯iOS 5æ¨å‡ºçš„æ–°åŠŸèƒ½ï¼Œå…¨ç§°å«ARC(AutomaticReferenceCounting)ã€‚<br>ç®€å•åœ°è¯´ï¼Œå°±æ˜¯ä»£ç ä¸­è‡ªåŠ¨åŠ å…¥äº†retain/releaseï¼ŒåŸå…ˆéœ€è¦æ‰‹åŠ¨æ·»åŠ çš„ç”¨æ¥å¤„ç†å†…å­˜ç®¡ç†çš„å¼•ç”¨è®¡æ•°çš„ä»£ç å¯ä»¥è‡ªåŠ¨åœ°ç”±ç¼–è¯‘å™¨å®Œæˆäº†ã€‚è¯¥æœºåˆ¶åœ¨iOS 5/ Mac OS X 10.7 å¼€å§‹å¯¼å…¥ï¼Œåˆ©ç”¨ Xcode4.2å¯ä»¥ä½¿ç”¨è¯¥æœºåˆ¶ã€‚ç®€å•åœ°ç†è§£ARCï¼Œå°±æ˜¯é€šè¿‡æŒ‡å®šçš„è¯­æ³•ï¼Œè®©ç¼–è¯‘å™¨(LLVM3.0)åœ¨ç¼–è¯‘ä»£ç æ—¶ï¼Œè‡ªåŠ¨ç”Ÿæˆå®ä¾‹çš„å¼•ç”¨è®¡æ•°ç®¡ç†éƒ¨åˆ†ä»£ç ã€‚æœ‰ä¸€ç‚¹ï¼ŒARCå¹¶ä¸æ˜¯GCï¼Œå®ƒåªæ˜¯ä¸€ç§ä»£ç é™æ€åˆ†æï¼ˆStaticAnalyzerï¼‰å·¥å…·ã€‚</p><h2 id="è§£å†³æ–¹æ³•"><a href="#è§£å†³æ–¹æ³•" class="headerlink" title="è§£å†³æ–¹æ³•"></a>è§£å†³æ–¹æ³•</h2><ol><li>é€‰æ‹©è¦é¡¹ç›®ï¼ŒåŒå‡»ä¸­é—´çš„å·¥ç¨‹åç§°ï¼Œè¿›å…¥build setting<figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="http://images2015.cnblogs.com/blog/922727/201605/922727-20160520121424544-662684677.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure></li><li>å°†ä¸­é—´çš„Objective-C Automatic Reference Countingæ”¹ä¸ºno</li></ol>]]></content>
    
    <summary type="html">
    
      
      
        &lt;blockquote&gt;
&lt;p&gt;è½¬è‡ª&lt;a href=&quot;http://blog.csdn.net/hahahacff/article/details/39859901&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;&lt;strong&gt;CSDN hahahacff&lt;/s
      
    
    </summary>
    
      <category term="iOS" scheme="http://codingdoge.cn/categories/iOS/"/>
    
    
      <category term="Bug" scheme="http://codingdoge.cn/tags/Bug/"/>
    
      <category term="OC" scheme="http://codingdoge.cn/tags/OC/"/>
    
      <category term="è½¬è½½" scheme="http://codingdoge.cn/tags/%E8%BD%AC%E8%BD%BD/"/>
    
  </entry>
  
  <entry>
    <title>è§£å†³Arduino CH34xç³»åˆ—åœ¨macOS Sierraä¸­æ‰¾ä¸åˆ°ä¸²å£çš„é—®é¢˜</title>
    <link href="http://codingdoge.cn/2017/07/23/title:%20%E8%A7%A3%E5%86%B3Arduino%20CH34x%E7%B3%BB%E5%88%97%E5%9C%A8macOS%20Sierra%E4%B8%AD%E6%89%BE%E4%B8%8D%E5%88%B0%E4%B8%B2%E5%8F%A3%E7%9A%84%E9%97%AE%E9%A2%98/"/>
    <id>http://codingdoge.cn/2017/07/23/title: è§£å†³Arduino CH34xç³»åˆ—åœ¨macOS Sierraä¸­æ‰¾ä¸åˆ°ä¸²å£çš„é—®é¢˜/</id>
    <published>2017-07-23T15:06:00.000Z</published>
    <updated>2018-01-12T14:23:28.810Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>æ¯•è®¾åšArduinoå¼€å‘ï¼Œä¸€å¼€å§‹ä¹°äº†æ·˜å®ä¸Šæ…§å‡€è‡ªå·±æ”¹çš„Arduino UNOå›½äº§æ¿å­ï¼Œå›æ¥æ’åœ¨macä¸Šè¯»ä¸å‡ºä¸²å£ï¼Œå®‰è£…äº†å®ƒé™„å¸¦çš„é©±åŠ¨è¿˜æ˜¯è¯»ä¸å‡ºï¼ŒåŒå­¦ä¹°äº†åŸè£…æ¿è¯´ä¸€æ’ä¸Šå°±èƒ½è¯»å‡ºä¸²å£ï¼Œéƒ½æ²¡è‡ªå·±è£…é©±åŠ¨ï¼Œä¸ºäº†çœéº»çƒ¦ï¼Œç›´æ¥è·Ÿå•†å®¶æ¢äº†åŸè£…æ¿ï¼Œè¿™æ—¶å€™éº»çƒ¦æ¥äº†ï¼Œæ¿å­åœ¨æˆ‘ç”µè„‘ä¸Šè¯»ä¸å‡ºä¸²å£ï¼Œåœ¨åˆ«äººç”µè„‘ä¸Šèƒ½è¯»å‡ºæ¥ï¼Œåˆ«äººçš„åœ¨æˆ‘ç”µè„‘ä¸Šä¹Ÿè¯»ä¸å‡ºæ¥â€¦å¾ˆå´©æºƒï¼Œç„¶åä»å„ä¸ªè§’åº¦debugï¼Œä¸‹é¢ä¸€ä¸ªä¸ªæ­¥éª¤æ¥ï¼ŒåŸºæœ¬èƒ½è§£å†³ã€‚  </p></blockquote><ol><li>å®‰è£…<a href="https://www.arduino.cc/en/Main/Software" target="_blank" rel="noopener">Arduino IDE</a><br>ä¸Šé¢æ˜¯å®˜ç½‘IDEä¸‹è½½çš„è¿æ¥ï¼Œå¤§æ¦‚æ˜¯å› ä¸ºGFWçš„åŸå› ä¸‹è½½é€Ÿåº¦å¥‡æ…¢ï¼Œå¤§å®¶ä¹Ÿå¯ä»¥å»æœArduinoä¸­æ–‡ç¤¾åŒºï¼Œé‡Œé¢æœ‰å¥½äººåšäº†*åº¦ç½‘ç›˜çš„ä¸‹è½½ç§å­ï¼Œé€Ÿåº¦èƒ½å¿«ç‚¹ã€‚<br>IDEä¸€èˆ¬è‡ªå¸¦é©±åŠ¨ï¼Œå¦‚æœåœ¨ä¸²å£é‡Œæ²¡å‘ç°ï¼Œå¯ä»¥è¯•è¯•åœ¨<figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="http://oo8snaf4x.bkt.clouddn.com/D7389412-ED23-427D-82E7-4E1C26114D67.png?imageView2/0/q/100" alt="D7389412-ED23-427D-82E7-4E1C26114D67" title="">                </div>                <div class="image-caption">D7389412-ED23-427D-82E7-4E1C26114D67</div>            </figure></li></ol><p>è¿™ä¸ªç³»ç»ŸæŠ¥å‘Šé‡Œçœ‹çœ‹USBä¸‹é¢èƒ½ä¸èƒ½è¯»å‡º</p><p>ä¹Ÿå¯ä»¥åœ¨bashé‡Œè¾“å…¥</p><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">ls</span> <span class="string">/dev/tty</span>*</div></pre></td></tr></table></figure><p>å¦‚æœæœ‰ç±»ä¼¼çš„å³å¯<br><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="http://oo8snaf4x.bkt.clouddn.com/2C66575E-D0DD-4DEA-9F34-8F2E1CF4DA90.png?imageView2/0/q/100" alt="2C66575E-D0DD-4DEA-9F34-8F2E1CF4DA90" title="">                </div>                <div class="image-caption">2C66575E-D0DD-4DEA-9F34-8F2E1CF4DA90</div>            </figure></p><ol><li><p><a href="http://www.wch.cn/download/CH341SER_MAC_ZIP.html" target="_blank" rel="noopener">å®˜æ–¹é©±åŠ¨ä¸‹è½½</a><br>å¦‚æœéƒ½æ‰¾ä¸åˆ°çš„è¯å¯ä»¥å»æ²æ’å®˜æ–¹ä¸‹è½½CH341SERé©±åŠ¨ï¼Œå®‰è£…åå†æŸ¥çœ‹ä¸€é(å®‰è£…é©±åŠ¨å®Œä¼šè¦æ±‚é‡å¯).</p></li><li><p>æ›´æ”¹SIPè®¾ç½®</p><blockquote><p>Appleåœ¨10.11ä¸­å…¨é¢å¯ç”¨äº†åä¸º System Integrity Protection (SIP) çš„ç³»ç»Ÿå®Œæ•´æ€§ä¿æŠ¤æŠ€æœ¯. å—æ­¤å½±å“, æœªç»ç­¾åçš„ç¬¬ä¸‰æ–¹kextåŠç»è¿‡ä¿®æ”¹çš„åŸç‰ˆkextå°†æ— æ³•æ­£å¸¸åŠ è½½, å¤§éƒ¨åˆ†ç³»ç»Ÿæ–‡ä»¶å³ä½¿åœ¨rootç”¨æˆ·ä¸‹ä¹Ÿæ— æ³•ç›´æ¥è¿›è¡Œä¿®æ”¹.    </p></blockquote></li></ol><p>å‰é¢å®‰è£…é©±åŠ¨ä¸æˆåŠŸå¤§éƒ¨åˆ†æ˜¯å› ä¸ºé©±åŠ¨æ–‡ä»¶å†²çªå¯¼è‡´ï¼Œæ‰€ä»¥åœ¨æ­¤ä¹‹å‰å…ˆåˆ é™¤ä¹‹å‰å®‰è£…çš„é©±åŠ¨æ–‡ä»¶:</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">sudo rm -rf /System/Library/Extensions/usb<span class="selector-class">.kext</span></div><div class="line">sudo rm -rf /Library/Extensions/usbserial<span class="selector-class">.kext</span></div><div class="line">sudo rm -rf _private_var_db_receipts/com<span class="selector-class">.wch</span>.*</div></pre></td></tr></table></figure><p>ç„¶åå‚è€ƒ<a href="https://tzapu.com/making-ch340-ch341-serial-adapters-work-under-el-capitan-os-x/" target="_blank" rel="noopener">CH340 CH341 serial adapters fix for El Capitan OS X</a>å¯ä»¥é€šè¿‡ä»¥ä¸‹æ­¥éª¤ä¿®æ”¹SIPè®¾ç½®æ¥å®‰è£…ç¬¬ä¸‰æ–¹kext:</p><ol><li>é‡å¯OS X å¹¶ä¸”ç«‹å³æŒ‰ä½ Command+ R æ¥æ¥è¿›å…¥æ¢å¤æ¨¡å¼</li><li>åœ¨æ¢å¤æ¨¡å¼ä¸­, èœå•æ ä¸Šé¢æ‰¾åˆ°ç»ˆç«¯(Terminal)å¹¶æ‰“å¼€</li><li>åœ¨ç»ˆç«¯ä¸­é”®å…¥å‘½ä»¤<code>csrutil enable â€”without kext</code></li><li>çœ‹åˆ°æˆåŠŸçš„æç¤ºä¿¡æ¯ä¹‹å, è¾“å…¥rebooté‡å¯ç³»ç»Ÿ<blockquote><p>æ³¨: <code>â€”without kext ä¸­çš„</code> - æœ‰ä¸¤æ¡<br>Command å°±æ˜¯ âŒ˜ å›¾æ ‡  </p></blockquote></li></ol><p>é€šè¿‡ä»¥ä¸Šçš„æ“ä½œä¹‹å, é‡‡ç”¨CH340/1 ç³»åˆ—èŠ¯ç‰‡çš„Arduinoå¼€å‘æ¿åˆå¯ä»¥è¢«è¯†åˆ«å‡ºæ¥äº†. å¦‚æœè¿˜æ˜¯æ— æ³•è¯†åˆ«, è¯·é‡æ–°å®‰è£…ä¸€æ¬¡CH341SERé©±åŠ¨.</p><ul><li>æœ€åå¦‚æœè¿˜ä¸è¡Œ(æˆ‘çš„å°±æ˜¯åˆ°è¿™é‡Œè¿˜ä¸è¡Œ)ï¼Œè¯·çœ‹çœ‹ä½ çš„æ¿å­æ˜¯å¦æ¥è§¦ä¸è‰¯ï¼Œåå¤æ‘©æ“¦å°è¯•çœ‹èƒ½ä¸èƒ½è¯»å‡ºä¸²å£ï¼Œæˆ‘ä¹‹å‰ä¹Ÿè¯•è¿‡è¿™ä¸ªåŠæ³•ï¼Œä½†æ˜¯æ²¡æœ‰ç”¨ï¼Œåé¢å¶ç„¶ä¹Ÿæ˜¯å¿…ç„¶ä¸‹ååº”è¿‡æ¥ï¼Œååå¤å¤æ’USBæ‹”å‡ºæŸ¥çœ‹ä¸²å£çŠ¶æ€ï¼Œç»ˆäºè§£å†³äº†(æ— è‰¯å•†å®¶å®³äºº)</li></ul><blockquote><p>å‚è€ƒ:<br><a href="https://support.apple.com/zh-tw/HT204063" target="_blank" rel="noopener">å¦‚ä½•é‡ç½® Mac ä¸Šçš„ NVRAM</a></p></blockquote>]]></content>
    
    <summary type="html">
    
      
      
        &lt;blockquote&gt;
&lt;p&gt;æ¯•è®¾åšArduinoå¼€å‘ï¼Œä¸€å¼€å§‹ä¹°äº†æ·˜å®ä¸Šæ…§å‡€è‡ªå·±æ”¹çš„Arduino UNOå›½äº§æ¿å­ï¼Œå›æ¥æ’åœ¨macä¸Šè¯»ä¸å‡ºä¸²å£ï¼Œå®‰è£…äº†å®ƒé™„å¸¦çš„é©±åŠ¨è¿˜æ˜¯è¯»ä¸å‡ºï¼ŒåŒå­¦ä¹°äº†åŸè£…æ¿è¯´ä¸€æ’ä¸Šå°±èƒ½è¯»å‡ºä¸²å£ï¼Œéƒ½æ²¡è‡ªå·±è£…é©±åŠ¨ï¼Œä¸ºäº†çœéº»çƒ¦ï¼Œç›´æ¥è·Ÿå•†å®¶æ¢äº†åŸè£…æ¿ï¼Œè¿™æ—¶å€™éº»çƒ¦æ¥äº†ï¼Œæ¿
      
    
    </summary>
    
      <category term="OS" scheme="http://codingdoge.cn/categories/OS/"/>
    
    
      <category term="Bug" scheme="http://codingdoge.cn/tags/Bug/"/>
    
  </entry>
  
  <entry>
    <title>ã€ŠTCP/IPè¯¦è§£ã€‹ç¬”è®°â€”ç¬¬1ç«  æ¦‚è¿°</title>
    <link href="http://codingdoge.cn/2017/07/23/title:%20%E3%80%8ATCP-IP%E8%AF%A6%E8%A7%A3%E3%80%8B%E7%AC%94%E8%AE%B0%E2%80%94%E7%AC%AC1%E7%AB%A0%20%E6%A6%82%E8%BF%B0/"/>
    <id>http://codingdoge.cn/2017/07/23/title: ã€ŠTCP-IPè¯¦è§£ã€‹ç¬”è®°â€”ç¬¬1ç«  æ¦‚è¿°/</id>
    <published>2017-07-23T15:04:00.000Z</published>
    <updated>2018-01-12T14:22:22.232Z</updated>
    
    <content type="html"><![CDATA[<h1 id="ã€ŠTCP-IPè¯¦è§£ã€‹ç¬”è®°â€”ç¬¬1ç« -æ¦‚è¿°"><a href="#ã€ŠTCP-IPè¯¦è§£ã€‹ç¬”è®°â€”ç¬¬1ç« -æ¦‚è¿°" class="headerlink" title="ã€ŠTCP/IPè¯¦è§£ã€‹ç¬”è®°â€”ç¬¬1ç«  æ¦‚è¿°"></a><a href="http://docs.52im.net/extend/docs/book/tcpip/vol1/1/" target="_blank" rel="noopener">ã€ŠTCP/IPè¯¦è§£ã€‹ç¬”è®°â€”ç¬¬1ç«  æ¦‚è¿°</a></h1><blockquote><p>ä¸€ä¸ªäº’è¿ç½‘å°±æ˜¯ä¸€ç»„é€šè¿‡ç›¸åŒåè®®æ—äº’è¿åœ¨ä¸€èµ·çš„ç½‘ç»œã€‚  </p></blockquote><h2 id="åˆ†å±‚"><a href="#åˆ†å±‚" class="headerlink" title="åˆ†å±‚"></a>åˆ†å±‚</h2><p>TCP/IPé€šå¸¸è¢«è®¤ä¸ºæ˜¯ä¸€ä¸ªå››å±‚åè®®ç³»ç»Ÿ:<br><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="http://oo8snaf4x.bkt.clouddn.com/WX20170320-171317@2x.png?imageView2/0/q/100" alt="WX20170320-171317@2x" title="">                </div>                <div class="image-caption">WX20170320-171317@2x</div>            </figure></p><p>ç½‘ç»œå±‚å’Œè¿è¾“å±‚ä¹‹é—´çš„åŒºåˆ«æ˜¯æœ€ä¸ºå…³é”®çš„ï¼šç½‘ç»œå±‚ï¼ˆIPï¼‰æä¾›ç‚¹åˆ°ç‚¹çš„æœåŠ¡ï¼Œè€Œè¿è¾“å±‚ï¼ˆTCPå’ŒUDPï¼‰æä¾›ç«¯åˆ°ç«¯çš„æœåŠ¡ã€‚</p><p>åœ¨TCP/IPåè®®æ—ä¸­ï¼Œç½‘ç»œå±‚IPæä¾›çš„æ˜¯ä¸€ç§ä¸å¯é çš„æœåŠ¡ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå®ƒåªæ˜¯å°½å¯èƒ½å¿«åœ°æŠŠåˆ†ç»„ä»æºç»“ç‚¹é€åˆ°ç›®çš„ç»“ç‚¹ï¼Œä½†æ˜¯å¹¶ä¸æä¾›ä»»ä½•å¯é æ€§ä¿è¯ã€‚è€Œå¦ä¸€æ–¹é¢ï¼ŒTCPåœ¨ä¸å¯é çš„IPå±‚ä¸Šæä¾›äº†ä¸€ä¸ªå¯é çš„è¿è¾“å±‚ã€‚ä¸ºäº†æä¾›è¿™ç§å¯é çš„æœåŠ¡ï¼ŒTCPé‡‡ç”¨äº†è¶…æ—¶é‡ä¼ ã€å‘é€å’Œæ¥æ”¶ç«¯åˆ°ç«¯çš„ç¡®è®¤åˆ†ç»„ç­‰æœºåˆ¶ã€‚</p><p>è·¯ç”±å™¨ä¸ºä¸åŒç±»å‹çš„ç‰©ç†ç½‘ç»œæä¾›è¿æ¥ã€‚</p><p>ä¸€ä¸ªä¸»æœºä¹Ÿå¯ä»¥æœ‰å¤šä¸ªæ¥å£ï¼Œä½†ä¸€èˆ¬ä¸ç§°ä½œè·¯ç”±å™¨,é™¤éå®ƒçš„åŠŸèƒ½åªæ˜¯å•çº¯åœ°æŠŠåˆ†ç»„ä»ä¸€ä¸ªæ¥å£ä¼ é€åˆ°å¦ä¸€ä¸ªæ¥å£ã€‚</p><p>äº’è”ç½‘çš„ç›®çš„ä¹‹ä¸€æ˜¯åœ¨åº”ç”¨ç¨‹åºä¸­éšè—æ‰€æœ‰çš„ç‰©ç†ç»†èŠ‚ã€‚</p><p>è¿æ¥ç½‘ç»œçš„å¦ä¸€ä¸ªé€”å¾„æ˜¯ä½¿ç”¨ç½‘æ¡¥ã€‚ç½‘æ¡¥æ˜¯åœ¨é“¾è·¯å±‚ä¸Šå¯¹ç½‘ç»œè¿›è¡Œäº’è¿ï¼Œè€Œè·¯ç”±å™¨åˆ™æ˜¯åœ¨ç½‘ç»œå±‚ä¸Šå¯¹ç½‘ç»œè¿›è¡Œäº’è¿ã€‚</p><h2 id="äº’è”ç½‘çš„åœ°å€"><a href="#äº’è”ç½‘çš„åœ°å€" class="headerlink" title="äº’è”ç½‘çš„åœ°å€"></a>äº’è”ç½‘çš„åœ°å€</h2><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="http://oo8snaf4x.bkt.clouddn.com/47F26D90-176D-4C0A-A315-6A9E199E79F6.png?imageView2/0/q/100" alt="47F26D90-176D-4C0A-A315-6A9E199E79F6" title="">                </div>                <div class="image-caption">47F26D90-176D-4C0A-A315-6A9E199E79F6</div>            </figure><p>è¿™äº› 32 ä½çš„åœ°å€é€šå¸¸å†™æˆå››ä¸ªåè¿›åˆ¶çš„æ•°,å…¶ä¸­æ¯ä¸ªæ•´æ•°å¯¹åº”ä¸€ä¸ªå­—èŠ‚ã€‚è¿™ç§è¡¨ç¤ºæ–¹æ³•ç§°ä½œâ€œç‚¹åˆ†åè¿›åˆ¶è¡¨ç¤ºæ³•(Dotted decimal notation)â€ã€‚<br><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="http://oo8snaf4x.bkt.clouddn.com/70807FBE-712D-4A5C-97F2-BBCA12C1F11D.png?imageView2/0/q/100" alt="70807FBE-712D-4A5C-97F2-BBCA12C1F11D" title="">                </div>                <div class="image-caption">70807FBE-712D-4A5C-97F2-BBCA12C1F11D</div>            </figure></p><h2 id="å°è£…"><a href="#å°è£…" class="headerlink" title="å°è£…"></a>å°è£…</h2><p>TCPä¼ ç»™IPçš„æ•°æ®å•å…ƒç§°ä½œTCPæŠ¥æ–‡æ®µæˆ–ç®€ç§°ä¸ºTCPæ®µï¼ˆTCP segmentï¼‰ã€‚IPä¼ ç»™ç½‘ç»œæ¥å£å±‚çš„æ•°æ®å•å…ƒç§°ä½œIPæ•°æ®æŠ¥(IP datagram)ã€‚é€šè¿‡ä»¥å¤ªç½‘ä¼ è¾“çš„æ¯”ç‰¹æµç§°ä½œå¸§(Frame)ã€‚</p><h2 id="åˆ†ç”¨"><a href="#åˆ†ç”¨" class="headerlink" title="åˆ†ç”¨"></a>åˆ†ç”¨</h2><p>å½“ç›®çš„ä¸»æœºæ”¶åˆ°ä¸€ä¸ªä»¥å¤ªç½‘æ•°æ®å¸§æ—¶ï¼Œæ•°æ®å°±å¼€å§‹ä»åè®®æ ˆä¸­ç”±åº•å‘ä¸Šå‡ï¼ŒåŒæ—¶å»æ‰å„å±‚åè®®åŠ ä¸Šçš„æŠ¥æ–‡é¦–éƒ¨ã€‚æ¯å±‚åè®®ç›’éƒ½è¦å»æ£€æŸ¥æŠ¥æ–‡é¦–éƒ¨ä¸­çš„åè®®æ ‡è¯†ï¼Œä»¥ç¡®å®šæ¥æ”¶æ•°æ®çš„ä¸Šå±‚åè®®ã€‚è¿™ä¸ªè¿‡ç¨‹ç§°ä½œåˆ†ç”¨ï¼ˆDemultiplexingï¼‰ã€‚</p><h2 id="å®¢æˆ·-æœåŠ¡å™¨æ¨¡å‹"><a href="#å®¢æˆ·-æœåŠ¡å™¨æ¨¡å‹" class="headerlink" title="å®¢æˆ·-æœåŠ¡å™¨æ¨¡å‹"></a>å®¢æˆ·-æœåŠ¡å™¨æ¨¡å‹</h2><p>å¤§éƒ¨åˆ†ç½‘ç»œåº”ç”¨ç¨‹åºåœ¨ç¼–å†™æ—¶éƒ½å‡è®¾ä¸€ç«¯æ˜¯å®¢æˆ·ï¼Œå¦ä¸€ç«¯æ˜¯æœåŠ¡å™¨ï¼Œå…¶ç›®çš„æ˜¯ä¸ºäº†è®©æœåŠ¡å™¨ä¸ºå®¢æˆ·æä¾›ä¸€äº›ç‰¹å®šçš„æœåŠ¡ã€‚<br>ä¸€èˆ¬æ¥è¯´ï¼ŒTCPæœåŠ¡å™¨æ˜¯å¹¶å‘çš„ï¼Œè€ŒUDPæœåŠ¡å™¨æ˜¯é‡å¤çš„ã€‚</p><h2 id="ä¹ é¢˜"><a href="#ä¹ é¢˜" class="headerlink" title="ä¹ é¢˜"></a>ä¹ é¢˜</h2><ol><li>è¯·è®¡ç®—æœ€å¤šæœ‰å¤šå°‘ä¸ªAç±»ã€Bç±»å’ŒCç±»ç½‘ç»œå·ã€‚</li><li>ç”¨åŒ¿åFTPï¼ˆè§27.3èŠ‚ï¼‰ä»ä¸»æœºnic.merit.eduä¸Šè·å–æ–‡ä»¶nsfnet_statistics_history.netcountã€‚è¯¥æ–‡ä»¶åŒ…å«åœ¨NSFNETç½‘ç»œä¸Šç™»è®°çš„å›½å†…å’Œå›½å¤–çš„ç½‘ç»œæ•°ã€‚ç”»ä¸€åæ ‡ç³»ï¼Œæ¨ªåæ ‡ä»£è¡¨å¹´ï¼Œçºµåæ ‡ä»£è¡¨ç½‘ç»œæ€»æ•°çš„å¯¹æ•°å€¼ã€‚çºµåæ ‡çš„æœ€å¤§å€¼æ˜¯ä¹ é¢˜1.1çš„ç»“æœã€‚å¦‚æœæ•°æ®æ˜¾ç¤ºä¸€ä¸ªæ˜æ˜¾çš„è¶‹åŠ¿ï¼Œè¯·ä¼°è®¡æŒ‰ç…§å½“å‰çš„ç¼–å€ä½“åˆ¶æ¨ç®—ï¼Œä½•æ—¶ä¼šç”¨å®Œæ‰€æœ‰çš„ç½‘ç»œåœ°å€ï¼ˆ3.10èŠ‚è®¨è®ºè§£å†³è¯¥éš¾é¢˜çš„å»ºè®®ï¼‰ã€‚</li><li>è·å–ä¸€ä»½ä¸»æœºéœ€æ±‚<strong>RFC</strong>æ‹·è´[Braden 1989a]ï¼Œé˜…è¯»æœ‰å…³åº”ç”¨äºTCP/IPåè®®æ—æ¯ä¸€å±‚çš„ç¨³å¥æ€§åŸåˆ™ã€‚è¿™ä¸ªåŸåˆ™çš„å‚è€ƒå¯¹è±¡æ˜¯ä»€ä¹ˆï¼Ÿ</li><li>è·å–ä¸€ä»½æœ€æ–°çš„èµ‹å€¼<strong>RFC</strong>æ‹·è´ã€‚â€œquote of the dayâ€åè®®çš„æœ‰åç«¯å£å·æ˜¯ä»€ä¹ˆï¼Ÿå“ªä¸ª<strong>RFC</strong>å¯¹è¯¥åè®®è¿›è¡Œäº†å®šä¹‰ï¼Ÿ</li><li>å¦‚æœä½ æœ‰ä¸€ä¸ªæ¥å…¥TCP/IPäº’è”ç½‘çš„ä¸»æœºå¸å·ï¼Œå®ƒçš„ä¸»IPåœ°å€æ˜¯å¤šå°‘ï¼Ÿè¿™å°ä¸»æœºæ˜¯å¦æ¥å…¥äº†Internetï¼Ÿå®ƒæ˜¯å¤šæ¥å£ä¸»æœºå—ï¼Ÿ</li><li>è·å–ä¸€ä»½<strong>RFC</strong> 1000çš„æ‹·è´ï¼Œäº†è§£RFCè¿™ä¸ªæœ¯è¯­ä»ä½•è€Œæ¥ã€‚</li><li>ä¸<strong>Internet</strong>åä¼šè”ç³»ï¼Œisoc@isoc.orgæˆ–è€…<strong>+170 3648 9888</strong>ï¼Œäº†è§£æœ‰å…³åŠ å…¥çš„æƒ…å†µã€‚</li><li>ç”¨åŒ¿åFTPä»ä¸»æœºis.internic.netå¤„è·å–æ–‡ä»¶about-internic/information-about-the-internicã€‚</li></ol><h2 id="éƒ¨åˆ†ä¹ é¢˜ç­”æ¡ˆ"><a href="#éƒ¨åˆ†ä¹ é¢˜ç­”æ¡ˆ" class="headerlink" title="éƒ¨åˆ†ä¹ é¢˜ç­”æ¡ˆ"></a>éƒ¨åˆ†ä¹ é¢˜ç­”æ¡ˆ</h2><ol><li>ç­”æ¡ˆæ˜¯ï¼š27-2ï¼ˆ126ï¼‰ï¼‹214-2ï¼ˆ16 382ï¼‰ï¼‹221-2ï¼ˆ2 097 150ï¼‰=2 113 658ã€‚æ¯ä¸€éƒ¨åˆ†éƒ½å‡å»2æ˜¯å› ä¸ºå…¨0æˆ–å…¨1ç½‘ç»œIDæ˜¯éæ³•çš„ã€‚</li><li>å›¾D-1æ˜¾ç¤ºäº†ç›´åˆ°1993å¹´8æœˆçš„æœ‰å…³æ•°æ®ã€‚å¦‚æœç½‘ç»œæ•°ç»§ç»­å‘ˆæŒ‡æ•°å¢é•¿çš„è¯ï¼Œè™šçº¿ä¼°è®¡äº†2000å¹´å¯èƒ½è¾¾åˆ°çš„æœ€å¤§çš„ç½‘ç»œæ•°ã€‚</li><li>â€œè‡ªç”±åœ°æ¥æ”¶ï¼Œä¿å®ˆåœ°å‘é€ã€‚â€</li></ol><blockquote><p>èµ„æ–™æ¥æºäº <a href="http://www.52im.net/" target="_blank" rel="noopener">å³æ—¶é€šè®¯ç½‘</a>ï¼Œä»…åšå­¦ä¹ å‚è€ƒ  </p></blockquote>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;ã€ŠTCP-IPè¯¦è§£ã€‹ç¬”è®°â€”ç¬¬1ç« -æ¦‚è¿°&quot;&gt;&lt;a href=&quot;#ã€ŠTCP-IPè¯¦è§£ã€‹ç¬”è®°â€”ç¬¬1ç« -æ¦‚è¿°&quot; class=&quot;headerlink&quot; title=&quot;ã€ŠTCP/IPè¯¦è§£ã€‹ç¬”è®°â€”ç¬¬1ç«  æ¦‚è¿°&quot;&gt;&lt;/a&gt;&lt;a href=&quot;http://docs.52im.net
      
    
    </summary>
    
      <category term="Network" scheme="http://codingdoge.cn/categories/Network/"/>
    
    
      <category term="Reading Notes" scheme="http://codingdoge.cn/tags/Reading-Notes/"/>
    
  </entry>
  
  <entry>
    <title>STLå¸¸è§ç”¨æ³• â€” map</title>
    <link href="http://codingdoge.cn/2017/07/21/title:%20STL%E5%B8%B8%E8%A7%81%E7%94%A8%E6%B3%95%20%E2%80%94%20map/"/>
    <id>http://codingdoge.cn/2017/07/21/title: STLå¸¸è§ç”¨æ³• â€” map/</id>
    <published>2017-07-21T05:10:00.000Z</published>
    <updated>2018-01-14T17:04:04.187Z</updated>
    
    <content type="html"><![CDATA[<h1 id="STLå¸¸è§ç”¨æ³•-â€”"><a href="#STLå¸¸è§ç”¨æ³•-â€”" class="headerlink" title="STLå¸¸è§ç”¨æ³• â€”"></a>STLå¸¸è§ç”¨æ³• â€”</h1><blockquote><p>ä»£ç æ•²å¾—å°‘ï¼ŒSTLæ€»æ˜¯ç”¨çš„ä¸ç†Ÿï¼Œä¾¿è‡ªå·±æ•´ç†ä¸€äº›ç”¨æ³•ï¼Œæœ‰çœ¼ç¼˜çš„é¡ºæ‰‹ç”¨ç€å§ã€‚ </p></blockquote><hr><h2 id="ç®€ä»‹"><a href="#ç®€ä»‹" class="headerlink" title="ç®€ä»‹"></a>ç®€ä»‹</h2><p>mapsæ˜¯ä¸€ä¸ªå…³è”å®¹å™¨ï¼Œç”¨æ¥å­˜å‚¨key-valueå¼çš„å…ƒç´ ï¼Œæä¾›ä¸€å¯¹ä¸€hashã€‚å†…éƒ¨çš„å®ç°ï¼Œè‡ªå»ºä¸€é¢—çº¢é»‘æ ‘ï¼Œè¿™æ£µæ ‘å…·æœ‰å¯¹æ•°æ®è‡ªåŠ¨æ’åºçš„åŠŸèƒ½ã€‚æ¯”å¦‚ä¸€ä¸ªç­çº§ä¸­ï¼Œæ¯ä¸ªå­¦ç”Ÿçš„å­¦å·å’Œä»–çš„å§“åå°±å­˜åœ¨ä¸€å¯¹ä¸€æ˜ å°„çš„å…³ç³»ã€‚</p><ul><li>ç¬¬ä¸€ä¸ªå€¼æ˜¯å…³é”®å­—(key)ï¼Œæ¯ä¸ªå…³é”®å­—åªèƒ½åœ¨mapä¸­å‡ºç°ä¸€æ¬¡</li><li>ç¬¬äºŒä¸ªå€¼ä¸ºå…³é”®å­—çš„å€¼(value)</li></ul><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="http://oo8snaf4x.bkt.clouddn.com/15014668312515.png?imageView2/0/q/100" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h2 id="ç”¨æ³•"><a href="#ç”¨æ³•" class="headerlink" title="ç”¨æ³•"></a>ç”¨æ³•</h2><h3 id="å¤´æ–‡ä»¶"><a href="#å¤´æ–‡ä»¶" class="headerlink" title="å¤´æ–‡ä»¶"></a>å¤´æ–‡ä»¶</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">#include &lt;map&gt;</div><div class="line"></div><div class="line">template&lt;</div><div class="line">    class Key,</div><div class="line">    class T,</div><div class="line">    class Compare = std::less&lt;Key&gt;,</div><div class="line">    class Allocator = std::allocator&lt;std::pair&lt;const Key, T&gt; &gt;</div><div class="line">&gt; class map;</div></pre></td></tr></table></figure><h3 id="æ„é€ å‡½æ•°"><a href="#æ„é€ å‡½æ•°" class="headerlink" title="æ„é€ å‡½æ•°"></a>æ„é€ å‡½æ•°</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">namespace pmr &#123;</div><div class="line">    template &lt;class Key, class T, class Compare = std::less&lt;Key&gt;&gt;</div><div class="line">    using map = std::map&lt;Key, T, Compare,</div><div class="line">                         std::pmr::polymorphic_allocator&lt;std::pair&lt;const Key,T&gt;&gt;&gt;</div><div class="line">&#125;</div></pre></td></tr></table></figure><h3 id="æˆå‘˜å‡½æ•°"><a href="#æˆå‘˜å‡½æ•°" class="headerlink" title="æˆå‘˜å‡½æ•°"></a>æˆå‘˜å‡½æ•°</h3><table><thead><tr><th>æˆå‘˜å‡½æ•°</th><th>å®ç°æ“ä½œ</th></tr></thead><tbody><tr><td>begin</td><td>è¿”å›ä¸€ä¸ªèµ·å§‹çš„è¿­ä»£å™¨</td></tr><tr><td>end</td><td>è¿”å›ä¸€ä¸ªæœ«å°¾çš„è¿­ä»£å™¨</td></tr><tr><td>empty</td><td>æ£€æŸ¥å®¹å™¨æ˜¯å¦ä¸ºç©º</td></tr><tr><td>size</td><td>è¿”å›å®¹å™¨å†…å…ƒç´ ä¸ªæ•°</td></tr><tr><td>clear</td><td>æ¸…é™¤å®¹å™¨å†…å®¹</td></tr><tr><td>insert</td><td>æ’å…¥å…ƒç´ æˆ–èŠ‚ç‚¹</td></tr><tr><td>erase</td><td>åˆ é™¤å…ƒç´ </td></tr><tr><td>swap</td><td>äº¤æ¢å†…å®¹</td></tr><tr><td>count</td><td>è¿”å›æŒ‡å®škeyçš„å…ƒç´ ä¸ªæ•°</td></tr><tr><td>find</td><td>é€šè¿‡keyæŸ¥æ‰¾å…ƒç´ </td></tr></tbody></table><h2 id="ç”¨æ³•æ¼”ç¤º"><a href="#ç”¨æ³•æ¼”ç¤º" class="headerlink" title="ç”¨æ³•æ¼”ç¤º"></a>ç”¨æ³•æ¼”ç¤º</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line">#include &lt;map&gt;</div><div class="line"></div><div class="line">void mapTest()</div><div class="line">&#123;</div><div class="line">    std::map&lt;int, int&gt; m;      // æ„é€ å‡½æ•°</div><div class="line">    m.insert(pair&lt;int, int&gt;(1, 10));   // æ’å…¥å…ƒç´ </div><div class="line">    m.insert(pair&lt;int, int&gt;(2, 30));</div><div class="line">    m.insert(pair&lt;int, int&gt;(4, 50));</div><div class="line">    map&lt;int, int&gt;::iterator it;    // è¿­ä»£å™¨</div><div class="line">    it = m.find(3);    // é€šè¿‡keyæŸ¥æ‰¾å…ƒç´ </div><div class="line">    if (it == m.end()) // å¦‚æœè¿”å›å€¼ä¸ºå°¾éƒ¨è¿­ä»£å™¨åˆ™æ— æ­¤å…ƒç´ </div><div class="line">    &#123;</div><div class="line">        cout &lt;&lt; &quot;Not find&quot; &lt;&lt; endl;</div><div class="line">        m.insert(pair&lt;int, int&gt;(3, 20));</div><div class="line">    &#125;</div><div class="line">    for (it = m.begin(); it != m.end(); it++)  // é€šè¿‡è¿­ä»£å™¨éå†mapå®¹å™¨</div><div class="line">    &#123;</div><div class="line">        cout &lt;&lt; it-&gt;first &lt;&lt; &quot; &quot; &lt;&lt; it-&gt;second &lt;&lt; endl;   // é€šè¿‡è¿­ä»£å™¨è®¿é—®å…ƒç´ çš„key-value</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure><blockquote><p>å‚è€ƒ:<br><a href="http://mropengate.blogspot.com/2015/12/cc-map-stl.html" target="_blank" rel="noopener">C/C++ - Map (STL) ç”¨æ³•èˆ‡å¿ƒå¾—å®Œå…¨æ”»ç•¥</a></p></blockquote>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;STLå¸¸è§ç”¨æ³•-â€”&quot;&gt;&lt;a href=&quot;#STLå¸¸è§ç”¨æ³•-â€”&quot; class=&quot;headerlink&quot; title=&quot;STLå¸¸è§ç”¨æ³• â€”&quot;&gt;&lt;/a&gt;STLå¸¸è§ç”¨æ³• â€”&lt;/h1&gt;&lt;blockquote&gt;
&lt;p&gt;ä»£ç æ•²å¾—å°‘ï¼ŒSTLæ€»æ˜¯ç”¨çš„ä¸ç†Ÿï¼Œä¾¿è‡ªå·±æ•´ç†ä¸€äº›ç”¨æ³•ï¼Œæœ‰çœ¼ç¼˜
      
    
    </summary>
    
      <category term="CPP" scheme="http://codingdoge.cn/categories/CPP/"/>
    
    
      <category term="STL" scheme="http://codingdoge.cn/tags/STL/"/>
    
  </entry>
  
  <entry>
    <title>STLå¸¸è§ç”¨æ³• â€” vector</title>
    <link href="http://codingdoge.cn/2017/07/21/title:%20STL%E5%B8%B8%E8%A7%81%E7%94%A8%E6%B3%95%20%E2%80%94%20vector/"/>
    <id>http://codingdoge.cn/2017/07/21/title: STLå¸¸è§ç”¨æ³• â€” vector/</id>
    <published>2017-07-21T05:06:00.000Z</published>
    <updated>2018-01-14T17:04:41.751Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>ä»£ç æ•²å¾—å°‘ï¼ŒSTLæ€»æ˜¯ç”¨çš„ä¸ç†Ÿï¼Œä¾¿è‡ªå·±æ•´ç†ä¸€äº›ç”¨æ³•ï¼Œæœ‰çœ¼ç¼˜çš„é¡ºæ‰‹ç”¨ç€å§ã€‚ </p></blockquote><hr><h2 id="ç®€ä»‹"><a href="#ç®€ä»‹" class="headerlink" title="ç®€ä»‹"></a>ç®€ä»‹</h2><p>vectoræ˜¯çº¿æ€§å®¹å™¨,å®ƒçš„å…ƒç´ ä¸¥æ ¼çš„æŒ‰ç…§çº¿æ€§åºåˆ—æ’åº,å’ŒåŠ¨æ€æ•°ç»„å¾ˆç›¸ä¼¼,å’Œæ•°ç»„ä¸€æ ·,å®ƒçš„å…ƒç´ å­˜å‚¨åœ¨ä¸€å—è¿ç»­çš„å­˜å‚¨ç©ºé—´ä¸­,è¿™ä¹Ÿæ„å‘³ç€æˆ‘ä»¬ä¸ä»…å¯ä»¥ä½¿ç”¨è¿­ä»£å™¨(iterator)è®¿é—®å…ƒç´ ,è¿˜å¯ä»¥ä½¿ç”¨æŒ‡é’ˆçš„åç§»æ–¹å¼è®¿é—®,å’Œå¸¸è§„æ•°ç»„ä¸ä¸€æ ·çš„æ˜¯,vectorèƒ½å¤Ÿè‡ªåŠ¨å­˜å‚¨å…ƒç´ ,å¯ä»¥è‡ªåŠ¨å¢é•¿æˆ–ç¼©å°å­˜å‚¨ç©ºé—´ã€‚</p><h2 id="ç”¨æ³•"><a href="#ç”¨æ³•" class="headerlink" title="ç”¨æ³•"></a>ç”¨æ³•</h2><h3 id="å¤´æ–‡ä»¶"><a href="#å¤´æ–‡ä»¶" class="headerlink" title="å¤´æ–‡ä»¶"></a>å¤´æ–‡ä»¶</h3><figure class="highlight autoit"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></div></pre></td></tr></table></figure><h3 id="æ„é€ å‡½æ•°"><a href="#æ„é€ å‡½æ•°" class="headerlink" title="æ„é€ å‡½æ•°"></a>æ„é€ å‡½æ•°</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 1</span></div><div class="line"><span class="keyword">template</span>&lt;<span class="class"><span class="keyword">class</span> <span class="title">T</span>, <span class="title">class</span> <span class="title">Allocator</span> = <span class="title">std</span>:</span>:allocator&lt;T&gt; &gt; <span class="class"><span class="keyword">class</span> <span class="title">vector</span>;</span></div><div class="line"></div><div class="line"><span class="comment">// 2</span></div><div class="line"><span class="keyword">namespace</span> pmr &#123;</div><div class="line">    <span class="keyword">template</span> &lt;<span class="class"><span class="keyword">class</span> <span class="title">T</span>&gt;</span></div><div class="line">    <span class="title">using</span> <span class="title">vector</span> = <span class="title">std</span>::<span class="built_in">vector</span>&lt;T, <span class="built_in">std</span>::pmr::polymorphic_allocator&lt;T&gt;&gt;;</div><div class="line">&#125;</div></pre></td></tr></table></figure><blockquote><ol><li>std::vector is a sequence container that encapsulates dynamic size arrays.</li><li>std::pmr::vector is an alias template that uses a polymorphic allocator</li></ol></blockquote><h3 id="æˆå‘˜å‡½æ•°"><a href="#æˆå‘˜å‡½æ•°" class="headerlink" title="æˆå‘˜å‡½æ•°"></a>æˆå‘˜å‡½æ•°</h3><table><thead><tr><th>æˆå‘˜å‡½æ•°</th><th>å®ç°æ“ä½œ</th></tr></thead><tbody><tr><td>c.assign(beg,end)</td><td>å°†[beg; end)åŒºé—´ä¸­çš„æ•°æ®èµ‹å€¼ç»™c</td></tr><tr><td>c.assign(n,elem)</td><td>å°†nä¸ªelemçš„æ‹·è´èµ‹å€¼ç»™c</td></tr><tr><td>c.at(idx)</td><td>ä¼ å›ç´¢å¼•idxæ‰€æŒ‡çš„æ•°æ®ï¼Œå¦‚æœidxè¶Šç•Œï¼ŒæŠ›å‡ºout_of_range</td></tr><tr><td>c.back()</td><td>ä¼ å›æœ€åä¸€ä¸ªæ•°æ®ï¼Œä¸æ£€æŸ¥è¿™ä¸ªæ•°æ®æ˜¯å¦å­˜åœ¨</td></tr><tr><td>c.begin()</td><td>ä¼ å›è¿­ä»£å™¨é‡çš„å¯ä¸€ä¸ªæ•°æ®</td></tr><tr><td>c.capacity()</td><td>è¿”å›å®¹å™¨ä¸­æ•°æ®ä¸ªæ•°</td></tr><tr><td>c.clear()</td><td>ç§»é™¤å®¹å™¨ä¸­æ‰€æœ‰æ•°æ®</td></tr><tr><td>c.empty()</td><td>åˆ¤æ–­å®¹å™¨æ˜¯å¦ä¸ºç©º</td></tr><tr><td>c.end()</td><td>æŒ‡å‘è¿­ä»£å™¨ä¸­çš„æœ€åä¸€ä¸ªæ•°æ®åœ°å€</td></tr><tr><td>c.erase(pos)</td><td>åˆ é™¤posä½ç½®çš„æ•°æ®ï¼Œä¼ å›ä¸‹ä¸€ä¸ªæ•°æ®çš„ä½ç½®</td></tr><tr><td>c.erase(beg,end)</td><td>åˆ é™¤[beg,end)åŒºé—´çš„æ•°æ®ï¼Œä¼ å›ä¸‹ä¸€ä¸ªæ•°æ®çš„ä½ç½®</td></tr><tr><td>c.front()</td><td>ä¼ å›ç¬¬ä¸€ä¸ªæ•°æ®</td></tr><tr><td>get_allocator</td><td>ä½¿ç”¨æ„é€ å‡½æ•°è¿”å›ä¸€ä¸ªæ‹·è´</td></tr><tr><td>c.insert(pos,elem)</td><td>åœ¨posä½ç½®æ’å…¥ä¸€ä¸ªelemæ‹·è´ï¼Œä¼ å›æ–°æ•°æ®ä½ç½®</td></tr><tr><td>c.insert(pos,n,elem)</td><td>åœ¨posä½ç½®æ’å…¥nä¸ªelemæ•°æ®ã€‚æ— è¿”å›å€¼</td></tr><tr><td>c.insert(pos,beg,end)</td><td>åœ¨posä½ç½®æ’å…¥åœ¨[beg,end)åŒºé—´çš„æ•°æ®ã€‚æ— è¿”å›å€¼</td></tr><tr><td>c.max_size()</td><td>è¿”å›å®¹å™¨ä¸­æœ€å¤§æ•°æ®çš„æ•°é‡</td></tr><tr><td>c.pop_back()</td><td>åˆ é™¤æœ€åä¸€ä¸ªæ•°æ®</td></tr><tr><td>c.push_back(elem)</td><td>åœ¨å°¾éƒ¨åŠ å…¥ä¸€ä¸ªæ•°æ®</td></tr><tr><td>c.rbegin()</td><td>ä¼ å›ä¸€ä¸ªé€†å‘é˜Ÿåˆ—çš„ç¬¬ä¸€ä¸ªæ•°æ®</td></tr><tr><td>c.rend()</td><td>ä¼ å›ä¸€ä¸ªé€†å‘é˜Ÿåˆ—çš„æœ€åä¸€ä¸ªæ•°æ®çš„ä¸‹ä¸€ä¸ªä½ç½®</td></tr><tr><td>c.resize(num)</td><td>é‡æ–°æŒ‡å®šé˜Ÿåˆ—çš„é•¿åº¦</td></tr><tr><td>c.reserve()</td><td>ä¿ç•™é€‚å½“çš„å®¹é‡</td></tr><tr><td>c.size()</td><td>è¿”å›å®¹å™¨ä¸­å®é™…æ•°æ®çš„ä¸ªæ•°</td></tr><tr><td>c1.swap(c2)</td><td>å°†c1å’Œc2å…ƒç´ äº’æ¢</td></tr><tr><td>swap(c1,c2)</td><td>åŒä¸Šæ“ä½œ</td></tr><tr><td>vector<elem> c</elem></td><td>åˆ›å»ºä¸€ä¸ªç©ºçš„vector</td></tr><tr><td>vector <elem> c1(c2)</elem></td><td>å¤åˆ¶ä¸€ä¸ªvector</td></tr><tr><td>vector <elem> c(n)</elem></td><td>åˆ›å»ºä¸€ä¸ªvectorï¼Œå«æœ‰nä¸ªæ•°æ®ï¼Œæ•°æ®å‡å·²ç¼ºçœæ„é€ äº§ç”Ÿ</td></tr><tr><td>vector <elem> c(n, elem)</elem></td><td>åˆ›å»ºä¸€ä¸ªå«æœ‰nä¸ªelemæ‹·è´çš„vectorã€‚</td></tr><tr><td>vector <elem> c(beg,end)</elem></td><td>åˆ›å»ºä¸€ä¸ªä»¥[beg;end)åŒºé—´çš„vector</td></tr><tr><td>c.~ vector <elem>()</elem></td><td>é”€æ¯æ‰€æœ‰æ•°æ®ï¼Œé‡Šæ”¾å†…å­˜</td></tr></tbody></table><h2 id="ç”¨æ³•æ¼”ç¤º"><a href="#ç”¨æ³•æ¼”ç¤º" class="headerlink" title="ç”¨æ³•æ¼”ç¤º"></a>ç”¨æ³•æ¼”ç¤º</h2><ul><li>ä½¿ç”¨reverseå°†å…ƒç´ ç¿»è½¬:<br>éœ€è¦å¤´æ–‡ä»¶<code>#include&lt;algorithm&gt;</code></li></ul><figure class="highlight lisp"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">reverse(<span class="name">vec</span>.begin(),vec.end())<span class="comment">;</span></div></pre></td></tr></table></figure><p>å°†å…ƒç´ ç¿»è½¬(åœ¨vectorä¸­ï¼Œå¦‚æœä¸€ä¸ªå‡½æ•°ä¸­éœ€è¦ä¸¤ä¸ªè¿­ä»£å™¨ï¼Œä¸€èˆ¬åä¸€ä¸ªéƒ½ä¸åŒ…å«)</p><ul><li>ä½¿ç”¨sortæ’åº:<br>éœ€è¦å¤´æ–‡ä»¶#include<algorithm>ï¼Œ<br>sort(vec.begin(),vec.end());(é»˜è®¤æ˜¯æŒ‰å‡åºæ’åˆ—,å³ä»å°åˆ°å¤§).<br>å¯ä»¥é€šè¿‡é‡å†™æ’åºæ¯”è¾ƒå‡½æ•°æŒ‰ç…§é™åºæ¯”è¾ƒï¼Œå¦‚ä¸‹:</algorithm></li></ul><p>å®šä¹‰æ’åºæ¯”è¾ƒå‡½æ•°:</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">bool</span> <span class="title">Comp</span><span class="params">(<span class="keyword">const</span> <span class="keyword">int</span> &amp;a,<span class="keyword">const</span> <span class="keyword">int</span> &amp;b)</span></span></div><div class="line">&#123;</div><div class="line">    <span class="keyword">return</span> a&gt;b;</div><div class="line">&#125;</div></pre></td></tr></table></figure><p>è°ƒç”¨æ—¶:<code>sort(vec.begin(),vec.end(),Comp)</code>ï¼Œè¿™æ ·å°±é™åºæ’åºã€‚</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;blockquote&gt;
&lt;p&gt;ä»£ç æ•²å¾—å°‘ï¼ŒSTLæ€»æ˜¯ç”¨çš„ä¸ç†Ÿï¼Œä¾¿è‡ªå·±æ•´ç†ä¸€äº›ç”¨æ³•ï¼Œæœ‰çœ¼ç¼˜çš„é¡ºæ‰‹ç”¨ç€å§ã€‚ &lt;/p&gt;
&lt;/blockquote&gt;
&lt;hr&gt;
&lt;h2 id=&quot;ç®€ä»‹&quot;&gt;&lt;a href=&quot;#ç®€ä»‹&quot; class=&quot;headerlink&quot; title=&quot;ç®€ä»‹&quot;&gt;&lt;/a&gt;ç®€ä»‹&lt;
      
    
    </summary>
    
      <category term="CPP" scheme="http://codingdoge.cn/categories/CPP/"/>
    
    
      <category term="STL" scheme="http://codingdoge.cn/tags/STL/"/>
    
  </entry>
  
  <entry>
    <title>å¸¸ç”¨å®å®šä¹‰</title>
    <link href="http://codingdoge.cn/2017/07/17/title:%20%E5%B8%B8%E7%94%A8%E5%AE%8F%E5%AE%9A%E4%B9%89/"/>
    <id>http://codingdoge.cn/2017/07/17/title: å¸¸ç”¨å®å®šä¹‰/</id>
    <published>2017-07-17T06:08:00.000Z</published>
    <updated>2018-01-13T05:07:28.710Z</updated>
    
    <content type="html"><![CDATA[<p><a href="http://blog.csdn.net/songrotek/article/details/8929963" target="_blank" rel="noopener">iOSå¼€å‘é«˜çº§:ä½¿ç”¨å®å®šä¹‰macros</a></p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//1. æ‰“å°æ—¥å¿—</span></div><div class="line"><span class="meta">#<span class="meta-keyword">ifdef</span> DEBUG</span></div><div class="line"><span class="meta">#    <span class="meta-keyword">define</span> DLog(...) NSLog(__VA_ARGS__)</span></div><div class="line"><span class="meta">#<span class="meta-keyword">else</span></span></div><div class="line"><span class="meta">#    <span class="meta-keyword">define</span> DLog(...)</span></div><div class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></div><div class="line"></div><div class="line"><span class="comment">//2. è·å–å±å¹• å®½åº¦ã€é«˜åº¦</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> kScreenWidth ([UIScreen mainScreen].bounds.size.width)</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> kScreenHeight ([UIScreen mainScreen].bounds.size.height)</span></div><div class="line"></div><div class="line"><span class="comment">//3. é¢œè‰²</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> RGB(r, g, b, a)  [UIColor colorWithRed:r/255.0f green:g/255.0f blue:b/255.0f alpha:a]</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> HEXCOLOR(c)       [UIColor colorWithRed:((c&gt;&gt;16)&amp;0xFF)/255.0f green:((c&gt;&gt;8)&amp;0xFF)/255.0f blue:(c&amp;0xFF)/255.0f alpha:1.0f]</span></div><div class="line"><span class="comment">//èƒŒæ™¯è‰²  </span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> BACKGROUND_COLOR [UIColor colorWithRed:242.0/255.0 green:236.0/255.0 blue:231.0/255.0 alpha:1.0]  </span></div><div class="line"><span class="comment">//æ¸…é™¤èƒŒæ™¯è‰²  </span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> CLEARCOLOR [UIColor clearColor] </span></div><div class="line"></div><div class="line"><span class="comment">//4.åŠ è½½å›¾ç‰‡å®ï¼š</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> LOADIMAGE(file,type) [UIImage imageWithContentsOfFile:[[NSBundle mainBundle]pathForResource:file ofType:type]]</span></div><div class="line"><span class="comment">//5. NavBaré«˜åº¦</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> NavigationBar_HEIGHT 44</span></div><div class="line"><span class="comment">//6. è·å–ç³»ç»Ÿç‰ˆæœ¬</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> IOS_VERSION [[[UIDevice currentDevice] systemVersion] floatValue]</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> CurrentSystemVersion [[UIDevice currentDevice] systemVersion]</span></div><div class="line"></div><div class="line"><span class="comment">//7. åˆ¤æ–­æ˜¯çœŸæœºè¿˜æ˜¯æ¨¡æ‹Ÿå™¨</span></div><div class="line"><span class="meta">#<span class="meta-keyword">if</span> TARGET_OS_IPHONE</span></div><div class="line">    <span class="comment">//iPhone Device</span></div><div class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></div><div class="line"></div><div class="line"><span class="meta">#<span class="meta-keyword">if</span> TARGET_IPHONE_SIMULATOR</span></div><div class="line">   <span class="comment">//iPhone Simulator</span></div><div class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></div><div class="line"></div><div class="line"><span class="comment">//8. è®¾ç½®Viewçš„tagå±æ€§</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> VIEWWITHTAG(_OBJECT, _TAG)    [_OBJECT viewWithTag : _TAG]</span></div><div class="line"></div><div class="line"><span class="comment">//9. GCD</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> BACK(block) dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), block)</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> MAIN(block) dispatch_async(dispatch_get_main_queue(),block)</span></div><div class="line"></div><div class="line"><span class="comment">//10. NSUserDefaults å®ä¾‹åŒ–</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> USER_DEFAULT [NSUserDefaults standardUserDefaults]</span></div></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;a href=&quot;http://blog.csdn.net/songrotek/article/details/8929963&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;iOSå¼€å‘é«˜çº§:ä½¿ç”¨å®å®šä¹‰macros&lt;/a&gt;&lt;/p&gt;
&lt;figure class
      
    
    </summary>
    
      <category term="iOS" scheme="http://codingdoge.cn/categories/iOS/"/>
    
    
      <category term="OC" scheme="http://codingdoge.cn/tags/OC/"/>
    
  </entry>
  
  <entry>
    <title>STLå¸¸è§ç”¨æ³• â€” queue</title>
    <link href="http://codingdoge.cn/2017/07/17/title:%20STL%E5%B8%B8%E8%A7%81%E7%94%A8%E6%B3%95%20%E2%80%94%20queue/"/>
    <id>http://codingdoge.cn/2017/07/17/title: STLå¸¸è§ç”¨æ³• â€” queue/</id>
    <published>2017-07-17T03:19:00.000Z</published>
    <updated>2018-01-14T17:04:46.168Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>ä»£ç æ•²å¾—å°‘ï¼ŒSTLæ€»æ˜¯ç”¨çš„ä¸ç†Ÿï¼Œä¾¿è‡ªå·±æ•´ç†ä¸€äº›ç”¨æ³•ï¼Œæœ‰çœ¼ç¼˜çš„é¡ºæ‰‹ç”¨ç€å§ã€‚ </p></blockquote><hr><h2 id="ç®€ä»‹"><a href="#ç®€ä»‹" class="headerlink" title="ç®€ä»‹"></a>ç®€ä»‹</h2><p> é˜Ÿåˆ—(queue)æ˜¯ä¸€ç§ç‰¹æ®Šçš„çº¿æ€§è¡¨ï¼Œæ˜¯ä¸€ç§å…ˆè¿›å…ˆå‡º(First In First Out)çš„æ•°æ®ç»“æ„ï¼Œå…è®¸åœ¨é˜Ÿåˆ—æœ«å°¾æ’å…¥å…ƒç´ ï¼Œé˜Ÿåˆ—å¤´å–å‡ºå…ƒç´ ï¼Œåœ¨STLä¸­æ˜¯ç”¨listæˆ–è€…dequeå®ç°ï¼Œå°é—­å¤´éƒ¨å³å¯ã€‚</p><h2 id="ç”¨æ³•"><a href="#ç”¨æ³•" class="headerlink" title="ç”¨æ³•"></a>ç”¨æ³•</h2><h3 id="å¤´æ–‡ä»¶"><a href="#å¤´æ–‡ä»¶" class="headerlink" title="å¤´æ–‡ä»¶"></a>å¤´æ–‡ä»¶</h3><figure class="highlight autoit"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;queue&gt;</span></span></div></pre></td></tr></table></figure><h3 id="æ„é€ å‡½æ•°"><a href="#æ„é€ å‡½æ•°" class="headerlink" title="æ„é€ å‡½æ•°"></a>æ„é€ å‡½æ•°</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">template</span> &lt;<span class="class"><span class="keyword">class</span> <span class="title">T</span>, <span class="title">class</span> <span class="title">Container</span> = <span class="title">deque</span>&lt;T&gt; &gt; <span class="title">class</span> <span class="title">queue</span>;</span></div></pre></td></tr></table></figure><p>é˜Ÿåˆ—é€‚é…å™¨é»˜è®¤ç”¨dequeå®¹å™¨å®ç°ï¼Œä¹Ÿå¯ä»¥æŒ‡å®šä½¿ç”¨listå®¹å™¨æ¥å®ç°</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">queue</span> &lt;Elem&gt; q;<span class="comment">// åˆ›å»ºä¸€ä¸ªç©ºçš„queueï¼Œé»˜è®¤ä½¿ç”¨dequeå®¹å™¨</span></div><div class="line"><span class="built_in">queue</span> &lt;Elem, <span class="built_in">list</span>&lt;Elem&gt; &gt; q;<span class="comment">// ä½¿ç”¨listå®¹å™¨</span></div><div class="line"><span class="built_in">queue</span> &lt;Elem&gt; q1(q2);<span class="comment">// å¤åˆ¶q2</span></div></pre></td></tr></table></figure><h3 id="æˆå‘˜å‡½æ•°"><a href="#æˆå‘˜å‡½æ•°" class="headerlink" title="æˆå‘˜å‡½æ•°"></a>æˆå‘˜å‡½æ•°</h3><table><thead><tr><th>æˆå‘˜å‡½æ•°</th><th>å®ç°æ“ä½œ </th></tr></thead><tbody><tr><td> Elem&amp; back()</td><td>è¿”å›é˜Ÿåˆ—æœ€åä¸€ä¸ªå…ƒç´  </td></tr><tr><td> bool empty()const</td><td>å¦‚æœé˜Ÿåˆ—ä¸ºç©ºï¼Œè¿”å›trueï¼Œå¦åˆ™è¿”å›false </td></tr><tr><td> Elem&amp; front()</td><td>è¿”å›é˜Ÿåˆ—ç¬¬ä¸€ä¸ªå…ƒç´  </td></tr><tr><td> void pop()</td><td>ç§»é™¤é˜Ÿåˆ—ä¸­çš„ç¬¬ä¸€ä¸ªå…ƒç´  </td></tr><tr><td> void push(const Elem&amp; e)</td><td>åœ¨é˜Ÿåˆ—æœ«å°¾æ’å…¥å…ƒç´ e </td></tr><tr><td> size_type size()const</td><td>è¿”å›é˜Ÿåˆ—ä¸­çš„å…ƒç´ æ•°ç›® </td></tr></tbody></table><h2 id="ç”¨æ³•æ¼”ç¤º"><a href="#ç”¨æ³•æ¼”ç¤º" class="headerlink" title="ç”¨æ³•æ¼”ç¤º"></a>ç”¨æ³•æ¼”ç¤º</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;  </span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;queue&gt;  </span></span></div><div class="line">  </div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;  </div><div class="line">  </div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span>  </span></div><div class="line">&#123;  </div><div class="line">    <span class="keyword">int</span> n, m, size;  </div><div class="line">    <span class="built_in">queue</span> &lt;<span class="keyword">int</span>&gt; q;<span class="comment">//å®šä¹‰é˜Ÿåˆ—q  </span></div><div class="line">  </div><div class="line">    q.push(<span class="number">1</span>);  </div><div class="line">    q.push(<span class="number">2</span>);<span class="comment">//å°†1 ã€2å‹å…¥é˜Ÿåˆ—  </span></div><div class="line">  </div><div class="line">    <span class="keyword">while</span> (!q.empty())<span class="comment">//åˆ¤æ–­é˜Ÿåˆ—æ˜¯å¦ä¸ºç©º  </span></div><div class="line">    &#123;  </div><div class="line">        n = q.front();<span class="comment">//è¿”å›é˜Ÿåˆ—å¤´éƒ¨æ•°æ®  </span></div><div class="line">        m = q.back();<span class="comment">//è¿”å›é˜Ÿåˆ—å°¾éƒ¨æ•°æ®  </span></div><div class="line">        size = q.size();<span class="comment">//è¿”å›é˜Ÿåˆ—é‡Œçš„æ•°æ®ä¸ªæ•°  </span></div><div class="line">        q.pop();<span class="comment">//é˜Ÿåˆ—å¤´éƒ¨æ•°æ®å‡ºé˜Ÿ  </span></div><div class="line">        <span class="built_in">printf</span>(<span class="string">"%d %d %d\n"</span>, n, m, size);  </div><div class="line">    &#125;  </div><div class="line">    <span class="keyword">return</span> <span class="number">0</span>;  </div><div class="line">&#125;</div></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;blockquote&gt;
&lt;p&gt;ä»£ç æ•²å¾—å°‘ï¼ŒSTLæ€»æ˜¯ç”¨çš„ä¸ç†Ÿï¼Œä¾¿è‡ªå·±æ•´ç†ä¸€äº›ç”¨æ³•ï¼Œæœ‰çœ¼ç¼˜çš„é¡ºæ‰‹ç”¨ç€å§ã€‚ &lt;/p&gt;
&lt;/blockquote&gt;
&lt;hr&gt;
&lt;h2 id=&quot;ç®€ä»‹&quot;&gt;&lt;a href=&quot;#ç®€ä»‹&quot; class=&quot;headerlink&quot; title=&quot;ç®€ä»‹&quot;&gt;&lt;/a&gt;ç®€ä»‹&lt;
      
    
    </summary>
    
      <category term="CPP" scheme="http://codingdoge.cn/categories/CPP/"/>
    
    
      <category term="STL" scheme="http://codingdoge.cn/tags/STL/"/>
    
  </entry>
  
  <entry>
    <title>æ’ä»¶ç®¡ç†â€”â€”Vundle</title>
    <link href="http://codingdoge.cn/2017/07/17/title:%20%E6%8F%92%E4%BB%B6%E7%AE%A1%E7%90%86%E2%80%94%E2%80%94Vundle/"/>
    <id>http://codingdoge.cn/2017/07/17/title: æ’ä»¶ç®¡ç†â€”â€”Vundle/</id>
    <published>2017-07-17T03:18:00.000Z</published>
    <updated>2018-01-14T17:19:40.848Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>éƒ½è¯´Vimæ˜¯ç¨‹åºå‘˜å†™ç»™è‡ªå·±çš„ç¼–è¾‘å™¨ï¼Œå…¶ä¸­çš„æƒ…ç»“å¯æƒ³è€ŒçŸ¥ã€‚</p></blockquote><p>vimå› ä¸ºå…¶åºå¤§è€Œå¼ºåŠ²çš„æ’ä»¶å—åˆ°æ— æ¯”çš„æ¨å´‡ï¼Œè€Œæ’ä»¶çš„æŸ¥æ‰¾å’Œç®¡ç†ä¾¿æˆäº†ä¸€ä¸ªé—®é¢˜ã€‚</p><p><a href="https://github.com/VundleVim/Vundle.vim#about" target="_blank" rel="noopener"><strong>Vundle</strong></a>ä¾¿æ˜¯ä¸€ä¸ª<strong>Github</strong>ä¸Šä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜çš„é¡¹ç›®(è‡´æ•¬è´¡çŒ®è€…ä»¬)ï¼Œä½¿ç”¨æ­¥éª¤å¦‚ä¸‹ï¼š</p><h2 id="å®‰è£…Vundleï¼Œåœ¨ç»ˆç«¯è¾“å…¥ä»¥ä¸‹ä»£ç å³å¯"><a href="#å®‰è£…Vundleï¼Œåœ¨ç»ˆç«¯è¾“å…¥ä»¥ä¸‹ä»£ç å³å¯" class="headerlink" title="å®‰è£…Vundleï¼Œåœ¨ç»ˆç«¯è¾“å…¥ä»¥ä¸‹ä»£ç å³å¯"></a>å®‰è£…Vundleï¼Œåœ¨ç»ˆç«¯è¾“å…¥ä»¥ä¸‹ä»£ç å³å¯</h2><p><code>git clone http://github.com/gmarik/vundle.git ~/.vim/bundle/vundle</code></p><blockquote><ul><li>~/.vim æ¥è‡ªå“ª?<br>åœ¨<strong>mac</strong>ä¸­<strong>Vim</strong>é…ç½®æ–‡ä»¶<strong><code>.vimrc</code></strong>åœ¨<code>/usr/share/vim/</code>ä¸‹ï¼Œä¸€èˆ¬æ˜¯æ²¡æœ‰æƒé™æ›´æ”¹çš„,ä½†æ˜¯è¿™ä¸ª<code>.vimrc</code>æ˜¯å…¨å±€é…ç½®æ–‡ä»¶ï¼Œæˆ‘ä»¬åªè¦æ›´æ”¹ç”¨æˆ·é…ç½®æ–‡ä»¶å³å¯</li><li>æ€ä¹ˆæŸ¥çœ‹<strong>/usr/</strong>?<ol><li><strong>æ˜¾ç¤ºéšè—æ–‡ä»¶</strong>ï¼Œè‡ªè¡Œç™¾åº¦ï¼Œç»ˆç«¯ä¸­æ•²å…¥ä»£ç å³å¯ã€‚</li><li><strong>Finder</strong>ä¸‹æˆ–è€…<strong>æ¡Œé¢</strong>ä¸Šçš„Goï¼Œæ–‡ä»¶å¤¹è¾“å…¥<code>/usr/</code>ã€‚<br><strong>mac</strong>ä¸‹çš„Vimç”¨æˆ·é…ç½®æ–‡ä»¶é»˜è®¤æ˜¯æ²¡æœ‰çš„ï¼Œéœ€è¦æˆ‘ä»¬è‡ªè¡Œåˆ›å»º<br>ç»ˆç«¯ä¸‹è¾“å…¥<figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;</span><span class="bash"> mkdir ~/.vim</span></div><div class="line"><span class="meta">&gt;</span><span class="bash"> touch ~/.vimrc</span></div><div class="line"><span class="meta">&gt;</span><span class="bash"></span></div></pre></td></tr></table></figure></li></ol></li></ul><blockquote><p>~/å³ä¸ºç”¨æˆ·æ ¹ç›®å½•ã€‚</p></blockquote></blockquote><h2 id="åœ¨Vim-Scripté€‰å¥½æ’ä»¶"><a href="#åœ¨Vim-Scripté€‰å¥½æ’ä»¶" class="headerlink" title="åœ¨Vim Scripté€‰å¥½æ’ä»¶"></a>åœ¨<a href="http://vim-scripts.org/vim/scripts.html" target="_blank" rel="noopener">Vim Script</a>é€‰å¥½æ’ä»¶</h2><p>åœ¨<code>.vimrc</code>æ–‡ä»¶ä¸­åŠ ä¸€å¥<code>Bundle plugin_name</code><br><code>.vimrc</code>ç¤ºä¾‹:<br><figure class="highlight vim"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">set</span> nocompatible    <span class="comment">" be iMproved</span></div><div class="line"><span class="keyword">filetype</span> off        <span class="comment">" required!</span></div><div class="line"><span class="keyword">set</span> rtp+=~/.<span class="keyword">vim</span>/bundle/vundle/</div><div class="line"><span class="keyword">call</span> vundle#rc()</div><div class="line"><span class="comment">" let Vundle manage Vundle</span></div><div class="line"><span class="comment">" required!</span></div><div class="line">Bundle <span class="string">'gmarik/vundle'</span></div><div class="line"><span class="comment">" vim-scripts repos</span></div><div class="line">Bundle <span class="string">'vim-plugin-foo'</span></div><div class="line">Bundle <span class="string">'vim-plugin-bar'</span></div><div class="line"><span class="keyword">filetype</span> plugin <span class="built_in">indent</span> <span class="keyword">on</span>    <span class="comment">" required!</span></div></pre></td></tr></table></figure></p><h2 id="æ‰§è¡ŒVundleå®‰è£…å‘½ä»¤"><a href="#æ‰§è¡ŒVundleå®‰è£…å‘½ä»¤" class="headerlink" title="æ‰§è¡ŒVundleå®‰è£…å‘½ä»¤"></a>æ‰§è¡ŒVundleå®‰è£…å‘½ä»¤</h2><figure class="highlight clojure"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="symbol">:BundleInstall</span></div></pre></td></tr></table></figure><h2 id="Vundleçš„å…¶å®ƒå‘½ä»¤"><a href="#Vundleçš„å…¶å®ƒå‘½ä»¤" class="headerlink" title="Vundleçš„å…¶å®ƒå‘½ä»¤"></a>Vundleçš„å…¶å®ƒå‘½ä»¤</h2><table><thead><tr><th><code>:BundleList</code></th><th>åˆ—ä¸¾å‡ºåˆ—è¡¨ä¸­(.vimrcä¸­)é…ç½®çš„æ‰€æœ‰æ’ä»¶</th></tr></thead><tbody><tr><td><code>:BundleInstall</code></td><td>å®‰è£…åˆ—è¡¨ä¸­å…¨éƒ¨æ’ä»¶</td></tr><tr><td><code>:BundleInstall!</code></td><td>æ›´æ–°åˆ—è¡¨ä¸­å…¨éƒ¨æ’ä»¶</td></tr><tr><td><code>:BundleSearch foo</code></td><td>æŸ¥æ‰¾fooæ’ä»¶</td></tr><tr><td><code>:BundleSearch! foo</code></td><td>åˆ·æ–°fooæ’ä»¶ç¼“å­˜</td></tr><tr><td><code>:BundleClean</code></td><td>æ¸…é™¤åˆ—è¡¨ä¸­æ²¡æœ‰çš„æ’ä»¶</td></tr><tr><td><code>:BundleClean!</code></td><td>æ¸…é™¤åˆ—è¡¨ä¸­æ²¡æœ‰çš„æ’ä»¶</td></tr></tbody></table><blockquote><p>å‚è€ƒ<br><a href="http://beiyuu.com/git-vim-tutorial/" target="_blank" rel="noopener">Gitæ—¶ä»£çš„VIMä¸å®Œå…¨ä½¿ç”¨æ•™ç¨‹</a><br><a href="http://www.jianshu.com/p/062a47c365f1" target="_blank" rel="noopener">ä½¿ç”¨Vundleæ¥ç®¡ç†vimçš„æ’ä»¶</a><br><a href="http://www.cnblogs.com/zhongcq/p/3642794.html#toc_1.15" target="_blank" rel="noopener">zhongcq çš„VIMé…ç½®</a></p></blockquote>]]></content>
    
    <summary type="html">
    
      
      
        &lt;blockquote&gt;
&lt;p&gt;éƒ½è¯´Vimæ˜¯ç¨‹åºå‘˜å†™ç»™è‡ªå·±çš„ç¼–è¾‘å™¨ï¼Œå…¶ä¸­çš„æƒ…ç»“å¯æƒ³è€ŒçŸ¥ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;vimå› ä¸ºå…¶åºå¤§è€Œå¼ºåŠ²çš„æ’ä»¶å—åˆ°æ— æ¯”çš„æ¨å´‡ï¼Œè€Œæ’ä»¶çš„æŸ¥æ‰¾å’Œç®¡ç†ä¾¿æˆäº†ä¸€ä¸ªé—®é¢˜ã€‚&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com
      
    
    </summary>
    
      <category term="Shell" scheme="http://codingdoge.cn/categories/Shell/"/>
    
    
      <category term="Tool" scheme="http://codingdoge.cn/tags/Tool/"/>
    
  </entry>
  
  <entry>
    <title>æ¼«è°ˆiOSç³»åˆ—ä¹‹ï¼šå†…å­˜ç®¡ç†</title>
    <link href="http://codingdoge.cn/2017/07/17/title:%20%E6%BC%AB%E8%B0%88iOS%E7%B3%BB%E5%88%97%E4%B9%8B%EF%BC%9A%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86/"/>
    <id>http://codingdoge.cn/2017/07/17/title: æ¼«è°ˆiOSç³»åˆ—ä¹‹ï¼šå†…å­˜ç®¡ç†/</id>
    <published>2017-07-17T03:18:00.000Z</published>
    <updated>2018-01-14T14:05:07.599Z</updated>
    
    <content type="html"><![CDATA[<h2 id="å¼•ç”¨è®¡æ•°"><a href="#å¼•ç”¨è®¡æ•°" class="headerlink" title="å¼•ç”¨è®¡æ•°"></a>å¼•ç”¨è®¡æ•°</h2><p><a href="http://yulingtianxia.com/blog/2015/12/06/The-Principle-of-Refenrence-Counting/" target="_blank" rel="noopener">æ¨èä¸€ç¯‡æ¥è‡ª@æ¨è§ç‰çš„å¼•ç”¨è®¡æ•°åŸç†Blog</a></p><hr><ul><li><strong>ç®€ä»‹</strong><br>iOSä¸­å¯¹å†…å­˜ç®¡ç†çš„æœºåˆ¶ï¼ˆå †å†…å­˜ï¼‰ï¼Œæ¯ä¸€ä¸ªå¯¹è±¡éƒ½æœ‰ä¸€ä¸ªä¸ä¹‹å…³è”çš„å¼•ç”¨è®¡æ•°ï¼ˆReference Countingï¼‰ã€‚å½“ä¸€ä¸ªå¯¹è±¡â€œè¢«æ‹¥æœ‰â€çš„æ—¶å€™å¼•ç”¨è®¡æ•°+1ï¼Œå½“ä¸€ä¸ªå¯¹è±¡å¼•ç”¨è®¡æ•°ä¸ºé›¶æ—¶è¯¥å¯¹è±¡è¢«é‡Šæ”¾ã€‚  </li><li><strong>æ¯”æ‹Ÿ</strong><br>æ¯”å¦‚ä¸Šç­ï¼Œæœ€æ—©è¿›å…¥åŠå…¬å®¤çš„äººéœ€è¦å¼€ç¯ï¼Œä¹‹åè¿›å…¥åŠå…¬å®¤çš„äººéœ€è¦ç…§æ˜ï¼Œ ä¸‹ç­ç¦»å¼€åŠå…¬å®¤çš„äººä¸éœ€è¦ç…§æ˜ï¼Œæœ€åç¦»å¼€åŠå…¬å®¤çš„äººéœ€è¦å…³ç¯ã€‚<br>è¿™æ ·å¯¹åº”çš„å¼•ç”¨è®¡æ•°å°±æ˜¯ï¼šç¬¬ä¸€ä¸ªäººè¿›å…¥åŠå…¬å®¤å¼€ç¯ï¼Œå¼•ç”¨è®¡æ•°æ˜¯1ã€‚ä¹‹åè¿›å…¥åŠå…¬å®¤éœ€è¦ç…§æ˜å¼•ç”¨è®¡æ•°æ˜¯2ã€‚ä¸‹ç­ä¸€ä¸ªäººç¦»å¼€åŠå…¬å®¤å¼•ç”¨è®¡æ•°å˜æˆäº†1ï¼Œæœ€åä¸€ä¸ªç¦»å¼€äº†åŠå…¬å®¤ï¼Œå¼•ç”¨è®¡æ•°å˜æˆäº†0 ã€‚  </li><li><strong>å¼•ç”¨è®¡æ•°å¦‚ä½•å‚¨å­˜</strong><ol><li>TaggedPointer<br><a href="http://www.cocoachina.com/ios/20150918/13449.html" target="_blank" rel="noopener">ä¸€ç¯‡æå¥½çš„æ–‡ç« </a><br>æ€»ä½“æ¥è¯´ï¼Œæˆ‘çš„ç†è§£æ˜¯å¦‚æœä¸€ä¸ªå¯¹è±¡ä½¿ç”¨äº†<strong>Tagged Pointer</strong>æŠ€æœ¯ï¼ˆæ¯”å¦‚<em>NSString</em>ï¼Œ<em>NSNumber</em>ç­‰ï¼‰ï¼ŒæŒ‡é’ˆé‡Œé¢ä¼šç›´æ¥å­˜æ•°æ®å†…å®¹ï¼Œä¸ä¼šå†ä½œä¸ºâ€œæŒ‡é’ˆâ€æŒ‡å‘å…¶å®ƒåœ°å€ï¼Œä»Runtimeæ¥ç†è§£å°±æ˜¯ä¸ä¼šä½¿ç”¨isaæŒ‡é’ˆï¼Œä¹Ÿå°±ä¸ä¼šç»§æ‰¿è‹¹æœçš„å†…å­˜ç®¡ç†æ–¹å¼ï¼ˆReference Countingï¼‰ã€‚<br>åˆ¤æ–­å½“å‰å¯¹è±¡æ˜¯å¦åœ¨ä½¿ç”¨ TaggedPointer æ˜¯çœ‹æ ‡å¿—ä½æ˜¯å¦ä¸º1:  </li></ol></li></ul><figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">if</span> SUPPORT_MSB_TAGGED_POINTERS</span></div><div class="line"><span class="meta">#   <span class="meta-keyword">define</span> TAG_MASK (1ULL&lt;&lt;63)</span></div><div class="line"><span class="meta">#<span class="meta-keyword">else</span></span></div><div class="line"><span class="meta">#   <span class="meta-keyword">define</span> TAG_MASK 1</span></div><div class="line"><span class="keyword">inline</span> <span class="keyword">bool</span> </div><div class="line">objc_object::isTaggedPointer() </div><div class="line">&#123;</div><div class="line"><span class="meta">#<span class="meta-keyword">if</span> SUPPORT_TAGGED_POINTERS</span></div><div class="line">    <span class="keyword">return</span> ((<span class="keyword">uintptr_t</span>)<span class="keyword">this</span> &amp; TAG_MASK);</div><div class="line"><span class="meta">#<span class="meta-keyword">else</span></span></div><div class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</div><div class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></div><div class="line">&#125;</div></pre></td></tr></table></figure><ol><li>isa æŒ‡é’ˆ<br>æŒ‡é’ˆçš„å†…å­˜ç©ºé—´å¾ˆå¤§ï¼Œæœ‰æ—¶å€™å¯ä»¥ä¼˜åŒ–æŒ‡é’ˆï¼Œåœ¨æŒ‡é’ˆä¸­å­˜å‚¨ä¸€éƒ¨åˆ†å†…å®¹ã€‚ä¸‹é¢åˆ—å‡ºä¸åŒæ¶æ„ä¸‹çš„64ä½ç¯å¢ƒä¸­<code>isa</code>æŒ‡é’ˆç»“æ„:</li></ol><figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">union</span> <span class="keyword">isa_t</span> </div><div class="line">&#123;</div><div class="line">    <span class="keyword">isa_t</span>() &#123; &#125;</div><div class="line">    <span class="keyword">isa_t</span>(<span class="keyword">uintptr_t</span> value) : bits(value) &#123; &#125;</div><div class="line"></div><div class="line">    Class cls;</div><div class="line">    <span class="keyword">uintptr_t</span> bits;</div><div class="line"></div><div class="line"><span class="meta">#<span class="meta-keyword">if</span> SUPPORT_NONPOINTER_ISA</span></div><div class="line"><span class="meta"># <span class="meta-keyword">if</span> __arm64__</span></div><div class="line"><span class="meta">#   <span class="meta-keyword">define</span> ISA_MASK        0x00000001fffffff8ULL</span></div><div class="line"><span class="meta">#   <span class="meta-keyword">define</span> ISA_MAGIC_MASK  0x000003fe00000001ULL</span></div><div class="line"><span class="meta">#   <span class="meta-keyword">define</span> ISA_MAGIC_VALUE 0x000001a400000001ULL</span></div><div class="line">    <span class="class"><span class="keyword">struct</span> &#123;</span></div><div class="line">        <span class="keyword">uintptr_t</span> indexed           : <span class="number">1</span>;</div><div class="line">        <span class="keyword">uintptr_t</span> has_assoc         : <span class="number">1</span>;</div><div class="line">        <span class="keyword">uintptr_t</span> has_cxx_dtor      : <span class="number">1</span>;</div><div class="line">        <span class="keyword">uintptr_t</span> shiftcls          : <span class="number">30</span>; <span class="comment">// MACH_VM_MAX_ADDRESS 0x1a0000000</span></div><div class="line">        <span class="keyword">uintptr_t</span> magic             : <span class="number">9</span>;</div><div class="line">        <span class="keyword">uintptr_t</span> weakly_referenced : <span class="number">1</span>;</div><div class="line">        <span class="keyword">uintptr_t</span> deallocating      : <span class="number">1</span>;</div><div class="line">        <span class="keyword">uintptr_t</span> has_sidetable_rc  : <span class="number">1</span>;</div><div class="line">        <span class="keyword">uintptr_t</span> extra_rc          : <span class="number">19</span>;</div><div class="line"><span class="meta">#       <span class="meta-keyword">define</span> RC_ONE   (1ULL&lt;&lt;45)</span></div><div class="line"><span class="meta">#       <span class="meta-keyword">define</span> RC_HALF  (1ULL&lt;&lt;18)</span></div><div class="line">    &#125;;</div><div class="line"></div><div class="line"><span class="meta"># <span class="meta-keyword">elif</span> __x86_64__</span></div><div class="line"><span class="meta">#   <span class="meta-keyword">define</span> ISA_MASK        0x00007ffffffffff8ULL</span></div><div class="line"><span class="meta">#   <span class="meta-keyword">define</span> ISA_MAGIC_MASK  0x0000000000000001ULL</span></div><div class="line"><span class="meta">#   <span class="meta-keyword">define</span> ISA_MAGIC_VALUE 0x0000000000000001ULL</span></div><div class="line">    <span class="class"><span class="keyword">struct</span> &#123;</span></div><div class="line">        <span class="keyword">uintptr_t</span> indexed           : <span class="number">1</span>;</div><div class="line">        <span class="keyword">uintptr_t</span> has_assoc         : <span class="number">1</span>;</div><div class="line">        <span class="keyword">uintptr_t</span> has_cxx_dtor      : <span class="number">1</span>;</div><div class="line">        <span class="keyword">uintptr_t</span> shiftcls          : <span class="number">44</span>; <span class="comment">// MACH_VM_MAX_ADDRESS 0x7fffffe00000</span></div><div class="line">        <span class="keyword">uintptr_t</span> weakly_referenced : <span class="number">1</span>;</div><div class="line">        <span class="keyword">uintptr_t</span> deallocating      : <span class="number">1</span>;</div><div class="line">        <span class="keyword">uintptr_t</span> has_sidetable_rc  : <span class="number">1</span>;</div><div class="line">        <span class="keyword">uintptr_t</span> extra_rc          : <span class="number">14</span>;</div><div class="line"><span class="meta">#       <span class="meta-keyword">define</span> RC_ONE   (1ULL&lt;&lt;50)</span></div><div class="line"><span class="meta">#       <span class="meta-keyword">define</span> RC_HALF  (1ULL&lt;&lt;13)</span></div><div class="line">    &#125;;</div><div class="line"></div><div class="line"><span class="meta"># <span class="meta-keyword">else</span></span></div><div class="line">    <span class="comment">// Available bits in isa field are architecture-specific.</span></div><div class="line"><span class="meta">#   <span class="meta-keyword">error</span> unknown architecture</span></div><div class="line"><span class="meta"># <span class="meta-keyword">endif</span></span></div><div class="line"></div><div class="line"><span class="comment">// SUPPORT_NONPOINTER_ISA</span></div><div class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></div><div class="line"></div><div class="line">&#125;;</div></pre></td></tr></table></figure><p>åªæœ‰<strong>arm64</strong>æ¶æ„çš„è®¾å¤‡æ”¯æŒä¼˜åŒ–ï¼Œä¸‹é¢åˆ—å‡ºäº†<code>isa</code>æŒ‡é’ˆä¸­å˜é‡å¯¹åº”çš„å«ä¹‰: </p><table><thead><tr><th>å˜é‡å</th><th>å«ä¹‰</th></tr></thead><tbody><tr><td>indexed</td><td>0 è¡¨ç¤ºæ™®é€šçš„<code>isa</code>æŒ‡é’ˆï¼Œ1 è¡¨ç¤ºä½¿ç”¨ä¼˜åŒ–ï¼Œå­˜å‚¨å¼•ç”¨è®¡æ•°</td></tr><tr><td>has_assoc</td><td>è¡¨ç¤ºè¯¥å¯¹è±¡æ˜¯å¦åŒ…å« associated objectï¼Œå¦‚æœæ²¡æœ‰ï¼Œåˆ™ææ„æ—¶ä¼šæ›´å¿«</td></tr><tr><td>has_cxx_dtor</td><td>è¡¨ç¤ºè¯¥å¯¹è±¡æ˜¯å¦æœ‰ C++ æˆ– ARC çš„ææ„å‡½æ•°ï¼Œå¦‚æœæ²¡æœ‰ï¼Œåˆ™ææ„æ—¶æ›´å¿«</td></tr><tr><td>shiftcls</td><td>ç±»çš„æŒ‡é’ˆ</td></tr><tr><td>magic</td><td>å›ºå®šå€¼ä¸º 0xd2ï¼Œç”¨äºåœ¨è°ƒè¯•æ—¶åˆ†è¾¨å¯¹è±¡æ˜¯å¦æœªå®Œæˆåˆå§‹åŒ–</td></tr><tr><td>weakly_referenced</td><td>è¡¨ç¤ºè¯¥å¯¹è±¡æ˜¯å¦æœ‰è¿‡<code>weak</code>å¯¹è±¡ï¼Œå¦‚æœæ²¡æœ‰ï¼Œåˆ™ææ„æ—¶æ›´å¿«</td></tr><tr><td>deallocating</td><td>è¡¨ç¤ºè¯¥å¯¹è±¡æ˜¯å¦æ­£åœ¨ææ„</td></tr><tr><td>has_sidetable_rc</td><td>è¡¨ç¤ºè¯¥å¯¹è±¡çš„å¼•ç”¨è®¡æ•°å€¼æ˜¯å¦è¿‡å¤§æ— æ³•å­˜å‚¨åœ¨<code>isa</code>æŒ‡é’ˆ</td></tr><tr><td>extra_rc</td><td>å­˜å‚¨å¼•ç”¨è®¡æ•°å€¼å‡ä¸€åçš„ç»“æœ</td></tr></tbody></table><ol><li>æ•£åˆ—è¡¨<br>æ•£åˆ—è¡¨æ¥å­˜å‚¨å¼•ç”¨è®¡æ•°å…·ä½“æ˜¯ç”¨DenseMapç±»æ¥å®ç°ï¼Œå®ç°ä¸­æœ‰é”ä¿è¯å…¶å®‰å…¨æ€§ã€‚</li></ol><ul><li>è·å–å¼•ç”¨è®¡æ•°<br>åœ¨MRCç¯å¢ƒä¸‹å¯ä»¥ä½¿ç”¨<code>retainCount</code>æ–¹æ³•è·å–æŸä¸ªå¯¹è±¡çš„å¼•ç”¨è®¡æ•°ã€‚<br>åœ¨ARCç¯å¢ƒä¸‹å¯ä»¥ä½¿ç”¨Core Foundation åº“çš„<code>CFGetRetainCount((__bridge CFTypeRef)(obj))</code>æ–¹æ³•å’ŒRuntimeçš„<code>_objc_rootRetainCount()</code>æ–¹æ³•æ¥è·å–å¼•ç”¨è®¡æ•°ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨KVCæŠ€æœ¯æ¥è·å–<code>valueForKey:@&quot;retainCount&quot;</code>ã€‚æ³¨æ„ä»¥ä¸Šæ–¹æ³•ä¸æ˜¯çº¿ç¨‹å®‰å…¨çš„ã€‚</li><li>æ³¨æ„<br>NSString å®šä¹‰çš„å¯¹è±¡æ˜¯ä¿å­˜åœ¨å­—ç¬¦ä¸²å¸¸é‡åŒºï¼Œæ²¡æœ‰ç”¨å¼•ç”¨è®¡æ•°ç®¡ç†å†…å­˜ï¼Œå¦‚æœè¾“å‡ºå…¶<code>retainCount</code>ï¼Œä¸º-1ã€‚  <blockquote><p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="http://upload-images.jianshu.io/upload_images/2590408-a0c222416dbc63a0.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="retainCount" title="">                </div>                <div class="image-caption">retainCount</div>            </figure> æ³¨æ„å…¶ä¸­çš„<strong>Do not use this method</strong>ã€‚   </p></blockquote></li></ul><h2 id="MRC-Manual-Reference-Counting"><a href="#MRC-Manual-Reference-Counting" class="headerlink" title="MRC(Manual Reference Counting)"></a>MRC(Manual Reference Counting)</h2><hr><p>MRCä»å­—é¢ä¸Šç†è§£å°±æ˜¯æ‰‹åŠ¨ç®¡ç†å¼•ç”¨è®¡æ•°ï¼Œä¹Ÿå°±æ˜¯æ‰‹åŠ¨ç®¡ç†å†…å­˜ã€‚ç›¸å…³çš„å†…å­˜ç®¡ç†æ–¹æ³•æœ‰<code>retain</code>ï¼Œ<code>release</code>ï¼Œ<code>autorelease</code>ï¼Œå…¶ä¸­<code>retain</code>æ–¹æ³•æ˜¯å¯¹å¼•ç”¨è®¡æ•°+1ï¼Œç›¸åº”çš„<code>release</code>æ˜¯å¯¹å¼•ç”¨è®¡æ•°-1ï¼Œ<code>autorelease</code>æ˜¯å°†å¯¹è±¡åŠ å…¥è‡ªåŠ¨é‡Šæ”¾æ± ï¼Œä¸‹æ–‡ä¼šè®²åˆ°ã€‚</p><ul><li><p>ç¤ºä¾‹ä»£ç </p><figure class="highlight inform7"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">// ä»¥é¢„å®š<span class="keyword">Person</span>ç±»ä¸ºä¾‹</div><div class="line"><span class="keyword">Person</span>* <span class="keyword">person</span> = <span class="comment">[<span class="comment">[Person alloc]</span> init]</span>;    // ç”³è¯·å¯¹è±¡ï¼Œæ­¤æ—¶å¼•ç”¨è®¡æ•°=1</div><div class="line"><span class="comment">[person retain]</span>;  //æ­¤æ—¶å¼•ç”¨è®°æ•°+1ï¼Œç°ä¸º2</div><div class="line"><span class="comment">[person release]</span>;   //å¼•ç”¨è®¡æ•°-1ï¼Œæ­¤æ—¶å¼•ç”¨è®¡æ•°=1</div><div class="line"><span class="comment">[person release]</span>;   //å¼•ç”¨è®¡æ•°-1ï¼Œæ­¤æ—¶å¼•ç”¨è®¡æ•°=0ï¼Œå†…å­˜è¢«é‡Šæ”¾</div><div class="line"><span class="comment">[person autorelease]</span>;  // å°†å¯¹è±¡åŠ å…¥è‡ªåŠ¨é‡Šæ”¾æ± </div><div class="line"><span class="keyword">Person</span> *<span class="keyword">person</span> = <span class="comment">[<span class="comment">[<span class="comment">[Person alloc]</span> init]</span> autorelease]</span>; // ä¹Ÿå¯ä»¥åœ¨åˆ›å»ºå¯¹è±¡æ—¶å°†å…¶åŠ å…¥è‡ªåŠ¨é‡Šæ”¾æ± </div></pre></td></tr></table></figure></li></ul><p>æŒ‰é“ç†æ¥è¯´åˆ›å»ºä¸€ä¸ªå¯¹è±¡ï¼Œç„¶å<code>release</code>åè¯¥å¯¹è±¡å¼•ç”¨è®¡æ•°ä¸ºé›¶ï¼Œä½†æ˜¯å®é™…æƒ…å†µä¸­å¹¶ä¸ä¼šå‡ºç°è¿™ç§ç°è±¡ï¼Œ<code>release</code>åå†è¾“å‡ºå…¶å¼•ç”¨è®¡æ•°è¿˜æ˜¯ä¸º1ï¼Œåœ¨æˆ‘çš„ç†è§£ä¸­æœ‰ä¸¤ç§å¯èƒ½ï¼š</p><ol><li>è¯¥å¯¹è±¡åœ¨å¼•ç”¨è®¡æ•°ä¸º1çš„æ—¶å€™è¿›è¡Œ<code>release</code>åï¼Œå¯¹è±¡å·²ç»è¢«é‡Šæ”¾ï¼Œæ­¤æ—¶å†è°ƒç”¨<code>retainCount</code>æ¯«æ— æ„ä¹‰ï¼Œå› ä¸ºè¯¥å¯¹è±¡å·²ç»ä¸å­˜åœ¨äº†ï¼Œä¸ºäº†é˜²æ­¢æŸäº›é”™è¯¯ä¿æŠ¤è¿™ä¸ª<code>retainCount</code>æ–¹æ³•æ‰€ä»¥ç¼–è¯‘å™¨ä¸ä¼šæŠ¥é”™ï¼Œä½†æ˜¯è¾“å‡ºå€¼ä¸ºé‡Šæ”¾å‰çš„å€¼ï¼›</li><li>ç¼–è¯‘å™¨ä¸ºæˆ‘ä»¬åšäº†å„ç§ä¼˜åŒ–ï¼Œä¹Ÿè®¸æ˜¯è®°å½•<code>retainCount</code>ä¸ºé›¶æ¶ˆè€—è¿‡å¤§æˆ–è€…æ²¡æœ‰æ„ä¹‰ã€‚<figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="http://upload-images.jianshu.io/upload_images/2590408-c23186f1a9b761f6.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="é‡å†™äº†`dealloc`æ–¹ä¾¿æŸ¥çœ‹å¯¹è±¡æ˜¯å¦è¢«é‡Šæ”¾" title="">                </div>                <div class="image-caption">é‡å†™äº†`dealloc`æ–¹ä¾¿æŸ¥çœ‹å¯¹è±¡æ˜¯å¦è¢«é‡Šæ”¾</div>            </figure><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="http://upload-images.jianshu.io/upload_images/2590408-85f2e1aadd64812e.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="è¾“å‡ºå…¶`retainCount`ç„¶åé‡Šæ”¾" title="">                </div>                <div class="image-caption">è¾“å‡ºå…¶`retainCount`ç„¶åé‡Šæ”¾</div>            </figure><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="http://upload-images.jianshu.io/upload_images/2590408-386dbf919566a2b9.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="å¯ä»¥çœ‹åˆ°å¹¶ä¸ä¼šå‡ºç°å¼•ç”¨è®¡æ•°ä¸ºé›¶çš„æƒ…å†µï¼Œä½†æ˜¯è¯¥å¯¹è±¡ç¡®å®è¢«é‡Šæ”¾äº†" title="">                </div>                <div class="image-caption">å¯ä»¥çœ‹åˆ°å¹¶ä¸ä¼šå‡ºç°å¼•ç”¨è®¡æ•°ä¸ºé›¶çš„æƒ…å†µï¼Œä½†æ˜¯è¯¥å¯¹è±¡ç¡®å®è¢«é‡Šæ”¾äº†</div>            </figure></li></ol><blockquote><p><strong>å°çŸ¥è¯†:</strong><br><strong>æŒ‡é’ˆé”™è¯¯</strong>ï¼šè®¿é—®äº†ä¸€å—åçš„å†…å­˜ï¼ˆå·²ç»è¢«å›æ”¶çš„ï¼Œä¸å¯ç”¨çš„å†…å­˜ï¼‰ã€‚<br><strong>åƒµå°¸å¯¹è±¡</strong>ï¼šæ‰€å å†…å­˜å·²ç»è¢«å›æ”¶çš„å¯¹è±¡ï¼Œåƒµå°¸å¯¹è±¡ä¸èƒ½å†è¢«ä½¿ç”¨ã€‚ï¼ˆæ‰“å¼€åƒµå°¸å¯¹è±¡æ£€æµ‹ï¼‰<br><strong>ç©ºæŒ‡é’ˆ</strong>ï¼šæ²¡æœ‰æŒ‡å‘ä»»ä½•ä¸œè¥¿çš„æŒ‡é’ˆï¼ˆå­˜å‚¨çš„ä¸œè¥¿æ˜¯<code>0</code>, <code>null</code>, <code>nil</code>ï¼‰ï¼Œç»™ç©ºæŒ‡é’ˆå‘é€æ¶ˆæ¯ä¸ä¼šæŠ¥é”™ã€‚<br><strong>æ³¨æ„</strong>ï¼šä¸èƒ½ä½¿ç”¨<code>[p retaion]</code>è®©åƒµå°¸å¯¹è±¡èµ·æ­»å¤ç”Ÿã€‚</p></blockquote><p>åœ¨MRCç®¡ç†æ—¶ä»£æœ‰ä¸€ä¸ªé»„é‡‘æ³•åˆ™ï¼š</p><ol><li>è°åˆ›å»ºè°è´Ÿè´£ã€‚å¦‚æœä½ é€šè¿‡alloc,new,copyæ¥åˆ›å»ºäº†ä¸€ä¸ªå¯¹è±¡ï¼Œé‚£ä¹ˆä½ å°±å¿…é¡»è°ƒç”¨releaseæˆ–è€…autoreleaseæ–¹æ³•ï¼›</li><li>è°retainï¼Œè°releaseã€‚åªè¦ä½ è°ƒç”¨äº†retainï¼Œæ— è®ºè¿™ä¸ªå¯¹è±¡æ—¶å¦‚ä½•ç”Ÿæˆçš„ï¼Œä½ éƒ½è¦è°ƒç”¨releaseï¼›</li></ol><h2 id="ARC"><a href="#ARC" class="headerlink" title="ARC"></a>ARC</h2><hr><h3 id="åŸç†"><a href="#åŸç†" class="headerlink" title="åŸç†"></a>åŸç†</h3><p>å‰æ®µç¼–è¯‘å™¨ä¼šä¸ºâ€œæ‹¥æœ‰çš„â€æ¯ä¸€ä¸ªå¯¹è±¡åŠ å…¥ç›¸åº”çš„<code>release</code>è¯­å¥ï¼Œå¦‚æœå¯¹è±¡çš„æ‰€æœ‰æƒä¿®é¥°ç¬¦æ˜¯<code>__strong</code>ï¼Œé‚£ä¹ˆå®ƒå°±æ˜¯è¢«æ‹¥æœ‰çš„ã€‚å¦‚æœå†æŸä¸ªæ–¹æ³•å†…åˆ›å»ºäº†ä¸€ä¸ªå¯¹è±¡ï¼Œå‰ç«¯ç¼–è¯‘å™¨ä¼šåœ¨æ–¹æ³•æœ«å°¾è‡ªåŠ¨æ’å…¥<code>release</code>è¯­å¥å·²é”€æ¯å®ƒã€‚è€Œç±»æ‹¥æœ‰çš„å¯¹è±¡ï¼ˆå®ä¾‹å˜é‡/å±æ€§ï¼‰ä¼šåœ¨<code>dealloc</code>æ–¹æ³•å†…è¢«é‡Šæ”¾ã€‚<br><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="http://upload-images.jianshu.io/upload_images/2590408-087aa0f74748d421.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="ç¼–è¯‘å™¨æ‰€ä¸º" title="">                </div>                <div class="image-caption">ç¼–è¯‘å™¨æ‰€ä¸º</div>            </figure></p><h4 id="ç¼–è¯‘å™¨ä¸ºæˆ‘ä»¬åšçš„ï¼Œæˆ‘ä»¬å¯ä»¥æ‰‹åŠ¨å®Œæˆè¾¾åˆ°ä¼˜åŒ–"><a href="#ç¼–è¯‘å™¨ä¸ºæˆ‘ä»¬åšçš„ï¼Œæˆ‘ä»¬å¯ä»¥æ‰‹åŠ¨å®Œæˆè¾¾åˆ°ä¼˜åŒ–" class="headerlink" title="ç¼–è¯‘å™¨ä¸ºæˆ‘ä»¬åšçš„ï¼Œæˆ‘ä»¬å¯ä»¥æ‰‹åŠ¨å®Œæˆè¾¾åˆ°ä¼˜åŒ–"></a>ç¼–è¯‘å™¨ä¸ºæˆ‘ä»¬åšçš„ï¼Œæˆ‘ä»¬å¯ä»¥æ‰‹åŠ¨å®Œæˆè¾¾åˆ°ä¼˜åŒ–</h4><p>æ¯”å¦‚ï¼š<br><code>__autoreleasing</code>åœ¨ARCä¸­ä¸»è¦ç”¨åœ¨å‚æ•°ä¼ é€’è¿”å›å€¼ï¼ˆout-parametersï¼‰å’Œå¼•ç”¨ä¼ é€’å‚æ•°ï¼ˆpass-by-referenceï¼‰çš„æƒ…å†µä¸‹ï¼Œæœ‰è¿™ç§æŒ‡é’ˆï¼ˆ<code>NSError **</code>ï¼‰çš„å‡½æ•°å‚æ•°å¦‚æœä¸åŠ ä¿®é¥°ç¬¦ï¼Œç¼–è¯‘å™¨ä¼šé»˜è®¤å°†ä»–ä»¬è®¤å®šä¸º<code>__autoreleasing</code>ç±»å‹ã€‚<br>æ¯”å¦‚å¸¸ç”¨çš„<code>NSError</code>çš„ä½¿ç”¨ï¼š</p><figure class="highlight tcl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">NSError *__autoreleasing <span class="keyword">error</span>;</div><div class="line"><span class="keyword">if</span> (![data writeToFile:<span class="keyword">filename</span> options:NSDataWritingAtomic <span class="keyword">error</span>:&amp;<span class="keyword">error</span>])</div><div class="line">&#123;</div><div class="line">    NSLog(@<span class="string">"Error: %@"</span>, <span class="keyword">error</span>);</div><div class="line">&#125;</div></pre></td></tr></table></figure><p>å¦‚æœä½ æŠŠ<code>error</code>å®šä¹‰ä¸ºäº†<code>strong</code>å‹ï¼Œç¼–è¯‘å™¨ä¼šéšå¼åœ°åšå¦‚ä¸‹äº‹æƒ…ï¼Œä¿è¯æœ€ç»ˆä¼ å…¥å‡½æ•°çš„å‚æ•°ä¾ç„¶æ˜¯ä¸ª<code>__autoreleasing</code>ç±»å‹çš„å¼•ç”¨ã€‚</p><figure class="highlight stata"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">NSError *<span class="keyword">error</span>;</div><div class="line">NSError *__autoreleasing tempError = <span class="keyword">error</span>; <span class="comment">// ç¼–è¯‘å™¨æ·»åŠ </span></div><div class="line"><span class="keyword">if</span> (![data writeToFile:filename options:NSDataWritingAtomic <span class="keyword">error</span>:&amp;tempError])</div><div class="line">&#123;</div><div class="line">    <span class="keyword">error</span> = tempError; <span class="comment">// ç¼–è¯‘å™¨æ·»åŠ </span></div><div class="line">    NSLog(@<span class="string">"Error :%@"</span>, <span class="keyword">error</span>);</div><div class="line">&#125;</div></pre></td></tr></table></figure><p>æ‰€ä»¥ä¸ºäº†æé«˜æ•ˆç‡ï¼Œé¿å…è¿™ç§æƒ…å†µï¼Œæˆ‘ä»¬ä¸€èˆ¬åœ¨å®šä¹‰<code>error</code>çš„æ—¶å€™å°†å…¶è€è€å®å®åœ°å£°æ˜ä¸º<code>__autoreleasing</code>ç±»å‹ã€‚</p><h2 id="å¾ªç¯å¼•ç”¨"><a href="#å¾ªç¯å¼•ç”¨" class="headerlink" title="å¾ªç¯å¼•ç”¨"></a>å¾ªç¯å¼•ç”¨</h2><hr><p>å¹³å¸¸æˆ‘ä»¬å®¹æ˜“é€ æˆå¾ªç¯å¼•ç”¨çš„ä¸‰ç§æƒ…å†µï¼š</p><ol><li><strong><code>NSTimer</code></strong><br> å…ˆçœ‹<code>NSTimer</code>ä½¿ç”¨çš„ä»£ç :</li></ol><figure class="highlight groovy"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">_timer = [NSTimer <span class="string">scheduledTimerWithTimeInterval:</span><span class="number">1.0</span> <span class="string">target:</span>self <span class="string">selector:</span><span class="meta">@selector</span>(runTimer) <span class="string">userInfo:</span>nil <span class="string">repeats:</span>YES];</div></pre></td></tr></table></figure><p>å…¶ä¸­<code>_timer</code>æ˜¯å®ä¾‹å˜é‡è¢«<code>self</code>ä¿ç•™ï¼Œ<code>_timer</code>çš„targetæ˜¯<code>self</code>ï¼Œ<code>self</code>è¢«<code>_timer</code>ä¿ç•™ï¼Œå¼•å‘å¾ªç¯å¼•ç”¨ã€‚<figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="http://upload-images.jianshu.io/upload_images/2590408-0e9a0b344f927e34.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="å¾ªç¯å¼•ç”¨" title="">                </div>                <div class="image-caption">å¾ªç¯å¼•ç”¨</div>            </figure><br>è§£é™¤æ–¹æ³•å°±æ˜¯ä½¿targetä¸­çš„å¯¹è±¡ä¸æ˜¯<code>viewController</code>ä»è€Œæ–­å¼€å¼•ç”¨ï¼ŒiOS10ä¹‹å‰æˆ‘ä»¬å¯ä»¥å†™ä¸ªç±»åˆ«é‡æ–°å°è£…targetæ¥å®ç°ï¼ŒiOS10ä¹‹åç³»ç»Ÿç»™äº†æ–°æ–¹æ³•ï¼š</p><figure class="highlight objectivec"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">+ (<span class="built_in">NSTimer</span> *)scheduledTimerWithTimeInterval:(<span class="built_in">NSTimeInterval</span>)interval repeats:(<span class="built_in">BOOL</span>)repeats block:(<span class="keyword">void</span> (^)(<span class="built_in">NSTimer</span> *timer))block;</div></pre></td></tr></table></figure><ul><li>ä¸å†éœ€è¦targetï¼Œè€Œæ˜¯ä¼ å…¥ä¸€ä¸ªblockï¼Œåœ¨blocké‡Œé¢è¿›è¡Œå¾ªç¯è°ƒç”¨æ–¹æ³•</li><li>å…³äºblockæ€ä¹ˆè§£å†³å¾ªç¯å¼•ç”¨è¯·çœ‹ä¸‹é¢</li></ul><ol><li><strong>block</strong><blockquote><p>ç®€ä»‹<br>blockå’Œå…¶ä»–è¯­è¨€çš„é—­åŒ…æˆ–lambdaè¡¨è¾¾å¼æ˜¯ä¸€å›äº‹,blockçš„ä½¿ç”¨å¾ˆåƒå‡½æ•°æŒ‡é’ˆï¼Œä¸è¿‡ä¸å‡½æ•°æœ€å¤§çš„ä¸åŒæ˜¯ï¼šblockå¯ä»¥è®¿é—®å‡½æ•°ä»¥å¤–ã€è¯æ³•ä½œç”¨åŸŸä»¥å†…çš„å¤–éƒ¨å˜é‡çš„å€¼ã€‚æ¢å¥è¯è¯´ï¼Œblockä¸ä»…å®ç°å‡½æ•°çš„åŠŸèƒ½ï¼Œè¿˜èƒ½æºå¸¦å‡½æ•°çš„æ‰§è¡Œç¯å¢ƒã€‚</p></blockquote></li></ol><p><strong>blockåŸºæœ¬è¯­æ³•</strong></p><figure class="highlight axapta"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// å£°æ˜ä¸€ä¸ªblockå˜é‡</span></div><div class="line"><span class="keyword">long</span> (^<span class="keyword">sum</span>) (<span class="keyword">int</span>, <span class="keyword">int</span>) = nil;</div><div class="line"><span class="comment">// sumæ˜¯ä¸ªblockå˜é‡ï¼Œè¯¥blockç±»å‹æœ‰ä¸¤ä¸ªintå‹å‚æ•°ï¼Œè¿”å›ç±»å‹æ˜¯longã€‚</span></div><div class="line"><span class="comment">// å®šä¹‰blockå¹¶èµ‹ç»™å˜é‡sum</span></div><div class="line"><span class="keyword">sum</span> = ^ <span class="keyword">long</span> (<span class="keyword">int</span> a, <span class="keyword">int</span> b) &#123;</div><div class="line">  <span class="keyword">return</span> a + b;</div><div class="line">&#125;;</div><div class="line"><span class="comment">// è°ƒç”¨blockï¼š</span></div><div class="line"><span class="keyword">long</span> s = <span class="keyword">sum</span>(<span class="number">1</span>, <span class="number">2</span>);</div></pre></td></tr></table></figure><p>å®šä¹‰ä¸€ä¸ªå®ä¾‹å‡½æ•°ï¼Œè¯¥å‡½æ•°è¿”å›blockï¼š</p><figure class="highlight cs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">- (<span class="keyword">long</span> (^)(<span class="keyword">int</span>, <span class="keyword">int</span>)) sumBlock &#123;</div><div class="line">    <span class="keyword">int</span> <span class="keyword">base</span> = <span class="number">100</span>;</div><div class="line">    <span class="keyword">return</span> [[ ^ <span class="keyword">long</span> (<span class="keyword">int</span> a, <span class="keyword">int</span> b) &#123;</div><div class="line">      <span class="keyword">return</span> <span class="keyword">base</span> + a + b;</div><div class="line">    &#125; copy] autorelease];</div><div class="line">  &#125;</div><div class="line"><span class="comment">// è°ƒç”¨block</span></div><div class="line">[<span class="meta">self sumBlock</span>](<span class="number">1</span>,<span class="number">2</span>);</div></pre></td></tr></table></figure><p>æ ¹æ®åœ¨å†…å­˜ä¸­çš„ä½ç½®å°†blockåˆ†ä¸ºä¸‰ç§ç±»å‹ï¼š</p><pre><code>* `NSGlobalBlock`: ç±»ä¼¼å‡½æ•°ï¼Œä½äºtextæ®µï¼›* `NSStackBlock`: ä½äºæ ˆå†…å­˜ï¼Œå‡½æ•°è¿”å›åblockå°†æ— æ•ˆï¼›* `NSMallocBlock`: ä½äºå †å†…å­˜ã€‚</code></pre><p>blockå…¶å®åŒ…å«ä¸¤ä¸ªéƒ¨åˆ†å†…å®¹ï¼š</p><ol><li>blockæ‰§è¡Œçš„ä»£ç ï¼Œè¿™æ˜¯åœ¨ç¼–è¯‘çš„æ—¶å€™å·²ç»ç”Ÿæˆå¥½çš„ï¼›</li><li>ä¸€ä¸ªåŒ…å«blockæ‰§è¡Œæ—¶éœ€è¦çš„æ‰€æœ‰å¤–éƒ¨å˜é‡å€¼çš„æ•°æ®ç»“æ„ã€‚ blockå°†ä½¿ç”¨åˆ°çš„ã€ä½œç”¨åŸŸé™„è¿‘åˆ°çš„å˜é‡çš„å€¼å»ºç«‹ä¸€ä»½å¿«ç…§æ‹·è´åˆ°æ ˆä¸Šã€‚<figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="http://upload-images.jianshu.io/upload_images/2590408-cc743eb4f46bc26b.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="blockçš„æ•°æ®ç»“æ„" title="">                </div>                <div class="image-caption">blockçš„æ•°æ®ç»“æ„</div>            </figure></li></ol><p>å¯¹äº block å¤–çš„å˜é‡å¼•ç”¨ï¼Œblock é»˜è®¤æ˜¯å°†å…¶å¤åˆ¶åˆ°å…¶æ•°æ®ç»“æ„ä¸­æ¥å®ç°è®¿é—®çš„ï¼š<br><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="http://upload-images.jianshu.io/upload_images/2590408-2b3a94efc4a64b1b.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="ä¼ å…¥å¤–éƒ¨å˜é‡" title="">                </div>                <div class="image-caption">ä¼ å…¥å¤–éƒ¨å˜é‡</div>            </figure><br>å¯¹äºç”¨ <code>__block</code> ä¿®é¥°çš„å¤–éƒ¨å˜é‡å¼•ç”¨ï¼Œblock æ˜¯å¤åˆ¶å…¶å¼•ç”¨åœ°å€æ¥å®ç°è®¿é—®çš„ï¼š<br><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="http://upload-images.jianshu.io/upload_images/2590408-6d48edcdc97d0af2.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="ç”¨__blockä¿®é¥°" title="">                </div>                <div class="image-caption">ç”¨__blockä¿®é¥°</div>            </figure></p><p>åˆæ­¥äº†è§£äº†blockåçœ‹çœ‹å®ƒæ€ä¹ˆæ„æˆå¾ªç¯å¼•ç”¨å¹¶æ€ä¹ˆè§£å†³çš„å§</p><figure class="highlight objectivec"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">typedef</span> <span class="keyword">void</span>(^block)();</div><div class="line"></div><div class="line"><span class="keyword">@property</span> (<span class="keyword">copy</span>, <span class="keyword">nonatomic</span>) block myBlock;</div><div class="line"><span class="keyword">@property</span> (<span class="keyword">copy</span>, <span class="keyword">nonatomic</span>) <span class="built_in">NSString</span> *blockString;</div><div class="line"></div><div class="line">- (<span class="keyword">void</span>)testBlock &#123;</div><div class="line">    <span class="keyword">self</span>.myBlock = ^() &#123;</div><div class="line">        <span class="comment">//å…¶å®æ³¨é‡Šä¸­çš„ä»£ç ï¼ŒåŒæ ·ä¼šé€ æˆå¾ªç¯å¼•ç”¨</span></div><div class="line">        <span class="built_in">NSString</span> *localString = <span class="keyword">self</span>.blockString;</div><div class="line">          <span class="comment">//NSString *localString = _blockString;</span></div><div class="line">          <span class="comment">//[self doSomething];</span></div><div class="line">    &#125;;</div><div class="line">&#125;</div></pre></td></tr></table></figure><p>çœ‹äº†å‰é¢å…³äºblockçš„ä¸€äº›ä»‹ç»åº”è¯¥å®¹æ˜“çœ‹å‡ºæ¥ï¼Œå½“æˆ‘ä»¬å¾€blockä¸­ä¼ å…¥æ•°æ®æ—¶æ˜¯ä¿å­˜åœ¨äº†blockçš„å †ä¸­ï¼Œå¦‚ä¸Šè¿°ä»£ç ä¸­å¼•ç”¨äº†<code>self</code>ç›¸å½“äºå¯¹<code>self</code>è¿›è¡Œäº†ä¸€æ¬¡<code>retain</code>ï¼Œè€Œ<code>self</code>æœ¬èº«æŒæœ‰<code>block</code>äºæ˜¯é€ æˆäº†å¾ªç¯å¼•ç”¨ï¼ŒåŒæ—¶åœ¨blockä¸­<code>release``self</code>æ²¡æœ‰ç”¨ï¼Œå› ä¸ºåœ¨blockä¸­æ“ä½œä½œç”¨èŒƒå›´ä»…ä»…æ¥blockçš„å‡½æ•°æ ˆï¼Œå½±å“ä¸åˆ°å †ä¸­çš„<code>self</code>ï¼Œè§£å†³æ–¹æ³•å¦‚ä¸‹ï¼š</p><figure class="highlight objectivec"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">__<span class="keyword">weak</span> <span class="keyword">typeof</span>(<span class="keyword">self</span>) weakSelf = <span class="keyword">self</span>;</div><div class="line"><span class="keyword">self</span>.myBlock = ^()&#123;</div><div class="line">    __<span class="keyword">strong</span> <span class="keyword">typeof</span>(weakSelf) = strongSelf;</div><div class="line">    <span class="built_in">NSString</span> *localString = strongSelf;</div><div class="line">&#125;</div></pre></td></tr></table></figure><p>å…¶ä¸­ä¼ å…¥ä¸€ä¸ªè‹¥å¼•ç”¨å°±ä¸ä¼šé€ æˆå¾ªç¯å¼•ç”¨ï¼Œç„¶ååœ¨blockçš„å‡½æ•°æ ˆä¸­ç”¨ä¸€ä¸ªå¼ºæŒ‡é’ˆæ¥æ¥å—ä¼ è¿›æ¥çš„å¼±æŒ‡é’ˆï¼Œé˜²æ­¢å¼±æŒ‡é’ˆè¢«æå‰é‡Šæ”¾äº§ç”Ÿé‡æŒ‡é’ˆã€‚</p><blockquote><p>å‚è€ƒæ–‡ç« ï¼š<br>Cooper â€“ <a href="http://tanqisen.github.io/blog/2013/04/19/gcd-block-cycle-retain/" target="_blank" rel="noopener">æ­£ç¡®ä½¿ç”¨Blocké¿å…Cycle Retainå’ŒCrash</a><br>å”å·§ â€“ <a href="http://blog.devtang.com/2013/07/28/a-look-inside-blocks/" target="_blank" rel="noopener">è°ˆObjective-C blockçš„å®ç°</a><br>Dev Talking â€“ <a href="http://www.cocoachina.com/ios/20150109/10891.html" target="_blank" rel="noopener">Objective-Cä¸­çš„Block</a></p></blockquote><ol><li><strong>delegate</strong><br>æˆ‘ä»¬å¯¹ä»£ç†çš„å†™æ³•ä¸€èˆ¬éƒ½æ˜¯ï¼š<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">weak</span>) <span class="keyword">id</span>&lt;TestDelegate&gt; delegate;</div></pre></td></tr></table></figure></li></ol><p>å¦‚æœä½¿ç”¨<code>strong</code>çš„è¯å¾ˆæ˜æ˜¾ä¼šé€ æˆå¾ªç¯å¼•ç”¨ï¼ˆ<code>delegate</code>è°ƒç”¨<code>self</code>çš„ä¸€äº›ä¸œè¥¿ï¼‰ï¼Œä»Šå¤©è¢«é¢è¯•å®˜é—®é“å¦‚æœä½¿ç”¨<code>delegate</code>å‡ºç°äº†å¾ªç¯å¼•ç”¨æ€ä¹ˆè§£å†³ï¼Œæˆ‘è¯´ç”¨weakï¼Œä»–è¯´æ¢ä¸€ä¸ªï¼Œç„¶åå°±æ‡µä½äº†ï¼Œåªå›ç­”äº†æ€è·¯ï¼Œæ‰¾åˆ°äº’ç›¸å¼•ç”¨çš„å¯¹è±¡(å¯ä»¥ç”¨Instruments)ç„¶åæ–­å¼€å¼•ç”¨ã€‚</p><h2 id="Autorelease"><a href="#Autorelease" class="headerlink" title="Autorelease"></a>Autorelease</h2><ul><li>ç®€ä»‹<br>å¾ˆå¥½ç†è§£ï¼Œå­—é¢æ„æ€ä¸Šçœ‹å°±æ˜¯è‡ªåŠ¨é‡Šæ”¾ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ä½¿ç”¨autoreleaseè®©ç¼–è¯‘å™¨å¸®æˆ‘ä»¬åœ¨æŸä¸ªæ—¶åˆ»è‡ªåŠ¨é‡Šæ”¾å†…å­˜ã€‚åœ¨MRCæ—¶æˆ‘ä»¬ä½¿ç”¨NSAutoreleaseç±»æ¥ä½¿ç”¨è‡ªåŠ¨é‡Šæ”¾æœºåˆ¶ï¼Œä»£ç å¦‚ä¸‹ï¼š</li></ul><figure class="highlight objectivec"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">NSAutoreleasePool</span> pool = [[<span class="built_in">NSAutoreleasePool</span> alloc] init];</div><div class="line"><span class="comment">// Code benefitting from a local autorelease pool.</span></div><div class="line">[pool release];</div></pre></td></tr></table></figure><p>ä¹Ÿå¯ä»¥ç›´æ¥ä½¿ç”¨<code>[obj autorelease]</code>ã€‚<br>ç°åœ¨åŸºæœ¬ä¸Šéƒ½æ˜¯ARCç¯å¢ƒï¼Œè¿™ä¸ªæ—¶å€™æˆ‘ä»¬ä½¿ç”¨çš„æ˜¯<code>autoreleasepool</code>ï¼ˆè‡ªåŠ¨é‡Šæ”¾æ± ï¼‰ï¼Œæ¯”å¦‚å¸¸è§çš„ï¼š</p><figure class="highlight objectivec"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//iOS program</span></div><div class="line"><span class="keyword">int</span> main(<span class="keyword">int</span> argc, <span class="keyword">char</span> * argv[]) &#123;</div><div class="line">    <span class="keyword">@autoreleasepool</span> &#123;</div><div class="line">        <span class="keyword">return</span> <span class="built_in">UIApplicationMain</span>(argc, argv, <span class="literal">nil</span>, <span class="built_in">NSStringFromClass</span>([AppDelegate <span class="keyword">class</span>]));</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"><span class="comment">//Command line program</span></div><div class="line"><span class="keyword">int</span> main(<span class="keyword">int</span> argc, <span class="keyword">const</span> <span class="keyword">char</span> *argv[]) &#123;</div><div class="line">    <span class="keyword">@autoreleasepool</span> &#123;</div><div class="line">        <span class="comment">//...</span></div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure><p>å®ƒçš„ä½œç”¨æ˜¯æŠŠæˆ‘ä»¬åœ¨<code>{}</code>ä¸­ç”³è¯·çš„å¯¹è±¡åœ¨äº‹ä»¶å¤„ç†å®Œæ—¶è‡ªåŠ¨é‡Šæ”¾æ‰ï¼Œå…¶ä¸­çš„åŸç†æ¨èé˜…è¯»<strong>Qi Tang</strong>çš„<a href="http://itangqi.me/2016/04/15/autorelease-pool-in-ios/" target="_blank" rel="noopener">iOS ä¸­çš„ Autorelease Pool</a>ã€‚<br>å‰é¢è¯´åˆ°çš„äº‹ä»¶å¤„ç†å®Œæ—¶å…¶å®å°±æ˜¯ä¸€æ¬¡<code>runloop</code>ç»“æŸæ—¶ã€‚<br><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="http://upload-images.jianshu.io/upload_images/2590408-efe8d04b74c7faf3.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="runloopå’Œautorelease" title="">                </div>                <div class="image-caption">runloopå’Œautorelease</div>            </figure></p><blockquote><p>ç¨‹åºè¿è¡Œ -&gt; å¼€å¯äº‹ä»¶å¾ªç¯ -&gt; å‘ç”Ÿè§¦æ‘¸äº‹ä»¶ -&gt; åˆ›å»ºè‡ªåŠ¨é‡Šæ”¾æ±  -&gt; å¤„ç†è§¦æ‘¸äº‹ä»¶ -&gt; äº‹ä»¶å¯¹è±¡åŠ å…¥è‡ªåŠ¨é‡Šæ”¾æ±  -&gt; ä¸€æ¬¡äº‹ä»¶å¾ªç¯ç»“æŸ, é”€æ¯è‡ªåŠ¨é‡Šæ”¾æ± </p></blockquote><ul><li><p>ä»€ä¹ˆæ—¶å€™ç”¨<code>@autoreleasepool</code></p><ol><li>å†™åŸºäºå‘½ä»¤è¡Œçš„çš„ç¨‹åºæ—¶ï¼Œå°±æ˜¯æ²¡æœ‰UIæ¡†æ¶ï¼Œå¦‚AppKitç­‰Cocoaæ¡†æ¶æ—¶ã€‚</li></ol><ul><li>å†™å¾ªç¯ï¼Œå¾ªç¯é‡Œé¢åŒ…å«äº†å¤§é‡ä¸´æ—¶åˆ›å»ºçš„å¯¹è±¡ã€‚ï¼ˆæœ¬æ–‡çš„ä¾‹å­ï¼‰</li><li>åˆ›å»ºäº†æ–°çš„çº¿ç¨‹ã€‚ï¼ˆéCocoaç¨‹åºåˆ›å»ºçº¿ç¨‹æ—¶æ‰éœ€è¦ï¼‰</li><li>é•¿æ—¶é—´åœ¨åå°è¿è¡Œçš„ä»»åŠ¡ã€‚</li></ul></li><li><p>åˆ©ç”¨<code>@autoreleasepool</code>ä¼˜åŒ–å¾ªç¯<br>å½“æˆ‘ä»¬ä¸€ä¸ªå¾ªç¯å†…åˆ›å»ºäº†å¾ˆå¤šä¸´æ—¶å¯¹è±¡æ—¶ï¼Œå¯ä»¥é€šè¿‡ä½¿ç”¨<code>@autoreleasepool</code>åœ¨æ¯æ¬¡å¾ªç¯ç»“æŸæ—¶é‡Šæ”¾å†…å­˜ï¼š</p></li></ul><figure class="highlight objectivec"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//æ¥è‡ªAppleæ–‡æ¡£ï¼Œè§å‚è€ƒ</span></div><div class="line"><span class="built_in">NSArray</span> *urls = &lt;<span class="meta"># An array of file URLs #&gt;;</span></div><div class="line"><span class="keyword">for</span> (<span class="built_in">NSURL</span> *url <span class="keyword">in</span> urls) &#123;</div><div class="line">    <span class="keyword">@autoreleasepool</span> &#123;</div><div class="line">        <span class="built_in">NSError</span> *error;</div><div class="line">        <span class="built_in">NSString</span> *fileContents = [<span class="built_in">NSString</span> stringWithContentsOfURL:url</div><div class="line">                                        encoding:<span class="built_in">NSUTF8StringEncoding</span> error:&amp;error];</div><div class="line">        <span class="comment">/* Process the string, creating and autoreleasing more objects. */</span></div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure><blockquote><p>å‚è€ƒæ–‡ç« ï¼š<br>sunnyxx â€”â€” <a href="http://blog.sunnyxx.com/2014/10/15/behind-autorelease/" target="_blank" rel="noopener">é»‘å¹•èƒŒåçš„Autorelease</a><br>Jerry4me â€”â€” <a href="http://www.jianshu.com/p/5559bc15490d" target="_blank" rel="noopener">iOSä¸­autoreleaseçš„é‚£äº›äº‹å„¿</a><br>tutuge â€”â€” <a href="http://tutuge.me/2015/03/17/what-is-autoreleasepool/" target="_blank" rel="noopener">@autoreleasepool-å†…å­˜çš„åˆ†é…ä¸é‡Šæ”¾</a></p></blockquote><h2 id="ä¿®é¥°è¯"><a href="#ä¿®é¥°è¯" class="headerlink" title="ä¿®é¥°è¯"></a>ä¿®é¥°è¯</h2>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;å¼•ç”¨è®¡æ•°&quot;&gt;&lt;a href=&quot;#å¼•ç”¨è®¡æ•°&quot; class=&quot;headerlink&quot; title=&quot;å¼•ç”¨è®¡æ•°&quot;&gt;&lt;/a&gt;å¼•ç”¨è®¡æ•°&lt;/h2&gt;&lt;p&gt;&lt;a href=&quot;http://yulingtianxia.com/blog/2015/12/06/The-Principl
      
    
    </summary>
    
      <category term="iOS" scheme="http://codingdoge.cn/categories/iOS/"/>
    
    
      <category term="Swift" scheme="http://codingdoge.cn/tags/Swift/"/>
    
      <category term="OC" scheme="http://codingdoge.cn/tags/OC/"/>
    
  </entry>
  
  <entry>
    <title>æ¼«è°ˆiOSç³»åˆ—ä¹‹ï¼šå¤šçº¿ç¨‹</title>
    <link href="http://codingdoge.cn/2017/07/17/title:%20%E6%BC%AB%E8%B0%88iOS%E7%B3%BB%E5%88%97%E4%B9%8B%EF%BC%9A%E5%A4%9A%E7%BA%BF%E7%A8%8B/"/>
    <id>http://codingdoge.cn/2017/07/17/title: æ¼«è°ˆiOSç³»åˆ—ä¹‹ï¼šå¤šçº¿ç¨‹/</id>
    <published>2017-07-17T03:17:00.000Z</published>
    <updated>2018-01-13T05:08:06.362Z</updated>
    
    <content type="html"><![CDATA[<hr><h1 id="çº¿ç¨‹åŸºæœ¬æ¦‚å¿µ"><a href="#çº¿ç¨‹åŸºæœ¬æ¦‚å¿µ" class="headerlink" title="çº¿ç¨‹åŸºæœ¬æ¦‚å¿µ"></a>çº¿ç¨‹åŸºæœ¬æ¦‚å¿µ</h1><p>çº¿ç¨‹ï¼ˆthreadï¼‰æ˜¯æ“ä½œç³»ç»Ÿèƒ½å¤Ÿè¿›è¡Œè¿ç®—è°ƒåº¦çš„æœ€å°å•ä½ã€‚å®ƒè¢«åŒ…å«åœ¨è¿›ç¨‹ä¹‹ä¸­ï¼Œæ˜¯è¿›ç¨‹ä¸­çš„å®é™…è¿ä½œå•ä½ã€‚ä¸€æ¡çº¿ç¨‹æŒ‡çš„æ˜¯è¿›ç¨‹ä¸­ä¸€ä¸ªå•ä¸€é¡ºåºçš„æ§åˆ¶æµï¼Œä¸€ä¸ªè¿›ç¨‹ä¸­å¯ä»¥å¹¶å‘å¤šä¸ªçº¿ç¨‹ï¼Œæ¯æ¡çº¿ç¨‹å¹¶è¡Œæ‰§è¡Œä¸åŒçš„ä»»åŠ¡ã€‚<br>åŒä¸€è¿›ç¨‹ä¸­çš„å¤šæ¡çº¿ç¨‹å°†å…±äº«è¯¥è¿›ç¨‹ä¸­çš„å…¨éƒ¨ç³»ç»Ÿèµ„æºï¼Œå¦‚è™šæ‹Ÿåœ°å€ç©ºé—´ï¼Œæ–‡ä»¶æè¿°ç¬¦å’Œä¿¡å·å¤„ç†ç­‰ç­‰ã€‚ä½†åŒä¸€è¿›ç¨‹ä¸­çš„å¤šä¸ªçº¿ç¨‹æœ‰å„è‡ªçš„è°ƒç”¨æ ˆï¼ˆcall stackï¼‰ï¼Œè‡ªå·±çš„å¯„å­˜å™¨ç¯å¢ƒï¼ˆregister contextï¼‰ï¼Œè‡ªå·±çš„çº¿ç¨‹æœ¬åœ°å­˜å‚¨ï¼ˆthread-local storageï¼‰ã€‚<br><strong>çº¿ç¨‹çš„çŠ¶æ€</strong>ï¼š</p><ul><li>æ–°ç”Ÿæ€ï¼ˆNew Threadï¼‰</li><li>å¯è¿è¡Œæ€ï¼ˆRunnableï¼‰</li><li>é˜»å¡/éè¿è¡Œæ€ï¼ˆNot Runnableï¼‰</li><li>æ­»äº¡æ€ï¼ˆDeadï¼‰</li></ul><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://ooo.0o0.ooo/2017/05/14/5917f384972b9.jpg" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><p><strong>æ­»é”</strong>ï¼š<br>æ˜¯æŒ‡ä¸¤ä¸ªæˆ–ä¸¤ä¸ªä»¥ä¸Šçš„è¿›ç¨‹åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œç”±äºç«äº‰èµ„æºæˆ–è€…ç”±äºå½¼æ­¤é€šä¿¡è€Œé€ æˆçš„ä¸€ç§é˜»å¡çš„ç°è±¡ï¼Œè‹¥æ— å¤–åŠ›ä½œç”¨ï¼Œå®ƒä»¬éƒ½å°†æ— æ³•æ¨è¿›ä¸‹å»ã€‚</p><p><strong>æ­»é”æ¡ä»¶</strong>ï¼š</p><ol><li>äº’æ–¥æ¡ä»¶ï¼šæ‰€è°“äº’æ–¥å°±æ˜¯è¿›ç¨‹åœ¨æŸä¸€æ—¶é—´å†…ç‹¬å èµ„æºã€‚</li><li>è¯·æ±‚ä¸ä¿æŒæ¡ä»¶ï¼šä¸€ä¸ªè¿›ç¨‹å› è¯·æ±‚èµ„æºè€Œé˜»å¡æ—¶ï¼Œå¯¹å·²è·å¾—çš„èµ„æºä¿æŒä¸æ”¾ã€‚</li><li>ä¸å‰¥å¤ºæ¡ä»¶:è¿›ç¨‹å·²è·å¾—èµ„æºï¼Œåœ¨æœ«ä½¿ç”¨å®Œä¹‹å‰ï¼Œä¸èƒ½å¼ºè¡Œå‰¥å¤ºã€‚</li><li>å¾ªç¯ç­‰å¾…æ¡ä»¶:è‹¥å¹²è¿›ç¨‹ä¹‹é—´å½¢æˆä¸€ç§å¤´å°¾ç›¸æ¥çš„å¾ªç¯ç­‰å¾…èµ„æºå…³ç³»ã€‚</li></ol><h1 id="åˆ›å»ºçº¿ç¨‹çš„å¼€é”€"><a href="#åˆ›å»ºçº¿ç¨‹çš„å¼€é”€" class="headerlink" title="åˆ›å»ºçº¿ç¨‹çš„å¼€é”€"></a>åˆ›å»ºçº¿ç¨‹çš„å¼€é”€</h1><p><a href="http://www.cnblogs.com/ktgu/p/3529144.html" target="_blank" rel="noopener">å¤šçº¿ç¨‹çš„ä»£ä»·åŠä¸Šä¸‹æ–‡åˆ‡æ¢</a></p><h1 id="pThread"><a href="#pThread" class="headerlink" title="pThread"></a>pThread</h1><p>POSIXçº¿ç¨‹ï¼ˆPOSIX Threadsï¼Œå¸¸è¢«ç¼©å†™ä¸ºPthreadsï¼‰æ˜¯POSIXçš„çº¿ç¨‹æ ‡å‡†ï¼Œè·¨å¹³å°ï¼Œé€‚ç”¨äºå¤šç§æ“ä½œç³»ç»Ÿï¼ˆç±»Unixæ“ä½œç³»ç»Ÿä¸­ï¼Œéƒ½ä½¿ç”¨Pthreadsä½œä¸ºæ“ä½œç³»ç»Ÿçš„çº¿ç¨‹ï¼ŒWindowsæ“ä½œç³»ç»Ÿä¹Ÿæœ‰å…¶ç§»æ¤ç‰ˆpthreads-win32ï¼‰ï¼Œå¯ç§»æ¤æ€§å¼ºï¼Œæ˜¯ä¸€å¥—çº¯Cè¯­è¨€çš„é€šç”¨APIï¼Œä¸”çº¿ç¨‹çš„ç”Ÿå‘½å‘¨æœŸéœ€è¦ç¨‹åºå‘˜è‡ªå·±ç®¡ç†ï¼Œä½¿ç”¨éš¾åº¦è¾ƒå¤§ï¼Œæ‰€ä»¥åœ¨å®é™…å¼€å‘ä¸­é€šå¸¸ä¸ä½¿ç”¨ã€‚<br>Pthreads APIä¸­å¤§è‡´å…±æœ‰100ä¸ªå‡½æ•°è°ƒç”¨ï¼Œå…¨éƒ½ä»¥â€pthread_â€å¼€å¤´ï¼Œå¹¶å¯ä»¥åˆ†ä¸ºå››ç±»ï¼š</p><ul><li>çº¿ç¨‹ç®¡ç†ï¼Œä¾‹å¦‚åˆ›å»ºçº¿ç¨‹ï¼Œç­‰å¾…(join)çº¿ç¨‹ï¼ŒæŸ¥è¯¢çº¿ç¨‹çŠ¶æ€ç­‰ã€‚</li><li>äº’æ–¥é”ï¼ˆMutexï¼‰ï¼šåˆ›å»ºã€æ‘§æ¯ã€é”å®šã€è§£é”ã€è®¾ç½®å±æ€§ç­‰æ“ä½œã€‚</li><li>æ¡ä»¶å˜é‡ï¼ˆCondition Variableï¼‰ï¼šåˆ›å»ºã€æ‘§æ¯ã€ç­‰å¾…ã€é€šçŸ¥ã€è®¾ç½®ä¸æŸ¥è¯¢å±æ€§ç­‰æ“ä½œã€‚</li><li>ä½¿ç”¨äº†äº’æ–¥é”çš„çº¿ç¨‹é—´çš„åŒæ­¥ç®¡ç†ã€‚</li></ul><p><code>pThread</code>åœ¨å®é™…å¼€å‘ä¸­åŸºæœ¬ä¸ä½¿ç”¨ï¼Œæ‰€ä»¥å¤§æ¦‚äº†è§£ä¸‹å°±å¥½äº†ã€‚</p><h1 id="NSThread"><a href="#NSThread" class="headerlink" title="NSThread"></a>NSThread</h1><h1 id="GCD"><a href="#GCD" class="headerlink" title="GCD"></a>GCD</h1><h2 id="dispatch-barrier-async-amp-dispatch-barrier-sync"><a href="#dispatch-barrier-async-amp-dispatch-barrier-sync" class="headerlink" title="dispatch_barrier_async&amp;dispatch_barrier_sync"></a>dispatch_barrier_async&amp;dispatch_barrier_sync</h2><p>åœ¨é˜Ÿåˆ—ä¸­ï¼Œ<code>barrier</code>å—å¿…é¡»å•ç‹¬æ‰§è¡Œï¼Œä¸èƒ½ä¸å…¶ä»–<code>block</code>å¹¶è¡Œã€‚è¿™åªå¯¹å¹¶å‘é˜Ÿåˆ—æœ‰æ„ä¹‰ï¼Œå¹¶å‘é˜Ÿåˆ—å¦‚æœå‘ç°æ¥ä¸‹æ¥è¦æ‰§è¡Œçš„<code>block</code>æ˜¯ä¸ª<code>barrier block</code>ï¼Œé‚£ä¹ˆå°±ä¸€ç›´è¦ç­‰åˆ°å½“å‰æ‰€æœ‰å¹¶å‘çš„<code>block</code>éƒ½æ‰§è¡Œå®Œæ¯•ï¼Œæ‰ä¼šå•ç‹¬æ‰§è¡Œè¿™ä¸ª<code>barrier block</code>ä»£ç å—ï¼Œç­‰åˆ°è¿™ä¸ª<code>barrier block</code>æ‰§è¡Œå®Œæ¯•ï¼Œå†ç»§ç»­æ­£å¸¸å¤„ç†å…¶ä»–å¹¶å‘<code>block</code>ã€‚</p><blockquote><p><code>async</code>, <code>sync</code>ä¸¤è€…åŒºåˆ«åœ¨äº<code>async</code>å°†è‡ªå·±çš„ä»»åŠ¡æ’å…¥é˜Ÿåˆ—å, ä¸ç”¨ç­‰å¾…è‡ªå·±çš„ä»»åŠ¡ç»“æŸ, ç»§ç»­æŠŠåé¢çš„ä»»åŠ¡æ’å…¥é˜Ÿåˆ—, ç„¶åç­‰å¾…è‡ªå·±çš„ä»»åŠ¡è¿è¡Œç»“æŸæ‰æ‰§è¡Œåé¢çš„ä»»åŠ¡, <code>sync</code>å°†è‡ªå·±çš„ä»»åŠ¡æ’å…¥é˜Ÿåˆ—åï¼Œéœ€è¦ç­‰å¾…è‡ªå·±çš„ä»»åŠ¡è¿è¡Œç»“æŸæ‰èƒ½å°†åé¢çš„ä»»åŠ¡æ’å…¥é˜Ÿåˆ—ã€‚</p></blockquote><figure class="highlight objectivec"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#import <span class="meta-string">&lt;Foundation/Foundation.h&gt;</span></span></div><div class="line"> </div><div class="line"><span class="class"><span class="keyword">@interface</span> <span class="title">Person</span> : <span class="title">NSObject</span></span></div><div class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">copy</span>) <span class="built_in">NSString</span> *name;</div><div class="line"><span class="keyword">@end</span></div><div class="line"> </div><div class="line"> </div><div class="line"><span class="meta">#import <span class="meta-string">"Person.h"</span></span></div><div class="line"> </div><div class="line"><span class="class"><span class="keyword">@interface</span> <span class="title">Person</span> ()</span></div><div class="line"><span class="keyword">@end</span></div><div class="line"> </div><div class="line"><span class="keyword">static</span> <span class="built_in">NSString</span> *_name;</div><div class="line"><span class="keyword">static</span> <span class="built_in">dispatch_queue_t</span> _concurrentQueue;</div><div class="line"><span class="class"><span class="keyword">@implementation</span> <span class="title">Person</span></span></div><div class="line">- (<span class="keyword">instancetype</span>)init</div><div class="line">&#123;</div><div class="line">    <span class="keyword">if</span> (<span class="keyword">self</span> = [<span class="keyword">super</span> init]) &#123;</div><div class="line">       _concurrentQueue = dispatch_queue_create(<span class="string">"com.person.syncQueue"</span>, DISPATCH_QUEUE_CONCURRENT);</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> <span class="keyword">self</span>;</div><div class="line">&#125;</div><div class="line">- (<span class="keyword">void</span>)setName:(<span class="built_in">NSString</span> *)name</div><div class="line">&#123;</div><div class="line">    dispatch_barrier_async(_concurrentQueue, ^&#123;</div><div class="line">        _name = [name <span class="keyword">copy</span>];</div><div class="line">    &#125;);</div><div class="line">&#125;</div><div class="line">- (<span class="built_in">NSString</span> *)name</div><div class="line">&#123;</div><div class="line">    __block <span class="built_in">NSString</span> *tempName;</div><div class="line">    <span class="built_in">dispatch_sync</span>(_concurrentQueue, ^&#123;</div><div class="line">        tempName = _name;</div><div class="line">    &#125;);</div><div class="line">    <span class="keyword">return</span> tempName;</div><div class="line">&#125;</div><div class="line"><span class="keyword">@end</span></div></pre></td></tr></table></figure><h1 id="NSOperation"><a href="#NSOperation" class="headerlink" title="NSOperation"></a>NSOperation</h1><p><code>NSOperation</code>é»˜è®¤æ˜¯éå¹¶å‘çš„ï¼Œå½“ä½ è°ƒç”¨<code>-[NSOperation start]</code>æ–¹æ³•æ—¶ï¼Œè¯¥æ–¹æ³•ä¼šç­‰ä»»åŠ¡ç»“æŸæ‰ä¼šè¿”å›ï¼›<br>å¹¶å‘çš„<code>NSOperation</code>æ˜¯æŒ‡,å½“ä½ è°ƒç”¨<code>-[NSOperation start]</code>åï¼Œ<code>NSOperation</code>ä¼šåœ¨éå½“å‰çº¿ç¨‹(å»ºç«‹ä¸€ä¸ª<code>NSThread</code>ï¼Œæˆ–æ˜¯<code>dispatch async</code>ç­‰)æ‰§è¡Œä»»åŠ¡ï¼Œå¹¶åœ¨ä»»åŠ¡ç»“æŸä¹‹å‰å°±è¿”å›;</p><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå¹¶å‘è¡Œä¸ºéƒ½éœ€è¦ä½ è‡ªå·±å®ç°ï¼Œè‹¥è¦å®ç°å¹¶å‘ï¼Œä½ éœ€è¦åšå¾ˆå¤šé¢å¤–çš„å·¥ä½œï¼š</p><ol><li>ä½ éœ€è¦åˆ›å»ºä¸€ä¸ª<code>subclass</code>ï¼›</li><li>é™¤äº†é‡è½½<code>main</code>æ–¹æ³•ï¼Œå®ç°å¹¶å‘ä½ è¿˜éœ€è¦è‡³å°‘é‡è½½ï¼›<code>start</code>,<code>isConcurrent</code>,<code>isExecuting</code>,<code>isFinished</code>å››ä¸ªæ–¹æ³•ï¼›</li><li>åœ¨<code>start</code>é‡Œï¼Œåˆ›å»º<code>Thread</code>æˆ–è€…è°ƒç”¨ä¸€ä¸ªå¼‚æ­¥å‡½æ•°ï¼›</li><li>æ›´æ–°<code>isExecuting</code>ï¼Œå¹¶ä¸”å‘é€ç›¸åº”KVOæ¶ˆæ¯ï¼›</li><li>ä»»åŠ¡ç»“æŸåï¼Œä½ è¿˜å¾—æ›´æ–°<code>isExecuting</code>å’Œ<code>isFinished</code>ï¼Œå‘é€ç›¸åº”KVOæ¶ˆæ¯ã€‚<br>å®ç°ä¸€ä¸ªå¹¶å‘çš„<code>NSOperation</code>æ¯”è¾ƒå°‘è§ï¼Œå…·ä½“å¦‚ä½•å®ç°ï¼Œå¯ä»¥è¯»è¯»æ–‡æ¡£: <a href="https://developer.apple.com/documentation/foundation/operation#//apple_ref/doc/uid/TP40004591-RH2-1173" target="_blank" rel="noopener">NSOperation Class Reference</a></li></ol><p>å¤§å¤šæ•°æƒ…å†µä¸‹<code>NSOperation</code>éƒ½è®¾è®¡æˆéå¹¶å‘ï¼Œè¿™æ ·å®ç°èµ·æ¥ä¼šç®€å•å¾ˆå¤š;<br>å¹¶ä¸”ï¼Œä¸€èˆ¬ä¼šé…åˆ<code>NSOperationQueue</code>ä½¿ç”¨ï¼Œç”±<code>NSOperationQueue</code>æ¥è´Ÿè´£æ‰§è¡Œ<code>NSOperation</code>ï¼Œè€Œéç›´æ¥è°ƒç”¨<code>-[NSOperation start]</code>ã€‚</p><p>è‹¥æœ‰å¤æ‚ä»»åŠ¡éœ€è¦å¹¶å‘æ‰§è¡Œï¼Œä¸€èˆ¬ä¹Ÿæ˜¯æ‹†æˆå¤šä¸ª<code>NSOperation</code>ï¼Œç”±<code>NSOperationQueue</code>æ¥å¹¶å‘çš„æ‰§è¡Œå¤šä¸ª<code>NSOperation</code>ã€‚</p><blockquote><p>å‚è€ƒ:<br><a href="http://www.jianshu.com/p/0b0d9b1f1f19" target="_blank" rel="noopener">å…³äºiOSå¤šçº¿ç¨‹ï¼Œä½ çœ‹æˆ‘å°±å¤Ÿäº†</a><br> <a href="http://www.jianshu.com/p/9ed95082f256" target="_blank" rel="noopener">dispatch_barrier_syncå’Œdispatch_barrier_async</a><br><a href="http://www.cnblogs.com/ziyi--caolu/p/4900650.html" target="_blank" rel="noopener">iOSå¼€å‘ï¼šæ·±å…¥ç†è§£GCD ç¬¬äºŒç¯‡ï¼ˆdispatch_groupã€dispatch_barrierã€åŸºäºçº¿ç¨‹å®‰å…¨çš„å¤šè¯»å•å†™ï¼‰</a><br><a href="http://ourcoders.com/thread/show/1067/" target="_blank" rel="noopener">NSOperationçš„å¹¶å‘å’Œéå¹¶å‘æœ‰ä»€ä¹ˆåŒºåˆ«å‘€ï¼Ÿ</a></p></blockquote>]]></content>
    
    <summary type="html">
    
      
      
        &lt;hr&gt;
&lt;h1 id=&quot;çº¿ç¨‹åŸºæœ¬æ¦‚å¿µ&quot;&gt;&lt;a href=&quot;#çº¿ç¨‹åŸºæœ¬æ¦‚å¿µ&quot; class=&quot;headerlink&quot; title=&quot;çº¿ç¨‹åŸºæœ¬æ¦‚å¿µ&quot;&gt;&lt;/a&gt;çº¿ç¨‹åŸºæœ¬æ¦‚å¿µ&lt;/h1&gt;&lt;p&gt;çº¿ç¨‹ï¼ˆthreadï¼‰æ˜¯æ“ä½œç³»ç»Ÿèƒ½å¤Ÿè¿›è¡Œè¿ç®—è°ƒåº¦çš„æœ€å°å•ä½ã€‚å®ƒè¢«åŒ…å«åœ¨è¿›ç¨‹ä¹‹ä¸­ï¼Œæ˜¯è¿›ç¨‹ä¸­çš„å®é™…è¿ä½œå•
      
    
    </summary>
    
      <category term="iOS" scheme="http://codingdoge.cn/categories/iOS/"/>
    
    
      <category term="OC" scheme="http://codingdoge.cn/tags/OC/"/>
    
  </entry>
  
  <entry>
    <title>å‰‘æŒ‡Offer â€”â€” å¤æ‚é“¾è¡¨çš„å¤åˆ¶</title>
    <link href="http://codingdoge.cn/2017/07/06/title:%20%E5%89%91%E6%8C%87Offer%20%E2%80%94%E2%80%94%20%E5%A4%8D%E6%9D%82%E9%93%BE%E8%A1%A8%E7%9A%84%E5%A4%8D%E5%88%B6/"/>
    <id>http://codingdoge.cn/2017/07/06/title: å‰‘æŒ‡Offer â€”â€” å¤æ‚é“¾è¡¨çš„å¤åˆ¶/</id>
    <published>2017-07-06T02:44:00.000Z</published>
    <updated>2018-01-14T17:25:14.000Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>é¢˜ç›®æ¥æºç‰›å®¢ç½‘ï¼š<strong><a href="https://www.nowcoder.com/practice/f836b2c43afc4b35ad6adc41ec941dba?tpId=13&amp;tqId=11178&amp;tPage=2&amp;rp=2&amp;ru=/ta/coding-interviews&amp;qru=/ta/coding-interviews/question-ranking" target="_blank" rel="noopener">å¤æ‚é“¾è¡¨çš„å¤åˆ¶</a></strong></p></blockquote><h2 id="é¢˜ç›®æè¿°"><a href="#é¢˜ç›®æè¿°" class="headerlink" title="é¢˜ç›®æè¿°"></a>é¢˜ç›®æè¿°</h2><p>è¾“å…¥ä¸€ä¸ªå¤æ‚é“¾è¡¨ï¼ˆæ¯ä¸ªèŠ‚ç‚¹ä¸­æœ‰èŠ‚ç‚¹å€¼ï¼Œä»¥åŠä¸¤ä¸ªæŒ‡é’ˆï¼Œä¸€ä¸ªæŒ‡å‘ä¸‹ä¸€ä¸ªèŠ‚ç‚¹ï¼Œå¦ä¸€ä¸ªç‰¹æ®ŠæŒ‡é’ˆæŒ‡å‘ä»»æ„ä¸€ä¸ªèŠ‚ç‚¹ï¼‰ï¼Œè¿”å›ç»“æœä¸ºå¤åˆ¶åå¤æ‚é“¾è¡¨çš„headã€‚ï¼ˆæ³¨æ„ï¼Œè¾“å‡ºç»“æœä¸­è¯·ä¸è¦è¿”å›å‚æ•°ä¸­çš„èŠ‚ç‚¹å¼•ç”¨ï¼Œå¦åˆ™åˆ¤é¢˜ç¨‹åºä¼šç›´æ¥è¿”å›ç©ºï¼‰</p><h2 id="æ•°æ®ç»“æ„"><a href="#æ•°æ®ç»“æ„" class="headerlink" title="æ•°æ®ç»“æ„"></a>æ•°æ®ç»“æ„</h2><figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/*</span></div><div class="line">struct RandomListNode &#123;</div><div class="line">    int label;</div><div class="line">    struct RandomListNode *next, *random;</div><div class="line">    RandomListNode(int x) :</div><div class="line">            label(x), next(NULL), random(NULL) &#123;</div><div class="line">    &#125;</div><div class="line">&#125;;</div><div class="line">*/</div><div class="line"><span class="selector-tag">class</span> <span class="selector-tag">Solution</span> &#123;</div><div class="line"><span class="attribute">public</span>:</div><div class="line">    RandomListNode* <span class="built_in">Clone</span>(RandomListNode* pHead) &#123;</div><div class="line">    </div><div class="line">    &#125;</div><div class="line">&#125;;</div></pre></td></tr></table></figure><h2 id="è§£é¢˜æ€è·¯"><a href="#è§£é¢˜æ€è·¯" class="headerlink" title="è§£é¢˜æ€è·¯"></a>è§£é¢˜æ€è·¯</h2><h3 id="ä¸€ã€é€’å½’æ€æƒ³ï¼šæŠŠå¤§é—®é¢˜è½¬åŒ–è‹¥å¹²å­é—®é¢˜"><a href="#ä¸€ã€é€’å½’æ€æƒ³ï¼šæŠŠå¤§é—®é¢˜è½¬åŒ–è‹¥å¹²å­é—®é¢˜" class="headerlink" title="ä¸€ã€é€’å½’æ€æƒ³ï¼šæŠŠå¤§é—®é¢˜è½¬åŒ–è‹¥å¹²å­é—®é¢˜"></a>ä¸€ã€é€’å½’æ€æƒ³ï¼šæŠŠå¤§é—®é¢˜è½¬åŒ–è‹¥å¹²å­é—®é¢˜</h3><p>æ­¤é¢˜è½¬åŒ–ä¸ºä¸€ä¸ªå¤´ç»“ç‚¹å’Œé™¤å»å¤´ç»“ç‚¹å‰©ä½™éƒ¨åˆ†ï¼Œå‰©ä½™éƒ¨åˆ†æ“ä½œå’ŒåŸé—®é¢˜ä¸€è‡´</p><figure class="highlight php"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">RandomListNode* <span class="keyword">Clone</span>(RandomListNode* pHead)</div><div class="line">Â Â Â Â &#123;</div><div class="line">Â Â Â Â Â Â Â Â <span class="keyword">if</span>(pHead==<span class="keyword">NULL</span>)</div><div class="line">Â Â Â Â Â Â Â Â Â Â Â Â <span class="keyword">return</span> <span class="keyword">NULL</span>;</div><div class="line">Â Â Â Â Â Â Â Â Â </div><div class="line">Â Â Â Â Â Â Â Â <span class="comment">//å¼€è¾Ÿä¸€ä¸ªæ–°èŠ‚ç‚¹</span></div><div class="line">Â Â Â Â Â Â Â Â RandomListNode* pClonedHead=<span class="keyword">new</span> RandomListNode(pHead-&gt;label);</div><div class="line">Â Â Â Â Â Â Â Â pClonedHead-&gt;next = pHead-&gt;next;</div><div class="line">Â Â Â Â Â Â Â Â pClonedHead-&gt;random = pHead-&gt;random;</div><div class="line">Â Â Â Â Â Â Â Â Â </div><div class="line">Â Â Â Â Â Â Â Â <span class="comment">//é€’å½’å…¶ä»–èŠ‚ç‚¹</span></div><div class="line">Â Â Â Â Â Â Â Â pClonedHead-&gt;next=<span class="keyword">Clone</span>(pHead-&gt;next);</div><div class="line">Â Â Â Â Â Â Â Â Â </div><div class="line">Â Â Â Â Â Â Â Â <span class="keyword">return</span> pClonedHead;</div><div class="line">Â Â Â Â &#125;</div></pre></td></tr></table></figure><h3 id="äºŒã€"><a href="#äºŒã€" class="headerlink" title="äºŒã€"></a>äºŒã€</h3><ul><li>å¤åˆ¶æ¯ä¸ªèŠ‚ç‚¹ï¼Œå¦‚ï¼šå¤åˆ¶èŠ‚ç‚¹Aå¾—åˆ°A1ï¼Œå°†A1æ’å…¥èŠ‚ç‚¹Aåé¢</li><li>éå†é“¾è¡¨ï¼ŒA1-&gt;random = A-&gt;random-&gt;next;</li><li>å°†é“¾è¡¨æ‹†åˆ†æˆåŸé“¾è¡¨å’Œå¤åˆ¶åçš„é“¾è¡¨</li></ul><figure class="highlight xl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div></pre></td><td class="code"><pre><div class="line">RandomListNode* Clone(RandomListNode* pHead)</div><div class="line">&#123;</div><div class="line">Â Â Â Â <span class="keyword">if</span>(!pHead) return NULL;</div><div class="line">Â Â Â Â RandomListNode *currNode = pHead;</div><div class="line">Â Â Â Â <span class="keyword">while</span>(currNode)&#123;</div><div class="line">Â Â Â Â Â Â Â Â R<span class="function"><span class="title">andomListNode</span> *node = new RandomListNode(currNode-&gt;</span>label);</div><div class="line">Â Â Â Â Â Â Â Â <span class="function"><span class="title">node</span>-&gt;</span><span class="function"><span class="title">next</span> = currNode-&gt;</span>next;</div><div class="line">Â Â Â Â Â Â Â Â <span class="function"><span class="title">currNode</span>-&gt;</span>next = node;</div><div class="line">Â Â Â Â Â Â Â Â <span class="function"><span class="title">currNode</span> = node-&gt;</span>next;</div><div class="line">Â Â Â Â &#125;</div><div class="line">Â Â Â Â currNode = pHead;</div><div class="line">Â Â Â Â <span class="keyword">while</span>(currNode)&#123;</div><div class="line">Â Â Â Â Â Â Â Â R<span class="function"><span class="title">andomListNode</span> *node = currNode-&gt;</span>next;</div><div class="line">Â Â Â Â Â Â Â Â <span class="function"><span class="title">if</span>(currNode-&gt;</span>random)&#123;Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â  </div><div class="line">Â Â Â Â Â Â Â Â Â Â Â Â <span class="function"><span class="title">node</span>-&gt;</span><span class="function"><span class="title">random</span> = currNode-&gt;</span><span class="function"><span class="title">random</span>-&gt;</span>next;</div><div class="line">Â Â Â Â Â Â Â Â &#125;</div><div class="line">Â Â Â Â Â Â Â Â <span class="function"><span class="title">currNode</span> = node-&gt;</span>next;</div><div class="line">Â Â Â Â &#125;</div><div class="line">Â Â Â  <span class="comment">//æ‹†åˆ†</span></div><div class="line">Â Â Â Â R<span class="function"><span class="title">andomListNode</span> *pCloneHead = pHead-&gt;</span>next;</div><div class="line">Â Â Â Â RandomListNode *tmp;</div><div class="line">Â Â Â Â currNode = pHead;</div><div class="line">Â Â Â Â <span class="function"><span class="title">while</span>(currNode-&gt;</span>next)&#123;</div><div class="line">Â Â Â Â Â Â Â Â <span class="function"><span class="title">tmp</span> = currNode-&gt;</span>next;</div><div class="line">Â Â Â Â Â Â Â Â <span class="function"><span class="title">currNode</span>-&gt;</span><span class="function"><span class="title">next</span> =tmp-&gt;</span>next;</div><div class="line">Â Â Â Â Â Â Â Â Â currNode = tmp;</div><div class="line">Â Â Â Â &#125;</div><div class="line">Â Â Â Â return pCloneHead;</div><div class="line">Â &#125;</div></pre></td></tr></table></figure><h3 id="ä¸‰ã€å“ˆå¸Œè¡¨æ³•"><a href="#ä¸‰ã€å“ˆå¸Œè¡¨æ³•" class="headerlink" title="ä¸‰ã€å“ˆå¸Œè¡¨æ³•"></a>ä¸‰ã€å“ˆå¸Œè¡¨æ³•</h3><p>æ—¶é—´ç©ºé—´å¤æ‚åº¦éƒ½æ˜¯O(n)</p><figure class="highlight php"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div></pre></td><td class="code"><pre><div class="line">RandomListNode* <span class="keyword">Clone</span>(RandomListNode* pHead)</div><div class="line">&#123;</div><div class="line">Â Â Â Â <span class="keyword">if</span>(pHead==<span class="keyword">NULL</span>)</div><div class="line">Â Â Â Â Â Â Â Â <span class="keyword">return</span> <span class="keyword">NULL</span>;</div><div class="line">Â Â Â Â Â Â Â Â Â </div><div class="line">Â Â Â Â <span class="comment">//å®šä¹‰ä¸€ä¸ªå“ˆå¸Œè¡¨</span></div><div class="line">Â Â Â Â unordered_multimap&lt;RandomListNode*,RandomListNode*&gt; table;</div><div class="line">Â Â Â Â Â Â Â Â Â </div><div class="line">Â Â Â Â <span class="comment">// å¼€è¾Ÿä¸€ä¸ªå¤´ç»“ç‚¹</span></div><div class="line">Â Â Â Â RandomListNode* pClonedHead=<span class="keyword">new</span> RandomListNode(pHead-&gt;label);</div><div class="line">Â Â Â Â pClonedHead-&gt;next=<span class="keyword">NULL</span>;</div><div class="line">Â Â Â Â pClonedHead-&gt;random=<span class="keyword">NULL</span>;</div><div class="line">Â Â Â Â Â Â Â Â Â </div><div class="line">Â Â Â Â <span class="comment">// å°†å¤´ç»“ç‚¹æ”¾å…¥mapä¸­</span></div><div class="line">Â Â Â Â table.insert(make_pair(pHead,pClonedHead));</div><div class="line">Â Â Â Â Â Â Â Â Â </div><div class="line">Â Â Â Â <span class="comment">//è®¾ç½®æ“ä½œæŒ‡é’ˆ</span></div><div class="line">Â Â Â Â RandomListNode* pNode=pHead-&gt;next;</div><div class="line">Â Â Â Â RandomListNode* pClonedNode=pClonedHead;</div><div class="line">Â Â Â Â Â Â Â Â Â </div><div class="line">Â Â Â  <span class="comment">// ç¬¬ä¸€éå…ˆå°†ç®€å•é“¾è¡¨å¤åˆ¶ä¸€ä¸‹</span></div><div class="line">Â Â Â Â <span class="keyword">while</span>(pNode!=<span class="keyword">NULL</span>)</div><div class="line">Â Â Â Â &#123;</div><div class="line">Â Â Â Â Â Â Â Â <span class="comment">// ä¸æ–­å¼€è¾ŸpNodeçš„æ‹·è´ç»“ç‚¹</span></div><div class="line">Â Â Â Â Â Â Â Â RandomListNode* pClonedTail=<span class="keyword">new</span> RandomListNode(pNode-&gt;label);</div><div class="line">Â Â Â Â Â Â Â Â pClonedTail-&gt;next=<span class="keyword">NULL</span>;</div><div class="line">Â Â Â Â Â Â Â Â pClonedTail-&gt;random=<span class="keyword">NULL</span>;</div><div class="line">Â Â Â Â Â Â Â Â Â Â Â Â Â </div><div class="line">Â Â Â Â Â Â Â Â <span class="comment">//è¿æ¥æ–°èŠ‚ç‚¹ï¼Œæ›´æ–°å½“å‰èŠ‚ç‚¹</span></div><div class="line">Â Â Â Â Â Â Â Â pClonedNode-&gt;next=pClonedTail;</div><div class="line">Â Â Â Â Â Â Â Â pClonedNode=pClonedTail;</div><div class="line">Â Â Â Â Â Â Â Â Â Â Â Â Â </div><div class="line">Â Â Â Â Â Â Â Â <span class="comment">//å°†å¯¹åº”å…³ç³»Â  æ’å…¥åˆ°å“ˆå¸Œè¡¨ä¸­</span></div><div class="line">Â Â Â Â Â Â Â Â table.insert(make_pair(pNode,pClonedTail));</div><div class="line">Â Â Â Â Â Â Â Â Â Â Â Â Â </div><div class="line">Â Â Â Â Â Â Â Â <span class="comment">//å‘åç§»åŠ¨æ“ä½œèŠ‚ç‚¹</span></div><div class="line">Â Â Â Â Â Â Â Â pNode=pNode-&gt;next;</div><div class="line">Â Â Â Â &#125;</div><div class="line">Â Â Â Â Â Â Â Â Â </div><div class="line">Â Â Â Â <span class="comment">//éœ€ä»å¤´å¼€å§‹è®¾ç½®randomèŠ‚ç‚¹ï¼Œè®¾ç½®æ“ä½œæŒ‡é’ˆ</span></div><div class="line">Â Â Â Â pNode=pHead;</div><div class="line">Â Â Â Â pClonedNode=pClonedHead;</div><div class="line">Â Â Â Â Â Â Â Â Â </div><div class="line">Â Â Â Â <span class="comment">// æ ¹æ®mapä¸­ä¿å­˜çš„æ•°æ®ï¼Œæ‰¾åˆ°å¯¹åº”çš„èŠ‚ç‚¹</span></div><div class="line">Â Â Â Â <span class="keyword">while</span>(pNode!=<span class="keyword">NULL</span>)</div><div class="line">Â Â Â Â &#123;</div><div class="line">Â Â Â Â Â Â Â Â Â Â Â Â Â </div><div class="line">Â Â Â Â Â Â Â Â <span class="keyword">if</span>(pNode-&gt;random!=<span class="keyword">NULL</span>)</div><div class="line">Â Â Â Â Â Â Â Â &#123;</div><div class="line">Â Â Â Â Â Â Â Â Â Â Â Â <span class="comment">//æ‰¾åˆ°å¯¹åº”èŠ‚ç‚¹ï¼Œæ›´æ–°å¤åˆ¶é“¾è¡¨</span></div><div class="line">Â Â Â Â Â Â Â Â Â  Â Â pClonedNode-&gt;random=table.find(pNode-&gt;random)-&gt;second;</div><div class="line">Â Â Â Â Â Â Â Â &#125;</div><div class="line">Â Â Â Â Â Â Â Â Â Â Â Â Â </div><div class="line">Â Â Â Â Â Â Â Â <span class="comment">//å‘åç§»åŠ¨æ“ä½œèŠ‚ç‚¹</span></div><div class="line">Â Â Â Â Â Â Â Â pNode=pNode-&gt;next;</div><div class="line">Â Â Â Â Â Â Â Â pClonedNode=pClonedNode-&gt;next;</div><div class="line">Â Â Â Â &#125;</div><div class="line">Â Â Â Â Â Â Â Â Â </div><div class="line">Â Â Â Â <span class="keyword">return</span> pClonedHead;</div><div class="line">Â Â Â Â Â Â Â Â Â </div><div class="line">&#125;</div></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;blockquote&gt;
&lt;p&gt;é¢˜ç›®æ¥æºç‰›å®¢ç½‘ï¼š&lt;strong&gt;&lt;a href=&quot;https://www.nowcoder.com/practice/f836b2c43afc4b35ad6adc41ec941dba?tpId=13&amp;amp;tqId=11178&amp;amp;tPage
      
    
    </summary>
    
      <category term="Algorithm" scheme="http://codingdoge.cn/categories/Algorithm/"/>
    
    
      <category term="å‰‘æŒ‡Offer" scheme="http://codingdoge.cn/tags/%E5%89%91%E6%8C%87Offer/"/>
    
  </entry>
  
  <entry>
    <title>åŠ¨æ€è§„åˆ’ï¼ˆDynamic Programmingï¼‰</title>
    <link href="http://codingdoge.cn/2017/05/13/title:%20%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92%EF%BC%88Dynamic%20Programming%EF%BC%89/"/>
    <id>http://codingdoge.cn/2017/05/13/title: åŠ¨æ€è§„åˆ’ï¼ˆDynamic Programmingï¼‰/</id>
    <published>2017-05-13T11:39:00.000Z</published>
    <updated>2018-01-12T14:27:10.181Z</updated>
    
    <content type="html"><![CDATA[<p>ï¼ˆä»¥ä¸‹ç®€ç§°DPï¼‰</p><hr><h2 id="åŸºæœ¬æ€æƒ³"><a href="#åŸºæœ¬æ€æƒ³" class="headerlink" title="åŸºæœ¬æ€æƒ³"></a>åŸºæœ¬æ€æƒ³</h2><p>å°†å¾…æ±‚è§£é—®é¢˜åˆ†è§£æˆè‹¥å¹²ä¸ªå­é—®é¢˜ï¼Œå…ˆæ±‚è§£å­é—®é¢˜ï¼Œç„¶åä»è¿™äº›å­é—®é¢˜çš„è§£å¾—åˆ°åŸé—®é¢˜çš„è§£ã€‚é€‚åˆç”¨DPæ±‚è§£çš„é—®é¢˜ï¼Œç»åˆ†è§£å¾—åˆ°çš„å­é—®é¢˜ä¸€èˆ¬ä¸æ˜¯ç›¸äº’ç‹¬ç«‹çš„ï¼Œå¦‚æœä½¿ç”¨åˆ†æ²»æ³•æ±‚è§£ï¼Œæœ‰äº›å­é—®é¢˜ä¼šè¢«é‡å¤è®¡ç®—å¤šæ¬¡ï¼Œå¯ä»¥ç”¨ä¸€ä¸ªè¡¨æ¥è®°å½•æ‰€æœ‰å·²è§£å†³çš„å­é—®é¢˜çš„ç­”æ¡ˆï¼Œä¸ç®¡è¯¥å­é—®é¢˜ä»¥åæ˜¯å¦è¢«ç”¨åˆ°ï¼Œåªè¦å®ƒè¢«è®¡ç®—è¿‡ï¼Œå°±å°†å…¶ç»“æœå¡«å…¥è¡¨ä¸­ã€‚</p><p>DPç®—æ³•é€‚ç”¨äºè§£æœ€ä¼˜åŒ–é—®é¢˜ã€‚é€šå¸¸å¯ä»¥æŒ‰ä»¥ä¸‹æ­¥éª¤è®¾è®¡ï¼š</p><ol><li>æ‰¾å‡ºæœ€ä¼˜è§£çš„æ€§è´¨ï¼Œå¹¶åˆ»ç”»å…¶ç»“æ„ç‰¹å¾ï¼›</li><li>é€’å½’åœ°å®šä¹‰æœ€ä¼˜å€¼ï¼›</li><li>ä»¥è‡ªåº•å‘ä¸Šçš„æ–¹å¼è®¡ç®—å‡ºæœ€ä¼˜å€¼ï¼›</li><li>æ ¹æ®è®¡ç®—æœ€ä¼˜å€¼æ—¶å¾—åˆ°çš„ä¿¡æ¯ï¼Œæ„é€ æœ€ä¼˜è§£</li></ol><hr><h2 id="åŸºæœ¬è¦ç´ "><a href="#åŸºæœ¬è¦ç´ " class="headerlink" title="åŸºæœ¬è¦ç´ "></a>åŸºæœ¬è¦ç´ </h2><ol><li><p>æœ€ä¼˜å­ç»“æ„<br>é—®é¢˜çš„æœ€ä¼˜è§£åŒ…å«äº†å…¶å­é—®é¢˜çš„æœ€ä¼˜è§£ã€‚</p></li><li><p>é‡å å­é—®é¢˜<br>åœ¨ç”¨é€’å½’ç®—æ³•è‡ªé¡¶å‘ä¸‹æ±‚è§£é—®é¢˜æ—¶ï¼Œæ¯æ¬¡äº§ç”Ÿçš„å­é—®é¢˜å¹¶ä¸æ€»æ˜¯æ–°é—®é¢˜ï¼Œæœ‰äº›å­é—®é¢˜è¢«è®¡ç®—å¤šæ¬¡ã€‚DPç®—æ³•æ­£å¼åˆ©ç”¨äº†è¿™ç§å­é—®é¢˜çš„é‡å æ€§è´¨ï¼Œå¯¹æ¯ä¸€ä¸ªå­é—®é¢˜åªè§£ä¸€æ¬¡ï¼Œè€Œåå°†å…¶è§£ä¿å­˜åœ¨ä¸€ä¸ªè¡¨æ ¼ä¸­ï¼Œå½“å†æ¬¡éœ€è¦è§£æ­¤é—®é¢˜æ—¶ï¼Œåªæ˜¯ç®€å•åœ°ç”¨å¸¸æ•°æ—¶é—´æŸ¥çœ‹ä¸€ä¸‹ç»“æœã€‚é€šå¸¸ä¸åŒçš„å­é—®é¢˜ä¸ªæ•°éšé—®é¢˜çš„å¤§å°å‘ˆå¤šé¡¹å¼å¢é•¿ï¼Œå› æ­¤ç”¨DPç®—æ³•é€šå¸¸åªéœ€è¦å¤šé¡¹å¼æ—¶é—´ï¼Œä»è€Œè·å¾—è¾ƒé«˜çš„è§£é¢˜æ•ˆç‡ã€‚</p></li></ol><h2 id="æœ€é•¿å…¬å…±å­åºåˆ—"><a href="#æœ€é•¿å…¬å…±å­åºåˆ—" class="headerlink" title="æœ€é•¿å…¬å…±å­åºåˆ—"></a>æœ€é•¿å…¬å…±å­åºåˆ—</h2><h3 id="é—®é¢˜æè¿°"><a href="#é—®é¢˜æè¿°" class="headerlink" title="é—®é¢˜æè¿°"></a>é—®é¢˜æè¿°</h3><p>ä¸€ä¸ªç»™å®šåºåˆ—çš„å­åºåˆ—æ˜¯åœ¨è¯¥åºåˆ—ä¸­åˆ å»è‹¥å¹²å…ƒç´ åå¾—åˆ°çš„åºåˆ—ã€‚ç¡®åˆ‡çš„è¯´ï¼Œè‹¥ç»™å®šåºåˆ—<code>X = {x1, x2, ..., xm}</code>ï¼Œåˆ™å¦ä¸€åºåˆ—<code>Z = {z1, z2, ..., zk}</code>ï¼ŒXçš„å­åºåˆ—æ˜¯æŒ‡å­˜åœ¨ä¸€ä¸ªä¸¥æ ¼é€’å¢ä¸‹æ ‡åºåˆ—<code>{i1, i2, ..., ik}</code>ä½¿å¾—å¯¹äºæ‰€æœ‰<code>j = 1, 2, ..., k</code>æœ‰<code>zj = xij</code>ã€‚ä¾‹å¦‚ï¼Œåºåˆ—<code>Z = {B, C, D, B}</code>æ˜¯åºåˆ—<code>X = {A, B, C, B, D, A, B}</code>çš„å­åºåˆ—ï¼Œç›¸åº”çš„é€’å¢ä¸‹æ ‡åºåˆ—ä¸º<code>{2, 3, 5, 7}</code>ã€‚<br>ç»™å®šä¸¤ä¸ªåºåˆ—Xå’ŒYï¼Œå½“å¦ä¸€åºåˆ—Zæ—¢æ˜¯Xçš„å­åºåˆ—åˆæ˜¯Yçš„å­åºåˆ—æ—¶ï¼Œç§°Zæ˜¯åºåˆ—Xå’ŒYçš„å…¬å…±å­åºåˆ—ã€‚<br>ä¾‹å¦‚ï¼Œè‹¥<code>X = {A, B, C, B, D, A, B}</code>ï¼Œ<code>Y = {B, D, C, A, B, A}</code>ï¼Œåºåˆ—<code>{B, C, A}</code>æ˜¯Xå’ŒYçš„ä¸€ä¸ªå…¬å…±å­åºåˆ—ï¼Œä½†å®ƒä¸æ˜¯Xå’ŒYçš„æœ€é•¿å…¬å…±å­åºåˆ—ã€‚åºåˆ—<code>{B, C, B, A}</code>ä¹Ÿæ˜¯Xå’ŒYçš„ä¸€ä¸ªå…¬å…±å­åºåˆ—ï¼Œå®ƒçš„é•¿åº¦ä¸º4ï¼Œè€Œä¸”å®ƒæ˜¯Xå’ŒYçš„æœ€é•¿å…¬å…±å­åºåˆ—ï¼Œå› ä¸ºXå’ŒYæ²¡æœ‰é•¿åº¦å¤§äº4çš„å…¬å…±å­åºåˆ—ã€‚</p><h3 id="æœ€é•¿å…¬å…±å­åºåˆ—é—®é¢˜"><a href="#æœ€é•¿å…¬å…±å­åºåˆ—é—®é¢˜" class="headerlink" title="æœ€é•¿å…¬å…±å­åºåˆ—é—®é¢˜"></a>æœ€é•¿å…¬å…±å­åºåˆ—é—®é¢˜</h3><p>ç»™å®šä¸¤ä¸ªåºåˆ—<code>X = {x1, x2, ..., xm}</code>å’Œ<code>Y = {y1, y2, ..., ym}</code>ï¼Œæ‰¾å‡ºXå’ŒYçš„æœ€é•¿å…¬å…±å­åºåˆ—ã€‚</p><h3 id="æŒ‰ç…§DPç®—æ³•è®¾è®¡çš„å„ä¸ªæ­¥éª¤æ±‚è§£"><a href="#æŒ‰ç…§DPç®—æ³•è®¾è®¡çš„å„ä¸ªæ­¥éª¤æ±‚è§£" class="headerlink" title="æŒ‰ç…§DPç®—æ³•è®¾è®¡çš„å„ä¸ªæ­¥éª¤æ±‚è§£"></a>æŒ‰ç…§DPç®—æ³•è®¾è®¡çš„å„ä¸ªæ­¥éª¤æ±‚è§£</h3><ol><li><p>æœ€é•¿å…¬å…±å­åºåˆ—ç»“æ„<br>è®¾åºåˆ—<code>X = {x1, x2, ..., xm}</code>å’Œ<code>Y = {y1, y2, ..., yn}</code>çš„æœ€é•¿å…¬å…±å­åºåˆ—ä¸º<code>Z = {z1, z2, ..., zk}</code>ï¼Œåˆ™  </p><ol><li>è‹¥<code>xm = yn</code>ï¼Œåˆ™<code>zk = xm = yn</code>ï¼Œä¸”Z</li></ol></li><li><p>å­é—®é¢˜çš„é€’å½’ç»“æ„</p></li><li>è®¡ç®—æœ€ä¼˜å€¼</li><li>æ„é€ æœ€é•¿å…¬å…±å­åºåˆ—</li><li>ç®—æ³•çš„æ”¹è¿›</li></ol>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;ï¼ˆä»¥ä¸‹ç®€ç§°DPï¼‰&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id=&quot;åŸºæœ¬æ€æƒ³&quot;&gt;&lt;a href=&quot;#åŸºæœ¬æ€æƒ³&quot; class=&quot;headerlink&quot; title=&quot;åŸºæœ¬æ€æƒ³&quot;&gt;&lt;/a&gt;åŸºæœ¬æ€æƒ³&lt;/h2&gt;&lt;p&gt;å°†å¾…æ±‚è§£é—®é¢˜åˆ†è§£æˆè‹¥å¹²ä¸ªå­é—®é¢˜ï¼Œå…ˆæ±‚è§£å­é—®é¢˜ï¼Œç„¶åä»è¿™äº›å­é—®é¢˜çš„è§£å¾—åˆ°åŸé—®é¢˜çš„è§£ã€‚
      
    
    </summary>
    
      <category term="Algorithm" scheme="http://codingdoge.cn/categories/Algorithm/"/>
    
    
  </entry>
  
</feed>
