{"meta":{"title":"CodingDoge","subtitle":"å…³äºå¼€å‘ã€è®¾è®¡ï¼Œå…³äºç”Ÿæ´»ã€‚","description":"Keep it simple, stuip.","author":"CodingDoge","url":"http://codingdoge.cn"},"pages":[{"title":"","date":"2017-12-07T23:57:56.000Z","updated":"2017-12-07T23:03:58.000Z","comments":true,"path":"404.html","permalink":"http://codingdoge.cn/404.html","excerpt":"","text":"CodingDoge's blog | 404"},{"title":"","date":"2017-12-07T23:03:58.000Z","updated":"2017-12-07T23:03:58.000Z","comments":true,"path":"baidu_verify_pl2cC4IAHr.html","permalink":"http://codingdoge.cn/baidu_verify_pl2cC4IAHr.html","excerpt":"","text":"pl2cC4IAHr"},{"title":"About","date":"2017-07-20T04:10:23.000Z","updated":"2018-01-14T17:34:54.960Z","comments":true,"path":"about/index.html","permalink":"http://codingdoge.cn/about/index.html","excerpt":"","text":""},{"title":"","date":"2017-12-20T17:58:19.000Z","updated":"2017-12-20T17:58:19.000Z","comments":false,"path":"categories/index.html","permalink":"http://codingdoge.cn/categories/index.html","excerpt":"","text":""},{"title":"","date":"2017-12-07T23:03:58.000Z","updated":"2017-12-07T23:03:58.000Z","comments":true,"path":"search/index.html","permalink":"http://codingdoge.cn/search/index.html","excerpt":"","text":"layout: search title: search"},{"title":"","date":"2018-01-14T17:27:15.013Z","updated":"2017-12-20T17:56:35.000Z","comments":false,"path":"tags/index.html","permalink":"http://codingdoge.cn/tags/index.html","excerpt":"","text":""}],"posts":[{"title":"Just a test","slug":"test","date":"2018-01-14T18:00:21.152Z","updated":"2018-01-14T18:00:21.152Z","comments":true,"path":"2018/01/15/test/","link":"","permalink":"http://codingdoge.cn/2018/01/15/test/","excerpt":"","text":"aaa a dfadf","categories":[],"tags":[]},{"title":"Advanced Swift ç¬”è®° â€”â€” å…§å»ºé›†åˆé¡å‹","slug":"title: Advanced Swift ç¬”è®° â€”â€” å…§å»ºé›†åˆé¡å‹","date":"2017-08-30T07:47:00.000Z","updated":"2018-01-13T12:22:39.908Z","comments":true,"path":"2017/08/30/title: Advanced Swift ç¬”è®° â€”â€” å…§å»ºé›†åˆé¡å‹/","link":"","permalink":"http://codingdoge.cn/2017/08/30/title: Advanced Swift ç¬”è®° â€”â€” å…§å»ºé›†åˆé¡å‹/","excerpt":"","text":"æ•¸çµ„(Array)ç›¡é‡ä¸è¦ä½¿ç”¨ä¸‹æ¨™ç´¢å¼•ï¼Œå¦‚æœä¸‹æ¨™è¶Šç•Œæœƒç›´æ¥å°è‡´crashï¼ˆåœ¨ä¸¦ç™¼æƒ…æ³ä¸‹å°¤å…¶éœ€è¦è€ƒæ…®ï¼‰ã€‚ è¿­ä»£å…¨éƒ¨ 1for x in array è¿­ä»£é™¤äº†ç¬¬ä¸€å€‹å…ƒç´ ä»¥å¤–çš„å…¶é¤˜éƒ¨åˆ† 1for x in array.dropFirst() è¿­ä»£é™¤äº†æœ€å¾Œ5å€‹å…ƒç´ ä»¥å¤–çš„æ•¸çµ„ 1for x in array.dropLast(5) åˆ—èˆ‰æ•¸çµ„ä¸­çš„å…ƒç´ å’Œå°æ‡‰ä¸‹æ¨™ 1for (index, value) in array.enumerated() å°‹æ‰¾ä¸€å€‹æŒ‡å®šå…ƒç´ çš„ä½ç½® 123_ = array.index &#123; someMatchingLogic($0)&#125; å°æ•¸çµ„æ‰€æœ‰å…ƒç´ è®Šå½¢ 123_ = array.map &#123; someTransformation($0)&#125; ç¯©é¸ç¬¦åˆæŸå€‹æ¨™æº–çš„å…ƒç´  123_ = array.filter &#123; someCriteria($0)&#125;","categories":[{"name":"iOS","slug":"iOS","permalink":"http://codingdoge.cn/categories/iOS/"}],"tags":[{"name":"Reading Notes","slug":"Reading-Notes","permalink":"http://codingdoge.cn/tags/Reading-Notes/"}]},{"title":"Brew Instruction","slug":"title: Brew Instruction","date":"2017-08-30T06:26:00.000Z","updated":"2018-01-13T12:36:00.696Z","comments":true,"path":"2017/08/30/title: Brew Instruction/","link":"","permalink":"http://codingdoge.cn/2017/08/30/title: Brew Instruction/","excerpt":"","text":"Brew brew help æŸ¥çœ‹æœ‰ä»€éº¼å¯ç”¨çš„æŒ‡ä»¤ brew search [someSuit] æŸ¥è©¢æœ‰ç„¡someSuit brew install [someSuit] å®‰è£someSuit brew info [someSuit] æŸ¥çœ‹someSuitçš„è¨Šæ¯ brew uninstall [someSuit] ç§»é™¤someSuit brew list åˆ—å‡ºå·²å®‰è£å¥—ä»¶ brew outdated æŸ¥è©¢é‚£äº›å¥—ä»¶å·²éæœŸ brew cleanup -n åˆªé™¤èˆŠçš„å¥—ä»¶ç‰ˆæœ¬(-n æ˜¯é¡¯ç¤ºåˆªé™¤çš„éç¨‹ï¼Œå¯ä»¥äº†è§£æœ‰å“ªäº›å¥—ä»¶è¢«åˆªé™¤äº†) brew upgrade [someSuit] æ›´æ–°someSuit brew update &amp;&amp; brew upgrade &amp;&amp; brew doctor æ›´æ–°Homebrewä¸Šé¢æ‰€æœ‰å¥—ä»¶ brew dips [someSuit] åˆ—å‡ºå®‰è£someSuitéœ€è¦çš„ä¾è³´å¥—ä»¶ brew â€”prefix æŸ¥è©¢brewå®‰è£çš„è·¯å¾‘ åƒè€ƒ:chiehwen/Homebrew æŒ‡ä»¤è©³è§£.mdHomebrew æŒ‡ä»¤","categories":[{"name":"Shell","slug":"Shell","permalink":"http://codingdoge.cn/categories/Shell/"}],"tags":[{"name":"Tool","slug":"Tool","permalink":"http://codingdoge.cn/tags/Tool/"}]},{"title":"Advanced Swift ç¬”è®° â€”â€” Tips","slug":"title: Advanced Swift ç¬”è®° â€”â€” Tips","date":"2017-08-20T09:35:00.000Z","updated":"2018-01-13T12:23:01.178Z","comments":true,"path":"2017/08/20/title: Advanced Swift ç¬”è®° â€”â€” Tips/","link":"","permalink":"http://codingdoge.cn/2017/08/20/title: Advanced Swift ç¬”è®° â€”â€” Tips/","excerpt":"","text":"Curried Function æŸ¯é‡ŒåŒ–å‡½æ•¸ä¸€ä¸ªå‡½æ•°ä¸æ˜¯æ¥å—å¤šä¸ªå‚æ•°ï¼Œè€Œæ˜¯åªæ¥å—éƒ¨åˆ†å‚æ•°ï¼Œç„¶åè¿”å›ä¸€ä¸ªæ¥å—å…¶ä½™å‚æ•°çš„å‡½æ•°ã€‚ Statically Dispatched éœæ…‹æ´¾ç™¼å®šç¾©åœ¨é¡æˆ–è€…å”è­°ä¸­çš„å‡½æ•¸å°±æ˜¯æ–¹æ³•(Method)ï¼Œä»–å€‘æœ‰ä¸€å€‹éš±å¼çš„selfã€‚ä¸æ˜¯æ–¹æ³•çš„å‡½æ•¸å«åšè‡ªç”±å‡½æ•¸(Free Function)ã€‚è‡ªç”±å‡½æ•°å’Œé‚£äº›åœ¨ç»“æ„ä½“ä¸Šè°ƒç”¨çš„æ–¹æ³•æ˜¯é™æ€æ´¾å‘ (statically dispatched)çš„ã€‚å¯¹äºè¿™äº›å‡½æ•°çš„è°ƒç”¨ï¼Œåœ¨ç¼–è¯‘çš„æ—¶å€™å°±å·²ç»ç¡®å®šäº†ã€‚å¯¹äºé™æ€æ´¾å‘çš„è°ƒç”¨ï¼Œç¼–è¯‘å™¨å¯èƒ½èƒ½å¤Ÿå†…è” (inline)è¿™äº›å‡½æ•°ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå®Œå…¨ä¸å»åšå‡½æ•°è°ƒç”¨ï¼Œè€Œæ˜¯å°†è¿™éƒ¨åˆ†ä»£ç æ›¿æ¢ä¸ºéœ€è¦æ‰§è¡Œçš„å‡½æ•°ã€‚é™æ€æ´¾å‘è¿˜èƒ½å¤Ÿå¸®åŠ©ç¼–è¯‘å™¨ä¸¢å¼ƒæˆ–è€…ç®€åŒ–é‚£äº›åœ¨ç¼–è¯‘æ—¶å°±èƒ½ç¡®å®šä¸ä¼šè¢«å®é™…æ‰§è¡Œçš„ä»£ç ã€‚","categories":[{"name":"iOS","slug":"iOS","permalink":"http://codingdoge.cn/categories/iOS/"}],"tags":[{"name":"Reading Notes","slug":"Reading-Notes","permalink":"http://codingdoge.cn/tags/Reading-Notes/"}]},{"title":"å‰‘æŒ‡Offer â€”â€” äºŒå‰æœç´¢æ ‘çš„ç¬¬kä¸ªç»“ç‚¹","slug":"title: å‰‘æŒ‡Offer â€”â€” äºŒå‰æœç´¢æ ‘çš„ç¬¬kä¸ªç»“ç‚¹","date":"2017-08-04T01:56:00.000Z","updated":"2018-01-14T16:29:06.979Z","comments":true,"path":"2017/08/04/title: å‰‘æŒ‡Offer â€”â€” äºŒå‰æœç´¢æ ‘çš„ç¬¬kä¸ªç»“ç‚¹/","link":"","permalink":"http://codingdoge.cn/2017/08/04/title: å‰‘æŒ‡Offer â€”â€” äºŒå‰æœç´¢æ ‘çš„ç¬¬kä¸ªç»“ç‚¹/","excerpt":"","text":"é¢˜ç›®æ¥æº:ç‰›å®¢ç½‘ é¢˜ç›®æè¿°ç»™å®šä¸€é¢—äºŒå‰æœç´¢æ ‘ï¼Œè¯·æ‰¾å‡ºå…¶ä¸­çš„ç¬¬kå¤§çš„ç»“ç‚¹ã€‚ä¾‹å¦‚ï¼Œ 5 / \\ 3 7 /\\ /\\ 2 4 6 8 ä¸­ï¼ŒæŒ‰ç»“ç‚¹æ•°å€¼å¤§å°é¡ºåºç¬¬ä¸‰ä¸ªç»“ç‚¹çš„å€¼ä¸º4ã€‚ è§£é¢˜æ€è·¯ é€’å½’ è¿­ä»£way1ä¸­åºéå†ï¼Œæ‰¾åˆ°ç¬¬kä¸ªç»“ç‚¹ã€‚å®Œå…¨æ€§çš„æ¨¡æ‹Ÿå·¦æ ¹å³ï¼Œæ³¨æ„è¿”å›ç»“æœçš„å¤„ç†ã€‚ TreeNode* KthNode(TreeNode* pRoot, int k) { if (pRoot) { TreeNode *node = KthNode(pRoot-&gt;left, k); if (node) return node; index++; if (index == k) return pRoot; node = KthNode(pRoot-&gt;right, k); if (node) return node; } return NULL; }","categories":[{"name":"Algorithm","slug":"Algorithm","permalink":"http://codingdoge.cn/categories/Algorithm/"}],"tags":[{"name":"å‰‘æŒ‡Offer","slug":"å‰‘æŒ‡Offer","permalink":"http://codingdoge.cn/tags/å‰‘æŒ‡Offer/"}]},{"title":"é”™è¯¯å¤„ç†","slug":"title: é”™è¯¯å¤„ç†","date":"2017-08-03T02:47:00.000Z","updated":"2018-01-13T12:26:37.175Z","comments":true,"path":"2017/08/03/title: é”™è¯¯å¤„ç†/","link":"","permalink":"http://codingdoge.cn/2017/08/03/title: é”™è¯¯å¤„ç†/","excerpt":"","text":"é”™è¯¯å¤„ç†ï¼ˆError handlingï¼‰æ˜¯å“åº”é”™è¯¯ä»¥åŠä»é”™è¯¯ä¸­æ¢å¤çš„è¿‡ç¨‹ã€‚Swift æä¾›äº†åœ¨è¿è¡Œæ—¶å¯¹å¯æ¢å¤é”™è¯¯çš„æŠ›å‡ºã€æ•è·ã€ä¼ é€’å’Œæ“ä½œçš„ä¸€ç­‰å…¬æ°‘æ”¯æŒã€‚ Swift ä¸­æœ‰4ç§å¤„ç†é”™è¯¯çš„æ–¹å¼ æŠŠå‡½æ•°æŠ›å‡ºçš„é”™è¯¯ä¼ é€’ç»™è°ƒç”¨æ­¤å‡½æ•°çš„ä»£ç  ç”¨do-catchè¯­å¥å¤„ç†é”™è¯¯ å°†é”™è¯¯ä½œä¸ºå¯é€‰ç±»å‹å¤„ç† æˆ–è€…æ–­è¨€æ­¤é”™è¯¯æ ¹æœ¬ä¸ä¼šå‘ç”Ÿ Swift ä¸­çš„é”™è¯¯å¤„ç†å¹¶ä¸æ¶‰åŠè§£é™¤è°ƒç”¨æ ˆï¼Œè¿™æ˜¯ä¸€ä¸ªè®¡ç®—ä»£ä»·é«˜æ˜‚çš„è¿‡ç¨‹ã€‚å°±æ­¤è€Œè¨€ï¼Œthrowè¯­å¥çš„æ€§èƒ½ç‰¹æ€§æ˜¯å¯ä»¥å’Œreturnè¯­å¥ç›¸åª²ç¾çš„ã€‚ ä¸€ä¸ª throwing å‡½æ•°å¯ä»¥åœ¨å…¶å†…éƒ¨æŠ›å‡ºé”™è¯¯ï¼Œå¹¶å°†é”™è¯¯ä¼ é€’åˆ°å‡½æ•°è¢«è°ƒç”¨æ—¶çš„ä½œç”¨åŸŸã€‚ å‚è€ƒ: The Swift Programming Language ä¸­æ–‡ç‰ˆSWIFT çš„å¿…å¤‡ TIP","categories":[{"name":"iOS","slug":"iOS","permalink":"http://codingdoge.cn/categories/iOS/"}],"tags":[{"name":"Swift","slug":"Swift","permalink":"http://codingdoge.cn/tags/Swift/"}]},{"title":"Dispatch åœ¨swiftä¸­çš„ä½¿ç”¨","slug":"title: Dispatch åœ¨swiftä¸­çš„ä½¿ç”¨","date":"2017-08-03T01:49:00.000Z","updated":"2018-01-13T12:28:30.884Z","comments":true,"path":"2017/08/03/title: Dispatch åœ¨swiftä¸­çš„ä½¿ç”¨/","link":"","permalink":"http://codingdoge.cn/2017/08/03/title: Dispatch åœ¨swiftä¸­çš„ä½¿ç”¨/","excerpt":"","text":"åˆ›å»ºé˜Ÿåˆ—å½“groupé‡Œæ‰€æœ‰äº‹ä»¶éƒ½å®ŒæˆGCD APIæœ‰ä¸¤ç§æ–¹å¼å‘é€é€šçŸ¥ï¼Œç¬¬ä¸€ç§æ˜¯dispatch_group_waitï¼Œä¼šé˜»å¡å½“å‰è¿›ç¨‹ï¼Œç­‰æ‰€æœ‰ä»»åŠ¡éƒ½å®Œæˆæˆ–ç­‰å¾…è¶…æ—¶ã€‚ç¬¬äºŒç§æ–¹æ³•æ˜¯ä½¿ç”¨dispatch_group_notifyï¼Œå¼‚æ­¥æ‰§è¡Œé—­åŒ…ï¼Œä¸ä¼šé˜»å¡ã€‚ 1234567891011121314151617181920212223242526272829func downloadPhotosWithCompletion(completion: BatchPhotoDownloadingCompletionClosure?) &#123; dispatch_async(GlobalUserInitiatedQueue) &#123; // å› ä¸ºdispatch_group_waitä¼šç§Ÿå¡å½“å‰è¿›ç¨‹ï¼Œæ‰€ä»¥è¦ä½¿ç”¨dispatch_asyncå°†æ•´ä¸ªæ–¹æ³•è¦æ”¾åˆ°åå°é˜Ÿåˆ—æ‰èƒ½å¤Ÿä¿è¯ä¸»çº¿ç¨‹ä¸è¢«é˜»å¡ var storedError: NSError! var downloadGroup = dispatch_group_create() // åˆ›å»ºä¸€ä¸ªdispatch group for address in [OverlyAttachedGirlfriendURLString, SuccessKidURLString, LotsOfFacesURLString] &#123; let url = NSURL(string: address) dispatch_group_enter(downloadGroup) // dispatch_group_enteræ˜¯é€šçŸ¥dispatch groupä»»åŠ¡å¼€å§‹äº†ï¼Œdispatch_group_enterå’Œdispatch_group_leaveæ˜¯æˆå¯¹è°ƒç”¨ï¼Œä¸ç„¶ç¨‹åºå°±å´©æºƒäº†ã€‚ let photo = DownloadPhoto(url: url!) &#123; image, error in if let error = error &#123; storedError = error &#125; dispatch_group_leave(downloadGroup) // ä¿æŒå’Œdispatch_group_enteré…å¯¹ã€‚é€šçŸ¥ä»»åŠ¡å·²ç»å®Œæˆ &#125; PhotoManager.sharedManager.addPhoto(photo) &#125; dispatch_group_wait(downloadGroup, DISPATCH_TIME_FOREVER) // dispatch_group_waitç­‰å¾…æ‰€æœ‰ä»»åŠ¡éƒ½å®Œæˆç›´åˆ°è¶…æ—¶ã€‚å¦‚æœä»»åŠ¡å®Œæˆå‰å°±è¶…æ—¶äº†ï¼Œå‡½æ•°ä¼šè¿”å›ä¸€ä¸ªéé›¶å€¼ï¼Œå¯ä»¥é€šè¿‡è¿”å›å€¼åˆ¤æ–­æ˜¯å¦è¶…æ—¶ã€‚ä¹Ÿå¯ä»¥ç”¨DISPATCH_TIME_FOREVERè¡¨ç¤ºä¸€ç›´ç­‰ã€‚ dispatch_async(GlobalMainQueue) &#123; // è¿™é‡Œå¯ä»¥ä¿è¯æ‰€æœ‰å›¾ç‰‡ä»»åŠ¡éƒ½å®Œæˆï¼Œç„¶ååœ¨main queueé‡ŒåŠ å…¥å®Œæˆåè¦å¤„ç†çš„é—­åŒ…ï¼Œä¼šåœ¨main queueé‡Œæ‰§è¡Œã€‚ if let completion = completion &#123; // æ‰§è¡Œé—­åŒ…å†…å®¹ completion(error: storedError) &#125; &#125; &#125;&#125; Serial Queues12345678910111213141516171819private let serialQueue = DispatchQueue(label: â€œserialQueueâ€)private var dictionary: [String: Any] = [:]public func set(_ value: Any, forKey key: String) &#123; serialQueue.sync &#123; dictionary[key] = value &#125;&#125;public func object(forKey key: String) -&gt; Any? &#123; var result: Any? serialQueue.sync &#123; result = storage[key] &#125; // returns after serialQueue is finished operation // beacuse serialQueue is run synchronously return result&#125; Concurrent Queues1234567891011121314151617181920private let concurrentQueue = DispatchQueue(label: &quot;concurrentQueue&quot;, attributes: .concurrent)private var dictionary: [String: Any] = [:] public func set(_ value: Any?, forKey key: String) &#123; concurrentQueue.async &#123; self.storage[key] = value &#125;&#125;public func object(forKey key: String) -&gt; Any? &#123; var result: Any? concurrentQueue.sync &#123; result = storage[key] &#125; // returns after concurrentQueue is finished operation // beacuse concurrentQueue is run synchronously return result&#125; Concurrent Queue with Barrier1234567891011121314151617181920212223private let concurrentQueue = DispatchQueue(label: &quot;concurrentQueue&quot;, attributes: .concurrent)private var dictionary: [String: Any] = [:] public func set(_ value: Any?, forKey key: String) &#123; // .barrier flag ensures that within the queue all reading is done // before the below writing is performed and // pending readings start after below writing is performed concurrentQueue.async(flags: .barrier) &#123; self.storage[key] = value &#125;&#125;public func object(forKey key: String) -&gt; Any? &#123; var result: Any? concurrentQueue.sync &#123; result = storage[key] &#125; // returns after concurrentQueue is finished operation // beacuse concurrentQueue is run synchronously return result&#125; å»¶æ—¶1234567891011121314151617181920212223242526272829303132333435typealias Task = (_ cancel: Bool) -&gt; Void func delay(time: TimeInterval, task: @escaping ()-&gt;()) -&gt; Task? &#123; func dispatch_later(block: @escaping ()-&gt;()) &#123; DispatchQueue.main.asyncAfter(deadline: DispatchTime.now()+time, execute: block) &#125; var closure: (()-&gt;())? = task var result: Task? let delayedClosure: Task = &#123; cancel in if let internalClosure = closure &#123; if cancel == false &#123; DispatchQueue.main.async &#123; internalClosure() &#125; &#125; &#125; closure = nil result = nil &#125; result = delayedClosure dispatch_later &#123; if let delayedClosure = result &#123; delayedClosure(false) &#125; &#125; return result &#125; func cancel(task: Task?) &#123; task?(true) &#125; ç½‘ç»œåœºæ™¯å¼‚æ­¥å¼€å¯ä¸‹è½½ã€å–æ¶ˆä¸‹è½½ï¼Œå¼€å§‹ä¸‹è½½å‰ä¿è¯æ²¡æœ‰é—ç•™ä¸‹è½½ä»»åŠ¡12345678910111213fileprivate let barrierQueue = DispatchQueue(label: \"com.meitu.meipu.videoCache.barrierQueue\")func downloader(url: URL) &#123; barrierQueue.sync &#123; [weak self] in // add downloader task &#125;&#125;func cancel() &#123; barrierQueue.async(group: nil, qos: .default, flags: .barrier) &#123; // cacle task &#125;&#125; å‚è€ƒ:GCD åœ¨ Swift 3 ä¸­çš„ç©å„¿æ³•GCD ä½¿ç”¨æŒ‡å—Swift 3 ä¸­çš„ GCD ä¸ Dispatch QueueSwift 3å­¸ç¿’æŒ‡å—ï¼šé‡æ–°èªè­˜GCDæ‡‰ç”¨GCDç²¾è®²ï¼ˆSwift 3ï¼‰","categories":[{"name":"iOS","slug":"iOS","permalink":"http://codingdoge.cn/categories/iOS/"}],"tags":[{"name":"Swift","slug":"Swift","permalink":"http://codingdoge.cn/tags/Swift/"}]},{"title":"Dispatch","slug":"title: Dispatch","date":"2017-08-02T12:01:00.000Z","updated":"2018-01-13T04:59:21.648Z","comments":true,"path":"2017/08/02/title: Dispatch/","link":"","permalink":"http://codingdoge.cn/2017/08/02/title: Dispatch/","excerpt":"","text":"Execute code concurrently on multicore hardware by submitting work to dispatch queues managed by the system. åœ¨å¤šæ ¸ç¡¬ä»¶ä¸Šï¼Œé€šè¿‡æäº¤ä»»åŠ¡åˆ°ç”±è¿™ä¸ªç³»ç»Ÿç®¡ç†çš„æ´¾é£é˜Ÿåˆ—ä¸Šï¼Œå¹¶å‘çš„æ‰§è¡Œä»£ç ã€‚ ä¸€ç§æŠŠä¿è¯å›è°ƒä¼šåœ¨ä¸»çº¿ç¨‹æ‰§è¡Œçš„æ–¹æ³•: 12345678#ifndef dispatch_main_async_safe#define dispatch_main_async_safe(block)\\ if (strcmp(dispatch_queue_get_label(DISPATCH_CURRENT_QUEUE_LABEL), dispatch_queue_get_label(dispatch_get_main_queue())) == 0) &#123;\\ block();\\ &#125; else &#123;\\ dispatch_async(dispatch_get_main_queue(), block);\\ &#125;#endif 12345678910dispatch_queue_t queue = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0);dispatch_group_t group = dispatch_group_create();for(id obj in array) dispatch_group_async(group, queue, ^&#123; [self doSomethingIntensiveWith:obj]; &#125;);dispatch_group_wait(group, DISPATCH_TIME_FOREVER);dispatch_release(group); [self doSomethingWith:array]; 12345678910dispatch_queue_t queue = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0);dispatch_group_t group = dispatch_group_create();for(id obj in array) dispatch_group_async(group, queue, ^&#123; [self doSomethingIntensiveWith:obj]; &#125;);dispatch_group_notify(group, queue, ^&#123; [self doSomethingWith:array];&#125;);dispatch_release(group); dispatch_barrier_syncå’Œdispatch_barrier_async common different ç­‰å¾…åœ¨å®ƒå‰é¢æ’å…¥é˜Ÿåˆ—çš„ä»»åŠ¡å…ˆæ‰§è¡Œå®Œ dispatch_barrier_syncå°†è‡ªå·±çš„ä»»åŠ¡æ’å…¥åˆ°é˜Ÿåˆ—çš„æ—¶å€™ï¼Œéœ€è¦ç­‰å¾…è‡ªå·±çš„ä»»åŠ¡ç»“æŸä¹‹åæ‰ä¼šç»§ç»­æ’å…¥è¢«å†™åœ¨å®ƒåé¢çš„ä»»åŠ¡ï¼Œç„¶åæ‰§è¡Œå®ƒä»¬ ç­‰å¾…ä»–ä»¬è‡ªå·±çš„ä»»åŠ¡æ‰§è¡Œå®Œå†æ‰§è¡Œåé¢çš„ä»»åŠ¡ dispatch_barrier_asyncå°†è‡ªå·±çš„ä»»åŠ¡æ’å…¥åˆ°é˜Ÿåˆ—ä¹‹åï¼Œä¸ä¼šç­‰å¾…è‡ªå·±çš„ä»»åŠ¡ç»“æŸï¼Œå®ƒä¼šç»§ç»­æŠŠåé¢çš„ä»»åŠ¡æ’å…¥åˆ°é˜Ÿåˆ—ï¼Œç„¶åç­‰å¾…è‡ªå·±çš„ä»»åŠ¡ç»“æŸåæ‰æ‰§è¡Œåé¢ä»»åŠ¡ å‚è€ƒ:GCDå…¥é—¨ï¼ˆä¸€ï¼‰: åŸºæœ¬æ¦‚å¿µå’ŒDispatch Queueæ·±å…¥ç†è§£GCDåº•å±‚å¹¶å‘ APIGCD ä¸­ dispatch_once çš„æ€§èƒ½ä¸å®ç°è¯» Concurrency Programming Guide ç¬”è®°ï¼ˆä¸€ï¼‰iOSå¹¶å‘ç¼–ç¨‹","categories":[{"name":"iOS","slug":"iOS","permalink":"http://codingdoge.cn/categories/iOS/"}],"tags":[{"name":"å¤šçº¿ç¨‹","slug":"å¤šçº¿ç¨‹","permalink":"http://codingdoge.cn/tags/å¤šçº¿ç¨‹/"}]},{"title":"å‰‘æŒ‡Offer â€”â€” æœ€å°çš„kä¸ªæ•°","slug":"title: å‰‘æŒ‡Offer â€”â€” æœ€å°çš„kä¸ªæ•°","date":"2017-08-01T02:20:00.000Z","updated":"2018-01-14T16:32:50.507Z","comments":true,"path":"2017/08/01/title: å‰‘æŒ‡Offer â€”â€” æœ€å°çš„kä¸ªæ•°/","link":"","permalink":"http://codingdoge.cn/2017/08/01/title: å‰‘æŒ‡Offer â€”â€” æœ€å°çš„kä¸ªæ•°/","excerpt":"","text":"é¢˜ç›®æè¿°è¾“å…¥nä¸ªæ•´æ•°ï¼Œæ‰¾å‡ºå…¶ä¸­æœ€å°çš„Kä¸ªæ•°ã€‚ä¾‹å¦‚è¾“å…¥4,5,1,6,2,7,3,8è¿™8ä¸ªæ•°å­—ï¼Œåˆ™æœ€å°çš„4ä¸ªæ•°å­—æ˜¯1,2,3,4ã€‚(å¾ˆå…¸å‹çš„é¢˜ç›®äº†) è§£é¢˜æ€è·¯ æ’å…¥æˆ–è€…å†’æ³¡æ’åºï¼Œä¼˜åŒ–ç‚¹åœ¨è®°å½•å·²æ’å¥½çš„ä¸ªæ•°(O(n*k)) æœ€å°å †(O(nlogk)) å¿«æ’æ€æƒ³(O(n)) way1ä¸ä¸Šä»£ç äº†ã€‚ way2ä¸Šä¸ªå»ºå †çš„ç®—æ³•ï¼Œé€šç”¨ã€è§£è€¦ã€æ˜“æµ‹è¯•ğŸ˜‚ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950void HeapAdjust(int H[],int s, int length) &#123; int tmp = H[s]; int child = 2*s+1; //å·¦å­©å­ç»“ç‚¹çš„ä½ç½®ã€‚(i+1 ä¸ºå½“å‰è°ƒæ•´ç»“ç‚¹çš„å³å­©å­ç»“ç‚¹çš„ä½ç½®) while (child &lt; length) &#123; if(child+1 &lt;length &amp;&amp; H[child]&lt;H[child+1]) &#123; // å¦‚æœå³å­©å­å¤§äºå·¦å­©å­(æ‰¾åˆ°æ¯”å½“å‰å¾…è°ƒæ•´ç»“ç‚¹å¤§çš„å­©å­ç»“ç‚¹) ++child ; &#125; if(H[s]&lt;H[child]) &#123; // å¦‚æœè¾ƒå¤§çš„å­ç»“ç‚¹å¤§äºçˆ¶ç»“ç‚¹ H[s] = H[child]; // é‚£ä¹ˆæŠŠè¾ƒå¤§çš„å­ç»“ç‚¹å¾€ä¸Šç§»åŠ¨ï¼Œæ›¿æ¢å®ƒçš„çˆ¶ç»“ç‚¹ s = child; // é‡æ–°è®¾ç½®s ,å³å¾…è°ƒæ•´çš„ä¸‹ä¸€ä¸ªç»“ç‚¹çš„ä½ç½® child = 2*s+1; &#125; else &#123; // å¦‚æœå½“å‰å¾…è°ƒæ•´ç»“ç‚¹å¤§äºå®ƒçš„å·¦å³å­©å­ï¼Œåˆ™ä¸éœ€è¦è°ƒæ•´ï¼Œç›´æ¥é€€å‡º break; &#125; H[s] = tmp; // å½“å‰å¾…è°ƒæ•´çš„ç»“ç‚¹æ”¾åˆ°æ¯”å…¶å¤§çš„å­©å­ç»“ç‚¹ä½ç½®ä¸Š &#125; print(H,length); &#125; /** * åˆå§‹å †è¿›è¡Œè°ƒæ•´ * å°†H[0..length-1]å»ºæˆå † * è°ƒæ•´å®Œä¹‹åç¬¬ä¸€ä¸ªå…ƒç´ æ˜¯åºåˆ—çš„æœ€å°çš„å…ƒç´  */ void BuildingHeap(int H[], int length) &#123; //æœ€åä¸€ä¸ªæœ‰å­©å­çš„èŠ‚ç‚¹çš„ä½ç½® i= (length -1) / 2 for (int i = (length -1) / 2 ; i &gt;= 0; i--) &#123; cout &lt;&lt; &quot;i: &quot; &lt;&lt; i &lt;&lt; endl; HeapAdjust(H,i,length); &#125;&#125; /** * å †æ’åºç®—æ³• */ void HeapSort(int H[],int length) &#123; //åˆå§‹å † BuildingHeap(H, length); //ä»æœ€åä¸€ä¸ªå…ƒç´ å¼€å§‹å¯¹åºåˆ—è¿›è¡Œè°ƒæ•´ for (int i = length - 1; i &gt; 0; --i) &#123; //äº¤æ¢å †é¡¶å…ƒç´ H[0]å’Œå †ä¸­æœ€åä¸€ä¸ªå…ƒç´  int temp = H[i]; H[i] = H[0]; H[0] = temp; //æ¯æ¬¡äº¤æ¢å †é¡¶å…ƒç´ å’Œå †ä¸­æœ€åä¸€ä¸ªå…ƒç´ ä¹‹åï¼Œéƒ½è¦å¯¹å †è¿›è¡Œè°ƒæ•´ HeapAdjust(H,0,i); &#125; &#125; way31234567891011121314151617181920212223242526272829303132333435363738394041int Partition(vector&lt;int&gt; &amp;input, int begin, int end)&#123;trueint first = begin;trueint last = end;trueint pivot = input[first];truewhile (first &lt; last)true&#123;truetruewhile (first &lt; last &amp;&amp; input[last] &gt;= pivot) last--;truetrueinput[first] = input[last];truetruewhile (first &lt; last &amp;&amp; input[first] &lt;= pivot) first++;truetrueinput[last] = input[first];true&#125;trueinput[first] = pivot;truereturn first;&#125;vector&lt;int&gt; GetLeastNumbers_Solution(vector&lt;int&gt; &amp;input, int k)&#123;trueint len=input.size();truevector&lt;int&gt; res;trueif(len==0||k&gt;len||k&lt;=0) return res;trueif(len==k) return input;trueint start=0;trueint end=len-1;trueint index=Partition(input,start,end);truewhile(index!=(k-1))true&#123;truetrueif(index&gt;k-1)truetrue&#123;truetruetrueend=index-1;truetruetrueindex=Partition(input,start,end);truetrue&#125;truetrueelsetruetrue&#123;truetruetruestart=index+1;truetruetrueindex=Partition(input,start,end);truetrue&#125;true&#125;truefor (int i = 0; i &lt; k; i++)truetrueres.push_back(input[i]);truereturn res;&#125;","categories":[{"name":"Algorithm","slug":"Algorithm","permalink":"http://codingdoge.cn/categories/Algorithm/"}],"tags":[{"name":"å‰‘æŒ‡Offer","slug":"å‰‘æŒ‡Offer","permalink":"http://codingdoge.cn/tags/å‰‘æŒ‡Offer/"}]},{"title":"å¹¶å‘(concurrency)å’Œå¹¶è¡Œ(parallelism)","slug":"title: å¹¶å‘(concurrency)å’Œå¹¶è¡Œ(parallelism)","date":"2017-07-27T04:29:00.000Z","updated":"2018-01-13T14:00:58.116Z","comments":true,"path":"2017/07/27/title: å¹¶å‘(concurrency)å’Œå¹¶è¡Œ(parallelism)/","link":"","permalink":"http://codingdoge.cn/2017/07/27/title: å¹¶å‘(concurrency)å’Œå¹¶è¡Œ(parallelism)/","excerpt":"","text":"â€œå¹¶å‘â€æŒ‡çš„æ˜¯ç¨‹åºçš„ç»“æ„ï¼Œâ€œå¹¶è¡Œâ€æŒ‡çš„æ˜¯ç¨‹åºè¿è¡Œæ—¶çš„çŠ¶æ€ å¹¶è¡Œï¼ˆparallelismï¼‰è¿™ä¸ªæ¦‚å¿µå¾ˆå¥½ç†è§£ã€‚æ‰€è°“å¹¶è¡Œï¼Œå°±æ˜¯åŒæ—¶æ‰§è¡Œçš„æ„æ€ï¼Œæ— éœ€è¿‡åº¦è§£è¯»ã€‚åˆ¤æ–­ç¨‹åºæ˜¯å¦å¤„äºå¹¶è¡Œçš„çŠ¶æ€ï¼Œå°±çœ‹åŒä¸€æ—¶åˆ»æ˜¯å¦æœ‰è¶…è¿‡ä¸€ä¸ªâ€œå·¥ä½œå•ä½â€åœ¨è¿è¡Œå°±å¥½äº†ã€‚æ‰€ä»¥ï¼Œå•çº¿ç¨‹æ°¸è¿œæ— æ³•è¾¾åˆ°å¹¶è¡ŒçŠ¶æ€ã€‚ è¦è¾¾åˆ°å¹¶è¡ŒçŠ¶æ€ï¼Œæœ€ç®€å•çš„å°±æ˜¯åˆ©ç”¨å¤šçº¿ç¨‹å’Œå¤šè¿›ç¨‹ã€‚ å¹¶å‘ï¼ˆconcurrencyï¼‰è¦ç†è§£â€œå¹¶å‘â€è¿™ä¸ªæ¦‚å¿µï¼Œå¿…é¡»å¾—æ¸…æ¥šï¼Œå¹¶å‘æŒ‡çš„æ˜¯ç¨‹åºçš„â€œç»“æ„â€ã€‚å½“æˆ‘ä»¬è¯´è¿™ä¸ªç¨‹åºæ˜¯å¹¶å‘çš„ï¼Œå®é™…ä¸Šï¼Œè¿™å¥è¯åº”å½“è¡¨è¿°æˆâ€œè¿™ä¸ªç¨‹åºé‡‡ç”¨äº†æ”¯æŒå¹¶å‘çš„è®¾è®¡â€ã€‚å¥½ï¼Œæ—¢ç„¶å¹¶å‘æŒ‡çš„æ˜¯äººä¸ºè®¾è®¡çš„ç»“æ„ï¼Œé‚£ä¹ˆæ€æ ·çš„ç¨‹åºç»“æ„æ‰å«åšæ”¯æŒå¹¶å‘çš„è®¾è®¡ï¼Ÿ æ­£ç¡®çš„å¹¶å‘è®¾è®¡çš„æ ‡å‡†æ˜¯ï¼šä½¿å¤šä¸ªæ“ä½œå¯ä»¥åœ¨é‡å çš„æ—¶é—´æ®µå†…è¿›è¡Œ(two tasks can start, run, and complete in overlapping time periods)ã€‚ è¿™å¥è¯çš„é‡ç‚¹æœ‰ä¸¤ä¸ªã€‚æˆ‘ä»¬å…ˆçœ‹â€œï¼ˆæ“ä½œï¼‰åœ¨é‡å çš„æ—¶é—´æ®µå†…è¿›è¡Œâ€è¿™ä¸ªæ¦‚å¿µã€‚å®ƒæ˜¯å¦å°±æ˜¯æˆ‘ä»¬å‰é¢è¯´åˆ°çš„å¹¶è¡Œå‘¢ï¼Ÿæ˜¯ï¼Œä¹Ÿä¸æ˜¯ã€‚å¹¶è¡Œï¼Œå½“ç„¶æ˜¯åœ¨é‡å çš„æ—¶é—´æ®µå†…æ‰§è¡Œï¼Œä½†æ˜¯å¦å¤–ä¸€ç§æ‰§è¡Œæ¨¡å¼ï¼Œä¹Ÿå±äºåœ¨é‡å æ—¶é—´æ®µå†…è¿›è¡Œã€‚è¿™å°±æ˜¯åç¨‹ã€‚ ä½¿ç”¨åç¨‹æ—¶ï¼Œç¨‹åºçš„æ‰§è¡Œçœ‹èµ·æ¥å¾€å¾€æ˜¯è¿™ä¸ªæ ·å­ï¼š task1, task2 æ˜¯ä¸¤æ®µä¸åŒçš„ä»£ç ï¼Œæ¯”å¦‚ä¸¤ä¸ªå‡½æ•°ï¼Œå…¶ä¸­é»‘è‰²å—ä»£è¡¨æŸæ®µä»£ç æ­£åœ¨æ‰§è¡Œã€‚æ³¨æ„ï¼Œè¿™é‡Œä»å§‹è‡³ç»ˆï¼Œåœ¨ä»»ä½•ä¸€ä¸ªæ—¶é—´ç‚¹ä¸Šéƒ½åªæœ‰ä¸€æ®µä»£ç åœ¨æ‰§è¡Œï¼Œä½†æ˜¯ï¼Œç”±äº task1 å’Œ task2 åœ¨é‡å çš„æ—¶é—´æ®µå†…æ‰§è¡Œï¼Œæ‰€ä»¥è¿™æ˜¯ä¸€ä¸ªæ”¯æŒå¹¶å‘çš„è®¾è®¡ã€‚ä¸å¹¶è¡Œä¸åŒï¼Œå•æ ¸å•çº¿ç¨‹èƒ½æ”¯æŒå¹¶å‘ã€‚ Different concurrent designs enable different ways to parallelize","categories":[{"name":"OS","slug":"OS","permalink":"http://codingdoge.cn/categories/OS/"}],"tags":[]},{"title":"iOS ä¿æŒç•Œé¢æµç•…çš„æŠ€å·§","slug":"title: iOS ä¿æŒç•Œé¢æµç•…çš„æŠ€å·§","date":"2017-07-25T06:21:00.000Z","updated":"2018-01-14T16:35:13.663Z","comments":true,"path":"2017/07/25/title: iOS ä¿æŒç•Œé¢æµç•…çš„æŠ€å·§/","link":"","permalink":"http://codingdoge.cn/2017/07/25/title: iOS ä¿æŒç•Œé¢æµç•…çš„æŠ€å·§/","excerpt":"","text":"iOS ä¿æŒç•Œé¢æµç•…çš„æŠ€å·§ CPU èµ„æºæ¶ˆè€—åŸå› å’Œè§£å†³æ–¹æ¡ˆå¯¹è±¡åˆ›å»ºå¯¹è±¡çš„åˆ›å»ºä¼šåˆ†é…å†…å­˜ã€è°ƒæ•´å±æ€§ã€ç”šè‡³è¿˜æœ‰è¯»å–æ–‡ä»¶ç­‰æ“ä½œï¼Œæ¯”è¾ƒæ¶ˆè€— CPU èµ„æºã€‚å°½é‡ç”¨è½»é‡çš„å¯¹è±¡ä»£æ›¿é‡é‡çš„å¯¹è±¡ï¼Œå¯ä»¥å¯¹æ€§èƒ½æœ‰æ‰€ä¼˜åŒ–ã€‚æ¯”å¦‚ CALayer æ¯” UIView è¦è½»é‡è®¸å¤šï¼Œé‚£ä¹ˆä¸éœ€è¦å“åº”è§¦æ‘¸äº‹ä»¶çš„æ§ä»¶ï¼Œç”¨ CALayer æ˜¾ç¤ºä¼šæ›´åŠ åˆé€‚ã€‚å¦‚æœå¯¹è±¡ä¸æ¶‰åŠ UI æ“ä½œï¼Œåˆ™å°½é‡æ”¾åˆ°åå°çº¿ç¨‹å»åˆ›å»ºï¼Œä½†å¯æƒœçš„æ˜¯åŒ…å«æœ‰ CALayer çš„æ§ä»¶ï¼Œéƒ½åªèƒ½åœ¨ä¸»çº¿ç¨‹åˆ›å»ºå’Œæ“ä½œã€‚é€šè¿‡ Storyboard åˆ›å»ºè§†å›¾å¯¹è±¡æ—¶ï¼Œå…¶èµ„æºæ¶ˆè€—ä¼šæ¯”ç›´æ¥é€šè¿‡ä»£ç åˆ›å»ºå¯¹è±¡è¦å¤§éå¸¸å¤šï¼Œåœ¨æ€§èƒ½æ•æ„Ÿçš„ç•Œé¢é‡Œï¼ŒStoryboard å¹¶ä¸æ˜¯ä¸€ä¸ªå¥½çš„æŠ€æœ¯é€‰æ‹©ã€‚ å°½é‡æ¨è¿Ÿå¯¹è±¡åˆ›å»ºçš„æ—¶é—´ï¼Œå¹¶æŠŠå¯¹è±¡çš„åˆ›å»ºåˆ†æ•£åˆ°å¤šä¸ªä»»åŠ¡ä¸­å»ã€‚å°½ç®¡è¿™å®ç°èµ·æ¥æ¯”è¾ƒéº»çƒ¦ï¼Œå¹¶ä¸”å¸¦æ¥çš„ä¼˜åŠ¿å¹¶ä¸å¤šï¼Œä½†å¦‚æœæœ‰èƒ½åŠ›åšï¼Œè¿˜æ˜¯è¦å°½é‡å°è¯•ä¸€ä¸‹ã€‚å¦‚æœå¯¹è±¡å¯ä»¥å¤ç”¨ï¼Œå¹¶ä¸”å¤ç”¨çš„ä»£ä»·æ¯”é‡Šæ”¾ã€åˆ›å»ºæ–°å¯¹è±¡è¦å°ï¼Œé‚£ä¹ˆè¿™ç±»å¯¹è±¡åº”å½“å°½é‡æ”¾åˆ°ä¸€ä¸ªç¼“å­˜æ± é‡Œå¤ç”¨ã€‚ å¯¹è±¡è°ƒæ•´å¯¹è±¡çš„è°ƒæ•´ä¹Ÿç»å¸¸æ˜¯æ¶ˆè€— CPU èµ„æºçš„åœ°æ–¹ã€‚è¿™é‡Œç‰¹åˆ«è¯´ä¸€ä¸‹ CALayerï¼šCALayer å†…éƒ¨å¹¶æ²¡æœ‰å±æ€§ï¼Œå½“è°ƒç”¨å±æ€§æ–¹æ³•æ—¶ï¼Œå®ƒå†…éƒ¨æ˜¯é€šè¿‡è¿è¡Œæ—¶ resolveInstanceMethod ä¸ºå¯¹è±¡ä¸´æ—¶æ·»åŠ ä¸€ä¸ªæ–¹æ³•ï¼Œå¹¶æŠŠå¯¹åº”å±æ€§å€¼ä¿å­˜åˆ°å†…éƒ¨çš„ä¸€ä¸ª Dictionary é‡Œï¼ŒåŒæ—¶è¿˜ä¼šé€šçŸ¥ delegateã€åˆ›å»ºåŠ¨ç”»ç­‰ç­‰ï¼Œéå¸¸æ¶ˆè€—èµ„æºã€‚UIView çš„å…³äºæ˜¾ç¤ºç›¸å…³çš„å±æ€§ï¼ˆæ¯”å¦‚ frame/bounds/transformï¼‰ç­‰å®é™…ä¸Šéƒ½æ˜¯ CALayer å±æ€§æ˜ å°„æ¥çš„ï¼Œæ‰€ä»¥å¯¹ UIView çš„è¿™äº›å±æ€§è¿›è¡Œè°ƒæ•´æ—¶ï¼Œæ¶ˆè€—çš„èµ„æºè¦è¿œå¤§äºä¸€èˆ¬çš„å±æ€§ã€‚å¯¹æ­¤ä½ åœ¨åº”ç”¨ä¸­ï¼Œåº”è¯¥å°½é‡å‡å°‘ä¸å¿…è¦çš„å±æ€§ä¿®æ”¹ã€‚ å½“è§†å›¾å±‚æ¬¡è°ƒæ•´æ—¶ï¼ŒUIViewã€CALayer ä¹‹é—´ä¼šå‡ºç°å¾ˆå¤šæ–¹æ³•è°ƒç”¨ä¸é€šçŸ¥ï¼Œæ‰€ä»¥åœ¨ä¼˜åŒ–æ€§èƒ½æ—¶ï¼Œåº”è¯¥å°½é‡é¿å…è°ƒæ•´è§†å›¾å±‚æ¬¡ã€æ·»åŠ å’Œç§»é™¤è§†å›¾ã€‚ å¯¹è±¡é”€æ¯å¯¹è±¡çš„é”€æ¯è™½ç„¶æ¶ˆè€—èµ„æºä¸å¤šï¼Œä½†ç´¯ç§¯èµ·æ¥ä¹Ÿæ˜¯ä¸å®¹å¿½è§†çš„ã€‚é€šå¸¸å½“å®¹å™¨ç±»æŒæœ‰å¤§é‡å¯¹è±¡æ—¶ï¼Œå…¶é”€æ¯æ—¶çš„èµ„æºæ¶ˆè€—å°±éå¸¸æ˜æ˜¾ã€‚åŒæ ·çš„ï¼Œå¦‚æœå¯¹è±¡å¯ä»¥æ”¾åˆ°åå°çº¿ç¨‹å»é‡Šæ”¾ï¼Œé‚£å°±æŒªåˆ°åå°çº¿ç¨‹å»ã€‚è¿™é‡Œæœ‰ä¸ªå° Tipï¼šæŠŠå¯¹è±¡æ•è·åˆ° block ä¸­ï¼Œç„¶åæ‰”åˆ°åå°é˜Ÿåˆ—å»éšä¾¿å‘é€ä¸ªæ¶ˆæ¯ä»¥é¿å…ç¼–è¯‘å™¨è­¦å‘Šï¼Œå°±å¯ä»¥è®©å¯¹è±¡åœ¨åå°çº¿ç¨‹é”€æ¯äº†ã€‚ 12345NSArray *tmp = self.array;self.array = nil;dispatch_async(queue, ^&#123; [tmp class];&#125;); å¸ƒå±€è®¡ç®—è§†å›¾å¸ƒå±€çš„è®¡ç®—æ˜¯ App ä¸­æœ€ä¸ºå¸¸è§çš„æ¶ˆè€— CPU èµ„æºçš„åœ°æ–¹ã€‚å¦‚æœèƒ½åœ¨åå°çº¿ç¨‹æå‰è®¡ç®—å¥½è§†å›¾å¸ƒå±€ã€å¹¶ä¸”å¯¹è§†å›¾å¸ƒå±€è¿›è¡Œç¼“å­˜ï¼Œé‚£ä¹ˆè¿™ä¸ªåœ°æ–¹åŸºæœ¬å°±ä¸ä¼šäº§ç”Ÿæ€§èƒ½é—®é¢˜äº†ã€‚ ä¸è®ºé€šè¿‡ä½•ç§æŠ€æœ¯å¯¹è§†å›¾è¿›è¡Œå¸ƒå±€ï¼Œå…¶æœ€ç»ˆéƒ½ä¼šè½åˆ°å¯¹ UIView.frame/bounds/center ç­‰å±æ€§çš„è°ƒæ•´ä¸Šã€‚ä¸Šé¢ä¹Ÿè¯´è¿‡ï¼Œå¯¹è¿™äº›å±æ€§çš„è°ƒæ•´éå¸¸æ¶ˆè€—èµ„æºï¼Œæ‰€ä»¥å°½é‡æå‰è®¡ç®—å¥½å¸ƒå±€ï¼Œåœ¨éœ€è¦æ—¶ä¸€æ¬¡æ€§è°ƒæ•´å¥½å¯¹åº”å±æ€§ï¼Œè€Œä¸è¦å¤šæ¬¡ã€é¢‘ç¹çš„è®¡ç®—å’Œè°ƒæ•´è¿™äº›å±æ€§ã€‚ AutolayoutAutolayout æ˜¯è‹¹æœæœ¬èº«æå€¡çš„æŠ€æœ¯ï¼Œåœ¨å¤§éƒ¨åˆ†æƒ…å†µä¸‹ä¹Ÿèƒ½å¾ˆå¥½çš„æå‡å¼€å‘æ•ˆç‡ï¼Œä½†æ˜¯ Autolayout å¯¹äºå¤æ‚è§†å›¾æ¥è¯´å¸¸å¸¸ä¼šäº§ç”Ÿä¸¥é‡çš„æ€§èƒ½é—®é¢˜ã€‚éšç€è§†å›¾æ•°é‡çš„å¢é•¿ï¼ŒAutolayout å¸¦æ¥çš„ CPU æ¶ˆè€—ä¼šå‘ˆæŒ‡æ•°çº§ä¸Šå‡ã€‚å…·ä½“æ•°æ®å¯ä»¥çœ‹è¿™ä¸ªæ–‡ç« ï¼šhttp://pilky.me/36/ã€‚ å¦‚æœä½ ä¸æƒ³æ‰‹åŠ¨è°ƒæ•´ frame ç­‰å±æ€§ï¼Œä½ å¯ä»¥ç”¨ä¸€äº›å·¥å…·æ–¹æ³•æ›¿ä»£ï¼ˆæ¯”å¦‚å¸¸è§çš„ left/right/top/bottom/width/height å¿«æ·å±æ€§ï¼‰ï¼Œæˆ–è€…ä½¿ç”¨ ComponentKitã€AsyncDisplayKit ç­‰æ¡†æ¶ã€‚ æ–‡æœ¬è®¡ç®—å¦‚æœä¸€ä¸ªç•Œé¢ä¸­åŒ…å«å¤§é‡æ–‡æœ¬ï¼ˆæ¯”å¦‚å¾®åšå¾®ä¿¡æœ‹å‹åœˆç­‰ï¼‰ï¼Œæ–‡æœ¬çš„å®½é«˜è®¡ç®—ä¼šå ç”¨å¾ˆå¤§ä¸€éƒ¨åˆ†èµ„æºï¼Œå¹¶ä¸”ä¸å¯é¿å…ã€‚å¦‚æœä½ å¯¹æ–‡æœ¬æ˜¾ç¤ºæ²¡æœ‰ç‰¹æ®Šè¦æ±‚ï¼Œå¯ä»¥å‚è€ƒä¸‹ UILabel å†…éƒ¨çš„å®ç°æ–¹å¼ï¼šç”¨ [NSAttributedString boundingRectWithSize:options:context:] æ¥è®¡ç®—æ–‡æœ¬å®½é«˜ï¼Œç”¨ -[NSAttributedString drawWithRect:options:context:] æ¥ç»˜åˆ¶æ–‡æœ¬ã€‚å°½ç®¡è¿™ä¸¤ä¸ªæ–¹æ³•æ€§èƒ½ä¸é”™ï¼Œä½†ä»æ—§éœ€è¦æ”¾åˆ°åå°çº¿ç¨‹è¿›è¡Œä»¥é¿å…é˜»å¡ä¸»çº¿ç¨‹ã€‚ å¦‚æœä½ ç”¨ CoreText ç»˜åˆ¶æ–‡æœ¬ï¼Œé‚£å°±å¯ä»¥å…ˆç”Ÿæˆ CoreText æ’ç‰ˆå¯¹è±¡ï¼Œç„¶åè‡ªå·±è®¡ç®—äº†ï¼Œå¹¶ä¸” CoreText å¯¹è±¡è¿˜èƒ½ä¿ç•™ä»¥ä¾›ç¨åç»˜åˆ¶ä½¿ç”¨ã€‚ æ–‡æœ¬æ¸²æŸ“å±å¹•ä¸Šèƒ½çœ‹åˆ°çš„æ‰€æœ‰æ–‡æœ¬å†…å®¹æ§ä»¶ï¼ŒåŒ…æ‹¬ UIWebViewï¼Œåœ¨åº•å±‚éƒ½æ˜¯é€šè¿‡ CoreText æ’ç‰ˆã€ç»˜åˆ¶ä¸º Bitmap æ˜¾ç¤ºçš„ã€‚å¸¸è§çš„æ–‡æœ¬æ§ä»¶ ï¼ˆUILabelã€UITextView ç­‰ï¼‰ï¼Œå…¶æ’ç‰ˆå’Œç»˜åˆ¶éƒ½æ˜¯åœ¨ä¸»çº¿ç¨‹è¿›è¡Œçš„ï¼Œå½“æ˜¾ç¤ºå¤§é‡æ–‡æœ¬æ—¶ï¼ŒCPU çš„å‹åŠ›ä¼šéå¸¸å¤§ã€‚å¯¹æ­¤è§£å†³æ–¹æ¡ˆåªæœ‰ä¸€ä¸ªï¼Œé‚£å°±æ˜¯è‡ªå®šä¹‰æ–‡æœ¬æ§ä»¶ï¼Œç”¨ TextKit æˆ–æœ€åº•å±‚çš„ CoreText å¯¹æ–‡æœ¬å¼‚æ­¥ç»˜åˆ¶ã€‚å°½ç®¡è¿™å®ç°èµ·æ¥éå¸¸éº»çƒ¦ï¼Œä½†å…¶å¸¦æ¥çš„ä¼˜åŠ¿ä¹Ÿéå¸¸å¤§ï¼ŒCoreText å¯¹è±¡åˆ›å»ºå¥½åï¼Œèƒ½ç›´æ¥è·å–æ–‡æœ¬çš„å®½é«˜ç­‰ä¿¡æ¯ï¼Œé¿å…äº†å¤šæ¬¡è®¡ç®—ï¼ˆè°ƒæ•´ UILabel å¤§å°æ—¶ç®—ä¸€éã€UILabel ç»˜åˆ¶æ—¶å†…éƒ¨å†ç®—ä¸€éï¼‰ï¼›CoreText å¯¹è±¡å ç”¨å†…å­˜è¾ƒå°‘ï¼Œå¯ä»¥ç¼“å­˜ä¸‹æ¥ä»¥å¤‡ç¨åå¤šæ¬¡æ¸²æŸ“ã€‚ å›¾ç‰‡çš„è§£ç å½“ä½ ç”¨ UIImage æˆ– CGImageSource çš„é‚£å‡ ä¸ªæ–¹æ³•åˆ›å»ºå›¾ç‰‡æ—¶ï¼Œå›¾ç‰‡æ•°æ®å¹¶ä¸ä¼šç«‹åˆ»è§£ç ã€‚å›¾ç‰‡è®¾ç½®åˆ° UIImageView æˆ–è€… CALayer.contents ä¸­å»ï¼Œå¹¶ä¸” CALayer è¢«æäº¤åˆ° GPU å‰ï¼ŒCGImage ä¸­çš„æ•°æ®æ‰ä¼šå¾—åˆ°è§£ç ã€‚è¿™ä¸€æ­¥æ˜¯å‘ç”Ÿåœ¨ä¸»çº¿ç¨‹çš„ï¼Œå¹¶ä¸”ä¸å¯é¿å…ã€‚å¦‚æœæƒ³è¦ç»•å¼€è¿™ä¸ªæœºåˆ¶ï¼Œå¸¸è§çš„åšæ³•æ˜¯åœ¨åå°çº¿ç¨‹å…ˆæŠŠå›¾ç‰‡ç»˜åˆ¶åˆ° CGBitmapContext ä¸­ï¼Œç„¶åä» Bitmap ç›´æ¥åˆ›å»ºå›¾ç‰‡ã€‚ç›®å‰å¸¸è§çš„ç½‘ç»œå›¾ç‰‡åº“éƒ½è‡ªå¸¦è¿™ä¸ªåŠŸèƒ½ã€‚ å›¾åƒçš„ç»˜åˆ¶å›¾åƒçš„ç»˜åˆ¶é€šå¸¸æ˜¯æŒ‡ç”¨é‚£äº›ä»¥ CG å¼€å¤´çš„æ–¹æ³•æŠŠå›¾åƒç»˜åˆ¶åˆ°ç”»å¸ƒä¸­ï¼Œç„¶åä»ç”»å¸ƒåˆ›å»ºå›¾ç‰‡å¹¶æ˜¾ç¤ºè¿™æ ·ä¸€ä¸ªè¿‡ç¨‹ã€‚è¿™ä¸ªæœ€å¸¸è§çš„åœ°æ–¹å°±æ˜¯ [UIView drawRect:] é‡Œé¢äº†ã€‚ç”±äº CoreGraphic æ–¹æ³•é€šå¸¸éƒ½æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œæ‰€ä»¥å›¾åƒçš„ç»˜åˆ¶å¯ä»¥å¾ˆå®¹æ˜“çš„æ”¾åˆ°åå°çº¿ç¨‹è¿›è¡Œã€‚ä¸€ä¸ªç®€å•å¼‚æ­¥ç»˜åˆ¶çš„è¿‡ç¨‹å¤§è‡´å¦‚ä¸‹ï¼ˆå®é™…æƒ…å†µä¼šæ¯”è¿™ä¸ªå¤æ‚å¾—å¤šï¼Œä½†åŸç†åŸºæœ¬ä¸€è‡´ï¼‰ï¼š 1234567891011- (void)display &#123; dispatch_async(backgroundQueue, ^&#123; CGContextRef ctx = CGBitmapContextCreate(...); // draw in context... CGImageRef img = CGBitmapContextCreateImage(ctx); CFRelease(ctx); dispatch_async(mainQueue, ^&#123; layer.contents = img; &#125;); &#125;);&#125; GPU èµ„æºæ¶ˆè€—åŸå› å’Œè§£å†³æ–¹æ¡ˆç›¸å¯¹äº CPU æ¥è¯´ï¼ŒGPU èƒ½å¹²çš„äº‹æƒ…æ¯”è¾ƒå•ä¸€ï¼šæ¥æ”¶æäº¤çš„çº¹ç†ï¼ˆTextureï¼‰å’Œé¡¶ç‚¹æè¿°ï¼ˆä¸‰è§’å½¢ï¼‰ï¼Œåº”ç”¨å˜æ¢ï¼ˆtransformï¼‰ã€æ··åˆå¹¶æ¸²æŸ“ï¼Œç„¶åè¾“å‡ºåˆ°å±å¹•ä¸Šã€‚é€šå¸¸ä½ æ‰€èƒ½çœ‹åˆ°çš„å†…å®¹ï¼Œä¸»è¦ä¹Ÿå°±æ˜¯çº¹ç†ï¼ˆå›¾ç‰‡ï¼‰å’Œå½¢çŠ¶ï¼ˆä¸‰è§’æ¨¡æ‹Ÿçš„çŸ¢é‡å›¾å½¢ï¼‰ä¸¤ç±»ã€‚ çº¹ç†çš„æ¸²æŸ“æ‰€æœ‰çš„ Bitmapï¼ŒåŒ…æ‹¬å›¾ç‰‡ã€æ–‡æœ¬ã€æ …æ ¼åŒ–çš„å†…å®¹ï¼Œæœ€ç»ˆéƒ½è¦ç”±å†…å­˜æäº¤åˆ°æ˜¾å­˜ï¼Œç»‘å®šä¸º GPU Textureã€‚ä¸è®ºæ˜¯æäº¤åˆ°æ˜¾å­˜çš„è¿‡ç¨‹ï¼Œè¿˜æ˜¯ GPU è°ƒæ•´å’Œæ¸²æŸ“ Texture çš„è¿‡ç¨‹ï¼Œéƒ½è¦æ¶ˆè€—ä¸å°‘ GPU èµ„æºã€‚å½“åœ¨è¾ƒçŸ­æ—¶é—´æ˜¾ç¤ºå¤§é‡å›¾ç‰‡æ—¶ï¼ˆæ¯”å¦‚ TableView å­˜åœ¨éå¸¸å¤šçš„å›¾ç‰‡å¹¶ä¸”å¿«é€Ÿæ»‘åŠ¨æ—¶ï¼‰ï¼ŒCPU å ç”¨ç‡å¾ˆä½ï¼ŒGPU å ç”¨éå¸¸é«˜ï¼Œç•Œé¢ä»ç„¶ä¼šæ‰å¸§ã€‚é¿å…è¿™ç§æƒ…å†µçš„æ–¹æ³•åªèƒ½æ˜¯å°½é‡å‡å°‘åœ¨çŸ­æ—¶é—´å†…å¤§é‡å›¾ç‰‡çš„æ˜¾ç¤ºï¼Œå°½å¯èƒ½å°†å¤šå¼ å›¾ç‰‡åˆæˆä¸ºä¸€å¼ è¿›è¡Œæ˜¾ç¤ºã€‚ å½“å›¾ç‰‡è¿‡å¤§ï¼Œè¶…è¿‡ GPU çš„æœ€å¤§çº¹ç†å°ºå¯¸æ—¶ï¼Œå›¾ç‰‡éœ€è¦å…ˆç”± CPU è¿›è¡Œé¢„å¤„ç†ï¼Œè¿™å¯¹ CPU å’Œ GPU éƒ½ä¼šå¸¦æ¥é¢å¤–çš„èµ„æºæ¶ˆè€—ã€‚ç›®å‰æ¥è¯´ï¼ŒiPhone 4S ä»¥ä¸Šæœºå‹ï¼Œçº¹ç†å°ºå¯¸ä¸Šé™éƒ½æ˜¯ 4096x4096ï¼Œæ›´è¯¦ç»†çš„èµ„æ–™å¯ä»¥çœ‹è¿™é‡Œï¼šiosres.comã€‚æ‰€ä»¥ï¼Œå°½é‡ä¸è¦è®©å›¾ç‰‡å’Œè§†å›¾çš„å¤§å°è¶…è¿‡è¿™ä¸ªå€¼ã€‚ è§†å›¾çš„æ··åˆ (Composing)å½“å¤šä¸ªè§†å›¾ï¼ˆæˆ–è€…è¯´ CALayerï¼‰é‡å åœ¨ä¸€èµ·æ˜¾ç¤ºæ—¶ï¼ŒGPU ä¼šé¦–å…ˆæŠŠä»–ä»¬æ··åˆåˆ°ä¸€èµ·ã€‚å¦‚æœè§†å›¾ç»“æ„è¿‡äºå¤æ‚ï¼Œæ··åˆçš„è¿‡ç¨‹ä¹Ÿä¼šæ¶ˆè€—å¾ˆå¤š GPU èµ„æºã€‚ä¸ºäº†å‡è½»è¿™ç§æƒ…å†µçš„ GPU æ¶ˆè€—ï¼Œåº”ç”¨åº”å½“å°½é‡å‡å°‘è§†å›¾æ•°é‡å’Œå±‚æ¬¡ï¼Œå¹¶åœ¨ä¸é€æ˜çš„è§†å›¾é‡Œæ ‡æ˜ opaque å±æ€§ä»¥é¿å…æ— ç”¨çš„ Alpha é€šé“åˆæˆã€‚å½“ç„¶ï¼Œè¿™ä¹Ÿå¯ä»¥ç”¨ä¸Šé¢çš„æ–¹æ³•ï¼ŒæŠŠå¤šä¸ªè§†å›¾é¢„å…ˆæ¸²æŸ“ä¸ºä¸€å¼ å›¾ç‰‡æ¥æ˜¾ç¤ºã€‚ å›¾å½¢çš„ç”ŸæˆCALayer çš„ borderã€åœ†è§’ã€é˜´å½±ã€é®ç½©ï¼ˆmaskï¼‰ï¼ŒCASharpLayer çš„çŸ¢é‡å›¾å½¢æ˜¾ç¤ºï¼Œé€šå¸¸ä¼šè§¦å‘ç¦»å±æ¸²æŸ“ï¼ˆoffscreen renderingï¼‰ï¼Œè€Œç¦»å±æ¸²æŸ“é€šå¸¸å‘ç”Ÿåœ¨ GPU ä¸­ã€‚å½“ä¸€ä¸ªåˆ—è¡¨è§†å›¾ä¸­å‡ºç°å¤§é‡åœ†è§’çš„ CALayerï¼Œå¹¶ä¸”å¿«é€Ÿæ»‘åŠ¨æ—¶ï¼Œå¯ä»¥è§‚å¯Ÿåˆ° GPU èµ„æºå·²ç»å æ»¡ï¼Œè€Œ CPU èµ„æºæ¶ˆè€—å¾ˆå°‘ã€‚è¿™æ—¶ç•Œé¢ä»ç„¶èƒ½æ­£å¸¸æ»‘åŠ¨ï¼Œä½†å¹³å‡å¸§æ•°ä¼šé™åˆ°å¾ˆä½ã€‚ä¸ºäº†é¿å…è¿™ç§æƒ…å†µï¼Œå¯ä»¥å°è¯•å¼€å¯ CALayer.shouldRasterize å±æ€§ï¼Œä½†è¿™ä¼šæŠŠåŸæœ¬ç¦»å±æ¸²æŸ“çš„æ“ä½œè½¬å«åˆ° CPU ä¸Šå»ã€‚å¯¹äºåªéœ€è¦åœ†è§’çš„æŸäº›åœºåˆï¼Œä¹Ÿå¯ä»¥ç”¨ä¸€å¼ å·²ç»ç»˜åˆ¶å¥½çš„åœ†è§’å›¾ç‰‡è¦†ç›–åˆ°åŸæœ¬è§†å›¾ä¸Šé¢æ¥æ¨¡æ‹Ÿç›¸åŒçš„è§†è§‰æ•ˆæœã€‚æœ€å½»åº•çš„è§£å†³åŠæ³•ï¼Œå°±æ˜¯æŠŠéœ€è¦æ˜¾ç¤ºçš„å›¾å½¢åœ¨åå°çº¿ç¨‹ç»˜åˆ¶ä¸ºå›¾ç‰‡ï¼Œé¿å…ä½¿ç”¨åœ†è§’ã€é˜´å½±ã€é®ç½©ç­‰å±æ€§ã€‚ å‚è€ƒ:iOS ä¿æŒç•Œé¢æµç•…çš„æŠ€å·§","categories":[{"name":"iOS","slug":"iOS","permalink":"http://codingdoge.cn/categories/iOS/"}],"tags":[{"name":"UI","slug":"UI","permalink":"http://codingdoge.cn/tags/UI/"}]},{"title":"å‰‘æŒ‡Offer â€”â€” æ»‘åŠ¨çª—å£çš„æœ€å¤§å€¼","slug":"title: å‰‘æŒ‡Offer â€”â€” æ»‘åŠ¨çª—å£çš„æœ€å¤§å€¼","date":"2017-07-25T02:43:00.000Z","updated":"2018-01-14T16:38:57.866Z","comments":true,"path":"2017/07/25/title: å‰‘æŒ‡Offer â€”â€” æ»‘åŠ¨çª—å£çš„æœ€å¤§å€¼/","link":"","permalink":"http://codingdoge.cn/2017/07/25/title: å‰‘æŒ‡Offer â€”â€” æ»‘åŠ¨çª—å£çš„æœ€å¤§å€¼/","excerpt":"","text":"é¢˜ç›®æ¥æº:æ»‘åŠ¨çª—å£çš„æœ€å¤§å€¼ é¢˜ç›®æè¿°ç»™å®šä¸€ä¸ªæ•°ç»„å’Œæ»‘åŠ¨çª—å£çš„å¤§å°ï¼Œæ‰¾å‡ºæ‰€æœ‰æ»‘åŠ¨çª—å£é‡Œæ•°å€¼çš„æœ€å¤§å€¼ã€‚ä¾‹å¦‚ï¼Œå¦‚æœè¾“å…¥æ•°ç»„{2,3,4,2,6,2,5,1}åŠæ»‘åŠ¨çª—å£çš„å¤§å°3ï¼Œé‚£ä¹ˆä¸€å…±å­˜åœ¨6ä¸ªæ»‘åŠ¨çª—å£ï¼Œä»–ä»¬çš„æœ€å¤§å€¼åˆ†åˆ«ä¸º{4,4,6,6,6,5}ï¼› é’ˆå¯¹æ•°ç»„{2,3,4,2,6,2,5,1}çš„æ»‘åŠ¨çª—å£æœ‰ä»¥ä¸‹6ä¸ªï¼š {[2,3,4],2,6,2,5,1}ï¼Œ {2,[3,4,2],6,2,5,1}ï¼Œ {2,3,[4,2,6],2,5,1}ï¼Œ {2,3,4,[2,6,2],5,1}ï¼Œ {2,3,4,2,[6,2,5],1}ï¼Œ {2,3,4,2,6,[2,5,1]}ã€‚ è§£é¢˜æ€è·¯ç”¨ä¸€ä¸ªåŒç«¯é˜Ÿåˆ—ç»´æŠ¤å½“å‰æ»‘åŠ¨çª—å£çš„çŠ¶æ€ï¼Œé˜Ÿé¦–æ˜¯å½“å‰çª—å£æœ€å¤§å€¼çš„ä¸‹æ ‡ï¼Œå½“çª—å£æ»‘åŠ¨è¿›å…¥ä¸€ä¸ªæ–°å€¼kæ—¶ï¼Œkä»é˜Ÿå°¾ä¾æ¬¡å‘å‰æ¯”è¾ƒï¼Œæ¯”kå°çš„å…¨éƒ¨å‡ºé˜Ÿï¼Œä¿éšœäº†kçš„æƒé‡åº”æœ‰çš„ä½ç½® 123456789101112131415161718192021vector&lt;int&gt; maxInWindows(const vector&lt;int&gt; &amp;num, unsigned int size) &#123;truevector&lt;int&gt; ans;truedeque&lt;int&gt; q;trueif (num.size() &lt; size || size == 0) true return ans;truefor (int i = 0; i &lt; size; i++) &#123;true while(!q.empty() &amp;&amp; num[i] &gt; num[q.back()])true q.pop_back();true q.push_back(i);true&#125;truefor (int i = size; i &lt; num.size(); i++) &#123;true ans.push_back(num[q.front()]);true while (!q.empty() &amp;&amp; num[i] &gt;= num[q.back()])true q.pop_back();true while (!q.empty() &amp;&amp; q.front() &lt;= i-size)true q.pop_front();true q.push_back(i);true&#125;trueans.push_back(num[q.front()]);truereturn ans;&#125;","categories":[{"name":"Algorithm","slug":"Algorithm","permalink":"http://codingdoge.cn/categories/Algorithm/"}],"tags":[{"name":"å‰‘æŒ‡Offer","slug":"å‰‘æŒ‡Offer","permalink":"http://codingdoge.cn/tags/å‰‘æŒ‡Offer/"}]},{"title":"Remove Duplicates from Sorted Array","slug":"title: Remove Duplicates from Sorted Array  ","date":"2017-07-23T15:56:00.000Z","updated":"2018-01-14T16:41:30.178Z","comments":true,"path":"2017/07/23/title: Remove Duplicates from Sorted Array  /","link":"","permalink":"http://codingdoge.cn/2017/07/23/title: Remove Duplicates from Sorted Array  /","excerpt":"","text":"é¢˜ç›®æ¥æºLeetCode: LeetCode OJ é¢˜ç›®æè¿°Given a sorted array, remove the duplicates in place such that each element appear only once and return the new length.Do not allocate extra space for another array, you must do this in place with constant memory.For example,Given input array nums = [1,1,2],Your function should return length = 2, with the first two elements of nums being 1 and 2 respectively. It doesnâ€™t matter what you leave beyond the new length. é¢˜ç›®è§£é‡Šç»™å‡ºä¸€ä¸ªsorted array(æ„æ€æ˜¯æŒ‡å·²ç»æ’å¥½åºäº†?)ï¼Œå¤„ç†åæ•°ç»„é‡Œæ¯ä¸€ä¸ªå…ƒç´ åªèƒ½å‡ºç°ä¸€æ¬¡ï¼Œè¿”å›å¤„ç†åçš„æ•°ç»„é•¿åº¦ã€‚ä¸èƒ½ä½¿ç”¨é¢å¤–çš„æ•°ç»„ç©ºé—´ï¼Œåªèƒ½ç”¨å·²ç»ç»™å‡ºçš„ç¡®å®šçš„å†…å­˜ç©ºé—´ã€‚ åˆ†æå› ä¸ºä¸å¤ªæ‡‚sorted arrayå…·ä½“æŒ‡çš„ä»€ä¹ˆï¼Œç¬¬ä¸€æ¬¡åšçš„æ—¶å€™ä»¥ä¸ºæ•°ç»„æ˜¯éšæœºçš„ï¼Œç›¸åŒå…ƒç´ å‡ºç°çš„ä½ç½®æ˜¯éšæœºçš„ï¼Œç„¶åé¢˜ç›®ä¹Ÿæ²¡ç»™å‡ºlimit timeï¼Œéšæ‰‹å°±å†™äº†ä¸€ä¸ªO(n^3) 12345678910for(int i = 0; i &lt; num; i++)&#123; truefor(int j = i+1; j &lt; num; j++)&#123; truetrueif(array[i] == array[j])&#123; for(int k = j; k &lt; num-1; k++) array[k] = array[k+1]; num--; j--; &#125; &#125; &#125; è‡ªç„¶æ˜¯Täº†ã€‚ç„¶åå°±æŠŠsorted arrayå½“åšå·²ç»æ’å¥½åºçš„æ•°ç»„ï¼Œé‚£å°±å®¹æ˜“å¤šäº†ï¼Œç®—æ³•ä¹Ÿéƒ½æ˜¯O(1)ï¼Œä¸€çœ‹ä»£ç å°±æ˜ç™½ï¼Œæ°´é¢˜ï¼Œç›´æ¥ä¸Šä»£ç ã€‚ way11234567if (nums.empty()) return 0; int index = 0; for (int i = 1; i &lt; nums.size(); i++) &#123; if (nums[index] != nums[i]) nums[++index] = nums[i]; &#125; return index + 1; way2 STL1return distance(nums.begin(), unique(nums.begin(), nums.end())); std::distancetemplatetypename iterator_traits::difference_type distance (InputIterator first, InputIterator last);Return distance between iteratorsCalculates the number of elements between first and last.c++ reference std::uniqueequality (1)template ForwardIterator unique (ForwardIterator first, ForwardIterator last);predicate (2)template ForwardIterator unique (ForwardIterator first, ForwardIterator last, BinaryPredicate pred); Remove consecutive duplicates in rangeRemoves all but the first element from every consecutive group of equivalent elements in the range [first,last).c++ reference ç›¸å…³é¢˜ç›®RemoveDuplicatesfromSortedArrayII","categories":[{"name":"Algorithm","slug":"Algorithm","permalink":"http://codingdoge.cn/categories/Algorithm/"}],"tags":[{"name":"LeetCode","slug":"LeetCode","permalink":"http://codingdoge.cn/tags/LeetCode/"}]},{"title":"å¸¸è§æ’åºç®—æ³•æ€»ç»“","slug":"title: å¸¸è§æ’åºç®—æ³•æ€»ç»“  ","date":"2017-07-23T15:56:00.000Z","updated":"2018-01-14T16:45:17.006Z","comments":true,"path":"2017/07/23/title: å¸¸è§æ’åºç®—æ³•æ€»ç»“  /","link":"","permalink":"http://codingdoge.cn/2017/07/23/title: å¸¸è§æ’åºç®—æ³•æ€»ç»“  /","excerpt":"","text":"æ’åºç®—æ³•ä¸€èˆ¬åˆ†ä¸ºï¼š å†…éƒ¨æ’åº(In-place sort) ä¸å ç”¨é¢å¤–å†…å­˜æˆ–è€…å ç”¨å¸¸æ•°å†…å­˜ï¼Œå¦‚ï¼šæ’å…¥æ’åºã€é€‰æ‹©æ’åºã€å†’æ³¡æ’åºã€å †æ’åºã€å¿«é€Ÿæ’åºã€‚ å¤–éƒ¨æ’åº(Out-place sort) å› ä¸ºæ’åºæ•°æ®å¤§ï¼Œå¯ç”¨å†…å­˜ä¸€æ¬¡ä¸èƒ½å®¹çº³æ‰€æœ‰æ’åºè®°å½•ï¼Œæ’åºè¿‡ç¨‹ä¸­éœ€è¦è®¿é—®å¤–å­˜ï¼Œå¦‚ï¼šå½’å¹¶æ’åºã€è®¡æ•°æ’åºã€åŸºæ•°æ’åºã€æ¡¶æ’åºã€‚ ä¹Ÿåˆ†ä¸ºï¼š ç¨³å®šçš„æ’åº(stable sort) æ’å…¥æ’åºã€å†’æ³¡æ’åºã€å½’å¹¶æ’åºã€è®¡æ•°æ’åºã€åŸºæ•°æ’åºã€æ¡¶æ’åºã€‚ ä¸ç¨³å®šçš„æ’åº(unstable sort) é€‰æ‹©æ’åºã€å¿«é€Ÿæ’åºã€å †æ’åºã€‚ ç®—æ³•çš„ç¨³å®šæ€§ï¼šå‡å®šåœ¨å¾…æ’åºçš„è®°å½•åºåˆ—ä¸­ï¼Œå­˜åœ¨å¤šä¸ªå…·æœ‰ç›¸åŒçš„å…³é”®å­—çš„è®°å½•ï¼Œè‹¥ç»è¿‡æ’åºï¼Œè¿™äº›è®°å½•çš„ç›¸å¯¹æ¬¡åºä¿æŒä¸å˜ï¼Œå³åœ¨åŸåºåˆ—ä¸­ï¼Œri=rjï¼Œä¸”riåœ¨rjä¹‹å‰ï¼Œè€Œåœ¨æ’åºåçš„åºåˆ—ä¸­ï¼Œriä»åœ¨rjä¹‹å‰ï¼Œåˆ™ç§°è¿™ç§æ’åºç®—æ³•æ˜¯ç¨³å®šçš„ï¼›å¦åˆ™ç§°ä¸ºä¸ç¨³å®šçš„ã€‚ ä¸ç¨³å®šç®—æ³•çš„æ”¹è¿›ï¼šåªéœ€è¦åœ¨æ¯ä¸ªè¾“å…¥å…ƒç´ åŠ ä¸€ä¸ªindexï¼Œè¡¨ç¤ºåˆå§‹æ—¶çš„æ•°ç»„ç´¢å¼•ï¼Œå½“ä¸ç¨³å®šçš„ç®—æ³•æ’å¥½åºåï¼Œå¯¹äºç›¸åŒçš„å…ƒç´ å¯¹indexæ’åºå³å¯ã€‚ æ’å…¥æ’åº æœ€ä¼˜å¤æ‚åº¦ï¼šå½“è¾“å…¥æ•°ç»„å°±æ˜¯æ’å¥½åºçš„æ—¶å€™ï¼Œå¤æ‚åº¦ä¸ºO(n)ï¼Œè€Œå¿«é€Ÿæ’åºåœ¨è¿™ç§æƒ…å†µä¸‹ä¼šäº§ç”ŸO(n^2)çš„å¤æ‚åº¦ã€‚æœ€å·®å¤æ‚åº¦ï¼šå½“è¾“å…¥æ•°ç»„ä¸ºå€’åºæ—¶ï¼Œå¤æ‚åº¦ä¸ºO(n^2)ã€‚ æ’å…¥æ’åºæ¯”è¾ƒé€‚åˆç”¨äºâ€œå°‘é‡å…ƒç´ çš„æ•°ç»„â€ã€‚æ’å…¥æ’åºæ¯”è¾ƒé€‚åˆç”¨äºâ€œå°‘é‡å…ƒç´ çš„æ•°ç»„â€ã€‚ 1.ç›´æ¥æ’å…¥æ’åºï¼ˆStraight Insertion Sortï¼‰ å·¥ä½œåŸç†æ˜¯é€šè¿‡æ„å»ºæœ‰åºåºåˆ—ï¼Œå¯¹äºæœªæ’åºæ•°æ®ï¼Œåœ¨å·²æ’åºåºåˆ—ä¸­ä»åå‘å‰æ‰«æï¼Œæ‰¾åˆ°ç›¸åº”ä½ç½®å¹¶æ’å…¥ã€‚å…·ä½“ç®—æ³•æè¿°å¦‚ä¸‹ï¼š ä»ç¬¬ä¸€ä¸ªå…ƒç´ å¼€å§‹ï¼Œè¯¥å…ƒç´ å¯ä»¥è®¤ä¸ºå·²ç»è¢«æ’åº å–å‡ºä¸‹ä¸€ä¸ªå…ƒç´ ï¼Œåœ¨å·²ç»æ’åºçš„å…ƒç´ åºåˆ—ä¸­ä»åå‘å‰æ‰«æ å¦‚æœè¯¥å…ƒç´ ï¼ˆå·²æ’åºï¼‰å¤§äºæ–°å…ƒç´ ï¼Œå°†è¯¥å…ƒç´ ç§»åˆ°ä¸‹ä¸€ä½ç½® é‡å¤æ­¥éª¤3ï¼Œç›´åˆ°æ‰¾åˆ°å·²æ’åºçš„å…ƒç´ å°äºæˆ–è€…ç­‰äºæ–°å…ƒç´ çš„ä½ç½® å°†æ–°å…ƒç´ æ’å…¥åˆ°è¯¥ä½ç½®å é‡å¤æ­¥éª¤2~5 ç›´æ¥æ’å…¥æ’åºç¤ºä¾‹ï¼š å¦‚æœæ’åºæ—¶ç¢°åˆ°ç›¸ç­‰çš„å…ƒç´ ï¼Œæ¯”è¾ƒåä¼šæŠŠç›¸ç­‰çš„å…ƒç´ æ”¾åœ¨åé¢ï¼Œæ‰€ä»¥è¿™ä¸¤ä¸ªç›¸ç­‰çš„å…ƒç´ ä¹‹é—´çš„å‰åé¡ºåºæ²¡æœ‰æ”¹å˜ï¼Œæ’åºæ˜¯ç¨³å®šçš„ã€‚ ç®—æ³•çš„å®ç°ï¼š 123456789101112131415161718void InsertSort(int a[], int n)&#123; for(int i = 1; i &lt; n; i++) &#123; if(a[i] &lt; a[i-1]) //è‹¥ç¬¬iä¸ªå…ƒç´ å¤§äºi-1å…ƒç´ ï¼Œç›´æ¥æ’å…¥ã€‚å°äºçš„è¯ï¼Œç§»åŠ¨æœ‰åºè¡¨åæ’å…¥ &#123; int j = i-1; int temp = a[i]; //å­˜å‚¨å¾…æ’åºå…ƒç´  a[i] = a[i-1]; //å…ˆåç§»ä¸€ä¸ªå…ƒç´  while(x &lt; a[j] &amp;&amp; j &gt;= 0) //æŸ¥æ‰¾åœ¨æœ‰åºè¡¨ä¸­çš„æ’å…¥ä½ç½®ï¼Œå¹¶æ³¨æ„è¾¹ç•Œåˆ¤æ–­ &#123; a[j+1] = a[j]; j--; //å…ƒç´ åç§» &#125; a[j+1] = temp; //æ’å…¥åˆ°æ­£ç¡®ä½ç½® &#125; &#125;&#125; å¦‚æœæ¯”è¾ƒæ“ä½œçš„ä»£ä»·æ¯”äº¤æ¢æ“ä½œå¤§çš„è¯ï¼Œå¯ä»¥é‡‡ç”¨äºŒåˆ†æŸ¥æ‰¾æ³•æ¥å‡å°‘æ¯”è¾ƒæ“ä½œçš„æ•°ç›®ã€‚ç›´æ¥æ’å…¥æ’åºç®—æ³•çš„ä¼˜åŒ–ç®—æ³•æœ‰ï¼šäºŒåˆ†æ’å…¥æ’åºï¼Œ2-è·¯æ’å…¥æ’åºã€‚ 2.å¸Œå°”æ’åºï¼ˆShellâ€™s Sortï¼‰ å¸Œå°”æ’åºï¼Œä¹Ÿç§°é€’å‡å¢é‡æ’åºç®—æ³•ï¼Œæ˜¯æ’å…¥æ’åºçš„ä¸€ç§æ›´é«˜æ•ˆçš„æ”¹è¿›ç‰ˆæœ¬ã€‚å®ƒæ˜¯åŸºäºæ’å…¥æ’åºçš„ä»¥ä¸‹ä¸¤ç‚¹æ€§è´¨è€Œæå‡ºæ”¹è¿›æ–¹æ³•çš„ï¼š æ’å…¥æ’åºåœ¨å¯¹å‡ ä¹å·²ç»æ’å¥½åºçš„æ•°æ®æ“ä½œæ—¶ï¼Œæ•ˆç‡é«˜ï¼Œå³å¯ä»¥è¾¾åˆ°çº¿æ€§æ’åºçš„æ•ˆç‡ ä½†æ’å…¥æ’åºä¸€èˆ¬æ¥è¯´æ˜¯ä½æ•ˆçš„ï¼Œå› ä¸ºæ’å…¥æ’åºæ¯æ¬¡åªèƒ½å°†æ•°æ®ç§»åŠ¨ä¸€ä½ åŸºæœ¬åŸç†æ˜¯å…ˆå°†æ•´ä¸ªå¾…æ’åºçš„è®°å½•åºåˆ—åˆ†å‰²æˆä¸ºè‹¥å¹²å­åºåˆ—åˆ†åˆ«è¿›è¡Œç›´æ¥æ’å…¥æ’åºï¼Œå¾…æ•´ä¸ªåºåˆ—ä¸­çš„è®°å½•â€œåŸºæœ¬æœ‰åºâ€æ—¶ï¼Œå†å¯¹å…¨ä½“è®°å½•è¿›è¡Œä¾æ¬¡ç›´æ¥æ’å…¥æ’åºã€‚ç®—æ³•å…·ä½“æè¿°å¦‚ä¸‹ï¼š é€‰æ‹©ä¸€ä¸ªæ­¥é•¿ï¼Œå…¶è®¾è®¡è€…Donald Shellæœ€åˆå»ºè®®æ­¥é•¿é€‰æ‹©ä¸ºn/2å¹¶ä¸”å¯¹æ­¥é•¿å–åŠç›´åˆ°æ­¥é•¿è¾¾åˆ°1ï¼› ä»¥æ­¥é•¿ä¸ºé—´éš”å¯¹åºåˆ—è¿›è¡Œæ’åºï¼› é‡å¤æ­¥éª¤2ç›´åˆ°æ­¥é•¿ä¸º1ã€‚ å¸Œå°”æ’åºçš„ç¤ºä¾‹ï¼š å¸Œå°”æ’åºæ˜¯ä¸ç¨³å®šçš„ã€‚ ç®—æ³•çš„å®ç°ï¼š 1234567891011121314void ShellInsertSort(int a[], int n)&#123; for (int gap=n&gt;&gt;1; gap&gt;0; gap&gt;&gt;=1) // ç¡®å®šæ­¥é•¿ï¼Œç›´åˆ°æ­¥é•¿ä¸º1 &#123; for (int i=gap; i&lt;n; i++) // ä»¥æ­¥é•¿ä¸ºé—´éš”è¿›è¡Œæ’åº &#123; int temp = a[i]; int j; for (j=i-gap; j&gt;=0&amp;&amp;a[j]&gt;temp; j-=gap) // æ’åºç»†èŠ‚ a[j+gap] = a[j]; a[j+gap] = temp; &#125; &#125;&#125; å¯èƒ½å¸Œå°”æ’åºæœ€é‡è¦çš„åœ°æ–¹åœ¨äºå½“ç”¨è¾ƒå°æ­¥é•¿æ’åºåï¼Œä»¥å‰ç”¨çš„è¾ƒå¤§æ­¥é•¿ä»ç„¶æ˜¯æœ‰åºçš„ã€‚å·²çŸ¥çš„æœ€å¥½æ­¥é•¿åºåˆ—æ˜¯ç”±Sedgewickæå‡ºçš„(1, 5, 19, 41, 109,â€¦)ï¼Œè¯¥åºåˆ—çš„é¡¹æ¥è‡ªä¸¤ä¸ªç®—å¼[1]ã€‚è¿™é¡¹ç ”ç©¶ä¹Ÿè¡¨æ˜â€œæ¯”è¾ƒåœ¨å¸Œå°”æ’åºä¸­æ˜¯æœ€ä¸»è¦çš„æ“ä½œï¼Œè€Œä¸æ˜¯äº¤æ¢ã€‚â€ç”¨è¿™æ ·æ­¥é•¿åºåˆ—çš„å¸Œå°”æ’åºæ¯”æ’å…¥æ’åºè¦å¿«ï¼Œç”šè‡³åœ¨å°æ•°ç»„ä¸­æ¯”å¿«é€Ÿæ’åºå’Œå †æ’åºè¿˜å¿«ï¼Œä½†æ˜¯åœ¨æ¶‰åŠå¤§é‡æ•°æ®æ—¶å¸Œå°”æ’åºè¿˜æ˜¯æ¯”å¿«é€Ÿæ’åºæ…¢ã€‚ é€‰æ‹©æ’åº ç®€å•é€‰æ‹©æ’åºï¼ˆSimple Selection Sortï¼‰ åŸºæœ¬åŸç†æ˜¯åœ¨è¦æ’åºçš„ä¸€ç»„æ•°ä¸­ï¼Œé€‰å‡ºæœ€å°ï¼ˆæˆ–è€…æœ€å¤§ï¼‰çš„ä¸€ä¸ªæ•°ä¸ç¬¬1ä¸ªä½ç½®çš„æ•°äº¤æ¢ï¼›ç„¶ååœ¨å‰©ä¸‹çš„æ•°å½“ä¸­å†æ‰¾æœ€å°ï¼ˆæˆ–è€…æœ€å¤§ï¼‰çš„ä¸ç¬¬2ä¸ªä½ç½®çš„æ•°äº¤æ¢ï¼Œä¾æ¬¡ç±»æ¨ï¼Œç›´åˆ°ç¬¬n-1ä¸ªå…ƒç´ ï¼ˆå€’æ•°ç¬¬äºŒä¸ªæ•°ï¼‰å’Œç¬¬nä¸ªå…ƒç´ ï¼ˆæœ€åä¸€ä¸ªæ•°ï¼‰æ¯”è¾ƒä¸ºæ­¢ã€‚ç®—æ³•çš„å…·ä½“æè¿°å¦‚ä¸‹ï¼š ç¬¬ä¸€è¶Ÿï¼Œä»n ä¸ªè®°å½•ä¸­æ‰¾å‡ºå…³é”®ç æœ€å°çš„è®°å½•ä¸ç¬¬ä¸€ä¸ªè®°å½•äº¤æ¢ï¼› ç¬¬äºŒè¶Ÿï¼Œä»ç¬¬äºŒä¸ªè®°å½•å¼€å§‹çš„n-1 ä¸ªè®°å½•ä¸­å†é€‰å‡ºå…³é”®ç æœ€å°çš„è®°å½•ä¸ç¬¬äºŒä¸ªè®°å½•äº¤æ¢ï¼› ä»¥æ­¤ç±»æ¨â€¦.. ç¬¬iè¶Ÿï¼Œåˆ™ä»ç¬¬i ä¸ªè®°å½•å¼€å§‹çš„n-i+1 ä¸ªè®°å½•ä¸­é€‰å‡ºå…³é”®ç æœ€å°çš„è®°å½•ä¸ç¬¬i ä¸ªè®°å½•äº¤æ¢ï¼Œ ç›´åˆ°æ•´ä¸ªåºåˆ—æŒ‰å…³é”®ç æœ‰åºã€‚ ç®€å•é€‰æ‹©æ’åºçš„ç¤ºä¾‹ï¼š ç®—æ³•å®ç°ï¼š 1234567891011void SelectSort(int a[], int n)&#123;trueint min = a[0];truefor (int i = 0; i &lt; n; i++)true&#123;truetruefor (int j = i; j &lt; n; j++) // æ¯æ¬¡é€‰å‡ºåºåˆ—ä¸­æœ€å°çš„æ•°truetruetrueif (a[j] &lt; min)truetruetruetruemin = a[j];truetruea[i] = min; // å°†æ¯æ¬¡é€‰å¥½çš„æ•°æ”¾åœ¨æ­£ç¡®çš„ä½ç½®true&#125;&#125; é€‰æ‹©æ’åºæ˜¯ç¨³å®šçš„ã€‚ é€‰æ‹©æ’åºçš„äº¤æ¢æ“ä½œä»‹äº0å’Œ(n-1)æ¬¡ä¹‹é—´ã€‚é€‰æ‹©æ’åºçš„æ¯”è¾ƒæ“ä½œä¸ºn(n-1)æ¬¡ä¹‹é—´ã€‚é€‰æ‹©æ’åºçš„èµ‹å€¼æ“ä½œä»‹äº0å’Œ3(n-1)æ¬¡ä¹‹é—´ã€‚æ¯”è¾ƒæ¬¡æ•°O(n^2 )ï¼Œæ¯”è¾ƒæ¬¡æ•°ä¸å…³é”®å­—çš„åˆå§‹çŠ¶æ€æ— å…³ï¼Œæ€»çš„æ¯”è¾ƒæ¬¡æ•°N=(n-1)+(n-2)+â€¦+1=n(n-1)/2ã€‚äº¤æ¢æ¬¡æ•°O(n)ï¼Œæœ€å¥½æƒ…å†µæ˜¯ï¼Œå·²ç»æœ‰åºï¼Œäº¤æ¢0æ¬¡ï¼›æœ€åæƒ…å†µæ˜¯ï¼Œé€†åºï¼Œäº¤æ¢n-1æ¬¡ã€‚äº¤æ¢æ¬¡æ•°æ¯”å†’æ³¡æ’åºè¾ƒå°‘ï¼Œç”±äºäº¤æ¢æ‰€éœ€CPUæ—¶é—´æ¯”æ¯”è¾ƒæ‰€éœ€çš„CPUæ—¶é—´å¤šï¼Œnå€¼è¾ƒå°æ—¶ï¼Œé€‰æ‹©æ’åºæ¯”å†’æ³¡æ’åºå¿«ã€‚åŸåœ°æ“ä½œå‡ ä¹æ˜¯é€‰æ‹©æ’åºçš„å”¯ä¸€ä¼˜ç‚¹ï¼Œå½“ç©ºé—´å¤æ‚åº¦è¦æ±‚è¾ƒé«˜æ—¶ï¼Œå¯ä»¥è€ƒè™‘é€‰æ‹©æ’åºï¼›å®é™…é€‚ç”¨çš„åœºåˆéå¸¸ç½•è§ã€‚ ç®€å•æ’åºçš„æ”¹è¿›â€”â€”äºŒå…ƒé€‰æ‹©æ’åºç®€å•é€‰æ‹©æ’åºï¼Œæ¯è¶Ÿå¾ªç¯åªèƒ½ç¡®å®šä¸€ä¸ªå…ƒç´ æ’åºåçš„å®šä½ã€‚æˆ‘ä»¬å¯ä»¥è€ƒè™‘æ”¹è¿›ä¸ºæ¯è¶Ÿå¾ªç¯ç¡®å®šä¸¤ä¸ªå…ƒç´ ï¼ˆå½“å‰è¶Ÿæœ€å¤§å’Œæœ€å°è®°å½•ï¼‰çš„ä½ç½®,ä»è€Œå‡å°‘æ’åºæ‰€éœ€çš„å¾ªç¯æ¬¡æ•°ã€‚æ”¹è¿›åå¯¹nä¸ªæ•°æ®è¿›è¡Œæ’åºï¼Œæœ€å¤šåªéœ€è¿›è¡Œ[n/2]è¶Ÿå¾ªç¯å³å¯ã€‚å…·ä½“å®ç°å¦‚ä¸‹ï¼š 123456789101112131415161718void SelectSort(int r[],int n) &#123; int i ,j , min ,max, tmp; for (i=1 ;i &lt;= n/2;i++) &#123; // åšä¸è¶…è¿‡n/2è¶Ÿé€‰æ‹©æ’åº min = i; max = i ; //åˆ†åˆ«è®°å½•æœ€å¤§å’Œæœ€å°å…³é”®å­—è®°å½•ä½ç½® for (j= i+1; j&lt;= n-i; j++) &#123; if (r[j] &gt; r[max]) &#123; max = j ; continue ; &#125; if (r[j]&lt; r[min]) &#123; min = j ; &#125; &#125; //è¯¥äº¤æ¢æ“ä½œè¿˜å¯åˆ†æƒ…å†µè®¨è®ºä»¥æé«˜æ•ˆç‡ tmp = r[i-1]; r[i-1] = r[min]; r[min] = tmp; tmp = r[n-i]; r[n-i] = r[max]; r[max] = tmp; &#125; &#125; å †æ’åºï¼ˆHeap Sortï¼‰ å †æ’åºæ˜¯æŒ‡åˆ©ç”¨å †è¿™ç§æ•°æ®ç»“æ„æ‰€è®¾è®¡çš„ä¸€ç§æ’åºç®—æ³•ã€‚å…¶åŸºæœ¬åŸç†å¦‚ä¸‹ï¼šå †æ˜¯ä¸€ä¸ªè¿‘ä¼¼å®Œå…¨äºŒå‰æ ‘çš„ç»“æ„ï¼Œå¹¶åŒæ—¶æ»¡è¶³å †ç§¯çš„æ€§è´¨ï¼šå³å­ç»“ç‚¹çš„é”®å€¼æˆ–ç´¢å¼•æ€»æ˜¯å°äºï¼ˆæˆ–è€…å¤§äºï¼‰å®ƒçš„çˆ¶èŠ‚ç‚¹ã€‚è‹¥ä»¥ä¸€ç»´æ•°ç»„å­˜å‚¨ä¸€ä¸ªå †ï¼Œåˆ™å †å¯¹åº”ä¸€æ£µå®Œå…¨äºŒå‰æ ‘ï¼Œä¸”æ‰€æœ‰éå¶ç»“ç‚¹çš„å€¼å‡ä¸å¤§äº(æˆ–ä¸å°äº)å…¶å­å¥³çš„å€¼ï¼Œæ ¹ç»“ç‚¹ï¼ˆå †é¡¶å…ƒç´ ï¼‰çš„å€¼æ˜¯æœ€å°(æˆ–æœ€å¤§)çš„ã€‚å¦‚ï¼š å¤§é¡¶å †åºåˆ—ï¼šï¼ˆ96, 83, 27, 38, 11, 09) å°é¡¶å †åºåˆ—ï¼šï¼ˆ12, 36, 24, 85, 47, 30, 53, 91ï¼‰ åˆå§‹æ—¶æŠŠnä¸ªæ•°çš„åºåˆ—çœ‹ä½œæ˜¯ä¸€æ£µé¡ºåºå­˜å‚¨çš„äºŒå‰æ ‘ï¼ˆä¸€ç»´æ•°ç»„å­˜å‚¨äºŒå‰æ ‘ï¼‰ï¼Œè°ƒæ•´å®ƒä»¬çš„å­˜å‚¨åºï¼Œä½¿ä¹‹æˆä¸ºä¸€ä¸ªå †ï¼Œå°†å †é¡¶å…ƒç´ è¾“å‡ºï¼Œå¾—åˆ°nä¸ªå…ƒç´ ä¸­æœ€å°(æˆ–æœ€å¤§)çš„å…ƒç´ ï¼Œè¿™æ—¶å †çš„æ ¹èŠ‚ç‚¹çš„æ•°æœ€å°ï¼ˆæˆ–è€…æœ€å¤§ï¼‰ã€‚ç„¶åå¯¹å‰é¢(n-1)ä¸ªå…ƒç´ é‡æ–°è°ƒæ•´ä½¿ä¹‹æˆä¸ºå †ï¼Œè¾“å‡ºå †é¡¶å…ƒç´ ï¼Œå¾—åˆ°nä¸ªå…ƒç´ ä¸­æ¬¡å°(æˆ–æ¬¡å¤§)çš„å…ƒç´ ã€‚ä¾æ­¤ç±»æ¨ï¼Œç›´åˆ°åªæœ‰ä¸¤ä¸ªèŠ‚ç‚¹çš„å †ï¼Œå¹¶å¯¹å®ƒä»¬ä½œäº¤æ¢ï¼Œæœ€åå¾—åˆ°æœ‰nä¸ªèŠ‚ç‚¹çš„æœ‰åºåºåˆ—ã€‚ç§°è¿™ä¸ªè¿‡ç¨‹ä¸ºå †æ’åºã€‚å› æ­¤ï¼Œå®ç°å †æ’åºéœ€è§£å†³ä¸¤ä¸ªé—®é¢˜ï¼š å¦‚ä½•å°†n ä¸ªå¾…æ’åºçš„æ•°å»ºæˆå †ï¼› è¾“å‡ºå †é¡¶å…ƒç´ åï¼Œæ€æ ·è°ƒæ•´å‰©ä½™n-1 ä¸ªå…ƒç´ ï¼Œä½¿å…¶æˆä¸ºä¸€ä¸ªæ–°å †ã€‚ é¦–å…ˆè®¨è®ºç¬¬äºŒä¸ªé—®é¢˜ï¼šè¾“å‡ºå †é¡¶å…ƒç´ åï¼Œå¯¹å‰©ä½™n-1å…ƒç´ é‡æ–°å»ºæˆå †çš„è°ƒæ•´è¿‡ç¨‹ã€‚è°ƒæ•´å°é¡¶å †çš„æ–¹æ³•ï¼š è®¾æœ‰m ä¸ªå…ƒç´ çš„å †ï¼Œè¾“å‡ºå †é¡¶å…ƒç´ åï¼Œå‰©ä¸‹m-1 ä¸ªå…ƒç´ ã€‚å°†å †åº•å…ƒç´ é€å…¥å †é¡¶ï¼ˆï¼ˆæœ€åä¸€ä¸ªå…ƒç´ ä¸å †é¡¶è¿›è¡Œäº¤æ¢ï¼‰ï¼Œå †è¢«ç ´åï¼Œå…¶åŸå› ä»…æ˜¯æ ¹ç»“ç‚¹ä¸æ»¡è¶³å †çš„æ€§è´¨ã€‚ å°†æ ¹ç»“ç‚¹ä¸å·¦ã€å³å­æ ‘ä¸­è¾ƒå°å…ƒç´ çš„è¿›è¡Œäº¤æ¢ã€‚ è‹¥ä¸å·¦å­æ ‘äº¤æ¢ï¼šå¦‚æœå·¦å­æ ‘å †è¢«ç ´åï¼Œå³å·¦å­æ ‘çš„æ ¹ç»“ç‚¹ä¸æ»¡è¶³å †çš„æ€§è´¨ï¼Œåˆ™é‡å¤æ–¹æ³• 2. è‹¥ä¸å³å­æ ‘äº¤æ¢ï¼Œå¦‚æœå³å­æ ‘å †è¢«ç ´åï¼Œå³å³å­æ ‘çš„æ ¹ç»“ç‚¹ä¸æ»¡è¶³å †çš„æ€§è´¨ã€‚åˆ™é‡å¤æ–¹æ³• 2. ç»§ç»­å¯¹ä¸æ»¡è¶³å †æ€§è´¨çš„å­æ ‘è¿›è¡Œä¸Šè¿°äº¤æ¢æ“ä½œï¼Œç›´åˆ°å¶å­ç»“ç‚¹ï¼Œå †è¢«å»ºæˆã€‚ ç§°è¿™ä¸ªè‡ªæ ¹ç»“ç‚¹åˆ°å¶å­ç»“ç‚¹çš„è°ƒæ•´è¿‡ç¨‹ä¸ºç­›é€‰ã€‚å¦‚å›¾ï¼š å†è®¨è®ºå¯¹n ä¸ªå…ƒç´ åˆå§‹å»ºå †çš„è¿‡ç¨‹ã€‚å»ºå †æ–¹æ³•ï¼šå¯¹åˆå§‹åºåˆ—å»ºå †çš„è¿‡ç¨‹ï¼Œå°±æ˜¯ä¸€ä¸ªåå¤è¿›è¡Œç­›é€‰çš„è¿‡ç¨‹ã€‚ nä¸ªç»“ç‚¹çš„å®Œå…¨äºŒå‰æ ‘ï¼Œåˆ™æœ€åä¸€ä¸ªç»“ç‚¹æ˜¯ç¬¬ä¸ªç»“ç‚¹çš„å­æ ‘ã€‚ ç­›é€‰ä»ç¬¬ä¸ªç»“ç‚¹ä¸ºæ ¹çš„å­æ ‘å¼€å§‹ï¼Œè¯¥å­æ ‘æˆä¸ºå †ã€‚ ä¹‹åå‘å‰ä¾æ¬¡å¯¹å„ç»“ç‚¹ä¸ºæ ¹çš„å­æ ‘è¿›è¡Œç­›é€‰ï¼Œä½¿ä¹‹æˆä¸ºå †ï¼Œç›´åˆ°æ ¹ç»“ç‚¹ã€‚ å¦‚å›¾å»ºå †åˆå§‹è¿‡ç¨‹ï¼šæ— åºåºåˆ—ï¼šï¼ˆ49ï¼Œ38ï¼Œ65ï¼Œ97ï¼Œ76ï¼Œ13ï¼Œ27ï¼Œ49ï¼‰ ç®—æ³•çš„å®ç°ï¼š 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556/** * å·²çŸ¥H[sâ€¦m]é™¤äº†H[s] å¤–å‡æ»¡è¶³å †çš„å®šä¹‰ * è°ƒæ•´H[s],ä½¿å…¶æˆä¸ºå¤§é¡¶å †.å³å°†å¯¹ç¬¬sä¸ªç»“ç‚¹ä¸ºæ ¹çš„å­æ ‘ç­›é€‰, * * @param Hæ˜¯å¾…è°ƒæ•´çš„å †æ•°ç»„ * @param sæ˜¯å¾…è°ƒæ•´çš„æ•°ç»„å…ƒç´ çš„ä½ç½® * @param lengthæ˜¯æ•°ç»„çš„é•¿åº¦ * */ void HeapAdjust(int H[],int s, int length) &#123; int tmp = H[s]; int child = 2*s+1; //å·¦å­©å­ç»“ç‚¹çš„ä½ç½®ã€‚(i+1 ä¸ºå½“å‰è°ƒæ•´ç»“ç‚¹çš„å³å­©å­ç»“ç‚¹çš„ä½ç½®) while (child &lt; length) &#123; if(child+1 &lt;length &amp;&amp; H[child]&lt;H[child+1]) // å¦‚æœå³å­©å­å¤§äºå·¦å­©å­(æ‰¾åˆ°æ¯”å½“å‰å¾…è°ƒæ•´ç»“ç‚¹å¤§çš„å­©å­ç»“ç‚¹) ++child; if(H[s]&lt;H[child]) &#123; // å¦‚æœè¾ƒå¤§çš„å­ç»“ç‚¹å¤§äºçˆ¶ç»“ç‚¹ H[s] = H[child]; // é‚£ä¹ˆæŠŠè¾ƒå¤§çš„å­ç»“ç‚¹å¾€ä¸Šç§»åŠ¨ï¼Œæ›¿æ¢å®ƒçš„çˆ¶ç»“ç‚¹ s = child; // é‡æ–°è®¾ç½®s ,å³å¾…è°ƒæ•´çš„ä¸‹ä¸€ä¸ªç»“ç‚¹çš„ä½ç½® child = 2*s+1; &#125; else // å¦‚æœå½“å‰å¾…è°ƒæ•´ç»“ç‚¹å¤§äºå®ƒçš„å·¦å³å­©å­ï¼Œåˆ™ä¸éœ€è¦è°ƒæ•´ï¼Œç›´æ¥é€€å‡º break; H[s] = tmp; // å½“å‰å¾…è°ƒæ•´çš„ç»“ç‚¹æ”¾åˆ°æ¯”å…¶å¤§çš„å­©å­ç»“ç‚¹ä½ç½®ä¸Š &#125; &#125; /** * åˆå§‹å †è¿›è¡Œè°ƒæ•´ * å°†H[0..length-1]å»ºæˆå † * è°ƒæ•´å®Œä¹‹åç¬¬ä¸€ä¸ªå…ƒç´ æ˜¯åºåˆ—çš„æœ€å°çš„å…ƒç´  */ void BuildingHeap(int H[], int length) &#123; //æœ€åä¸€ä¸ªæœ‰å­©å­çš„èŠ‚ç‚¹çš„ä½ç½® i= (length -1) / 2 for (int i = (length -1) / 2 ; i &gt;= 0; i--) HeapAdjust(H,i,length);&#125; /** * å †æ’åºç®—æ³• */ void HeapSort(int H[],int length) &#123; //åˆå§‹å † BuildingHeap(H, length); //ä»æœ€åä¸€ä¸ªå…ƒç´ å¼€å§‹å¯¹åºåˆ—è¿›è¡Œè°ƒæ•´ for (int i = length - 1; i &gt; 0; --i) &#123; //äº¤æ¢å †é¡¶å…ƒç´ H[0]å’Œå †ä¸­æœ€åä¸€ä¸ªå…ƒç´  int temp = H[i]; H[i] = H[0]; H[0] = temp; //æ¯æ¬¡äº¤æ¢å †é¡¶å…ƒç´ å’Œå †ä¸­æœ€åä¸€ä¸ªå…ƒç´ ä¹‹åï¼Œéƒ½è¦å¯¹å †è¿›è¡Œè°ƒæ•´ HeapAdjust(H,0,i); &#125; &#125; å †æ’åºæ˜¯ä¸ç¨³å®šçš„ã€‚ è®¾æ ‘æ·±åº¦ä¸ºkï¼Œ æ¬¡ï¼Œäº¤æ¢è®°å½•è‡³å¤šk æ¬¡ã€‚æ‰€ä»¥ï¼Œåœ¨å»ºå¥½å †åï¼Œæ’åºè¿‡ç¨‹ä¸­çš„ç­›é€‰æ¬¡æ•°ä¸è¶…è¿‡ä¸‹å¼ï¼š è€Œå»ºå †æ—¶çš„æ¯”è¾ƒæ¬¡æ•°ä¸è¶…è¿‡4n æ¬¡ï¼Œå› æ­¤å †æ’åºæœ€åæƒ…å†µä¸‹ï¼Œæ—¶é—´å¤æ‚åº¦ä¹Ÿä¸ºï¼šO(nlogn )ã€‚ äº¤æ¢æ’åºå†’æ³¡æ’åºï¼ˆBubble Sortï¼‰ å†’æ³¡æ’åºé‡å¤åœ°èµ°è®¿è¿‡è¦æ’åºçš„æ•°åˆ—ï¼Œä¸€æ¬¡æ¯”è¾ƒä¸¤ä¸ªå…ƒç´ ï¼Œå¦‚æœä»–ä»¬çš„é¡ºåºé”™è¯¯å°±æŠŠä»–ä»¬äº¤æ¢è¿‡æ¥ã€‚å†’æ³¡æ’åºç¤ºä¾‹ï¼š ç®—æ³•çš„å®ç°ï¼š 1234567891011void bubbleSort(int a[], int n)&#123; for(int i =0 ; i&lt; n-1; ++i) for(int j = 0; j &lt; n-i-1; ++j) if(a[j] &gt; a[j+1]) &#123; int tmp = a[j]; a[j] = a[j+1]; a[j+1] = tmp; &#125; &#125; å†’æ³¡æ’åºæ˜¯ç¨³å®šçš„ã€‚ å†’æ³¡ç®—æ³•çš„æ”¹è¿›å¯¹å†’æ³¡æ’åºå¸¸è§çš„æ”¹è¿›æ–¹æ³•æ˜¯åŠ å…¥ä¸€æ ‡å¿—æ€§å˜é‡exchangeï¼Œç”¨äºæ ‡å¿—æŸä¸€è¶Ÿæ’åºè¿‡ç¨‹ä¸­æ˜¯å¦æœ‰æ•°æ®äº¤æ¢ï¼Œå¦‚æœè¿›è¡ŒæŸä¸€è¶Ÿæ’åºæ—¶å¹¶æ²¡æœ‰è¿›è¡Œæ•°æ®äº¤æ¢ï¼Œåˆ™è¯´æ˜æ•°æ®å·²ç»æŒ‰è¦æ±‚æ’åˆ—å¥½ï¼Œå¯ç«‹å³ç»“æŸæ’åºï¼Œé¿å…ä¸å¿…è¦çš„æ¯”è¾ƒè¿‡ç¨‹ã€‚æœ¬æ–‡å†æä¾›ä»¥ä¸‹ä¸¤ç§æ”¹è¿›ç®—æ³•ï¼š è®¾ç½®ä¸€æ ‡å¿—æ€§å˜é‡pos,ç”¨äºè®°å½•æ¯è¶Ÿæ’åºä¸­æœ€åä¸€æ¬¡è¿›è¡Œäº¤æ¢çš„ä½ç½®ã€‚ç”±äºposä½ç½®ä¹‹åçš„è®°å½•å‡å·²äº¤æ¢åˆ°ä½,æ•…åœ¨è¿›è¡Œä¸‹ä¸€è¶Ÿæ’åºæ—¶åªè¦æ‰«æåˆ°posä½ç½®å³å¯ã€‚æ”¹è¿›åç®—æ³•å¦‚ä¸‹ï¼š 1234567891011121314151617void Bubble_1 ( int r[], int n)&#123; int i = n -1; //åˆå§‹æ—¶,æœ€åä½ç½®ä¿æŒä¸å˜ while (i &gt; 0) &#123; int pos= 0; //æ¯è¶Ÿå¼€å§‹æ—¶,æ— è®°å½•äº¤æ¢ for (int j = 0; j &lt; i; j++) if (r[j] &gt; r[j+1]) &#123; pos = j; //è®°å½•äº¤æ¢çš„ä½ç½® int tmp = r[j]; r[j] = r[j+1]; r[j+1] = tmp; &#125; i = pos; //ä¸ºä¸‹ä¸€è¶Ÿæ’åºä½œå‡†å¤‡ &#125; &#125; ä¼ ç»Ÿå†’æ³¡æ’åºä¸­æ¯ä¸€è¶Ÿæ’åºæ“ä½œåªèƒ½æ‰¾åˆ°ä¸€ä¸ªæœ€å¤§å€¼æˆ–æœ€å°å€¼,æˆ‘ä»¬è€ƒè™‘åˆ©ç”¨åœ¨æ¯è¶Ÿæ’åºä¸­è¿›è¡Œæ­£å‘å’Œåå‘ä¸¤éå†’æ³¡çš„æ–¹æ³•ä¸€æ¬¡å¯ä»¥å¾—åˆ°ä¸¤ä¸ªæœ€ç»ˆå€¼(æœ€å¤§è€…å’Œæœ€å°è€…) , ä»è€Œä½¿æ’åºè¶Ÿæ•°å‡ ä¹å‡å°‘äº†ä¸€åŠã€‚æ”¹è¿›åçš„ç®—æ³•ä¸ºï¼š 12345678910111213141516171819202122232425void Bubble_2 (int r[], int n)&#123; int low = 0; int high = n-1; //è®¾ç½®å˜é‡çš„åˆå§‹å€¼ int tmp, j; while (low &lt; high) &#123; for (j = low; j &lt; high; ++j) //æ­£å‘å†’æ³¡,æ‰¾åˆ°æœ€å¤§è€… if (r[j] &gt; r[j+1]) &#123; tmp = r[j]; r[j]=r[j+1]; r[j+1]=tmp; &#125; --high; //ä¿®æ”¹highå€¼, å‰ç§»ä¸€ä½ for (j = high; j &gt; low; --j) //åå‘å†’æ³¡,æ‰¾åˆ°æœ€å°è€… if (r[j] &lt; r[j-1]) &#123; tmp = r[j]; r[j]=r[j-1]; r[j-1]=tmp; &#125; ++low; //ä¿®æ”¹lowå€¼,åç§»ä¸€ä½ &#125; &#125; å¿«é€Ÿæ’åºï¼ˆQuick Sortï¼‰ å¿«é€Ÿæ’åºåˆç§°åˆ’åˆ†äº¤æ¢æ’åºï¼ˆpartition-exchange sortï¼‰ï¼Œä½¿ç”¨åˆ†æ²»æ³•ï¼ˆDivide and conquerï¼‰ç­–ç•¥æ¥æŠŠä¸€ä¸ªåºåˆ—ï¼ˆlistï¼‰åˆ†ä¸ºä¸¤ä¸ªå­åºåˆ—ï¼ˆsub-listsï¼‰ã€‚å…¶ç®—æ³•æè¿°ä¸ºï¼š ä»æ•°åˆ—ä¸­æŒ‘å‡ºä¸€ä¸ªå…ƒç´ ï¼Œç§°ä¸ºâ€åŸºå‡†â€ï¼ˆpivotï¼‰ã€‚ é‡æ–°æ’åºæ•°åˆ—ï¼Œæ‰€æœ‰æ¯”åŸºå‡†å€¼å°çš„å…ƒç´ æ‘†æ”¾åœ¨åŸºå‡†å‰é¢ï¼Œæ‰€æœ‰æ¯”åŸºå‡†å€¼å¤§çš„å…ƒç´ æ‘†åœ¨åŸºå‡†åé¢ï¼ˆç›¸åŒçš„æ•°å¯ä»¥åˆ°ä»»ä¸€è¾¹ï¼‰ã€‚åœ¨è¿™ä¸ªåˆ†åŒºç»“æŸä¹‹åï¼Œè¯¥åŸºå‡†å°±å¤„äºæ•°åˆ—çš„ä¸­é—´ä½ç½®ã€‚è¿™ä¸ªç§°ä¸ºåˆ†åŒºï¼ˆpartitionï¼‰æ“ä½œã€‚ é€’å½’åœ°ï¼ˆrecursivelyï¼‰æŠŠå°äºåŸºå‡†å€¼å…ƒç´ çš„å­æ•°åˆ—å’Œå¤§äºåŸºå‡†å€¼å…ƒç´ çš„å­æ•°åˆ—æ’åºã€‚ å¿«é€Ÿæ’åºçš„ç¤ºä¾‹ï¼š ä¸€è¶Ÿæ’åºçš„è¿‡ç¨‹ æ’åºçš„å…¨è¿‡ç¨‹ ç®—æ³•çš„å®ç°ï¼ˆé€’å½’ï¼‰ï¼š 1234567891011121314151617181920void quickSort_recursive(int a[], int low, int high)&#123; int first = low; int last = high; int key = a[first]; if(low &gt;= high) return ; while(first &lt; last) &#123; while((first &lt; last)&amp;&amp;(key &lt;= a[last])) last--; a[first] = a[last]; while((first &lt; last)&amp;&amp;(key &gt;= a[first])) first++; a[last] = a[first]; &#125; a[first] = key; quickSort_recursive(a, low, first-1); quickSort_recursive(a, first+1, high);&#125; å¿«é€Ÿæ’åºæ˜¯ä¸ç¨³å®šçš„ã€‚å¿«æ’è¿­ä»£ç®—æ³•:ç»´æŠ¤ä¸€ä¸ªæ ˆï¼Œå­˜æ”¾åˆ’åˆ†çš„èµ·ç‚¹ç»ˆç‚¹ åœ¨å¹³å‡çŠ¶å†µä¸‹ï¼Œæ’åºnä¸ªé¡¹ç›®è¦ÎŸ(nlogn)æ¬¡æ¯”è¾ƒã€‚åœ¨æœ€åçŠ¶å†µä¸‹ï¼ˆæ­£åºæˆ–é€†åºï¼‰åˆ™éœ€è¦ÎŸ(n^2 )æ¬¡æ¯”è¾ƒï¼Œå–å†³äºå…¶é€’å½’æ ‘çš„é«˜åº¦ã€‚äº‹å®ä¸Šï¼Œå¿«é€Ÿæ’åºé€šå¸¸æ˜æ˜¾æ¯”å…¶ä»–ÎŸ(nlogn)ç®—æ³•æ›´å¿«ï¼Œå› ä¸ºå®ƒçš„å†…éƒ¨å¾ªç¯ï¼ˆinner loopï¼‰å¯ä»¥åœ¨å¤§éƒ¨åˆ†çš„æ¶æ„ä¸Šå¾ˆæœ‰æ•ˆç‡åœ°è¢«å®ç°å‡ºæ¥ã€‚å¿«é€Ÿæ’åºæ˜¯ä¸€ä¸ªä¸ç¨³å®šçš„æ’åºæ–¹æ³•ã€‚ å½’å¹¶æ’åºï¼ˆMerge Sortï¼‰ å½’å¹¶ï¼ˆMergeï¼‰æ’åºæ³•æ˜¯å°†ä¸¤ä¸ªï¼ˆæˆ–ä¸¤ä¸ªä»¥ä¸Šï¼‰æœ‰åºè¡¨åˆå¹¶æˆä¸€ä¸ªæ–°çš„æœ‰åºè¡¨ï¼Œå³æŠŠå¾…æ’åºåºåˆ—åˆ†ä¸ºè‹¥å¹²ä¸ªå­åºåˆ—ï¼Œæ¯ä¸ªå­åºåˆ—æ˜¯æœ‰åºçš„ã€‚ç„¶åå†æŠŠæœ‰åºå­åºåˆ—åˆå¹¶ä¸ºæ•´ä½“æœ‰åºåºåˆ—ã€‚ é€’å½’æ³• å°†åºåˆ—æ¯ç›¸é‚»ä¸¤ä¸ªæ•°å­—è¿›è¡Œå½’å¹¶æ“ä½œï¼Œå½¢æˆfloor(n/2)ä¸ªåºåˆ—ï¼Œæ’åºåæ¯ä¸ªåºåˆ—åŒ…å«ä¸¤ä¸ªå…ƒç´  å°†ä¸Šè¿°åºåˆ—å†æ¬¡å½’å¹¶ï¼Œå½¢æˆfloor(n/4)ä¸ªåºåˆ—ï¼Œæ¯ä¸ªåºåˆ—åŒ…å«å››ä¸ªå…ƒç´  é‡å¤æ­¥éª¤2ï¼Œç›´åˆ°æ‰€æœ‰å…ƒç´ æ’åºå®Œæ¯• ç®—æ³•å®ç°ï¼š 12345678910111213141516171819202122232425void merge_sort_recursive(int arr[], int reg[], int start, int end)&#123; if (start &gt;= end) return; int len = end - start, mid = (len &gt;&gt; 1) + start; int start1 = start, end1 = mid; int start2 = mid + 1, end2 = end; merge_sort_recursive(arr, reg, start1, end1); merge_sort_recursive(arr, reg, start2, end2); int k = start; while (start1 &lt;= end1 &amp;&amp; start2 &lt;= end2) reg[k++] = arr[start1] &lt; arr[start2] ? arr[start1++] : arr[start2++]; while (start1 &lt;= end1) reg[k++] = arr[start1++]; while (start2 &lt;= end2) reg[k++] = arr[start2++]; for (k = start; k &lt;= end; k++) arr[k] = reg[k];&#125;void merge_sort(int arr[], const int len)&#123;trueint reg[len];truemerge_sort_recursive(arr, reg, 0, len - 1);&#125; ä¸¤è·¯å½’å¹¶çš„é€’å½’ç®—æ³•12345678910111213141516void MSort(ElemType *r, ElemType *rf,int s, int t) &#123; ElemType *rf2; if(s==t) r[s] = rf[s]; else &#123; int m=(s+t)/2; /*å¹³åˆ†*p è¡¨*/ MSort(r, rf2, s, m); /*é€’å½’åœ°å°†p[sâ€¦m]å½’å¹¶ä¸ºæœ‰åºçš„p2[sâ€¦m]*/ MSort(r, rf2, m+1, t); /*é€’å½’åœ°å°†p[m+1â€¦t]å½’å¹¶ä¸ºæœ‰åºçš„p2[m+1â€¦t]*/ Merge(rf2, rf, s, m+1,t); /*å°†p2[sâ€¦m]å’Œp2[m+1â€¦t]å½’å¹¶åˆ°p1[sâ€¦t]*/ &#125; &#125; void MergeSort_recursive(ElemType *r, ElemType *rf, int n) &#123; /*å¯¹é¡ºåºè¡¨*p ä½œå½’å¹¶æ’åº*/ MSort(r, rf,0, n-1); &#125; è¿­ä»£æ³• ç”³è¯·ç©ºé—´ï¼Œä½¿å…¶å¤§å°ä¸ºä¸¤ä¸ªå·²ç»æ’åºåºåˆ—ä¹‹å’Œï¼Œè¯¥ç©ºé—´ç”¨æ¥å­˜æ”¾åˆå¹¶åçš„åºåˆ—ï¼› è®¾å®šä¸¤ä¸ªæŒ‡é’ˆï¼Œæœ€åˆä½ç½®åˆ†åˆ«ä¸ºä¸¤ä¸ªå·²ç»æ’åºåºåˆ—çš„èµ·å§‹ä½ç½®ï¼› æ¯”è¾ƒä¸¤ä¸ªæŒ‡é’ˆæ‰€æŒ‡å‘çš„å…ƒç´ ï¼Œé€‰æ‹©ç›¸å¯¹å°çš„å…ƒç´ æ”¾å…¥åˆ°åˆå¹¶ç©ºé—´ï¼Œå¹¶ç§»åŠ¨æŒ‡é’ˆåˆ°ä¸‹ä¸€ä½ç½®ï¼› é‡å¤æ­¥éª¤3ç›´åˆ°æŸä¸€æŒ‡é’ˆåˆ°è¾¾åºåˆ—å°¾ï¼› å°†å¦ä¸€åºåˆ—å‰©ä¸‹çš„æ‰€æœ‰å…ƒç´ ç›´æ¥å¤åˆ¶åˆ°åˆå¹¶åºåˆ—å°¾ï¼› ç®—æ³•å®ç°ï¼š 12345678910111213141516171819202122232425262728293031void merge_sort_iteration(int arr[], int len)&#123; int* a = arr; int* b = new int[len]; for (int seg = 1; seg &lt; len; seg += seg) &#123; for (int start = 0; start &lt; len; start += seg + seg) &#123; int low = start, mid = min(start + seg, len), high = min(start + seg + seg, len); int k = low; int start1 = low, end1 = mid; int start2 = mid, end2 = high; while (start1 &lt; end1 &amp;&amp; start2 &lt; end2) b[k++] = a[start1] &lt; a[start2] ? a[start1++] : a[start2++]; while (start1 &lt; end1) b[k++] = a[start1++]; while (start2 &lt; end2) b[k++] = a[start2++]; &#125; T* temp = a; a = b; b = temp; &#125; if (a != arr) &#123; for (int i = 0; i &lt; len; i++) b[i] = a[i]; b = a; &#125; delete[] b;&#125; å½’å¹¶æ’åºæ˜¯ç¨³å®šçš„ã€‚ æ€»ç»“å„ç§æ’åºçš„ç¨³å®šæ€§ï¼Œæ—¶é—´å¤æ‚åº¦å’Œç©ºé—´å¤æ‚åº¦æ€»ç»“ï¼š å‚è€ƒèµ„æ–™æœ‰ï¼šçœŸå®çš„å½’å®¿â€”â€”å…«å¤§æ’åºç®—æ³•xiazdongâ€”â€”ä¹å¤§æ’åºç®—æ³•å†æ€»ç»“wikipedia","categories":[{"name":"Algorithm","slug":"Algorithm","permalink":"http://codingdoge.cn/categories/Algorithm/"}],"tags":[]},{"title":"Search in Rotated Sorted Array","slug":"title: Search in Rotated Sorted Array  ","date":"2017-07-23T15:56:00.000Z","updated":"2018-01-12T14:25:37.504Z","comments":true,"path":"2017/07/23/title: Search in Rotated Sorted Array  /","link":"","permalink":"http://codingdoge.cn/2017/07/23/title: Search in Rotated Sorted Array  /","excerpt":"","text":"é¢˜ç›®æ¥æºLeetCode: LeetCode OJ é¢˜ç›®æè¿°: Suppose a sorted array is rotated at some pivot unknown to you beforehand.(i.e., 0 1 2 4 5 6 7 might become 4 5 6 7 0 1 2).You are given a target value to search. If found in the array return its index, otherwise return -1.You may assume no duplicate exists in the array. é¢˜ç›®è§£é‡Šä¸€ä¸ªæ’å¥½åºçš„æ•°ç»„ï¼Œä¸çŸ¥é“ä»¥å“ªä¸ªç‚¹ä¸ºä¸­å¿ƒæ—‹è½¬äº†(éƒ¨åˆ†æœ‰åº)ï¼Œä½ çš„ä»»åŠ¡æ˜¯æŸ¥æ‰¾ç»™å®šçš„æ•°æ˜¯å¦å­˜åœ¨æ•°ç»„ä¸­ã€‚åœ¨çš„è¯è¿”å›ä¸‹æ ‡ï¼Œä¸åœ¨çš„è¯è¿”å›ï¼1. åˆ†ææŸ¥æ‰¾é¦–å…ˆæƒ³åˆ°O(log(n))çš„äºŒåˆ†æŸ¥æ‰¾ï¼Œä½†æ˜¯äºŒåˆ†æŸ¥æ‰¾çš„å‰ææ˜¯æœ‰åºæ•°ç»„ã€‚é¢˜ç›®é‡Œä¸€ä¸ªæœ‰åºæ•°ç»„æ—‹è½¬åå˜æˆäº†éƒ¨åˆ†æœ‰åºã€‚é€šè¿‡æ¯”è¾ƒä¸¤ç«¯å¤§å°æ‰¾åˆ°å¢åºéƒ¨åˆ†ã€‚ eg: 4 5 6 0 1 2 3first = 4, mid = 0, last = 3ï¼Œé€šè¿‡æ¯”è¾ƒfirst,mid,lastæ‰¾åˆ°å¢åºéƒ¨åˆ†ã€‚åœ¨è¿™ä¸ªä¾‹å­ä¸­ä¸º1 2 3ï¼Œç„¶ååˆ¤æ–­targetæ˜¯å¦åœ¨è¿™ä¸ªå¢åºå­åºåˆ—ä¸­ï¼Œå¦‚æœåœ¨åˆ™ç›´æ¥ç”¨äºŒåˆ†æŸ¥æ‰¾ï¼Œä¸åœ¨åˆ™åœ¨å¦ä¸€éƒ¨åˆ†(ä¾‹å­ä¸­ä¸º4 5 6 0)ä¸­ç»§ç»­åˆ†è§£ã€‚ Codeint search(const vector&lt;int&gt;&amp; nums, int target) { int first = 0; int last = nums.size(); while(first != last) { const int mid = (first+last)&gt;&gt;1; // ä½¿ç”¨ä½è¿ç®—åŠ é€Ÿ if(nums[mid] == target) return mid; if(nums[first] &lt;= nums[mid]) // æ‰¾åˆ°å¢åºå­åºåˆ— if(nums[first]&lt;=target &amp;&amp; target&lt;nums[mid]) // æ‰¾åˆ°targetåœ¨å“ªä¸ªéƒ¨åˆ† last = mid; else first = mid+1; else if(nums[mid]&lt;target &amp;&amp; target&lt;=nums[last-1]) first = mid+1; else last = mid; } return -1; } æ‹“å±•å½“æ•°ç»„ä¸ºæ— åºæ—¶çš„äºŒåˆ†æŸ¥æ‰¾ åˆ†æä¸€ç§æ˜¯å…ˆæ’åºå†äºŒåˆ†ï¼Œä¸€ç§æ˜¯ç»“åˆå¿«æ’æ€æƒ³ï¼Œæ¯æ¬¡é€‰æ‹©ä¸€ä¸ªå…³é”®å­—ï¼Œæ¯”ä»–å¤§çš„æ”¾å³è¾¹ï¼Œæ¯”ä»–å°çš„æ”¾å·¦è¾¹ï¼Œç„¶åå†æ¯”è¾ƒä»–å’Œéœ€è¦æŸ¥æ‰¾çš„æ•°çš„å…³ç³»ï¼Œå†é€‰æ‹©åŒºé—´è¿›è¡Œè¿­ä»£ã€‚å¦‚æœéœ€è¦è¿”å›æŸ¥æ‰¾æ•°çš„ä¸‹æ ‡ï¼Œåˆ™æ·»åŠ ä¸€ä¸ªçºªå½•ä¸‹æ ‡çš„æ•°ç»„ï¼Œè¿™æ ·æ’å¥½åºåä¹Ÿèƒ½çŸ¥é“å½“å‰æ•°åœ¨åŸå§‹æ•°ç»„ä¸­çš„ä½ç½®ã€‚ åˆå§‹æ•°ç»„3 1 2 5 4 7 0 6mid = key = 3 è¿›è¡Œä¸€æ¬¡å¿«æ’å¡«å‘å¾—åˆ°æ•°ç»„0 1 2 3 4 7 5 6æ¯”è¾ƒmidä¸targetå¦‚æœtarget&gt;midåˆ™è¿­ä»£midååŠéƒ¨åˆ†å¦‚æœtarget&lt;midåˆ™è¿­ä»£midå‰åŠéƒ¨åˆ†ç›´åˆ°æ‰¾åˆ°target Codeint BinarySearch(vector&lt;int&gt;&amp; nums, int target) { int num = nums.size(); int index[num]; // indexæ•°ç»„çºªå½•ä¸‹æ ‡ ä»¥ä¾¿èƒ½æ‰¾åˆ°åœ¨æ•°ç»„çš„åˆå§‹ä½ç½® for(int i = 0; i &lt; num; i++) // åˆå§‹åŒ–indexæ•°ç»„ index[i] = i; int l, r, m, sl, sr, mIndex; l = 0, r = num-1; while(l&lt;=r) // å¼€å§‹è¿­ä»£ { mIndex = index[l], m = nums[l]; sl = l, sr = r; while(sl&lt;sr) // å¿«æ’æ€æƒ³ï¼Œå·¦å³å¡«å‘ï¼Œå¹¶ç”¨indexè®°å½•ä½ç½® { while(sl&lt;sr &amp;&amp; m&lt;nums[sr]) sr--; nums[sl] = nums[sr]; index[sl] = index[sr]; while(sl&lt;sr &amp;&amp; m&gt;nums[sl]) sl++; nums[sr] = nums[sl]; index[sr] = index[sl]; } nums[sl] = m; index[sl] = mIndex; if(m == target) return mIndex; if(target &gt; m) // åˆ¤æ–­targetåœ¨å“ªä¸ªåŒºé—´ l = sl+1; else r = sl-1; } return -1; } ç›¸å…³é¢˜ç›®Search in Rotated Sorted Array II ç›¸å…³é¢˜ç›®åˆ†æå› ä¸ºå…è®¸å‡ºç°é‡å¤æ•°å­—ï¼Œä½†æ˜¯æ•°ç»„è¿˜æ˜¯éƒ¨åˆ†æœ‰åºçš„ï¼Œæ‰€ä»¥è·³è¿‡é‡å¤æ•°å­—å³å¯ Codeint search(const vector&lt;int&gt;&amp; nums, int target) { int first = 0; int last = nums.size(); while(first != last) { const int mid = (first+last)&gt;&gt;1; if(nums[mid] == target) return mid; if(nums[first] &lt; nums[mid]) if(nums[first]&lt;=target &amp;&amp; target&lt;nums[mid]) last = mid; else first = mid+1; else if(nums[first] &gt; nums[mid]) { if(nums[mid]&lt;target &amp;&amp; target&lt;=nums[last-1]) first = mid+1; else last = mid; } else // ç‰¹åˆ¤ç›¸ç­‰æ—¶è·³è¿‡ first++; } return -1; }","categories":[{"name":"Algorithm","slug":"Algorithm","permalink":"http://codingdoge.cn/categories/Algorithm/"}],"tags":[{"name":"LeetCode","slug":"LeetCode","permalink":"http://codingdoge.cn/tags/LeetCode/"}]},{"title":"CocoaPods å®‰è£…åŠä¸€èˆ¬ä½¿ç”¨","slug":"title: CocoaPods å®‰è£…åŠä¸€èˆ¬ä½¿ç”¨","date":"2017-07-23T15:47:00.000Z","updated":"2018-01-13T05:06:34.464Z","comments":true,"path":"2017/07/23/title: CocoaPods å®‰è£…åŠä¸€èˆ¬ä½¿ç”¨/","link":"","permalink":"http://codingdoge.cn/2017/07/23/title: CocoaPods å®‰è£…åŠä¸€èˆ¬ä½¿ç”¨/","excerpt":"","text":"WHAT IS COCOAPODSCocoaPods is a dependency manager for Swift and Objective-C Cocoa projects.CocoaPods can help you scale your projects elegantly. INSTALLCocoaPodsæ˜¯åŸºäºrubyå»ºç«‹çš„ï¼Œè¦ç¡®ä¿ä½ çš„ç”µè„‘é‡Œè£…æœ‰Rubyï¼Œä¸è¿‡Macéƒ½æ˜¯è‡ªå¸¦Rubyçš„ï¼Œä½ å¯ä»¥ç”¨rvmæ¥ç®¡ç†ä½ çš„ruby. RVM å®ç”¨æŒ‡å— Â· Ruby Chinaç„¶åæˆ‘ä»¬ä½¿ç”¨Rubygemæ¥å®‰è£…cocoapods.ç”±äºGFWçš„åŸå› æˆ‘ä»¬ä¸èƒ½è®¿é—®cocoapods.orgï¼Œä½¿ç”¨æ·˜å®çš„Rubyé•œåƒæ¥ä»£æ›¿ï¼š åˆ é™¤è‡ªå¸¦çš„Rubyé•œåƒ$ gem sources --remove https://rubygems.org/ æ·»åŠ æ·˜å®çš„é•œåƒ$ gem sources -a https://gems.ruby-china.org/ï¼ˆå¦‚æœè¿™ä¸ªé•œåƒä¸èƒ½ç”¨ï¼Œå°±ç”¨https://gems.ruby-china.org/ï¼‰ å¯ä»¥ç”¨$ gem sources -læ¥æ£€éªŒã€‚æˆåŠŸå³æ˜¾ç¤ºä»¥ä¸‹ç»“æœï¼š FF76DDA8-EC18-438C-B921-8603D4688C1D å®‰è£…CocoaPods$ sudo gem install cocoapods é…ç½®CocoaPods$ pod setup å¦‚æœå®‰è£…å¤±è´¥çš„è¯ï¼Œæ ¹æ®æŠ¥é”™å»è§£å†³é—®é¢˜ï¼Œæ¯”å¦‚gemæ²¡æ›´æ–°ï¼Œrubyç‰ˆæœ¬ç­‰ã€‚å¸¸è§é—®é¢˜ï¼šWhile executing gem ... (Errno::EPERM)1Operation not permitted - /usr/bin/xcodeproj å®‰è£…Cocoapodsï¼Œ æ›´æ–°gemå‡ºç°çš„é—®é¢˜ã€‚ - SegmentFaultios - Cannot install cocoa pods after uninstalling, results in error - Stack Overflow Using CocoaPods ä½¿ç”¨ä¹‹å‰ä½ è¦ç¡®ä¿ä½ æ‰€æƒ³ç”¨çš„åº“å­˜åœ¨CocoaPodsä¸­ï¼š(æ‹¿AFNetworkingä¸¾ä¾‹)$ pod search AFNetworkingç¬¬ä¸€æ¬¡æœç´¢ä¼šéœ€è¦å»ºç«‹ç´¢å¼•ï¼Œæ¯”è¾ƒæ…¢ä¸€äº›ã€‚ æœç´¢å®Œæˆåä¼šåˆ—ä¸¾å‡ºç»“æœå’Œç‰ˆæœ¬ï¼š 37122577-4CDC-48C9-9B25-4B943D983810 ç„¶åé€šè¿‡åˆ›å»ºPodfileæ–‡ä»¶æ¥æ·»åŠ ä¾èµ–å…³ç³» å…ˆcdè¿›ä½ é¡¹ç›®æ‰€åœ¨çš„ç›®å½•(ç®€ä»‹é‡Œé¢å¯ä»¥ç›´æ¥å¤åˆ¶è·¯å¾„) åˆ©ç”¨vimåˆ›å»ºPodfileæ–‡ä»¶$ vim Podfile ç„¶åè¾“å…¥ï¼š12345platform :ios, '10.0'target 'TargetName' dopod 'AFNetworking', '~&gt; 3.0'end æ–‡å­—çš„æ„æ€æ˜¯ï¼Œå½“å‰AFNetworkingæ”¯æŒçš„iOSæœ€é«˜ç‰ˆæœ¬æ˜¯iOS 10.0ï¼Œâ€™TargetNameâ€™ä¸ºä½ é¡¹ç›®çš„åç§°ï¼Œè¦ä¸‹è½½çš„AFNetworkingç‰ˆæœ¬æ˜¯3.0ä¿å­˜é€€å‡ºã€‚ è¿è¡Œ$ pod installå®Œæˆåä¼šå‡ºç°æç¤ºä½¿ç”¨â€™XXX.xcworkspaceâ€™æ–‡ä»¶æ¥ä»£æ›¿ä¹‹å‰çš„â€™XXX.xcodeprojâ€™æ–‡ä»¶æ‰“å¼€é¡¹ç›®ã€‚æ‰“å¼€é¡¹ç›®åä¼šå‘ç°é‡Œé¢æœ‰äº†æˆ‘ä»¬æƒ³è¦åŠ è¿›æ¥çš„åº“ï¼Œå¯ä»¥#importè¿›æ¥äº†ã€‚ å¢åŠ æ–°çš„åº“å¦‚æœä½¿ç”¨è¿‡ç¨‹ä¸­æˆ‘è¿˜æƒ³æ·»åŠ å…¶ä»–çš„åº“æ€ä¹ˆåŠï¼Œåªè¦åœ¨Podfileé‡Œé¢æ¥ç€æ·»åŠ ï¼Œç„¶åç»ˆç«¯å†æ‰§è¡Œpod installå°±å¯ä»¥äº†ã€‚ æ›´æ–°CocoaPodsä¸­çš„åº“ç¬¬ä¸‰æ–¹åº“ä»¬éƒ½æœ‰äººåœ¨ç»´æŠ¤å‡çº§ï¼Œæˆ‘ä»¬éœ€è¦éš”æ–­æ—¶é—´å°±è¦æ›´æ–°ä¸‹æˆ‘ä»¬å·¥ç¨‹ä¸­ç¬¬ä¸‰æ–¹åº“çš„ç‰ˆæœ¬ã€‚åªéœ€è¦ç»ˆç«¯è¾“å…¥å‘½ä»¤pod updateå°±å¯ä»¥äº†ã€‚ åˆ é™¤CocoaPodsä¸­çš„æŸäº›åº“å½“æˆ‘ä»¬éœ€è¦å»æ‰æŸä¸ªç¬¬ä¸‰æ–¹åº“æ—¶ï¼Œåªéœ€è¦åœ¨Podfileåˆ é™¤è¯¥å¼•å…¥è¯¥åº“çš„è¯­å¥ï¼Œç„¶åæ‰§è¡Œpod updateæˆ–è€…pod installå°±å¯ä»¥äº†ã€‚ å‡çº§CocoaPodssudo gem install cocoapods","categories":[{"name":"iOS","slug":"iOS","permalink":"http://codingdoge.cn/categories/iOS/"}],"tags":[{"name":"Tool","slug":"Tool","permalink":"http://codingdoge.cn/tags/Tool/"}]},{"title":"selfä¸superçš„åŒºåˆ«","slug":"title: selfä¸superçš„åŒºåˆ« ","date":"2017-07-23T15:47:00.000Z","updated":"2018-01-14T16:47:12.060Z","comments":true,"path":"2017/07/23/title: selfä¸superçš„åŒºåˆ« /","link":"","permalink":"http://codingdoge.cn/2017/07/23/title: selfä¸superçš„åŒºåˆ« /","excerpt":"","text":"åŸæ–‡CSDN evilotusæœ‰æ‰€æ•´ç† åœ¨ObjCä¸­çš„ç±»å®ç°ä¸­ç»å¸¸çœ‹åˆ°è¿™ä¸¤ä¸ªå…³é”®å­—â€selfâ€å’Œâ€superâ€ï¼Œä»¥ä»¥å‰oopè¯­è¨€çš„ç»éªŒï¼Œæ‹¿c++ä¸ºä¾‹ï¼Œselfç›¸å½“äºthisï¼Œsuperç›¸å½“äºè°ƒç”¨çˆ¶ç±»çš„æ–¹æ³•ï¼Œè¿™ä¹ˆçœ‹èµ·æ¥æ˜¯å¾ˆå®¹æ˜“ç†è§£çš„ã€‚ä½†æ˜¯å®ƒä»¬çœŸæ­£æ˜¯å¦‚ä½•è°ƒç”¨çš„å‘¢? ä½ çŸ¥é“å—? ä»¥ä¸‹é¢çš„ä»£ç ä¸ºä¾‹ï¼š 12345678910111213141516171819202122232425262728@interface Person:NSObject&#123;trueNSString* name;&#125; (void) setName:(NSString) yourName;@end //Person @interface PersonMe:Person&#123;trueNSUInteger age;&#125; (void) setAge:(NSUInteger) age; (void) setName:(NSString*) yourName andAge:(NSUInteger) age;@end // PersonMe @implementation PersonMe(void) setName:(NSString*) yourName andAge:(NSUInteger) age&#123;true[self setAge:age];true[super setName:yourName];&#125;@end // PersonMe int main(int argc, char* argv[]) &#123;NSAutoreleasePool* pool = [[NSAutoreleasePool alloc] init]PersonMe* me = [[PersonMe alloc] init];[me setName: @&quot;asdf&quot; andAge: 18];[me release];[pool drain];return 0;&#125; ä¸Šé¢æœ‰ç®€å•çš„ä¸¤ä¸ªç±»ï¼Œåœ¨å­ç±»PersonMeä¸­è°ƒç”¨äº†è‡ªå·±ç±»ä¸­çš„setAgeå’Œçˆ¶ç±»ä¸­çš„setNameï¼Œè¿™äº›ä»£ç çœ‹èµ·æ¥å¾ˆå¥½ç†è§£ï¼Œæ²¡ä»€ä¹ˆé—®é¢˜ã€‚ ç„¶åæˆ‘åœ¨setName:andAgeçš„æ–¹æ³•ä¸­åŠ å…¥ä¸¤è¡Œ: 1234567891011NSLog(@&quot;self &apos; class is %@&quot;, [self class]);NSLog(@&quot;super&apos; class is %@&quot;, [super class]);``` è¿™æ ·åœ¨è°ƒç”¨æ—¶ï¼Œä¼šæ‰“å‡ºæ¥è¿™ä¸¤ä¸ªçš„**class**ï¼Œå…ˆçŒœä¸‹å§ï¼Œä¼šæ‰“å°å‡ºä»€ä¹ˆï¼Ÿ æŒ‰ç…§ä»¥å‰*oop*è¯­è¨€çš„ç»éªŒï¼Œè¿™é‡Œåº”è¯¥ä¼šè¾“å‡º:***self &apos; s class is PersonMe super &apos; s class is Person***ä½†æ˜¯ç¼–è¯‘è¿è¡Œåï¼Œå¯ä»¥å‘ç°ç»“æœæ˜¯ï¼š``` // self &apos;s class is PersonMesuper &apos; s class is PersonMe selfçš„classå’Œé¢„æƒ³çš„ä¸€æ ·ï¼Œæ€ä¹ˆsuperçš„classä¹Ÿæ˜¯PersonMe? çœŸç›¸selfæ˜¯ç±»çš„éšè—çš„å‚æ•°ï¼ŒæŒ‡å‘å½“å‰å½“å‰è°ƒç”¨æ–¹æ³•çš„ç±»ï¼Œå¦ä¸€ä¸ªéšè—å‚æ•°æ˜¯_cmdï¼Œä»£è¡¨å½“å‰ç±»æ–¹æ³•çš„selectorã€‚è¿™é‡Œåªå…³æ³¨è¿™ä¸ªselfã€‚superæ˜¯ä¸ªå•¥ï¼Ÿsuperå¹¶ä¸æ˜¯éšè—çš„å‚æ•°ï¼Œå®ƒåªæ˜¯ä¸€ä¸ªâ€œç¼–è¯‘å™¨æŒ‡ç¤ºç¬¦â€ï¼Œå®ƒå’ŒselfæŒ‡å‘çš„æ˜¯ç›¸åŒçš„æ¶ˆæ¯æ¥æ”¶è€…ï¼Œæ‹¿ä¸Šé¢çš„ä»£ç ä¸ºä¾‹ï¼Œä¸è®ºæ˜¯ç”¨[self setName]è¿˜æ˜¯[super setName]ï¼Œæ¥æ”¶â€œsetNameâ€è¿™ä¸ªæ¶ˆæ¯çš„æ¥æ”¶è€…éƒ½æ˜¯PersonMe* meè¿™ä¸ªå¯¹è±¡ã€‚ä¸åŒçš„æ˜¯ï¼Œsuperå‘Šè¯‰ç¼–è¯‘å™¨ï¼Œå½“è°ƒç”¨setNameçš„æ–¹æ³•æ—¶ï¼Œè¦å»è°ƒç”¨çˆ¶ç±»çš„æ–¹æ³•ï¼Œè€Œä¸æ˜¯æœ¬ç±»é‡Œçš„ã€‚ å½“ä½¿ç”¨selfè°ƒç”¨æ–¹æ³•æ—¶ï¼Œä¼šä»å½“å‰ç±»çš„æ–¹æ³•åˆ—è¡¨ä¸­å¼€å§‹æ‰¾ï¼Œå¦‚æœæ²¡æœ‰ï¼Œå°±ä»çˆ¶ç±»ä¸­å†æ‰¾ï¼›è€Œå½“ä½¿ç”¨supervæ—¶ï¼Œåˆ™ä»çˆ¶ç±»**çš„æ–¹æ³•åˆ—è¡¨ä¸­å¼€å§‹æ‰¾ã€‚ç„¶åè°ƒç”¨çˆ¶ç±»çš„è¿™ä¸ªæ–¹æ³•ã€‚ One more stepè¿™ç§æœºåˆ¶åˆ°åº•åº•å±‚æ˜¯å¦‚ä½•å®ç°çš„ï¼Ÿå…¶å®å½“è°ƒç”¨ç±»æ–¹æ³•çš„æ—¶å€™ï¼Œç¼–è¯‘å™¨ä¼šå°†æ–¹æ³•è°ƒç”¨è½¬æˆä¸€ä¸ªCå‡½æ•°æ–¹æ³•è°ƒç”¨ï¼Œappleçš„objcRuntimeRefä¸Šè¯´ï¼š Sending MessagesWhen it encounters a method invocation, the compiler might generate a call to any of several functions to perform the actual message dispatch, depending on the receiver, the return value, and the arguments. You can use these functions to dynamically invoke methods from your own plain C code, or to use argument forms not permitted by NSObjectâ€™s performâ€¦ methods. These functions are declared in /usr/include/objc/objc-runtime.h. objc_msgSend sends a message with a simple return value to an instance of a class. objc_msgSend_stret sends a message with a data-structure return value to an instance ofa class. objc_msgSendSuper sends a message with a simple return value to the superclass of an instance of a class. objc_msgSendSuper_stret sends a message with a data-structure return value to the superclass of an instance of a class. å¯ä»¥çœ‹åˆ°ä¼šè½¬æˆè°ƒç”¨ä¸Šé¢4ä¸ªæ–¹æ³•ä¸­çš„ä¸€ä¸ªï¼Œç”±äº_stretç³»åˆ—çš„å’Œæ²¡æœ‰_stretçš„é‚£ä¸¤ä¸ªç±»ä¼¼ï¼Œå…ˆåªå…³æ³¨objc_msgSendå’Œobjc_msgSendSuperä¸¤ä¸ªæ–¹æ³•ã€‚ å½“ä½¿ç”¨[self setName]è°ƒç”¨æ—¶ï¼Œä¼šä½¿ç”¨objc_msgSendçš„å‡½æ•°ï¼Œå…ˆçœ‹ä¸‹objc_msgSendçš„å‡½æ•°å®šä¹‰: 1id objc_msgSend(id theReceiver, SEL theSelector, ...) ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯æ¶ˆæ¯æ¥æ”¶è€…ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯è°ƒç”¨çš„å…·ä½“ç±»æ–¹æ³•çš„selectorï¼Œåé¢æ˜¯selectoræ–¹æ³•çš„å¯å˜å‚æ•°ã€‚æˆ‘ä»¬å…ˆä¸ç®¡è¿™ä¸ªå¯å˜å‚æ•°ï¼Œä»¥[self setName:]ä¸ºä¾‹ï¼Œç¼–è¯‘å™¨ä¼šæ›¿æ¢æˆè°ƒç”¨objc_msgSendçš„å‡½æ•°è°ƒç”¨ï¼Œå…¶ä¸­theReceiveræ˜¯selfï¼ŒtheSelectoræ˜¯ @selector(setName:)ï¼Œè¿™ä¸ªselectoræ˜¯ä»å½“å‰selfçš„classçš„æ–¹æ³•åˆ—è¡¨å¼€å§‹æ‰¾çš„setNameï¼Œå½“æ‰¾åˆ°åæŠŠå¯¹åº”çš„ selectorä¼ é€’è¿‡å»ã€‚ è€Œå½“ä½¿ç”¨[super setName]è°ƒç”¨æ—¶ï¼Œä¼šä½¿ç”¨objc_msgSendSuperå‡½æ•°ï¼Œçœ‹ä¸‹objc_msgSendSuperçš„å‡½æ•°å®šä¹‰ï¼š 1id objc_msgSendSuper(struct objc_super *super, SEL op, ...) ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ä¸ªobjc_superçš„ç»“æ„ä½“ï¼Œç¬¬äºŒä¸ªå‚æ•°è¿˜æ˜¯ç±»ä¼¼ä¸Šé¢çš„ç±»æ–¹æ³•çš„selectorï¼Œå…ˆçœ‹ä¸‹objc_superè¿™ä¸ªç»“æ„ä½“æ˜¯ä»€ä¹ˆä¸œè¥¿ï¼š struct objc_super { id receiver; Class superClass; }; å¯ä»¥çœ‹åˆ°è¿™ä¸ªç»“æ„ä½“åŒ…å«äº†ä¸¤ä¸ªæˆå‘˜ï¼Œä¸€ä¸ªæ˜¯receiverï¼Œè¿™ä¸ªç±»ä¼¼ä¸Šé¢objc_msgSendçš„ç¬¬ä¸€ä¸ªå‚æ•°receiverï¼Œç¬¬äºŒä¸ªæˆå‘˜æ˜¯è®° å½•å†™superè¿™ä¸ªç±»çš„çˆ¶ç±»æ˜¯ä»€ä¹ˆï¼Œæ‹¿ä¸Šé¢çš„ä»£ç ä¸ºä¾‹ï¼Œå½“ç¼–è¯‘å™¨é‡åˆ°PersonMeé‡ŒsetName:andAgeæ–¹æ³•é‡Œçš„[super setName:]æ—¶ï¼Œå¼€å§‹åšè¿™å‡ ä¸ªäº‹: æ„å»ºobjc_superçš„ç»“æ„ä½“ï¼Œæ­¤æ—¶è¿™ä¸ªç»“æ„ä½“çš„ç¬¬ä¸€ä¸ªæˆå‘˜å˜é‡receiverå°±æ˜¯PersonMe* meï¼Œå’Œselfç›¸åŒã€‚è€Œç¬¬äºŒä¸ªæˆå‘˜å˜é‡superClasså°±æ˜¯æŒ‡ç±»Personï¼Œå› ä¸ºPersonMeçš„è¶…ç±»å°±æ˜¯è¿™ä¸ªPersonã€‚ è°ƒç”¨objc_msgSendSuperçš„æ–¹æ³•ï¼Œå°†è¿™ä¸ªç»“æ„ä½“å’ŒsetNameçš„selä¼ é€’è¿‡å»ã€‚å‡½æ•°é‡Œé¢åœ¨åšçš„äº‹æƒ…ç±»ä¼¼è¿™æ ·ï¼šä»objc_superç»“æ„ä½“æŒ‡å‘çš„superClassçš„æ–¹æ³•åˆ—è¡¨å¼€å§‹æ‰¾setNameçš„selectorï¼Œæ‰¾åˆ°åå†ä»¥ objc_super-&gt;receiverå»è°ƒç”¨è¿™ä¸ªselectorï¼Œå¯èƒ½ä¹Ÿä¼šä½¿ç”¨objc_msgSendè¿™ä¸ªå‡½æ•°ï¼Œä¸è¿‡æ­¤æ—¶çš„ç¬¬ä¸€ä¸ªå‚æ•° theReceiverå°±æ˜¯objc_super-&gt;receiverï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯ä»objc_super-&gt;superClassä¸­æ‰¾åˆ° çš„selector é‡Œé¢çš„è°ƒç”¨æœºåˆ¶å¤§ä½“å°±æ˜¯è¿™æ ·äº†ï¼Œä»¥ä¸Šé¢çš„åˆ†æï¼Œå›è¿‡å¤´æ¥çœ‹å¼€å§‹çš„ä»£ç ï¼Œå½“è¾“å‡º[self class]å’Œ[super class]æ—¶ï¼Œæ˜¯ä¸ªæ€æ ·çš„è¿‡ç¨‹ã€‚ å½“ä½¿ç”¨[self class]æ—¶ï¼Œè¿™æ—¶çš„selfæ˜¯PersonMeï¼Œåœ¨ä½¿ç”¨objc_msgSendæ—¶ï¼Œç¬¬ä¸€ä¸ªå‚æ•°æ˜¯receiverä¹Ÿå°±æ˜¯selfï¼Œä¹Ÿæ˜¯ PersonMe* meè¿™ä¸ªå®ä¾‹ã€‚ç¬¬äºŒä¸ªå‚æ•°ï¼Œè¦å…ˆæ‰¾åˆ°classè¿™ä¸ªæ–¹æ³•çš„selectorï¼Œå…ˆä»PersonMeè¿™ä¸ªç±»å¼€å§‹æ‰¾ï¼Œæ²¡æœ‰ï¼Œç„¶ååˆ°PersonMeçš„çˆ¶ç±» Personä¸­å»æ‰¾ï¼Œä¹Ÿæ²¡æœ‰ï¼Œå†å»Personçš„çˆ¶ç±»NSObjectå»æ‰¾ï¼Œä¸€å±‚ä¸€å±‚å‘ä¸Šæ‰¾ä¹‹åï¼Œåœ¨NSObjectçš„ç±»ä¸­å‘ç°è¿™ä¸ªclassæ–¹æ³•ï¼Œè€Œ NSObjectçš„è¿™ä¸ªclassæ–¹æ³•ï¼Œå°±æ˜¯è¿”å›receiverçš„ç±»åˆ«ï¼Œæ‰€ä»¥è¿™é‡Œè¾“å‡ºPersonMeã€‚ å½“ä½¿ç”¨[super class]æ—¶ï¼Œè¿™æ—¶è¦è½¬æ¢æˆobjc_msgSendSuperçš„æ–¹æ³•ã€‚å…ˆæ„é€ objc_superçš„ç»“æ„ä½“å§ï¼Œç¬¬ä¸€ä¸ªæˆå‘˜å˜é‡å°±æ˜¯self, ç¬¬äºŒä¸ªæˆå‘˜å˜é‡æ˜¯Personï¼Œç„¶åè¦æ‰¾classè¿™ä¸ªselectorï¼Œå…ˆå»superClassä¹Ÿå°±æ˜¯Personä¸­å»æ‰¾ï¼Œæ²¡æœ‰ï¼Œç„¶åå»Person çš„çˆ¶ç±»ä¸­å»æ‰¾ï¼Œç»“æœè¿˜æ˜¯åœ¨NSObjectä¸­æ‰¾åˆ°äº†ã€‚ç„¶åå†…éƒ¨ä½¿ç”¨å‡½æ•°objc_msgSend(objc_super-&gt;receiver, @selector(class)) å»è°ƒç”¨ï¼Œæ­¤æ—¶å·²ç»å’Œæˆ‘ä»¬ç”¨[self class]è°ƒç”¨æ—¶ç›¸åŒäº†ï¼Œæ­¤æ—¶çš„receiverè¿˜æ˜¯PersonMe* meï¼Œæ‰€ä»¥è¿™é‡Œè¿”å›çš„ä¹Ÿæ˜¯PersonMeã€‚ Furthor more åœ¨ç±»çš„æ–¹æ³•åˆ—è¡¨å¯»æ‰¾ä¸€ä¸ªæ–¹æ³•æ—¶ï¼Œè¿˜ç‰µæ¶‰åˆ°ä¸€ä¸ªæ¦‚å¿µç±»å¯¹è±¡çš„isaæŒ‡é’ˆå’Œobjcçš„meta-classæ¦‚å¿µï¼Œè¿™é‡Œå°±ä¸å†è¯¦ç»†ä»‹ç»ã€‚","categories":[{"name":"iOS","slug":"iOS","permalink":"http://codingdoge.cn/categories/iOS/"}],"tags":[{"name":"OC","slug":"OC","permalink":"http://codingdoge.cn/tags/OC/"},{"name":"è½¬è½½","slug":"è½¬è½½","permalink":"http://codingdoge.cn/tags/è½¬è½½/"}]},{"title":"è§†é¢‘å¼€å‘","slug":"title: è§†é¢‘å¼€å‘","date":"2017-07-23T15:47:00.000Z","updated":"2018-01-13T05:06:57.320Z","comments":true,"path":"2017/07/23/title: è§†é¢‘å¼€å‘/","link":"","permalink":"http://codingdoge.cn/2017/07/23/title: è§†é¢‘å¼€å‘/","excerpt":"","text":"ä¸‹é¢æœƒä»‹ç´¹è¦–é »çš„ä¸€äº›åŸºæœ¬çŸ¥è­˜ï¼Œå’Œåœ¨iOSä¸Šå¯¦ç¾è¦–é »æ’­æ”¾å’Œç·©å­˜çš„å¹¾ç¨®æ–¹æ¡ˆã€‚ è½¯è§£ç å’Œç¡¬è§£ç GPUè§£ç å°±æ˜¯æ‰€è°“çš„ç¡¬è§£ç ï¼ŒCPUè§£ç å°±æ˜¯è½¯è§£ç ã€‚iOSæä¾›çš„æ’­æ”¾å™¨ç±»ä½¿ç”¨çš„æ˜¯ç¡¬è§£ç ï¼Œæ‰€ä»¥è§†é¢‘æ’­æ”¾å¯¹CPUä¸ä¼šæœ‰å¾ˆå¤§çš„å‹åŠ›ï¼Œä½†æ˜¯æ”¯æŒçš„æ’­æ”¾æ ¼å¼æ¯”è¾ƒå•ä¸€ï¼Œä¸€èˆ¬å°±æ˜¯MP4ã€MOVã€M4Vè¿™å‡ ä¸ªã€‚ HTTP Live StreamingHTTP Live Streamingï¼ˆç¼©å†™æ˜¯ HLSï¼‰æ˜¯ä¸€ä¸ªç”±è‹¹æœå…¬å¸æå‡ºçš„åŸºäºHTTPçš„æµåª’ä½“ç½‘ç»œä¼ è¾“åè®®ã€‚å®ƒçš„å·¥ä½œåŸç†æ˜¯æŠŠæ•´ä¸ªæµåˆ†æˆä¸€ä¸ªä¸ªå°çš„åŸºäºHTTPçš„æ–‡ä»¶æ¥ä¸‹è½½ï¼Œæ¯æ¬¡åªä¸‹è½½ä¸€äº›ã€‚å½“åª’ä½“æµæ­£åœ¨æ’­æ”¾æ—¶ï¼Œå®¢æˆ·ç«¯å¯ä»¥é€‰æ‹©ä»è®¸å¤šä¸åŒçš„å¤‡ç”¨æºä¸­ä»¥ä¸åŒçš„é€Ÿç‡ä¸‹è½½åŒæ ·çš„èµ„æºï¼Œå…è®¸æµåª’ä½“ä¼šè¯é€‚åº”ä¸åŒçš„æ•°æ®é€Ÿç‡ã€‚æ”¯æŒçš„è§†é¢‘æµç¼–ç ä¸ºH.264ã€‚æˆ‘ä»¬åœ¨è§†é¢‘ç½‘ç«™ä¸Šçœ‹åˆ°çš„M3U8åç¼€çš„æ’­æ”¾é“¾æ¥å°±æ˜¯ä½¿ç”¨HLSåè®®çš„è§†é¢‘ã€‚HLSä¼˜ç‚¹ï¼Œ1ã€çœ‹å®Œä¸€æ®µç¼“å­˜ä¸€æ®µï¼Œé˜²æ­¢åªçœ‹ä¸€æ®µè§†é¢‘ä½†æ˜¯æŠŠæ•´ä¸ªè§†é¢‘æ–‡ä»¶éƒ½ç¼“å­˜ä¸‹æ¥çš„ç”¨æˆ·ï¼Œå‡å°‘æœåŠ¡å™¨å‹åŠ›å’ŒèŠ‚çœæµé‡ã€‚2ã€æ ¹æ®ç”¨æˆ·ç½‘é€Ÿåˆ‡æ¢ä¸åŒçš„ç ç‡ï¼Œå…¼é¡¾æµç¨‹æ€§å’Œæ¸…æ™°åº¦ã€‚ æ’­æ”¾å®ç°è§†é¢‘æ’­æ”¾çš„ä¸¤ä¸ªæ–¹æ¡ˆã€‚ ä¸€ã€è‡ªå·±å®ç°å¯¹æ•°æ®ç¼–ç è§£ç å¯ä»¥åœ¨ä¸€äº›å¼€æºæ’­æ”¾å™¨ä¸Šè¿›è¡ŒäºŒæ¬¡å¼€å‘ï¼Œå¦‚Bilibiliçš„ijkplayerï¼Œæˆ–è€…ç›´æ¥å¯¹FFmpegå¼€å‘ï¼Œä¼˜ç‚¹åœ¨æ•´ä¸ªæ’­æ”¾è¿‡ç¨‹å¯æ§ï¼Œä¸ºåç»­è¿›è¡Œç¼“å­˜ã€æµé‡æ§åˆ¶ã€ç ç‡åˆ‡æ¢ç­‰å¼€å‘æä¾›äº†åŸºç¡€ï¼Œç¼ºç‚¹æ˜¯å¤æ‚ï¼Œè¦æ±‚é«˜ï¼Œå·¥ç¨‹é‡å¤§ã€‚ äºŒã€AVFoundationMedia Assets, Playback and Editing. ä½¿ç”¨Appleè‡ªæœ‰æ¡†æ¶ã€‚ AVAsset AVAsset is an abstract, immutable class used to model timed audiovisual media such as videos and sounds. An asset may contain one or more tracks that are intended to be presented or processed together, each of a uniform media type, including but not limited to audio, video, text, closed captions, and subtitles. Audiovisual mediaçš„èµ„æºç±»ï¼Œé€šå¸¸é€šè¿‡AVURLAssetç”¨URLæ¥å®ä¾‹åŒ–ï¼Œå¯ä»¥ç”¨Atom Inspector(ä¸€ä¸ªAppleæä¾›çš„ç”¨æ¥æŸ¥çœ‹è§†é¢‘ä¿¡æ¯çš„å·¥å…·)æ¥è§‚å¯Ÿä¸€ä¸ªè§†é¢‘çš„å±æ€§ï¼Œå†å»AVAssetä¸­å¯¹åº”å…¶å±æ€§ã€‚ AVAssetå±æ€§ è§†é¢‘æ–‡ä»¶å±æ€§ duration: CMTime duration, timescaleæ—¶é•¿å’Œæ—¶é—´å°ºåº¦ preferredRate: Float é»˜è®¤é€Ÿåº¦ preferredVolume: Float é»˜è®¤éŸ³é‡ creationDate: AVMetadataItem? è§†é¢‘åˆ›å»ºæ—¶é—´ tracks: [AVAssetTrack] è½¨é“ trackGroups: [AVAssetTrackGroup] è½¨é“ç»„ lyrics: String? å½“å‰è¯­è¨€ç¯å¢ƒåˆé€‚çš„æ­Œè¯ metadata: [AVMetadataItem] å…ƒæ•°æ® AVPlayer An AVPlayer is a controller object used to manage the playback and timing of a media asset. It provides the interface to control the playerâ€™s transport behavior such as its ability to play, pause, change the playback rate, and seek to various points in time within the mediaâ€™s timeline. You can use an AVPlayer to play local and remote file-based media, such as QuickTime movies and MP3 audio files, as well as audiovisual media served using HTTP Live Streaming. AVPlayeræ˜¯ä¸€ä¸ªæ§åˆ¶å¯¹è±¡ç”¨äºç®¡ç†åª’ä½“assetçš„æ’­æ”¾ï¼Œå®ƒæä¾›äº†ç›¸å…³çš„æ¥å£æ§åˆ¶æ’­æ”¾å™¨çš„è¡Œä¸ºï¼Œæ¯”å¦‚ï¼šæ’­æ”¾ã€æš‚åœã€æ”¹å˜æ’­æ”¾çš„é€Ÿç‡ã€è·³è½¬åˆ°åª’ä½“æ—¶é—´è½´ä¸Šçš„æŸä¸€ä¸ªç‚¹ï¼ˆç®€å•ç†è§£å°±æ˜¯å®ç°æ‹–åŠ¨åŠŸèƒ½æ˜¾ç¤ºå¯¹åº”çš„è§†é¢‘ä½ç½®å†…å®¹ï¼‰ã€‚æˆ‘ä»¬èƒ½å¤Ÿä½¿ç”¨AVPlayeræ’­æ”¾æœ¬åœ°å’Œè¿œç¨‹çš„åª’ä½“æ–‡ä»¶ï¼ˆä½¿ç”¨ HTTP Live Streamingï¼‰ï¼Œæ¯”å¦‚ï¼š QuickTime movies å’Œ MP3 audio filesï¼Œæ‰€ä»¥AVPlayerå¯ä»¥æ»¡è¶³éŸ³è§†é¢‘æ’­æ”¾çš„åŸºæœ¬éœ€æ±‚ã€‚ AVFoundationçš„å±‚æ¬¡ AVPlayerItem AVPlayerItem models the timing and presentation state of an asset played by an AVPlayer object. It provides the interface to seek to various times in the media, determine its presentation size, identify its current time, and much more. AVPlayerItemæ˜¯ä¸€ä¸ªè´Ÿè´£å¤„ç†AVAssetçš„èµ„æºå¹¶é€šè¿‡AVPlayeræ¥æ’­æ”¾çš„è½½ä½“ï¼Œæä¾›äº†seekã€ç¡®å®šæ˜¾ç¤ºå¤§å°ã€IDã€æ—¶é—´ç­‰çš„æ¥å£ã€‚ AVPlayerLayer AVPlayerLayer is a subclass of CALayer to which an AVPlayer object can direct its visual output. It can be used as the backing layer for a UIView or NSView or can be manually added to the layer hierarchy to present your video content on screen. è´Ÿè´£AVPlayerçš„è§†é¢‘è¾“å‡ºå±•ç¤ºã€‚ ä¾èµ–å…³ç³»å›¾ ç®€å•ä½¿ç”¨1234567891011class AVPlayerTestView: UIView &#123; let view: UIView? = nil func initPlayerView() &#123; guard let url = URL.init(string: &quot;http://meipu1.video.meipai.com/5e81c08e-2850-4fbd-bfc4-4ded297f9f1c.mp&quot;) else &#123; return &#125; let asset = AVAsset.init(url: url) let item = AVPlayerItem.init(asset: asset) let player = AVPlayer.init(playerItem: item) let playerLayer = AVPlayerLayer.init(layer: player) view?.layer.addSublayer(playerLayer) &#125;&#125; è®¾ç½®å¥½ä¸€ä¸ªAVPlayerçš„ä¾èµ–å…³ç³»å’Œè¾“å‡ºå›¾å±‚åï¼ŒAVPlayerItemä¼šæ ¹æ®ä½ çš„URLå»è¯·æ±‚æ•°æ®ï¼Œè‡ªå·±å†…éƒ¨åšç¼“å†²ç„¶åæ’­æ”¾ã€‚æˆ‘ä»¬éœ€è¦åšçš„æ˜¯ç”¨KVOç›‘å¬AVPlayerItemå†…éƒ¨å‡ ä¸ªå…³é”®å±æ€§çš„çŠ¶æ€ï¼Œç„¶ååšå‡ºæˆ‘ä»¬çš„å¤„ç†ã€‚ AVPlayerItemå±æ€§ çŠ¶æ€ status: AVPlayerItemStatus .unknown: AVPlayerItemStatus æœªçŸ¥çŠ¶æ€ .readyToPlay: AVPlayerItemStatus å‡†å¤‡å¥½å»æ’­æ”¾ .failed: AVPlayerItemStatus èµ„æºæ— æ³•è¢«æ’­æ”¾ loadedTimeRanges: [NSValue] åŠ è½½äº†çš„èµ„æºçš„æ—¶é—´èŒƒå›´(ä¸€èˆ¬ç”¨æ¥æ›´æ–°ç¼“å†²UI) playbackBufferEmpty: Bool æ²¡æœ‰ç¼“å†²æ•°æ® playbackLikelyToKeepUp: Bool æœ‰è¶³å¤Ÿçš„ç¼“å†²å¤§è‡´èƒ½æ’­æ”¾æ— å¡é¡¿ General State Observations: You can use Key-value observing (KVO) to observe state changes to many of the playerâ€™s dynamic properties, such as its currentItem or its playback rate. You should register and unregister for KVO change notifications on the main thread. This avoids the possibility of receiving a partial notification if a change is being made on another thread. AVFoundation invokes observeValue(forKeyPath:of:change:context:) on the main thread, even if the change operation is made on another thread. åŸºæœ¬çŠ¶æ€è§‚å¯Ÿè€…ï¼šä½ èƒ½å¤Ÿä½¿ç”¨KVOæ¥è§‚å¯ŸplayeråŠ¨æ€å±æ€§çš„çŠ¶æ€æ”¹å˜ï¼Œæ¯”å¦‚åƒï¼š currentItem æˆ–è€…å®ƒçš„æ’­æ”¾é€Ÿåº¦ã€‚æˆ‘ä»¬åº”è¯¥åœ¨ä¸»çº¿ç¨‹æ³¨å†Œå’Œå»é™¤KVOï¼Œè¿™èƒ½å¤Ÿé¿å…å¦‚æœåœ¨å…¶å®ƒçº¿ç¨‹å‘é€æ”¹å˜è€Œå¯¼è‡´æ¥æ”¶å±€éƒ¨é€šçŸ¥ï¼Œå½“å‘ç”Ÿé€šçŸ¥ï¼ŒAVFoundationå°†åœ¨ä¸»çº¿ç¨‹è°ƒç”¨observeValue(forKeyPath:of:change:context:) æ–¹æ³•ï¼Œå³ä½¿æ˜¯åœ¨å…¶ä»–çº¿ç¨‹å‘ç”Ÿã€‚ KVOèƒ½å¤Ÿå¾ˆå¥½çš„è§‚å¯Ÿç”Ÿæˆçš„çŠ¶æ€ï¼Œä½†æ˜¯å¹¶ä¸èƒ½å¤Ÿè§‚å¯Ÿæ’­æ”¾æ—¶é—´çš„æ”¹å˜ï¼Œæ‰€ä»¥AVPlayeræä¾›äº†ä¸¤ä¸ªæ–¹æ³•æ¥è§‚å¯Ÿæ—¶é—´çš„æ”¹å˜: 1234567891011/* @param interval è°ƒç”¨blockçš„æ—¶é—´é—´éš” @param queue æ¨èä½¿ç”¨ä¸²è¡Œé˜Ÿåˆ—ï¼Œæ”¾åœ¨ä¸»çº¿ç¨‹å°±è¡Œäº†ï¼Œå¹¶è¡Œé˜Ÿåˆ—ä¼šäº§ç”Ÿä¸æ˜ç¡®çš„ç»“æœ*/func addPeriodicTimeObserver(forInterval interval: CMTime, queue: DispatchQueue?, using block: @escaping (CMTime) -&gt; Void) -&gt; Any &#123; // å¯ä»¥åœ¨é‡Œé¢å»è®¾ç½®æ§åˆ¶çŠ¶æ€ï¼Œåˆ·æ–°è¿›åº¦UI&#125;func addBoundaryTimeObserver(forTimes times: [NSValue], queue: DispatchQueue?, using block: @escaping () -&gt; Void) -&gt; Any Tips: åˆ›å»ºå¤šä¸ªAVPlayerLayeråªæœ‰æœ€è¿‘çš„layeræ‰ä¼šæ˜¾ç¤ºè§†é¢‘å¸§ å¯ä»¥åˆ›å»ºå¤šä¸ªAVPlayerItemæ¥æ›¿æ¢AVPlayerçš„å½“å‰itemï¼Œfunc replaceCurrentItem(with item: AVPlayerItem?) ç›‘å¬åè¦æ³¨æ„æ§åˆ¶ç›‘å¬çš„ç”Ÿå‘½å‘¨æœŸ ç¼“å­˜Appleè‡ªæœ‰çš„æ¡†æ¶æ˜¯æ²¡æœ‰æä¾›ç¼“å­˜åŠŸèƒ½çš„ï¼ŒAVPlayerä¹Ÿæ²¡æœ‰æä¾›ç›´æ¥è·å–å…¶ä¸‹è½½æ•°æ®çš„æ¥å£ï¼Œæ‰€ä»¥æƒ³åšç¼“å­˜åªèƒ½è‡ªå·±æ¥å®Œæ•´çš„å®ç°ã€‚ä¸‹é¢æœ‰å‡ ä¸ªæ–¹æ¡ˆã€‚ ä¸€ã€è‡ªå·±å®ç°çš„æ’­æ”¾å™¨è¿™ç§æƒ…å†µå¤§å¤šæ˜¯æ ¹æ®ä¸‹è½½æ¥çš„æ•°æ®è§£ç æ’­æ”¾ï¼Œä¸‹è½½çš„æ—¶å€™åšä¸‹ç¼“å­˜å°±å¥½äº† äºŒã€è‡ªå¸¦æ’­æ”¾å™¨+LocalServeråœ¨iOSæœ¬åœ°å¼€å¯Local ServeræœåŠ¡ï¼Œç„¶åMPMoviePlayerControllerè¯·æ±‚æœ¬åœ°Local ServeræœåŠ¡ã€‚æœ¬åœ°Local ServeræœåŠ¡å†ä¸åœçš„å»å¯¹åº”çš„è§†é¢‘åœ°å€è·å–è§†é¢‘æµã€‚æœ¬åœ°Local Serverè¯·æ±‚çš„æ—¶å€™ï¼Œå°±å¯ä»¥æŠŠè§†é¢‘æµç¼“å­˜åœ¨æœ¬åœ°ã€‚Demoæ¥æº:Code4App ä¸‰ã€AVPlayer+AVMutableComposition+AVAssetExportSessionåŸç†æ˜¯ç›´æ¥ç»™AVPlayerä¼ URLï¼Œè®©å…¶å†…éƒ¨è‡ªå·±å»å¤„ç†æ•°æ®ä¸‹è½½ï¼Œç„¶åé€šè¿‡AVMutableCompositionå’ŒAVAssetExportSessionä»AVAssetæå–è§†é¢‘çš„æ•°æ®è¿›è¡Œç¼“å­˜ã€‚ AVMutableComposition AVMutableComposition is a mutable subclass of AVComposition you use when you want to create a new composition from existing assets. You can add and remove tracks, and you can add, remove, and scale time ranges. ä½œç”¨æ˜¯ä»ç°æœ‰çš„AVAssetä¸­åˆ›å»ºå‡ºä¸€ä¸ªæ–°çš„AVCompositionï¼Œä½¿ç”¨è€…èƒ½å¤Ÿä»åˆ«çš„assetä¸­æå–ä»–ä»¬çš„éŸ³é¢‘è½¨é“æˆ–è§†é¢‘è½¨é“ï¼Œå¹¶ä¸”æŠŠå®ƒä»¬æ·»åŠ åˆ°æ–°å»ºçš„compositionä¸­ã€‚ AVAssetExportSession An AVAssetExportSession object transcodes the contents of an AVAsset source object to create an output of the form described by a specified export preset. ä½œç”¨æ˜¯æŠŠAVAssetè§£ç è¾“å‡ºåˆ°æœ¬åœ°æ–‡ä»¶ä¸­ã€‚ å…³é”®éœ€è¦æŠŠåŸå…ˆçš„AVAsset(AVURLAsset)å®ç°çš„æ•°æ®æå–å‡ºæ¥åæ‹¼æ¥æˆå¦ä¸€ä¸ªAVAsset(AVComposition)çš„æ•°æ®ç„¶åè§£ç è¾“å‡ºï¼Œç”±äºé€šè¿‡ç½‘ç»œurlä¸‹è½½ä¸‹æ¥çš„è§†é¢‘æ²¡æœ‰ä¿å­˜è§†é¢‘çš„åŸå§‹æ•°æ®ï¼ˆè‹¹æœæ²¡æœ‰æš´éœ²æ¥å£ç»™æˆ‘ä»¬è·å–ï¼‰ï¼Œä¸‹è½½åæ’­æ”¾çš„avassetä¸èƒ½ä½¿ç”¨AVAssetExportSessionè¾“å‡ºåˆ°æœ¬åœ°æ–‡ä»¶ï¼Œè¦æ›²çº¿åœ°æŠŠä¸‹è½½ä¸‹æ¥çš„è§†é¢‘é€šè¿‡é‡æ„æˆå¦å¤–ä¸€ä¸ªAVAssetå®ä¾‹æ‰èƒ½è¾“å‡ºã€‚ 12345678910111213141516171819202122232425NSString *documentDirectory = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES)[0];NSString *myPathDocument = [documentDirectory stringByAppendingPathComponent:[NSString stringWithFormat:@&quot;%@.mp4&quot;,[_source.videoUrl MD5]]];NSURL *fileUrl = [NSURL fileURLWithPath:myPathDocument];if (asset != nil) &#123;AVMutableComposition *mixComposition = [[AVMutableComposition alloc]init];AVMutableCompositionTrack *firstTrack = [mixComposition addMutableTrackWithMediaType:AVMediaTypeVideo preferredTrackID:kCMPersistentTrackID_Invalid];[firstTrack insertTimeRange:CMTimeRangeMake(kCMTimeZero, asset.duration) ofTrack:[[asset tracksWithMediaType:AVMediaTypeVideo]objectAtIndex:0] atTime:kCMTimeZero error:nil];AVMutableCompositionTrack *audioTrack = [mixComposition addMutableTrackWithMediaType:AVMediaTypeAudio preferredTrackID:kCMPersistentTrackID_Invalid];[audioTrack insertTimeRange:CMTimeRangeMake(kCMTimeZero, asset.duration) ofTrack:[[asset tracksWithMediaType:AVMediaTypeAudio]objectAtIndex:0] atTime:kCMTimeZero error:nil];AVAssetExportSession *exporter = [[AVAssetExportSession alloc]initWithAsset:mixComposition presetName:AVAssetExportPresetHighestQuality];exporter.outputURL = fileUrl;if (exporter.supportedFileTypes) &#123;exporter.outputFileType = [exporter.supportedFileTypes objectAtIndex:0] ;exporter.shouldOptimizeForNetworkUse = YES;[exporter exportAsynchronouslyWithCompletionHandler:^&#123;&#125;];&#125;&#125; å››ã€AVPlayer+AVAssetResourceLoaderAVAssetResourceLoadingRequest An AVAssetResourceLoader object mediates resource requests from an AVURLAsset object with a delegate object that you provide. When a request arrives, the resource loader asks your delegate if it is able to handle the request and reports the results back to the asset.AVAssetResourceLoaderåè°ƒæ¥è‡ªAVURLAssetçš„èµ„æºè¯·æ±‚ï¼Œä½ éœ€è¦å®ç°å®ƒçš„delegateã€‚å½“æ”¶åˆ°ä¸€ä¸ªè¯·æ±‚æ—¶ï¼ŒResourceLoaderè¯¢é—®ä½ çš„delegateæ˜¯å¦èƒ½å¤„ç†å¹¶å°†ç»“æœè¿”å›ç»™assetã€‚ AVPlayerå’ŒAVAssetResourceLoaderçš„å±‚æ¬¡ç»“æ„ AVAssetResourceLoaderé€šè¿‡ä½ æä¾›çš„å§”æ‰˜å¯¹è±¡å»è°ƒèŠ‚AVURLAssetæ‰€éœ€è¦çš„åŠ è½½èµ„æºã€‚è€Œå¾ˆé‡è¦çš„ä¸€ç‚¹æ˜¯ï¼ŒAVAssetResourceLoaderä»…åœ¨AVURLAssetä¸çŸ¥é“å¦‚ä½•å»åŠ è½½è¿™ä¸ªURLèµ„æºæ—¶æ‰ä¼šè¢«è°ƒç”¨ï¼Œå°±æ˜¯è¯´ä½ æä¾›çš„å§”æ‰˜å¯¹è±¡åœ¨AVURLAssetä¸çŸ¥é“å¦‚ä½•åŠ è½½èµ„æºæ—¶æ‰ä¼šå¾—åˆ°è°ƒç”¨ã€‚ä¸€èˆ¬æˆ‘ä»¬å¯ä»¥æ›´æ”¹URLçš„schemeç”¨æ¥éšè—çœŸå®çš„URLã€‚å¦‚ï¼š å‚è€ƒiOSå¼€å‘ç³»åˆ—â€“éŸ³é¢‘æ’­æ”¾ã€å½•éŸ³ã€è§†é¢‘æ’­æ”¾ã€æ‹ç…§ã€è§†é¢‘å½•åˆ¶AVplayerå®ç°æ’­æ”¾æœ¬åœ°å’Œç½‘ç»œè§†é¢‘ï¼ˆSwift3.0ï¼‰iOSè§†é¢‘æµå¼€å‘ï¼ˆ2ï¼‰â€”è§†é¢‘æ’­æ”¾iOSéŸ³é¢‘æ’­æ”¾ (ä¹)ï¼šè¾¹æ’­è¾¹ç¼“å­˜iOSéŸ³è§†é¢‘å®ç°è¾¹ä¸‹è½½è¾¹æ’­æ”¾AVFoundation(äºŒ)ï¼šæ ¸å¿ƒAVAssetAVFoundationç¼–ç¨‹æŒ‡å—2-ç”¨AVPlayeræ’­æ”¾è§†é¢‘AV Foundationç³»åˆ—ï¼ˆäº”ï¼‰åª’ä½“ç»„åˆ","categories":[{"name":"iOS","slug":"iOS","permalink":"http://codingdoge.cn/categories/iOS/"}],"tags":[{"name":"Swift","slug":"Swift","permalink":"http://codingdoge.cn/tags/Swift/"}]},{"title":"æœ‰é™çŠ¶æ€æœºåœ¨iOSä¸­çš„åº”ç”¨","slug":"title: æœ‰é™çŠ¶æ€æœºåœ¨iOSä¸­çš„åº”ç”¨","date":"2017-07-23T15:47:00.000Z","updated":"2018-01-13T05:06:26.865Z","comments":true,"path":"2017/07/23/title: æœ‰é™çŠ¶æ€æœºåœ¨iOSä¸­çš„åº”ç”¨/","link":"","permalink":"http://codingdoge.cn/2017/07/23/title: æœ‰é™çŠ¶æ€æœºåœ¨iOSä¸­çš„åº”ç”¨/","excerpt":"","text":"æœ‰é™çŠ¶æ€æœº(Finite-State Machine, FSM)ï¼Œæ˜¯è¡¨ç¤ºæœ‰é™ä¸ªçŠ¶æ€ä»¥åŠåœ¨è¿™äº›çŠ¶æ€ä¹‹é—´çš„è½¬ç§»å’ŒåŠ¨ä½œç­‰è¡Œä¸ºçš„æ•°å­¦æ¨¡å‹ã€‚ å…¶å®æˆ‘ä»¬å¹³å¸¸å’Œå¾ˆå¤šçŠ¶æ€æœºéƒ½æ‰“è¿‡äº¤é“ï¼Œæ¯”å¦‚æ­£åˆ™è¡¨è¾¾å¼ã€ç½‘ç»œåè®®ï¼ˆå¦‚TCPåè®®çŠ¶æ€æœºï¼‰ã€æ¸¸æˆè®¾è®¡ã€å­—ç¬¦ä¸²åŒ¹é…ç­‰ç­‰ï¼Œå¯èƒ½å¤§å¤šæ•°æ—¶å€™æˆ‘ä»¬éƒ½æ²¡æ„è¯†åˆ°ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬ç®€ç•¥äº†è§£ä¸‹çŠ¶æ€æœºã€‚ åŸºæœ¬æ¦‚å¿µ çŠ¶æ€(state): æŒ‡çš„æ˜¯å¯¹è±¡åœ¨å…¶ç”Ÿå‘½å‘¨æœŸä¸­çš„ä¸€ç§çŠ¶å†µï¼Œå¤„äºæŸä¸ªç‰¹å®šçŠ¶æ€ä¸­çš„å¯¹è±¡å¿…ç„¶ä¼šæ»¡è¶³æŸäº›æ¡ä»¶ã€æ‰§è¡ŒæŸäº›åŠ¨ä½œæˆ–è€…æ˜¯ç­‰å¾…æŸäº›äº‹ä»¶ï¼Œè€Œä¸”çŠ¶æ€æ˜¯ç›¸å¯¹ç¨³å®šçš„ï¼Œå¦‚æœæ²¡æœ‰å¤–éƒ¨æ¡ä»¶çš„è§¦å‘ï¼Œä¸€ä¸ªçŠ¶æ€ä¼šä¸€ç›´æŒç»­ä¸‹å»ã€‚ äº‹ä»¶(event): æŒ‡çš„æ˜¯å¯¹çŠ¶æ€æœºæ¥è®²æ˜¯æœ‰æ„ä¹‰çš„é‚£äº›äº‹æƒ…ã€‚äº‹ä»¶é€šå¸¸ä¼šå¼•èµ·çŠ¶æ€çš„å˜è¿ï¼Œä¿ƒä½¿çŠ¶æ€æœºä»ä¸€ç§çŠ¶æ€åˆ‡æ¢åˆ°å¦ä¸€ç§çŠ¶æ€ã€‚ è½¬æ¢(transition): æŒ‡çš„æ˜¯ä¸¤ä¸ªçŠ¶æ€ä¹‹é—´çš„ä¸€ç§å…³ç³»ï¼Œè¡¨æ˜å¯¹è±¡å°†åœ¨ç¬¬ä¸€ä¸ªçŠ¶æ€ä¸­æ‰§è¡Œä¸€å®šçš„åŠ¨ä½œï¼Œå¹¶å°†åœ¨æŸä¸ªäº‹ä»¶å‘ç”Ÿçš„åŒæ—¶æŸä¸ªç‰¹å®šæ¡ä»¶æ»¡è¶³æ—¶è¿›å…¥ç¬¬äºŒä¸ªçŠ¶æ€ã€‚ åŠ¨ä½œ(action): æŒ‡çš„æ˜¯çŠ¶æ€æœºä¸­å¯ä»¥æ‰§è¡Œçš„é‚£äº›æ“ä½œï¼Œå½“äº‹ä»¶è¢«æ»¡è¶³æˆ–è€…çŠ¶æ€å˜è¿æ—¶æ‰§è¡ŒåŠ¨ä½œï¼ŒåŠ¨ä½œä¸æ˜¯å¿…éœ€çš„ã€‚ å¦‚ä¸‹å›¾çŠ¶æ€è¡¨ï¼š å…³äºçŠ¶æ€æœºçš„è¯¦ç»†çŸ¥è¯†å¯ä»¥å‚è€ƒï¼šUMLçŠ¶æ€å›¾çš„å®ç”¨C/C++è®¾è®¡ERLANG åœ¨iOSä¸­çš„ä½¿ç”¨èƒŒæ™¯å‡è®¾æˆ‘ä»¬è¦è®¾è®¡ä¸€æ¬¾ç½‘ç»œè§†é¢‘æ’­æ”¾å™¨ï¼Œæœ‰åŸºæœ¬çš„æ’­æ”¾ã€æš‚åœåŠŸèƒ½ï¼Œå½“ç¼“å†²å¥½æ—¶å¯ä»¥è¿›è¡Œæ’­æ”¾ï¼Œå½“URLé”™è¯¯æˆ–è€…è§†é¢‘èµ„æºé”™è¯¯æ—¶æ’­æ”¾å¤±è´¥ï¼Œæˆ‘ä»¬å‘ç°ï¼Œå½“æˆ‘ä»¬å»æè¿°ä¸€ä¸ªäº‹ç‰©ä»¥åŠå®ƒçš„åŠŸèƒ½æ—¶ï¼Œæ€»æ˜¯ç¦»ä¸å¼€å®ƒçš„çŠ¶æ€ï¼Œå¦‚è¿™ä¸ªæ’­æ”¾å™¨ï¼Œæˆ‘ä»¬å¯ä»¥å®šä¹‰å®ƒæœ‰æ’­æ”¾å¤±è´¥ã€ç¼“å†²ä¸­ã€å°†è¦æ’­æ”¾â€¦ç­‰ç­‰çŠ¶æ€ã€‚ è®¾è®¡æˆ‘ä»¬å¯ä»¥ç”¨çŠ¶æ€æœºå»å®ç°è¿™æ ·çš„åŠŸèƒ½ã€‚ å…ˆè®¾å®šæ’­æ”¾å™¨å¯èƒ½å‡ºç°çš„çŠ¶æ€ï¼š 12345678enum VideoPlayerState &#123; case failed, // æ’­æ”¾å¤±è´¥ buffering, // ç¼“å†²ä¸­ readyToPlay, // å°†è¦æ’­æ”¾ playing, // æ’­æ”¾ä¸­ paused, // æ’­æ”¾æš‚åœ finished // æ’­æ”¾å®Œæ¯•&#125; ç„¶åå®šä¹‰å½“çŠ¶æ€å‘ç”Ÿå˜æ¢åï¼Œé’ˆå¯¹æŸä¸ªçŠ¶æ€æˆ‘å¸Œæœ›å®ƒå»æ‰§è¡Œä¸€äº›é€»è¾‘é‡Œçš„åŠ¨ä½œ 1234567891011121314151617181920var state: VideoPlayerState = .paused &#123; didSet &#123; switch state &#123; case .failed: // å½“è§†é¢‘åŠ è½½å¤±è´¥æ—¶ï¼Œæˆ‘å¸Œæœ›å»æ‰§è¡Œçš„ä¸€äº›äº‹ä»¶ï¼Œæ¯”å¦‚å¼¹å‡ºæç¤ºæ¡† popReminderView() case .buffering: case .readyToPlay: case .playing: case .paused: case .finished: &#125; &#125;&#125; åœ¨å†™æˆ‘ä»¬çš„ä¸šåŠ¡é€»è¾‘æ—¶ï¼Œç›¸åº”çš„å»æ›´æ”¹æ’­æ”¾å™¨çš„çŠ¶æ€ 123456// æ¯”å¦‚æˆ‘ä»¬é‡å†™ç½‘ç»œå±‚çš„ä¸€äº›æ–¹æ³•ï¼Œå½“ç¼“å†²å¥½æ—¶å‡†å¤‡æ’­æ”¾networkRequestCompletion() &#123; state = .readyToPlay&#125; è¿™æ ·ï¼Œé€šè¿‡stateæˆ‘ä»¬èƒ½å¾ˆæ¸…æ™°çš„çŸ¥é“ç°åœ¨æ’­æ”¾å™¨æ˜¯ä»€ä¹ˆæ ·åº”è¯¥åšä»€ä¹ˆäº‹ï¼Œåœ¨æˆ‘ä»¬çš„ä¸šåŠ¡é€»è¾‘ä¸­ï¼Œå½“çŠ¶æ€å˜åŒ–æ—¶é€šè¿‡didSetæˆ‘ä»¬èƒ½å¾ˆæ–¹ä¾¿çš„å»å“åº”å¯¹åº”çŠ¶æ€ä¸‹åº”è¯¥æ‰§è¡Œçš„è¡Œä¸ºã€‚ æ€»ç»“æ•´ç¯‡æ–‡ç« è´¨é‡æˆ–è®¸ä¸æ˜¯å¾ˆé«˜ï¼Œå› ä¸ºè¿˜æ²¡æœ‰å¤§é‡çš„ä»£ç å®è·µè®©æˆ‘å»æœ‰ä¸€ä¸ªæ›´æ·±æ›´å…¨çš„ä½“ä¼šï¼Œä½†æ˜¯å¸Œæœ›èƒ½å¸¦ç»™æˆ‘è‡ªå·±å’Œè¯»è€…ä»¬ä¸€ç‚¹æŠ›ç –å¼•ç‰çš„æ•ˆæœã€‚æˆ‘ä»¬åœ¨ç¼–ç ã€è®¾è®¡è¿‡ç¨‹ä¸­ï¼Œå¤šå»æ€è€ƒä¸€äº›ï¼Œä»€ä¹ˆåœ°æ–¹ç”¨ä»€ä¹ˆæ ·çš„æ¨¡å¼æ›´å¥½ï¼Œæ¯”å¦‚çŠ¶æ€æœºï¼Œæ¥ä½¿æˆ‘ä»¬çš„ä»£ç æ›´è§£è€¦ï¼Œæ˜“ç»´æŠ¤ï¼Œé«˜æ‰©å±•ã€‚ è¿™é‡Œæœ‰ä¸€ç¯‡å…³äºObjective-cçŠ¶æ€æœºçš„å®ç°ï¼Œæ›´æŠ½è±¡ï¼Œå…¶ä¸­ç”¨åˆ°çš„æšä¸¾å€¼è‡ªåŠ¨è½¬å­—ç¬¦ä¸²é€šç”¨æ–¹æ¡ˆå¾ˆæœ‰æ„æ€ï¼ŒåŒæ—¶å¯ä»¥å‚è€ƒè¿™ç¯‡ã€ŠiOSå¼€å‘é«˜çº§:ä½¿ç”¨å®å®šä¹‰macrosã€‹å…³äºå®å®šä¹‰çš„ä½¿ç”¨ã€‚è¿™ç¯‡ã€ŠiOS APP æ¶æ„æ¼«è°ˆäºŒã€‹åˆ—ä¸¾äº†å¾ˆå…·ä½“çš„è¿ç”¨åœºæ™¯ï¼Œå¯ä»¥å‚è€ƒã€‚åŒæ—¶å‚è€ƒçš„æ–‡ç« æœ‰ï¼š æœ‰é™çŠ¶æ€æœº æœ‰é™çŠ¶æ€æœºï¼ˆFSMï¼‰çš„è®¾è®¡ä¸å®ç° å…³äºçŠ¶æ€è®°çš„å¼€æºåº“æ¨èï¼š Objective-C: TransitionKit Swift:SwiftTask","categories":[{"name":"iOS","slug":"iOS","permalink":"http://codingdoge.cn/categories/iOS/"}],"tags":[]},{"title":"Objective-Cå£°æ˜åœ¨å¤´æ–‡ä»¶å’Œå®ç°æ–‡ä»¶ä¸­çš„åŒºåˆ«","slug":"title: Objective-Cå£°æ˜åœ¨å¤´æ–‡ä»¶å’Œå®ç°æ–‡ä»¶ä¸­çš„åŒºåˆ«  ","date":"2017-07-23T15:47:00.000Z","updated":"2018-01-14T16:53:10.421Z","comments":true,"path":"2017/07/23/title: Objective-Cå£°æ˜åœ¨å¤´æ–‡ä»¶å’Œå®ç°æ–‡ä»¶ä¸­çš„åŒºåˆ«  /","link":"","permalink":"http://codingdoge.cn/2017/07/23/title: Objective-Cå£°æ˜åœ¨å¤´æ–‡ä»¶å’Œå®ç°æ–‡ä»¶ä¸­çš„åŒºåˆ«  /","excerpt":"","text":"è½¬è‡ªcodecloud(æœ‰æ•´ç†) è°ƒè¯•ç¨‹åºçš„æ—¶å€™ï¼Œçªç„¶æƒ³åˆ°è¿™ä¸ªé—®é¢˜ï¼Œç™¾åº¦ä¸€ä¸‹å‘ç°æœ‰ä¸å°‘è¿™æ–¹é¢çš„é—®ç­”ï¼Œç²—ç•¥æ€»ç»“ä¸€ä¸‹: å±æ€§å†™åœ¨.hæ–‡ä»¶ä¸­å’Œåœ¨.mæ–‡ä»¶ä¸­æœ‰ä»€ä¹ˆåŒºåˆ«? Objective-Cä¸­æœ‰åˆ†ç±»å’Œç±»æ‰©å±•çš„æ¦‚å¿µï¼Œè€Œå®ç°æ–‡ä»¶ä¸­çš„ç±»å£°æ˜å®é™…ä¸Šå°±æ˜¯ç±»æ‰©å±•. @interfaceéƒ¨åˆ†ä¸ºç±»æ‰©å±•ï¼ˆextensionï¼‰ å…¶è¢«è®¾è®¡å‡ºæ¥å°±æ˜¯ä¸ºäº†è§£å†³ä¸¤ä¸ªé—®é¢˜çš„ å®šä¹‰ç±»ç§æœ‰æ–¹æ³•çš„åœ°æ–¹ï¼Œä¹Ÿå°±æ˜¯ä¸‹é¢è¯´åˆ°çš„åŒºåˆ«ä¸€ å®ç°public readonly,private readwriteçš„propertyï¼ˆæ„æ€æ˜¯åœ¨hå¤´æ–‡ä»¶ä¸­å®šä¹‰ä¸€ä¸ªå±æ€§å¯¹å¤–æ˜¯readonlyçš„ï¼Œä½†åœ¨ç±»çš„å†…éƒ¨å¸Œæœ›æ˜¯å¯è¯»å†™çš„ï¼Œæ‰€ä»¥å¯ä»¥åœ¨mæºæ–‡ä»¶ä¸­çš„@interfaceéƒ¨åˆ†é‡æ–°å®šä¹‰æ­¤å±æ€§ä¸ºreadwriteï¼Œæ­¤æ—¶æ­¤å±æ€§å¯¹å¤–æ˜¯åªè¯»çš„ï¼Œå¯¹å†…æ˜¯è¯»å†™çš„ï¼‰. æ­¤å¤–ï¼Œä¹Ÿå¯åœ¨æ­¤éƒ¨åˆ†ç”³æ˜å˜é‡å’Œå±æ€§ï¼Œä½†ç”³æ˜çš„å˜é‡ï¼Œå±æ€§å’Œæ–¹æ³•å‡ä¸ºç§æœ‰çš„ï¼Œåªèƒ½å¤Ÿè¢«å½“å‰ç±»è®¿é—®ï¼Œç›¸å½“äºprivateã€‚ åŒºåˆ«ä¸€ï¼šå±æ€§åœ¨.hæ–‡ä»¶ä¸­å’Œåœ¨.mä¸­å£°æ˜æ˜¯æœ‰åŒºåˆ«çš„ã€‚åŒºåˆ«å°±æ˜¯ï¼Œåœ¨.hæ–‡ä»¶ä¸­å£°æ˜çš„å±æ€§ï¼Œå¤–éƒ¨ç±»å¯ä»¥é€šè¿‡â€œç±»å®ä¾‹.å±æ€§â€æ¥è°ƒç”¨ï¼Œä½†åœ¨.mä¸­å£°æ˜çš„åˆ™ä¸å¯ä»¥ï¼Œè·å–å’Œè®¾ç½®çš„æ–¹æ³•ï¼Œåªèƒ½æ˜¯é€šè¿‡setValue:forKeyå’ŒvalueForKeyæ¥å®ç°ã€‚ æˆå‘˜å˜é‡ï¼Œæœ‰ä¸‰ç§æƒé™ï¼Œå°±æ˜¯å¤§å®¶éƒ½çŸ¥é“çš„@privateã€@protectedã€@public ï¼Œå†™åœ¨.mæ–‡ä»¶ä¸­æ—¶ï¼Œç›¸å½“äºæ˜¯@privateæƒé™ï¼Œå­ç±»æ— æ³•è®¿é—®ï¼ŒéªŒè¯äº†ä¸€ä¸‹ï¼Œåšæƒé™ä¿®æ”¹ä¹Ÿæ— æ•ˆã€‚è€Œå†™åœ¨.hæ–‡ä»¶ä¸­ï¼Œé»˜è®¤æ˜¯@protectedæƒé™ï¼Œå­ç±»å¯ä»¥è®¿é—®ï¼Œå¯ä»¥åšæƒé™ä¿®æ”¹ã€‚å› ä¸ºè®¿é—®æƒé™æŒ‡é’ˆå¯¹.hæ–‡ä»¶ã€‚.hæ–‡ä»¶ä¸­æˆå‘˜å˜é‡ï¼Œå¤–éƒ¨ç±»å¯¹å…¶çš„è°ƒç”¨ï¼Œè·ŸC++ä¸€æ ·ï¼Œç”¨-&gt;æ¥è°ƒç”¨ã€‚ åŒºåˆ«äºŒè¿™æ ·å¯ä»¥æé«˜ç¼–è¯‘æ•ˆç‡ï¼Œé¿å…é‡å¤ç¼–è¯‘ã€‚å› ä¸ºåˆ†å¼€çš„è¯åªéœ€è¦ç¼–è¯‘ä¸€æ¬¡ç”Ÿæˆå¯¹åº”çš„.objæ–‡ä»¶åï¼Œå†æ¬¡åº”ç”¨è¯¥ç±»çš„åœ°æ–¹ï¼Œè¿™ä¸ªç±»å°±ä¸ä¼šè¢«å†æ¬¡ç¼–è¯‘ï¼Œä»è€Œå¤§å¤§æé«˜äº†æ•ˆç‡ã€‚è¿™æ ·å¯ä»¥æé«˜ç¼–è¯‘æ•ˆç‡ï¼Œé¿å…é‡å¤ç¼–è¯‘. æ€ä¹ˆå»è§£é‡Šå‘¢â€¦å…¶å®è¿™æ˜¯ä¸€ä¸ªé¢å‘å¯¹è±¡çš„æ€æƒ³ï¼Œæ‰€è°“â€æé«˜â€çš„æ¯”è¾ƒå¯¹è±¡ï¼Œåº”è¯¥æ˜¯ç›´æ¥å°†æ–¹æ³•å†™åˆ°å…·ä½“å‡½æ•°é‡Œçš„å®ç°æ–¹å¼.hä¸ºç¼–è¯‘å™¨æä¾›ä¸€ä¸ªç´¢å¼•ã€å£°æ˜ï¼Œè¿æ¥objå¯¹è±¡å’Œä¸»ç¨‹åº.ç¼–è¯‘å™¨åœ¨ç¼–è¯‘çš„æ—¶å€™ï¼Œå¦‚æœéœ€è¦ï¼Œåˆ™å»æŸ¥æ‰¾hï¼Œæ‰¾åˆ°äº†hï¼Œå†æ‰¾å¯¹åº”çš„objï¼Œå°±å¯ä»¥æ‰¾åˆ°ç±»çš„æ–¹æ³•äº†.ä½†æ˜¯å¦‚æœç›´æ¥å†™å…¥åˆ°åŒä¸€ä¸ªæ–‡ä»¶ï¼ˆä¾‹å¦‚hppï¼‰ï¼Œä¸»ç¨‹åºæ²¡æœ‰ç´¢å¼•ï¼Œä¹Ÿä¸æ¸…æ¥šå…·ä½“çš„ç±»å®ç°äº†æ²¡æœ‰ï¼Œåªèƒ½ä¸€æ¬¡æ¬¡é‡å¤çš„ç¼–è¯‘ç›¸åŒçš„ä»£ç ï¼Œè¿™æ ·å®é™…ä¸Šæ²¡æœ‰æŠŠè¿™ä¸ªç±»è¯¥æœ‰çš„ä¸œè¥¿æŠ½è±¡å‡ºæ¥.å¯¹äºå‡½æ•°å£°æ˜åœ¨å¤´æ–‡ä»¶ä¸­ï¼Œåœ¨å®ç°æ–‡ä»¶ä¸­å®ç°ï¼Œä¹Ÿæ˜¯é¿å…é‡å¤ç¼–è¯‘ï¼Œå‡½æ•°å¯ä»¥å¤šæ¬¡å£°æ˜ï¼Œä½†åªèƒ½å®ç°ä¸€æ¬¡. å¤´æ–‡ä»¶ç›¸å¯¹äºå®ç°æ–‡ä»¶çš„ä½œç”¨åœ¨äº: å¤´æ–‡ä»¶å¯ä»¥é¢„å…ˆå‘Šè¯‰ç¼–è¯‘å™¨ä¸€äº›å¿…è¦çš„å£°æ˜,è®©ç¼–è¯‘å™¨é¡ºåˆ©è¿›è¡Œä¸‹å»,åœ¨è¿æ¥å®ç°ä»¥å‰.æœªå¿…å‡ºç°å®é™…çš„å®šä¹‰. å¤´æ–‡ä»¶çš„æ„ä¹‰åœ¨: * ä½¿å¾—ç¨‹åºç®€æ˜,æ¸…æ™°. * é¿å…äº†é‡å¤ç¼–å†™ç›¸åŒçš„å£°æ˜ä»£ç . .cå’Œ.hæ–‡ä»¶æ²¡æœ‰å¿…ç„¶çš„è”ç³». å…³äºå¤´æ–‡ä»¶å’Œå®ç°æ–‡ä»¶çš„ç¼–è¯‘è¿æ¥çš„è¿‡ç¨‹å…¶å®è¦ç†è§£Cæ–‡ä»¶ä¸å¤´æ–‡ä»¶æœ‰ä»€ä¹ˆä¸åŒä¹‹å¤„ï¼Œé¦–å…ˆéœ€è¦å¼„æ˜ç™½ç¼–è¯‘å™¨çš„å·¥ä½œè¿‡ç¨‹ï¼Œä¸€èˆ¬è¯´æ¥ç¼–è¯‘å™¨ä¼šåšä»¥ä¸‹å‡ ä¸ªè¿‡ç¨‹: é¢„å¤„ç†é˜¶æ®µ è¯æ³•ä¸è¯­æ³•åˆ†æé˜¶æ®µ ç¼–è¯‘é˜¶æ®µï¼Œé¦–å…ˆç¼–è¯‘æˆçº¯æ±‡ç¼–è¯­å¥ï¼Œå†å°†ä¹‹æ±‡ç¼–æˆè·ŸCPUç›¸å…³çš„äºŒè¿›åˆ¶ç ï¼Œç”Ÿæˆå„ä¸ªç›®æ ‡æ–‡ä»¶ è¿æ¥é˜¶æ®µï¼Œå°†å„ä¸ªç›®æ ‡æ–‡ä»¶ä¸­çš„å„æ®µä»£ç è¿›è¡Œç»å¯¹åœ°å€å®šä½ï¼Œç”Ÿæˆè·Ÿç‰¹å®šå¹³å°ç›¸å…³çš„å¯æ‰§è¡Œæ–‡ä»¶ï¼Œå½“ç„¶ï¼Œæœ€åè¿˜å¯ä»¥ç”¨objcopyç”Ÿæˆçº¯äºŒè¿›åˆ¶ç ï¼Œä¹Ÿå°±æ˜¯å»æ‰äº†æ–‡ä»¶æ ¼å¼ä¿¡æ¯. ç¼–è¯‘å™¨åœ¨ç¼–è¯‘æ—¶æ˜¯ä»¥Cæ–‡ä»¶ä¸ºå•ä½è¿›è¡Œçš„ï¼Œä¹Ÿå°±æ˜¯è¯´å¦‚æœä½ çš„é¡¹ç›®ä¸­ä¸€ä¸ªCæ–‡ä»¶éƒ½æ²¡æœ‰ï¼Œé‚£ä¹ˆä½ çš„é¡¹ç›®å°†æ— æ³•ç¼–è¯‘ï¼Œè¿æ¥å™¨æ˜¯ä»¥ç›®æ ‡æ–‡ä»¶ä¸ºå•ä½ï¼Œå®ƒå°†ä¸€ä¸ªæˆ–å¤šä¸ªç›®æ ‡æ–‡ä»¶è¿›è¡Œå‡½æ•°ä¸å˜é‡çš„é‡å®šä½ï¼Œç”Ÿæˆæœ€ç»ˆçš„å¯æ‰§è¡Œæ–‡ä»¶ï¼Œåœ¨PCä¸Šçš„ç¨‹åºå¼€å‘ï¼Œä¸€èˆ¬éƒ½æœ‰ä¸€ä¸ªmainå‡½æ•°ï¼Œè¿™æ˜¯å„ä¸ªç¼–è¯‘å™¨çš„çº¦å®šï¼Œå½“ç„¶ï¼Œä½ å¦‚æœè‡ªå·±å†™è¿æ¥å™¨è„šæœ¬çš„è¯ï¼Œå¯ä»¥ä¸ç”¨mainå‡½æ•°ä½œä¸ºç¨‹åºå…¥å£ï¼ï¼ï¼ æœ‰äº†è¿™äº›åŸºç¡€çŸ¥è¯†ï¼Œå†è¨€å½’æ­£ä¼ ï¼Œä¸ºäº†ç”Ÿæˆä¸€ä¸ªæœ€ç»ˆçš„å¯æ‰§è¡Œæ–‡ä»¶ï¼Œå°±éœ€è¦ä¸€äº›ç›®æ ‡æ–‡ä»¶ï¼Œä¹Ÿå°±æ˜¯éœ€è¦Cæ–‡ä»¶ï¼Œè€Œè¿™äº›Cæ–‡ä»¶ä¸­åˆéœ€è¦ä¸€ä¸ªmainå‡½æ•°ä½œä¸ºå¯æ‰§è¡Œç¨‹åºçš„å…¥å£ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±ä»ä¸€ä¸ªCæ–‡ä»¶å…¥æ‰‹ï¼Œå‡å®šè¿™ä¸ªCæ–‡ä»¶å†…å®¹å¦‚ä¸‹ï¼š 12345678#include \\&lt;stdio.h&gt;#include â€œmytest.hâ€int main(int argc,char **argv)&#123;test = 25;printf(â€œtestâ€¦â€¦â€¦â€¦â€¦..%d\\nâ€,test);&#125; å¤´æ–‡ä»¶å†…å®¹å¦‚ä¸‹:int test; ç°åœ¨ä»¥è¿™ä¸ªä¾‹å­æ¥è®²è§£ç¼–è¯‘å™¨çš„å·¥ä½œ: é¢„å¤„ç†é˜¶æ®µ:ç¼–è¯‘å™¨ä»¥Cæ–‡ä»¶ä½œä¸ºä¸€ä¸ªå•å…ƒï¼Œé¦–å…ˆè¯»è¿™ä¸ªCæ–‡ä»¶ï¼Œå‘ç°ç¬¬ä¸€å¥ä¸ç¬¬äºŒå¥æ˜¯åŒ…å«ä¸€ä¸ªå¤´æ–‡ä»¶ï¼Œå°±ä¼šåœ¨æ‰€æœ‰æœç´¢è·¯å¾„ä¸­å¯»æ‰¾è¿™ä¸¤ä¸ªæ–‡ä»¶ï¼Œæ‰¾åˆ°ä¹‹åï¼Œå°±ä¼šå°†ç›¸åº”å¤´æ–‡ä»¶ä¸­å†å»å¤„ç†å®ï¼Œå˜é‡ï¼Œå‡½æ•°å£°æ˜ï¼ŒåµŒå¥—çš„å¤´æ–‡ä»¶åŒ…å«ç­‰ï¼Œæ£€æµ‹ä¾èµ–å…³ç³»ï¼Œè¿›è¡Œå®æ›¿æ¢ï¼Œçœ‹æ˜¯å¦æœ‰é‡å¤å®šä¹‰ä¸å£°æ˜çš„æƒ…å†µå‘ç”Ÿï¼Œæœ€åå°†é‚£äº›æ–‡ä»¶ä¸­æ‰€æœ‰çš„ä¸œä¸œå…¨éƒ¨æ‰«æè¿›è¿™ä¸ªå½“å‰çš„Cæ–‡ä»¶ä¸­ï¼Œå½¢æˆä¸€ä¸ªä¸­é—´â€œCæ–‡ä»¶â€ ç¼–è¯‘é˜¶æ®µ:åœ¨ä¸Šä¸€æ­¥ä¸­ç›¸å½“äºå°†é‚£ä¸ªå¤´æ–‡ä»¶ä¸­çš„testå˜é‡æ‰«æè¿›äº†ä¸€ä¸ªä¸­é—´Cæ–‡ä»¶ï¼Œé‚£ä¹ˆtestå˜é‡å°±å˜æˆäº†è¿™ä¸ªæ–‡ä»¶ä¸­çš„ä¸€ä¸ªå…¨å±€å˜é‡ï¼Œæ­¤æ—¶å°±å°†æ‰€æœ‰è¿™ä¸ªä¸­é—´Cæ–‡ä»¶çš„æ‰€æœ‰å˜é‡ï¼Œå‡½æ•°åˆ†é…ç©ºé—´ï¼Œå°†å„ä¸ªå‡½æ•°ç¼–è¯‘æˆäºŒè¿›åˆ¶ç ï¼ŒæŒ‰ç…§ç‰¹å®šç›®æ ‡æ–‡ä»¶æ ¼å¼ç”Ÿæˆç›®æ ‡æ–‡ä»¶ï¼Œåœ¨è¿™ç§æ ¼å¼çš„ç›®æ ‡æ–‡ä»¶ä¸­è¿›è¡Œå„ä¸ªå…¨å±€å˜é‡ï¼Œå‡½æ•°çš„ç¬¦å·æè¿°ï¼Œå°†è¿™äº›äºŒè¿›åˆ¶ç æŒ‰ç…§ä¸€å®šçš„æ ‡å‡†ç»„ç»‡æˆä¸€ä¸ªç›®æ ‡æ–‡ä»¶ è¿æ¥é˜¶æ®µ:å°†ä¸Šä¸€æ­¥æˆç”Ÿçš„å„ä¸ªç›®æ ‡æ–‡ä»¶ï¼Œæ ¹æ®ä¸€äº›å‚æ•°ï¼Œè¿æ¥ç”Ÿæˆæœ€ç»ˆçš„å¯æ‰§è¡Œæ–‡ä»¶ï¼Œä¸»è¦çš„å·¥ä½œå°±æ˜¯é‡å®šä½å„ä¸ªç›®æ ‡æ–‡ä»¶çš„å‡½æ•°ï¼Œå˜é‡ç­‰ï¼Œç›¸å½“äºå°†ä¸ªç›®æ ‡æ–‡ä»¶ä¸­çš„äºŒè¿›åˆ¶ç æŒ‰ä¸€å®šçš„è§„èŒƒåˆåˆ°ä¸€ä¸ªæ–‡ä»¶ä¸­ å†å›åˆ°Cæ–‡ä»¶ä¸å¤´æ–‡ä»¶å„å†™ä»€ä¹ˆå†…å®¹çš„è¯é¢˜ä¸Šï¼šç†è®ºä¸Šæ¥è¯´Cæ–‡ä»¶ä¸å¤´æ–‡ä»¶é‡Œçš„å†…å®¹ï¼Œåªè¦æ˜¯Cè¯­è¨€æ‰€æ”¯æŒçš„ï¼Œæ— è®ºå†™ä»€ä¹ˆéƒ½å¯ä»¥çš„ï¼Œæ¯”å¦‚ä½ åœ¨å¤´æ–‡ä»¶ä¸­å†™å‡½æ•°ä½“ï¼Œåªè¦åœ¨ä»»ä½•ä¸€ä¸ªCæ–‡ä»¶åŒ…å«æ­¤å¤´æ–‡ä»¶å°±å¯ä»¥å°†è¿™ä¸ªå‡½æ•°ç¼–è¯‘æˆç›®æ ‡æ–‡ä»¶çš„ä¸€éƒ¨åˆ†ï¼ˆç¼–è¯‘æ˜¯ä»¥Cæ–‡ä»¶ä¸ºå•ä½çš„ï¼Œå¦‚æœä¸åœ¨ä»»ä½•Cæ–‡ä»¶ä¸­åŒ…å«æ­¤å¤´æ–‡ä»¶çš„è¯ï¼Œè¿™æ®µä»£ç å°±å½¢åŒè™šè®¾ï¼‰ï¼Œä½ å¯ä»¥åœ¨Cæ–‡ä»¶ä¸­è¿›è¡Œå‡½æ•°å£°æ˜ï¼Œå˜é‡å£°æ˜ï¼Œç»“æ„ä½“å£°æ˜ï¼Œè¿™ä¹Ÿä¸æˆé—®é¢˜ï¼ï¼ï¼é‚£ä¸ºä½•ä¸€å®šè¦åˆ†æˆå¤´æ–‡ä»¶ä¸Cæ–‡ä»¶å‘¢ï¼Ÿåˆä¸ºä½•ä¸€èˆ¬éƒ½åœ¨å¤´ä»¶ä¸­è¿›è¡Œå‡½æ•°ï¼Œå˜é‡å£°æ˜ï¼Œå®å£°æ˜ï¼Œç»“æ„ä½“å£°æ˜å‘¢ï¼Ÿè€Œåœ¨Cæ–‡ä»¶ä¸­å»è¿›è¡Œå˜é‡å®šä¹‰ï¼Œå‡½æ•°å®ç°å‘¢ï¼Ÿï¼ŸåŸå› å¦‚ä¸‹: å¦‚æœåœ¨å¤´æ–‡ä»¶ä¸­å®ç°ä¸€ä¸ªå‡½æ•°ä½“ï¼Œé‚£ä¹ˆå¦‚æœåœ¨å¤šä¸ªCæ–‡ä»¶ä¸­å¼•ç”¨å®ƒï¼Œè€Œä¸”åˆåŒæ—¶ç¼–è¯‘å¤šä¸ªCæ–‡ä»¶ï¼Œå°†å…¶ç”Ÿæˆçš„ç›®æ ‡æ–‡ä»¶è¿æ¥æˆä¸€ä¸ªå¯æ‰§è¡Œæ–‡ä»¶ï¼Œåœ¨æ¯ä¸ªå¼•ç”¨æ­¤å¤´æ–‡ä»¶çš„Cæ–‡ä»¶æ‰€ç”Ÿæˆçš„ç›®æ ‡æ–‡ä»¶ä¸­ï¼Œéƒ½æœ‰ä¸€ä»½è¿™ä¸ªå‡½æ•°çš„ä»£ç ï¼Œå¦‚æœè¿™æ®µå‡½æ•°åˆæ²¡æœ‰å®šä¹‰æˆå±€éƒ¨å‡½æ•°ï¼Œé‚£ä¹ˆåœ¨è¿æ¥æ—¶ï¼Œå°±ä¼šå‘ç°å¤šä¸ªç›¸åŒçš„å‡½æ•°ï¼Œå°±ä¼šæŠ¥é”™ å¦‚æœåœ¨å¤´æ–‡ä»¶ä¸­å®šä¹‰å…¨å±€å˜é‡ï¼Œå¹¶ä¸”å°†æ­¤å…¨å±€å˜é‡èµ‹åˆå€¼ï¼Œé‚£ä¹ˆåœ¨å¤šä¸ªå¼•ç”¨æ­¤å¤´æ–‡ä»¶çš„Cæ–‡ä»¶ä¸­åŒæ ·å­˜åœ¨ç›¸åŒå˜é‡åçš„æ‹·è´ï¼Œå…³é”®æ˜¯æ­¤å˜é‡è¢«èµ‹äº†åˆå€¼ï¼Œæ‰€ä»¥ç¼–è¯‘å™¨å°±ä¼šå°†æ­¤å˜é‡æ”¾å…¥DATAæ®µï¼Œæœ€ç»ˆåœ¨è¿æ¥é˜¶æ®µï¼Œä¼šåœ¨DATAæ®µä¸­å­˜åœ¨å¤šä¸ªç›¸åŒçš„å˜é‡ï¼Œå®ƒæ— æ³•å°†è¿™äº›å˜é‡ç»Ÿä¸€æˆä¸€ä¸ªå˜é‡ï¼Œä¹Ÿå°±æ˜¯ä»…ä¸ºæ­¤å˜é‡åˆ†é…ä¸€ä¸ªç©ºé—´ï¼Œè€Œä¸æ˜¯å¤šä»½ç©ºé—´ï¼Œå‡å®šè¿™ä¸ªå˜é‡åœ¨å¤´æ–‡ä»¶æ²¡æœ‰èµ‹åˆå€¼ï¼Œç¼–è¯‘å™¨å°±ä¼šå°†ä¹‹æ”¾å…¥BSSæ®µï¼Œè¿æ¥å™¨ä¼šå¯¹BSSæ®µçš„å¤šä¸ªåŒåå˜é‡ä»…åˆ†é…ä¸€ä¸ªå­˜å‚¨ç©ºé—´ å¦‚æœåœ¨Cæ–‡ä»¶ä¸­å£°æ˜å®ï¼Œç»“æ„ä½“ï¼Œå‡½æ•°ç­‰ï¼Œé‚£ä¹ˆæˆ‘è¦åœ¨å¦ä¸€ä¸ªCæ–‡ä»¶ä¸­å¼•ç”¨ç›¸åº”çš„å®ï¼Œç»“æ„ä½“ï¼Œå°±å¿…é¡»å†åšä¸€æ¬¡é‡å¤çš„å·¥ä½œï¼Œå¦‚æœæˆ‘æ”¹äº†ä¸€ä¸ªCæ–‡ä»¶ä¸­çš„ä¸€ä¸ªå£°æ˜ï¼Œé‚£ä¹ˆåˆå¿˜äº†æ”¹å…¶å®ƒCæ–‡ä»¶ä¸­çš„å£°æ˜ï¼Œè¿™ä¸å°±å‡ºäº†å¤§é—®é¢˜äº†ï¼Œç¨‹åºçš„é€»è¾‘å°±å˜æˆäº†ä½ ä¸å¯æƒ³è±¡çš„äº†ï¼Œå¦‚æœæŠŠè¿™äº›å…¬å…±çš„ä¸œä¸œæ”¾åœ¨ä¸€ä¸ªå¤´æ–‡ä»¶ä¸­ï¼Œæƒ³ç”¨å®ƒçš„Cæ–‡ä»¶å°±åªéœ€è¦å¼•ç”¨ä¸€ä¸ªå°±OKäº†ï¼ï¼ï¼è¿™æ ·å²‚ä¸æ–¹ä¾¿ï¼Œè¦æ”¹æŸä¸ªå£°æ˜çš„æ—¶å€™ï¼Œåªéœ€è¦åŠ¨ä¸€ä¸‹å¤´æ–‡ä»¶å°±è¡Œäº† åœ¨å¤´æ–‡ä»¶ä¸­å£°æ˜ç»“æ„ä½“ï¼Œå‡½æ•°ç­‰ï¼Œå½“ä½ éœ€è¦å°†ä½ çš„ä»£ç å°è£…æˆä¸€ä¸ªåº“ï¼Œè®©åˆ«äººæ¥ç”¨ä½ çš„ä»£ç ï¼Œä½ åˆä¸æƒ³å…¬å¸ƒæºç ï¼Œé‚£ä¹ˆäººå®¶å¦‚ä½•åˆ©ç”¨ä½ çš„åº“å‘¢ï¼Ÿä¹Ÿå°±æ˜¯å¦‚ä½•åˆ©ç”¨ä½ çš„åº“ä¸­çš„å„ä¸ªå‡½æ•°å‘¢ï¼Ÿï¼Ÿä¸€ç§æ–¹æ³•æ˜¯å…¬å¸ƒæºç ï¼Œåˆ«äººæƒ³æ€ä¹ˆç”¨å°±æ€ä¹ˆç”¨ï¼Œå¦ä¸€ç§æ˜¯æä¾›å¤´æ–‡ä»¶ï¼Œåˆ«äººä»å¤´æ–‡ä»¶ä¸­çœ‹ä½ çš„å‡½æ•°åŸå‹ï¼Œè¿™æ ·äººå®¶æ‰çŸ¥é“å¦‚ä½•è°ƒç”¨ä½ å†™çš„å‡½æ•°ï¼Œå°±å¦‚åŒä½ è°ƒç”¨printfå‡½æ•°ä¸€æ ·ï¼Œé‡Œé¢çš„å‚æ•°æ˜¯æ€æ ·çš„ï¼Ÿï¼Ÿä½ æ˜¯æ€ä¹ˆçŸ¥é“çš„ï¼Ÿï¼Ÿè¿˜ä¸æ˜¯çœ‹äººå®¶çš„å¤´æ–‡ä»¶ä¸­çš„ç›¸å…³å£°æ˜å•Šï¼ï¼ï¼å½“ç„¶è¿™äº›ä¸œä¸œéƒ½æˆäº†Cæ ‡å‡†ï¼Œå°±ç®—ä¸çœ‹äººå®¶çš„å¤´æ–‡ä»¶ï¼Œä½ ä¸€æ ·å¯ä»¥çŸ¥é“æ€ä¹ˆä½¿ç”¨.","categories":[{"name":"iOS","slug":"iOS","permalink":"http://codingdoge.cn/categories/iOS/"}],"tags":[{"name":"OC","slug":"OC","permalink":"http://codingdoge.cn/tags/OC/"},{"name":"è½¬è½½","slug":"è½¬è½½","permalink":"http://codingdoge.cn/tags/è½¬è½½/"}]},{"title":"xcodeå¸¸ç”¨å¿«æ·é”®åŠå…¶ä»–åŠŸèƒ½","slug":"title: xcodeå¸¸ç”¨å¿«æ·é”®åŠå…¶ä»–åŠŸèƒ½","date":"2017-07-23T15:47:00.000Z","updated":"2018-01-13T05:05:53.756Z","comments":true,"path":"2017/07/23/title: xcodeå¸¸ç”¨å¿«æ·é”®åŠå…¶ä»–åŠŸèƒ½/","link":"","permalink":"http://codingdoge.cn/2017/07/23/title: xcodeå¸¸ç”¨å¿«æ·é”®åŠå…¶ä»–åŠŸèƒ½/","excerpt":"","text":"å¿«æ·é”® Command+Rç”Ÿæˆå¹¶è¿è¡Œç¨‹åºCommand+Båªç”Ÿæˆç¨‹åºè€Œä¸è¿è¡Œå®ƒCommand+Tæ–°å»ºé€‰é¡¹å¡ æ ‡è®° // MARK: - \\// TODO: \\// FIXME: \\ å°åŠŸèƒ½ Product&gt;Cleanåˆ é™¤ç”Ÿæˆçš„ä¸­é—´æ–‡ä»¶","categories":[{"name":"iOS","slug":"iOS","permalink":"http://codingdoge.cn/categories/iOS/"}],"tags":[{"name":"Tool","slug":"Tool","permalink":"http://codingdoge.cn/tags/Tool/"}]},{"title":"OCä¸­ARC forbids explicit message send of '...'é”™è¯¯","slug":"title: OCä¸­ARC forbids explicit message send of '...'é”™è¯¯  ","date":"2017-07-23T15:25:00.000Z","updated":"2018-01-14T17:00:06.700Z","comments":true,"path":"2017/07/23/title: OCä¸­ARC forbids explicit message send of '...'é”™è¯¯  /","link":"","permalink":"http://codingdoge.cn/2017/07/23/title: OCä¸­ARC forbids explicit message send of '...'é”™è¯¯  /","excerpt":"","text":"è½¬è‡ªCSDN hahahacffæœ‰æ‰€æ•´ç† ARC forbids explicit message send ofâ€™retainCountâ€™ åŒâ€™releaseâ€™ç­‰ç­‰ å¾ˆæ˜¾ç„¶ï¼Œæ˜¯ARCçš„é—®é¢˜ã€‚é”™è¯¯åŸå› ï¼šåœ¨åˆ›å»ºå·¥ç¨‹çš„æ—¶å€™ç‚¹é€‰äº†â€œUse Automatic Reference Countingâ€é€‰é¡¹,ä½†æ˜¯åˆè°ƒç”¨äº†å¯¹è±¡çš„retainCountæ–¹æ³• ARCæ˜¯ä»€ä¹ˆ?ARCæ˜¯iOS 5æ¨å‡ºçš„æ–°åŠŸèƒ½ï¼Œå…¨ç§°å«ARC(AutomaticReferenceCounting)ã€‚ç®€å•åœ°è¯´ï¼Œå°±æ˜¯ä»£ç ä¸­è‡ªåŠ¨åŠ å…¥äº†retain/releaseï¼ŒåŸå…ˆéœ€è¦æ‰‹åŠ¨æ·»åŠ çš„ç”¨æ¥å¤„ç†å†…å­˜ç®¡ç†çš„å¼•ç”¨è®¡æ•°çš„ä»£ç å¯ä»¥è‡ªåŠ¨åœ°ç”±ç¼–è¯‘å™¨å®Œæˆäº†ã€‚è¯¥æœºåˆ¶åœ¨iOS 5/ Mac OS X 10.7 å¼€å§‹å¯¼å…¥ï¼Œåˆ©ç”¨ Xcode4.2å¯ä»¥ä½¿ç”¨è¯¥æœºåˆ¶ã€‚ç®€å•åœ°ç†è§£ARCï¼Œå°±æ˜¯é€šè¿‡æŒ‡å®šçš„è¯­æ³•ï¼Œè®©ç¼–è¯‘å™¨(LLVM3.0)åœ¨ç¼–è¯‘ä»£ç æ—¶ï¼Œè‡ªåŠ¨ç”Ÿæˆå®ä¾‹çš„å¼•ç”¨è®¡æ•°ç®¡ç†éƒ¨åˆ†ä»£ç ã€‚æœ‰ä¸€ç‚¹ï¼ŒARCå¹¶ä¸æ˜¯GCï¼Œå®ƒåªæ˜¯ä¸€ç§ä»£ç é™æ€åˆ†æï¼ˆStaticAnalyzerï¼‰å·¥å…·ã€‚ è§£å†³æ–¹æ³• é€‰æ‹©è¦é¡¹ç›®ï¼ŒåŒå‡»ä¸­é—´çš„å·¥ç¨‹åç§°ï¼Œè¿›å…¥build setting å°†ä¸­é—´çš„Objective-C Automatic Reference Countingæ”¹ä¸ºno","categories":[{"name":"iOS","slug":"iOS","permalink":"http://codingdoge.cn/categories/iOS/"}],"tags":[{"name":"Bug","slug":"Bug","permalink":"http://codingdoge.cn/tags/Bug/"},{"name":"OC","slug":"OC","permalink":"http://codingdoge.cn/tags/OC/"},{"name":"è½¬è½½","slug":"è½¬è½½","permalink":"http://codingdoge.cn/tags/è½¬è½½/"}]},{"title":"è§£å†³Arduino CH34xç³»åˆ—åœ¨macOS Sierraä¸­æ‰¾ä¸åˆ°ä¸²å£çš„é—®é¢˜","slug":"title: è§£å†³Arduino CH34xç³»åˆ—åœ¨macOS Sierraä¸­æ‰¾ä¸åˆ°ä¸²å£çš„é—®é¢˜","date":"2017-07-23T15:06:00.000Z","updated":"2018-01-12T14:23:28.810Z","comments":true,"path":"2017/07/23/title: è§£å†³Arduino CH34xç³»åˆ—åœ¨macOS Sierraä¸­æ‰¾ä¸åˆ°ä¸²å£çš„é—®é¢˜/","link":"","permalink":"http://codingdoge.cn/2017/07/23/title: è§£å†³Arduino CH34xç³»åˆ—åœ¨macOS Sierraä¸­æ‰¾ä¸åˆ°ä¸²å£çš„é—®é¢˜/","excerpt":"","text":"æ¯•è®¾åšArduinoå¼€å‘ï¼Œä¸€å¼€å§‹ä¹°äº†æ·˜å®ä¸Šæ…§å‡€è‡ªå·±æ”¹çš„Arduino UNOå›½äº§æ¿å­ï¼Œå›æ¥æ’åœ¨macä¸Šè¯»ä¸å‡ºä¸²å£ï¼Œå®‰è£…äº†å®ƒé™„å¸¦çš„é©±åŠ¨è¿˜æ˜¯è¯»ä¸å‡ºï¼ŒåŒå­¦ä¹°äº†åŸè£…æ¿è¯´ä¸€æ’ä¸Šå°±èƒ½è¯»å‡ºä¸²å£ï¼Œéƒ½æ²¡è‡ªå·±è£…é©±åŠ¨ï¼Œä¸ºäº†çœéº»çƒ¦ï¼Œç›´æ¥è·Ÿå•†å®¶æ¢äº†åŸè£…æ¿ï¼Œè¿™æ—¶å€™éº»çƒ¦æ¥äº†ï¼Œæ¿å­åœ¨æˆ‘ç”µè„‘ä¸Šè¯»ä¸å‡ºä¸²å£ï¼Œåœ¨åˆ«äººç”µè„‘ä¸Šèƒ½è¯»å‡ºæ¥ï¼Œåˆ«äººçš„åœ¨æˆ‘ç”µè„‘ä¸Šä¹Ÿè¯»ä¸å‡ºæ¥â€¦å¾ˆå´©æºƒï¼Œç„¶åä»å„ä¸ªè§’åº¦debugï¼Œä¸‹é¢ä¸€ä¸ªä¸ªæ­¥éª¤æ¥ï¼ŒåŸºæœ¬èƒ½è§£å†³ã€‚ å®‰è£…Arduino IDEä¸Šé¢æ˜¯å®˜ç½‘IDEä¸‹è½½çš„è¿æ¥ï¼Œå¤§æ¦‚æ˜¯å› ä¸ºGFWçš„åŸå› ä¸‹è½½é€Ÿåº¦å¥‡æ…¢ï¼Œå¤§å®¶ä¹Ÿå¯ä»¥å»æœArduinoä¸­æ–‡ç¤¾åŒºï¼Œé‡Œé¢æœ‰å¥½äººåšäº†*åº¦ç½‘ç›˜çš„ä¸‹è½½ç§å­ï¼Œé€Ÿåº¦èƒ½å¿«ç‚¹ã€‚IDEä¸€èˆ¬è‡ªå¸¦é©±åŠ¨ï¼Œå¦‚æœåœ¨ä¸²å£é‡Œæ²¡å‘ç°ï¼Œå¯ä»¥è¯•è¯•åœ¨ D7389412-ED23-427D-82E7-4E1C26114D67 è¿™ä¸ªç³»ç»ŸæŠ¥å‘Šé‡Œçœ‹çœ‹USBä¸‹é¢èƒ½ä¸èƒ½è¯»å‡º ä¹Ÿå¯ä»¥åœ¨bashé‡Œè¾“å…¥ 1ls /dev/tty* å¦‚æœæœ‰ç±»ä¼¼çš„å³å¯ 2C66575E-D0DD-4DEA-9F34-8F2E1CF4DA90 å®˜æ–¹é©±åŠ¨ä¸‹è½½å¦‚æœéƒ½æ‰¾ä¸åˆ°çš„è¯å¯ä»¥å»æ²æ’å®˜æ–¹ä¸‹è½½CH341SERé©±åŠ¨ï¼Œå®‰è£…åå†æŸ¥çœ‹ä¸€é(å®‰è£…é©±åŠ¨å®Œä¼šè¦æ±‚é‡å¯). æ›´æ”¹SIPè®¾ç½® Appleåœ¨10.11ä¸­å…¨é¢å¯ç”¨äº†åä¸º System Integrity Protection (SIP) çš„ç³»ç»Ÿå®Œæ•´æ€§ä¿æŠ¤æŠ€æœ¯. å—æ­¤å½±å“, æœªç»ç­¾åçš„ç¬¬ä¸‰æ–¹kextåŠç»è¿‡ä¿®æ”¹çš„åŸç‰ˆkextå°†æ— æ³•æ­£å¸¸åŠ è½½, å¤§éƒ¨åˆ†ç³»ç»Ÿæ–‡ä»¶å³ä½¿åœ¨rootç”¨æˆ·ä¸‹ä¹Ÿæ— æ³•ç›´æ¥è¿›è¡Œä¿®æ”¹. å‰é¢å®‰è£…é©±åŠ¨ä¸æˆåŠŸå¤§éƒ¨åˆ†æ˜¯å› ä¸ºé©±åŠ¨æ–‡ä»¶å†²çªå¯¼è‡´ï¼Œæ‰€ä»¥åœ¨æ­¤ä¹‹å‰å…ˆåˆ é™¤ä¹‹å‰å®‰è£…çš„é©±åŠ¨æ–‡ä»¶: 123sudo rm -rf /System/Library/Extensions/usb.kextsudo rm -rf /Library/Extensions/usbserial.kextsudo rm -rf _private_var_db_receipts/com.wch.* ç„¶åå‚è€ƒCH340 CH341 serial adapters fix for El Capitan OS Xå¯ä»¥é€šè¿‡ä»¥ä¸‹æ­¥éª¤ä¿®æ”¹SIPè®¾ç½®æ¥å®‰è£…ç¬¬ä¸‰æ–¹kext: é‡å¯OS X å¹¶ä¸”ç«‹å³æŒ‰ä½ Command+ R æ¥æ¥è¿›å…¥æ¢å¤æ¨¡å¼ åœ¨æ¢å¤æ¨¡å¼ä¸­, èœå•æ ä¸Šé¢æ‰¾åˆ°ç»ˆç«¯(Terminal)å¹¶æ‰“å¼€ åœ¨ç»ˆç«¯ä¸­é”®å…¥å‘½ä»¤csrutil enable â€”without kext çœ‹åˆ°æˆåŠŸçš„æç¤ºä¿¡æ¯ä¹‹å, è¾“å…¥rebooté‡å¯ç³»ç»Ÿ æ³¨: â€”without kext ä¸­çš„ - æœ‰ä¸¤æ¡Command å°±æ˜¯ âŒ˜ å›¾æ ‡ é€šè¿‡ä»¥ä¸Šçš„æ“ä½œä¹‹å, é‡‡ç”¨CH340/1 ç³»åˆ—èŠ¯ç‰‡çš„Arduinoå¼€å‘æ¿åˆå¯ä»¥è¢«è¯†åˆ«å‡ºæ¥äº†. å¦‚æœè¿˜æ˜¯æ— æ³•è¯†åˆ«, è¯·é‡æ–°å®‰è£…ä¸€æ¬¡CH341SERé©±åŠ¨. æœ€åå¦‚æœè¿˜ä¸è¡Œ(æˆ‘çš„å°±æ˜¯åˆ°è¿™é‡Œè¿˜ä¸è¡Œ)ï¼Œè¯·çœ‹çœ‹ä½ çš„æ¿å­æ˜¯å¦æ¥è§¦ä¸è‰¯ï¼Œåå¤æ‘©æ“¦å°è¯•çœ‹èƒ½ä¸èƒ½è¯»å‡ºä¸²å£ï¼Œæˆ‘ä¹‹å‰ä¹Ÿè¯•è¿‡è¿™ä¸ªåŠæ³•ï¼Œä½†æ˜¯æ²¡æœ‰ç”¨ï¼Œåé¢å¶ç„¶ä¹Ÿæ˜¯å¿…ç„¶ä¸‹ååº”è¿‡æ¥ï¼Œååå¤å¤æ’USBæ‹”å‡ºæŸ¥çœ‹ä¸²å£çŠ¶æ€ï¼Œç»ˆäºè§£å†³äº†(æ— è‰¯å•†å®¶å®³äºº) å‚è€ƒ:å¦‚ä½•é‡ç½® Mac ä¸Šçš„ NVRAM","categories":[{"name":"OS","slug":"OS","permalink":"http://codingdoge.cn/categories/OS/"}],"tags":[{"name":"Bug","slug":"Bug","permalink":"http://codingdoge.cn/tags/Bug/"}]},{"title":"ã€ŠTCP/IPè¯¦è§£ã€‹ç¬”è®°â€”ç¬¬1ç«  æ¦‚è¿°","slug":"title: ã€ŠTCP-IPè¯¦è§£ã€‹ç¬”è®°â€”ç¬¬1ç«  æ¦‚è¿°","date":"2017-07-23T15:04:00.000Z","updated":"2018-01-12T14:22:22.232Z","comments":true,"path":"2017/07/23/title: ã€ŠTCP-IPè¯¦è§£ã€‹ç¬”è®°â€”ç¬¬1ç«  æ¦‚è¿°/","link":"","permalink":"http://codingdoge.cn/2017/07/23/title: ã€ŠTCP-IPè¯¦è§£ã€‹ç¬”è®°â€”ç¬¬1ç«  æ¦‚è¿°/","excerpt":"","text":"ã€ŠTCP/IPè¯¦è§£ã€‹ç¬”è®°â€”ç¬¬1ç«  æ¦‚è¿° ä¸€ä¸ªäº’è¿ç½‘å°±æ˜¯ä¸€ç»„é€šè¿‡ç›¸åŒåè®®æ—äº’è¿åœ¨ä¸€èµ·çš„ç½‘ç»œã€‚ åˆ†å±‚TCP/IPé€šå¸¸è¢«è®¤ä¸ºæ˜¯ä¸€ä¸ªå››å±‚åè®®ç³»ç»Ÿ: WX20170320-171317@2x ç½‘ç»œå±‚å’Œè¿è¾“å±‚ä¹‹é—´çš„åŒºåˆ«æ˜¯æœ€ä¸ºå…³é”®çš„ï¼šç½‘ç»œå±‚ï¼ˆIPï¼‰æä¾›ç‚¹åˆ°ç‚¹çš„æœåŠ¡ï¼Œè€Œè¿è¾“å±‚ï¼ˆTCPå’ŒUDPï¼‰æä¾›ç«¯åˆ°ç«¯çš„æœåŠ¡ã€‚ åœ¨TCP/IPåè®®æ—ä¸­ï¼Œç½‘ç»œå±‚IPæä¾›çš„æ˜¯ä¸€ç§ä¸å¯é çš„æœåŠ¡ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå®ƒåªæ˜¯å°½å¯èƒ½å¿«åœ°æŠŠåˆ†ç»„ä»æºç»“ç‚¹é€åˆ°ç›®çš„ç»“ç‚¹ï¼Œä½†æ˜¯å¹¶ä¸æä¾›ä»»ä½•å¯é æ€§ä¿è¯ã€‚è€Œå¦ä¸€æ–¹é¢ï¼ŒTCPåœ¨ä¸å¯é çš„IPå±‚ä¸Šæä¾›äº†ä¸€ä¸ªå¯é çš„è¿è¾“å±‚ã€‚ä¸ºäº†æä¾›è¿™ç§å¯é çš„æœåŠ¡ï¼ŒTCPé‡‡ç”¨äº†è¶…æ—¶é‡ä¼ ã€å‘é€å’Œæ¥æ”¶ç«¯åˆ°ç«¯çš„ç¡®è®¤åˆ†ç»„ç­‰æœºåˆ¶ã€‚ è·¯ç”±å™¨ä¸ºä¸åŒç±»å‹çš„ç‰©ç†ç½‘ç»œæä¾›è¿æ¥ã€‚ ä¸€ä¸ªä¸»æœºä¹Ÿå¯ä»¥æœ‰å¤šä¸ªæ¥å£ï¼Œä½†ä¸€èˆ¬ä¸ç§°ä½œè·¯ç”±å™¨,é™¤éå®ƒçš„åŠŸèƒ½åªæ˜¯å•çº¯åœ°æŠŠåˆ†ç»„ä»ä¸€ä¸ªæ¥å£ä¼ é€åˆ°å¦ä¸€ä¸ªæ¥å£ã€‚ äº’è”ç½‘çš„ç›®çš„ä¹‹ä¸€æ˜¯åœ¨åº”ç”¨ç¨‹åºä¸­éšè—æ‰€æœ‰çš„ç‰©ç†ç»†èŠ‚ã€‚ è¿æ¥ç½‘ç»œçš„å¦ä¸€ä¸ªé€”å¾„æ˜¯ä½¿ç”¨ç½‘æ¡¥ã€‚ç½‘æ¡¥æ˜¯åœ¨é“¾è·¯å±‚ä¸Šå¯¹ç½‘ç»œè¿›è¡Œäº’è¿ï¼Œè€Œè·¯ç”±å™¨åˆ™æ˜¯åœ¨ç½‘ç»œå±‚ä¸Šå¯¹ç½‘ç»œè¿›è¡Œäº’è¿ã€‚ äº’è”ç½‘çš„åœ°å€ 47F26D90-176D-4C0A-A315-6A9E199E79F6 è¿™äº› 32 ä½çš„åœ°å€é€šå¸¸å†™æˆå››ä¸ªåè¿›åˆ¶çš„æ•°,å…¶ä¸­æ¯ä¸ªæ•´æ•°å¯¹åº”ä¸€ä¸ªå­—èŠ‚ã€‚è¿™ç§è¡¨ç¤ºæ–¹æ³•ç§°ä½œâ€œç‚¹åˆ†åè¿›åˆ¶è¡¨ç¤ºæ³•(Dotted decimal notation)â€ã€‚ 70807FBE-712D-4A5C-97F2-BBCA12C1F11D å°è£…TCPä¼ ç»™IPçš„æ•°æ®å•å…ƒç§°ä½œTCPæŠ¥æ–‡æ®µæˆ–ç®€ç§°ä¸ºTCPæ®µï¼ˆTCP segmentï¼‰ã€‚IPä¼ ç»™ç½‘ç»œæ¥å£å±‚çš„æ•°æ®å•å…ƒç§°ä½œIPæ•°æ®æŠ¥(IP datagram)ã€‚é€šè¿‡ä»¥å¤ªç½‘ä¼ è¾“çš„æ¯”ç‰¹æµç§°ä½œå¸§(Frame)ã€‚ åˆ†ç”¨å½“ç›®çš„ä¸»æœºæ”¶åˆ°ä¸€ä¸ªä»¥å¤ªç½‘æ•°æ®å¸§æ—¶ï¼Œæ•°æ®å°±å¼€å§‹ä»åè®®æ ˆä¸­ç”±åº•å‘ä¸Šå‡ï¼ŒåŒæ—¶å»æ‰å„å±‚åè®®åŠ ä¸Šçš„æŠ¥æ–‡é¦–éƒ¨ã€‚æ¯å±‚åè®®ç›’éƒ½è¦å»æ£€æŸ¥æŠ¥æ–‡é¦–éƒ¨ä¸­çš„åè®®æ ‡è¯†ï¼Œä»¥ç¡®å®šæ¥æ”¶æ•°æ®çš„ä¸Šå±‚åè®®ã€‚è¿™ä¸ªè¿‡ç¨‹ç§°ä½œåˆ†ç”¨ï¼ˆDemultiplexingï¼‰ã€‚ å®¢æˆ·-æœåŠ¡å™¨æ¨¡å‹å¤§éƒ¨åˆ†ç½‘ç»œåº”ç”¨ç¨‹åºåœ¨ç¼–å†™æ—¶éƒ½å‡è®¾ä¸€ç«¯æ˜¯å®¢æˆ·ï¼Œå¦ä¸€ç«¯æ˜¯æœåŠ¡å™¨ï¼Œå…¶ç›®çš„æ˜¯ä¸ºäº†è®©æœåŠ¡å™¨ä¸ºå®¢æˆ·æä¾›ä¸€äº›ç‰¹å®šçš„æœåŠ¡ã€‚ä¸€èˆ¬æ¥è¯´ï¼ŒTCPæœåŠ¡å™¨æ˜¯å¹¶å‘çš„ï¼Œè€ŒUDPæœåŠ¡å™¨æ˜¯é‡å¤çš„ã€‚ ä¹ é¢˜ è¯·è®¡ç®—æœ€å¤šæœ‰å¤šå°‘ä¸ªAç±»ã€Bç±»å’ŒCç±»ç½‘ç»œå·ã€‚ ç”¨åŒ¿åFTPï¼ˆè§27.3èŠ‚ï¼‰ä»ä¸»æœºnic.merit.eduä¸Šè·å–æ–‡ä»¶nsfnet_statistics_history.netcountã€‚è¯¥æ–‡ä»¶åŒ…å«åœ¨NSFNETç½‘ç»œä¸Šç™»è®°çš„å›½å†…å’Œå›½å¤–çš„ç½‘ç»œæ•°ã€‚ç”»ä¸€åæ ‡ç³»ï¼Œæ¨ªåæ ‡ä»£è¡¨å¹´ï¼Œçºµåæ ‡ä»£è¡¨ç½‘ç»œæ€»æ•°çš„å¯¹æ•°å€¼ã€‚çºµåæ ‡çš„æœ€å¤§å€¼æ˜¯ä¹ é¢˜1.1çš„ç»“æœã€‚å¦‚æœæ•°æ®æ˜¾ç¤ºä¸€ä¸ªæ˜æ˜¾çš„è¶‹åŠ¿ï¼Œè¯·ä¼°è®¡æŒ‰ç…§å½“å‰çš„ç¼–å€ä½“åˆ¶æ¨ç®—ï¼Œä½•æ—¶ä¼šç”¨å®Œæ‰€æœ‰çš„ç½‘ç»œåœ°å€ï¼ˆ3.10èŠ‚è®¨è®ºè§£å†³è¯¥éš¾é¢˜çš„å»ºè®®ï¼‰ã€‚ è·å–ä¸€ä»½ä¸»æœºéœ€æ±‚RFCæ‹·è´[Braden 1989a]ï¼Œé˜…è¯»æœ‰å…³åº”ç”¨äºTCP/IPåè®®æ—æ¯ä¸€å±‚çš„ç¨³å¥æ€§åŸåˆ™ã€‚è¿™ä¸ªåŸåˆ™çš„å‚è€ƒå¯¹è±¡æ˜¯ä»€ä¹ˆï¼Ÿ è·å–ä¸€ä»½æœ€æ–°çš„èµ‹å€¼RFCæ‹·è´ã€‚â€œquote of the dayâ€åè®®çš„æœ‰åç«¯å£å·æ˜¯ä»€ä¹ˆï¼Ÿå“ªä¸ªRFCå¯¹è¯¥åè®®è¿›è¡Œäº†å®šä¹‰ï¼Ÿ å¦‚æœä½ æœ‰ä¸€ä¸ªæ¥å…¥TCP/IPäº’è”ç½‘çš„ä¸»æœºå¸å·ï¼Œå®ƒçš„ä¸»IPåœ°å€æ˜¯å¤šå°‘ï¼Ÿè¿™å°ä¸»æœºæ˜¯å¦æ¥å…¥äº†Internetï¼Ÿå®ƒæ˜¯å¤šæ¥å£ä¸»æœºå—ï¼Ÿ è·å–ä¸€ä»½RFC 1000çš„æ‹·è´ï¼Œäº†è§£RFCè¿™ä¸ªæœ¯è¯­ä»ä½•è€Œæ¥ã€‚ ä¸Internetåä¼šè”ç³»ï¼Œisoc@isoc.orgæˆ–è€…+170 3648 9888ï¼Œäº†è§£æœ‰å…³åŠ å…¥çš„æƒ…å†µã€‚ ç”¨åŒ¿åFTPä»ä¸»æœºis.internic.netå¤„è·å–æ–‡ä»¶about-internic/information-about-the-internicã€‚ éƒ¨åˆ†ä¹ é¢˜ç­”æ¡ˆ ç­”æ¡ˆæ˜¯ï¼š27-2ï¼ˆ126ï¼‰ï¼‹214-2ï¼ˆ16 382ï¼‰ï¼‹221-2ï¼ˆ2 097 150ï¼‰=2 113 658ã€‚æ¯ä¸€éƒ¨åˆ†éƒ½å‡å»2æ˜¯å› ä¸ºå…¨0æˆ–å…¨1ç½‘ç»œIDæ˜¯éæ³•çš„ã€‚ å›¾D-1æ˜¾ç¤ºäº†ç›´åˆ°1993å¹´8æœˆçš„æœ‰å…³æ•°æ®ã€‚å¦‚æœç½‘ç»œæ•°ç»§ç»­å‘ˆæŒ‡æ•°å¢é•¿çš„è¯ï¼Œè™šçº¿ä¼°è®¡äº†2000å¹´å¯èƒ½è¾¾åˆ°çš„æœ€å¤§çš„ç½‘ç»œæ•°ã€‚ â€œè‡ªç”±åœ°æ¥æ”¶ï¼Œä¿å®ˆåœ°å‘é€ã€‚â€ èµ„æ–™æ¥æºäº å³æ—¶é€šè®¯ç½‘ï¼Œä»…åšå­¦ä¹ å‚è€ƒ","categories":[{"name":"Network","slug":"Network","permalink":"http://codingdoge.cn/categories/Network/"}],"tags":[{"name":"Reading Notes","slug":"Reading-Notes","permalink":"http://codingdoge.cn/tags/Reading-Notes/"}]},{"title":"STLå¸¸è§ç”¨æ³• â€” map","slug":"title: STLå¸¸è§ç”¨æ³• â€” map","date":"2017-07-21T05:10:00.000Z","updated":"2018-01-14T17:04:04.187Z","comments":true,"path":"2017/07/21/title: STLå¸¸è§ç”¨æ³• â€” map/","link":"","permalink":"http://codingdoge.cn/2017/07/21/title: STLå¸¸è§ç”¨æ³• â€” map/","excerpt":"","text":"STLå¸¸è§ç”¨æ³• â€” ä»£ç æ•²å¾—å°‘ï¼ŒSTLæ€»æ˜¯ç”¨çš„ä¸ç†Ÿï¼Œä¾¿è‡ªå·±æ•´ç†ä¸€äº›ç”¨æ³•ï¼Œæœ‰çœ¼ç¼˜çš„é¡ºæ‰‹ç”¨ç€å§ã€‚ ç®€ä»‹mapsæ˜¯ä¸€ä¸ªå…³è”å®¹å™¨ï¼Œç”¨æ¥å­˜å‚¨key-valueå¼çš„å…ƒç´ ï¼Œæä¾›ä¸€å¯¹ä¸€hashã€‚å†…éƒ¨çš„å®ç°ï¼Œè‡ªå»ºä¸€é¢—çº¢é»‘æ ‘ï¼Œè¿™æ£µæ ‘å…·æœ‰å¯¹æ•°æ®è‡ªåŠ¨æ’åºçš„åŠŸèƒ½ã€‚æ¯”å¦‚ä¸€ä¸ªç­çº§ä¸­ï¼Œæ¯ä¸ªå­¦ç”Ÿçš„å­¦å·å’Œä»–çš„å§“åå°±å­˜åœ¨ä¸€å¯¹ä¸€æ˜ å°„çš„å…³ç³»ã€‚ ç¬¬ä¸€ä¸ªå€¼æ˜¯å…³é”®å­—(key)ï¼Œæ¯ä¸ªå…³é”®å­—åªèƒ½åœ¨mapä¸­å‡ºç°ä¸€æ¬¡ ç¬¬äºŒä¸ªå€¼ä¸ºå…³é”®å­—çš„å€¼(value) ç”¨æ³•å¤´æ–‡ä»¶12345678#include &lt;map&gt;template&lt; class Key, class T, class Compare = std::less&lt;Key&gt;, class Allocator = std::allocator&lt;std::pair&lt;const Key, T&gt; &gt;&gt; class map; æ„é€ å‡½æ•°12345namespace pmr &#123; template &lt;class Key, class T, class Compare = std::less&lt;Key&gt;&gt; using map = std::map&lt;Key, T, Compare, std::pmr::polymorphic_allocator&lt;std::pair&lt;const Key,T&gt;&gt;&gt;&#125; æˆå‘˜å‡½æ•° æˆå‘˜å‡½æ•° å®ç°æ“ä½œ begin è¿”å›ä¸€ä¸ªèµ·å§‹çš„è¿­ä»£å™¨ end è¿”å›ä¸€ä¸ªæœ«å°¾çš„è¿­ä»£å™¨ empty æ£€æŸ¥å®¹å™¨æ˜¯å¦ä¸ºç©º size è¿”å›å®¹å™¨å†…å…ƒç´ ä¸ªæ•° clear æ¸…é™¤å®¹å™¨å†…å®¹ insert æ’å…¥å…ƒç´ æˆ–èŠ‚ç‚¹ erase åˆ é™¤å…ƒç´  swap äº¤æ¢å†…å®¹ count è¿”å›æŒ‡å®škeyçš„å…ƒç´ ä¸ªæ•° find é€šè¿‡keyæŸ¥æ‰¾å…ƒç´  ç”¨æ³•æ¼”ç¤º1234567891011121314151617181920#include &lt;map&gt;void mapTest()&#123; std::map&lt;int, int&gt; m; // æ„é€ å‡½æ•° m.insert(pair&lt;int, int&gt;(1, 10)); // æ’å…¥å…ƒç´  m.insert(pair&lt;int, int&gt;(2, 30)); m.insert(pair&lt;int, int&gt;(4, 50)); map&lt;int, int&gt;::iterator it; // è¿­ä»£å™¨ it = m.find(3); // é€šè¿‡keyæŸ¥æ‰¾å…ƒç´  if (it == m.end()) // å¦‚æœè¿”å›å€¼ä¸ºå°¾éƒ¨è¿­ä»£å™¨åˆ™æ— æ­¤å…ƒç´  &#123; cout &lt;&lt; &quot;Not find&quot; &lt;&lt; endl; m.insert(pair&lt;int, int&gt;(3, 20)); &#125; for (it = m.begin(); it != m.end(); it++) // é€šè¿‡è¿­ä»£å™¨éå†mapå®¹å™¨ &#123; cout &lt;&lt; it-&gt;first &lt;&lt; &quot; &quot; &lt;&lt; it-&gt;second &lt;&lt; endl; // é€šè¿‡è¿­ä»£å™¨è®¿é—®å…ƒç´ çš„key-value &#125;&#125; å‚è€ƒ:C/C++ - Map (STL) ç”¨æ³•èˆ‡å¿ƒå¾—å®Œå…¨æ”»ç•¥","categories":[{"name":"CPP","slug":"CPP","permalink":"http://codingdoge.cn/categories/CPP/"}],"tags":[{"name":"STL","slug":"STL","permalink":"http://codingdoge.cn/tags/STL/"}]},{"title":"STLå¸¸è§ç”¨æ³• â€” vector","slug":"title: STLå¸¸è§ç”¨æ³• â€” vector","date":"2017-07-21T05:06:00.000Z","updated":"2018-01-14T17:04:41.751Z","comments":true,"path":"2017/07/21/title: STLå¸¸è§ç”¨æ³• â€” vector/","link":"","permalink":"http://codingdoge.cn/2017/07/21/title: STLå¸¸è§ç”¨æ³• â€” vector/","excerpt":"","text":"ä»£ç æ•²å¾—å°‘ï¼ŒSTLæ€»æ˜¯ç”¨çš„ä¸ç†Ÿï¼Œä¾¿è‡ªå·±æ•´ç†ä¸€äº›ç”¨æ³•ï¼Œæœ‰çœ¼ç¼˜çš„é¡ºæ‰‹ç”¨ç€å§ã€‚ ç®€ä»‹vectoræ˜¯çº¿æ€§å®¹å™¨,å®ƒçš„å…ƒç´ ä¸¥æ ¼çš„æŒ‰ç…§çº¿æ€§åºåˆ—æ’åº,å’ŒåŠ¨æ€æ•°ç»„å¾ˆç›¸ä¼¼,å’Œæ•°ç»„ä¸€æ ·,å®ƒçš„å…ƒç´ å­˜å‚¨åœ¨ä¸€å—è¿ç»­çš„å­˜å‚¨ç©ºé—´ä¸­,è¿™ä¹Ÿæ„å‘³ç€æˆ‘ä»¬ä¸ä»…å¯ä»¥ä½¿ç”¨è¿­ä»£å™¨(iterator)è®¿é—®å…ƒç´ ,è¿˜å¯ä»¥ä½¿ç”¨æŒ‡é’ˆçš„åç§»æ–¹å¼è®¿é—®,å’Œå¸¸è§„æ•°ç»„ä¸ä¸€æ ·çš„æ˜¯,vectorèƒ½å¤Ÿè‡ªåŠ¨å­˜å‚¨å…ƒç´ ,å¯ä»¥è‡ªåŠ¨å¢é•¿æˆ–ç¼©å°å­˜å‚¨ç©ºé—´ã€‚ ç”¨æ³•å¤´æ–‡ä»¶1#include &lt;vector&gt; æ„é€ å‡½æ•°12345678// 1template&lt;class T, class Allocator = std::allocator&lt;T&gt; &gt; class vector;// 2namespace pmr &#123; template &lt;class T&gt; using vector = std::vector&lt;T, std::pmr::polymorphic_allocator&lt;T&gt;&gt;;&#125; std::vector is a sequence container that encapsulates dynamic size arrays. std::pmr::vector is an alias template that uses a polymorphic allocator æˆå‘˜å‡½æ•° æˆå‘˜å‡½æ•° å®ç°æ“ä½œ c.assign(beg,end) å°†[beg; end)åŒºé—´ä¸­çš„æ•°æ®èµ‹å€¼ç»™c c.assign(n,elem) å°†nä¸ªelemçš„æ‹·è´èµ‹å€¼ç»™c c.at(idx) ä¼ å›ç´¢å¼•idxæ‰€æŒ‡çš„æ•°æ®ï¼Œå¦‚æœidxè¶Šç•Œï¼ŒæŠ›å‡ºout_of_range c.back() ä¼ å›æœ€åä¸€ä¸ªæ•°æ®ï¼Œä¸æ£€æŸ¥è¿™ä¸ªæ•°æ®æ˜¯å¦å­˜åœ¨ c.begin() ä¼ å›è¿­ä»£å™¨é‡çš„å¯ä¸€ä¸ªæ•°æ® c.capacity() è¿”å›å®¹å™¨ä¸­æ•°æ®ä¸ªæ•° c.clear() ç§»é™¤å®¹å™¨ä¸­æ‰€æœ‰æ•°æ® c.empty() åˆ¤æ–­å®¹å™¨æ˜¯å¦ä¸ºç©º c.end() æŒ‡å‘è¿­ä»£å™¨ä¸­çš„æœ€åä¸€ä¸ªæ•°æ®åœ°å€ c.erase(pos) åˆ é™¤posä½ç½®çš„æ•°æ®ï¼Œä¼ å›ä¸‹ä¸€ä¸ªæ•°æ®çš„ä½ç½® c.erase(beg,end) åˆ é™¤[beg,end)åŒºé—´çš„æ•°æ®ï¼Œä¼ å›ä¸‹ä¸€ä¸ªæ•°æ®çš„ä½ç½® c.front() ä¼ å›ç¬¬ä¸€ä¸ªæ•°æ® get_allocator ä½¿ç”¨æ„é€ å‡½æ•°è¿”å›ä¸€ä¸ªæ‹·è´ c.insert(pos,elem) åœ¨posä½ç½®æ’å…¥ä¸€ä¸ªelemæ‹·è´ï¼Œä¼ å›æ–°æ•°æ®ä½ç½® c.insert(pos,n,elem) åœ¨posä½ç½®æ’å…¥nä¸ªelemæ•°æ®ã€‚æ— è¿”å›å€¼ c.insert(pos,beg,end) åœ¨posä½ç½®æ’å…¥åœ¨[beg,end)åŒºé—´çš„æ•°æ®ã€‚æ— è¿”å›å€¼ c.max_size() è¿”å›å®¹å™¨ä¸­æœ€å¤§æ•°æ®çš„æ•°é‡ c.pop_back() åˆ é™¤æœ€åä¸€ä¸ªæ•°æ® c.push_back(elem) åœ¨å°¾éƒ¨åŠ å…¥ä¸€ä¸ªæ•°æ® c.rbegin() ä¼ å›ä¸€ä¸ªé€†å‘é˜Ÿåˆ—çš„ç¬¬ä¸€ä¸ªæ•°æ® c.rend() ä¼ å›ä¸€ä¸ªé€†å‘é˜Ÿåˆ—çš„æœ€åä¸€ä¸ªæ•°æ®çš„ä¸‹ä¸€ä¸ªä½ç½® c.resize(num) é‡æ–°æŒ‡å®šé˜Ÿåˆ—çš„é•¿åº¦ c.reserve() ä¿ç•™é€‚å½“çš„å®¹é‡ c.size() è¿”å›å®¹å™¨ä¸­å®é™…æ•°æ®çš„ä¸ªæ•° c1.swap(c2) å°†c1å’Œc2å…ƒç´ äº’æ¢ swap(c1,c2) åŒä¸Šæ“ä½œ vector c åˆ›å»ºä¸€ä¸ªç©ºçš„vector vector c1(c2) å¤åˆ¶ä¸€ä¸ªvector vector c(n) åˆ›å»ºä¸€ä¸ªvectorï¼Œå«æœ‰nä¸ªæ•°æ®ï¼Œæ•°æ®å‡å·²ç¼ºçœæ„é€ äº§ç”Ÿ vector c(n, elem) åˆ›å»ºä¸€ä¸ªå«æœ‰nä¸ªelemæ‹·è´çš„vectorã€‚ vector c(beg,end) åˆ›å»ºä¸€ä¸ªä»¥[beg;end)åŒºé—´çš„vector c.~ vector () é”€æ¯æ‰€æœ‰æ•°æ®ï¼Œé‡Šæ”¾å†…å­˜ ç”¨æ³•æ¼”ç¤º ä½¿ç”¨reverseå°†å…ƒç´ ç¿»è½¬:éœ€è¦å¤´æ–‡ä»¶#include&lt;algorithm&gt; 1reverse(vec.begin(),vec.end()); å°†å…ƒç´ ç¿»è½¬(åœ¨vectorä¸­ï¼Œå¦‚æœä¸€ä¸ªå‡½æ•°ä¸­éœ€è¦ä¸¤ä¸ªè¿­ä»£å™¨ï¼Œä¸€èˆ¬åä¸€ä¸ªéƒ½ä¸åŒ…å«) ä½¿ç”¨sortæ’åº:éœ€è¦å¤´æ–‡ä»¶#includeï¼Œsort(vec.begin(),vec.end());(é»˜è®¤æ˜¯æŒ‰å‡åºæ’åˆ—,å³ä»å°åˆ°å¤§).å¯ä»¥é€šè¿‡é‡å†™æ’åºæ¯”è¾ƒå‡½æ•°æŒ‰ç…§é™åºæ¯”è¾ƒï¼Œå¦‚ä¸‹: å®šä¹‰æ’åºæ¯”è¾ƒå‡½æ•°: 1234bool Comp(const int &amp;a,const int &amp;b)&#123; return a&gt;b;&#125; è°ƒç”¨æ—¶:sort(vec.begin(),vec.end(),Comp)ï¼Œè¿™æ ·å°±é™åºæ’åºã€‚","categories":[{"name":"CPP","slug":"CPP","permalink":"http://codingdoge.cn/categories/CPP/"}],"tags":[{"name":"STL","slug":"STL","permalink":"http://codingdoge.cn/tags/STL/"}]},{"title":"å¸¸ç”¨å®å®šä¹‰","slug":"title: å¸¸ç”¨å®å®šä¹‰","date":"2017-07-17T06:08:00.000Z","updated":"2018-01-13T05:07:28.710Z","comments":true,"path":"2017/07/17/title: å¸¸ç”¨å®å®šä¹‰/","link":"","permalink":"http://codingdoge.cn/2017/07/17/title: å¸¸ç”¨å®å®šä¹‰/","excerpt":"","text":"iOSå¼€å‘é«˜çº§:ä½¿ç”¨å®å®šä¹‰macros 123456789101112131415161718192021222324252627282930313233343536373839404142434445//1. æ‰“å°æ—¥å¿—#ifdef DEBUG# define DLog(...) NSLog(__VA_ARGS__)#else# define DLog(...)#endif//2. è·å–å±å¹• å®½åº¦ã€é«˜åº¦#define kScreenWidth ([UIScreen mainScreen].bounds.size.width)#define kScreenHeight ([UIScreen mainScreen].bounds.size.height)//3. é¢œè‰²#define RGB(r, g, b, a) [UIColor colorWithRed:r/255.0f green:g/255.0f blue:b/255.0f alpha:a]#define HEXCOLOR(c) [UIColor colorWithRed:((c&gt;&gt;16)&amp;0xFF)/255.0f green:((c&gt;&gt;8)&amp;0xFF)/255.0f blue:(c&amp;0xFF)/255.0f alpha:1.0f]//èƒŒæ™¯è‰² #define BACKGROUND_COLOR [UIColor colorWithRed:242.0/255.0 green:236.0/255.0 blue:231.0/255.0 alpha:1.0] //æ¸…é™¤èƒŒæ™¯è‰² #define CLEARCOLOR [UIColor clearColor] //4.åŠ è½½å›¾ç‰‡å®ï¼š#define LOADIMAGE(file,type) [UIImage imageWithContentsOfFile:[[NSBundle mainBundle]pathForResource:file ofType:type]]//5. NavBaré«˜åº¦#define NavigationBar_HEIGHT 44//6. è·å–ç³»ç»Ÿç‰ˆæœ¬#define IOS_VERSION [[[UIDevice currentDevice] systemVersion] floatValue]#define CurrentSystemVersion [[UIDevice currentDevice] systemVersion]//7. åˆ¤æ–­æ˜¯çœŸæœºè¿˜æ˜¯æ¨¡æ‹Ÿå™¨#if TARGET_OS_IPHONE //iPhone Device#endif#if TARGET_IPHONE_SIMULATOR //iPhone Simulator#endif//8. è®¾ç½®Viewçš„tagå±æ€§#define VIEWWITHTAG(_OBJECT, _TAG) [_OBJECT viewWithTag : _TAG]//9. GCD#define BACK(block) dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), block)#define MAIN(block) dispatch_async(dispatch_get_main_queue(),block)//10. NSUserDefaults å®ä¾‹åŒ–#define USER_DEFAULT [NSUserDefaults standardUserDefaults]","categories":[{"name":"iOS","slug":"iOS","permalink":"http://codingdoge.cn/categories/iOS/"}],"tags":[{"name":"OC","slug":"OC","permalink":"http://codingdoge.cn/tags/OC/"}]},{"title":"STLå¸¸è§ç”¨æ³• â€” queue","slug":"title: STLå¸¸è§ç”¨æ³• â€” queue","date":"2017-07-17T03:19:00.000Z","updated":"2018-01-14T17:04:46.168Z","comments":true,"path":"2017/07/17/title: STLå¸¸è§ç”¨æ³• â€” queue/","link":"","permalink":"http://codingdoge.cn/2017/07/17/title: STLå¸¸è§ç”¨æ³• â€” queue/","excerpt":"","text":"ä»£ç æ•²å¾—å°‘ï¼ŒSTLæ€»æ˜¯ç”¨çš„ä¸ç†Ÿï¼Œä¾¿è‡ªå·±æ•´ç†ä¸€äº›ç”¨æ³•ï¼Œæœ‰çœ¼ç¼˜çš„é¡ºæ‰‹ç”¨ç€å§ã€‚ ç®€ä»‹ é˜Ÿåˆ—(queue)æ˜¯ä¸€ç§ç‰¹æ®Šçš„çº¿æ€§è¡¨ï¼Œæ˜¯ä¸€ç§å…ˆè¿›å…ˆå‡º(First In First Out)çš„æ•°æ®ç»“æ„ï¼Œå…è®¸åœ¨é˜Ÿåˆ—æœ«å°¾æ’å…¥å…ƒç´ ï¼Œé˜Ÿåˆ—å¤´å–å‡ºå…ƒç´ ï¼Œåœ¨STLä¸­æ˜¯ç”¨listæˆ–è€…dequeå®ç°ï¼Œå°é—­å¤´éƒ¨å³å¯ã€‚ ç”¨æ³•å¤´æ–‡ä»¶1#include &lt;queue&gt; æ„é€ å‡½æ•°1template &lt;class T, class Container = deque&lt;T&gt; &gt; class queue; é˜Ÿåˆ—é€‚é…å™¨é»˜è®¤ç”¨dequeå®¹å™¨å®ç°ï¼Œä¹Ÿå¯ä»¥æŒ‡å®šä½¿ç”¨listå®¹å™¨æ¥å®ç° 123queue &lt;Elem&gt; q; // åˆ›å»ºä¸€ä¸ªç©ºçš„queueï¼Œé»˜è®¤ä½¿ç”¨dequeå®¹å™¨queue &lt;Elem, list&lt;Elem&gt; &gt; q; // ä½¿ç”¨listå®¹å™¨queue &lt;Elem&gt; q1(q2); // å¤åˆ¶q2 æˆå‘˜å‡½æ•° æˆå‘˜å‡½æ•° å®ç°æ“ä½œ Elem&amp; back() è¿”å›é˜Ÿåˆ—æœ€åä¸€ä¸ªå…ƒç´  bool empty()const å¦‚æœé˜Ÿåˆ—ä¸ºç©ºï¼Œè¿”å›trueï¼Œå¦åˆ™è¿”å›false Elem&amp; front() è¿”å›é˜Ÿåˆ—ç¬¬ä¸€ä¸ªå…ƒç´  void pop() ç§»é™¤é˜Ÿåˆ—ä¸­çš„ç¬¬ä¸€ä¸ªå…ƒç´  void push(const Elem&amp; e) åœ¨é˜Ÿåˆ—æœ«å°¾æ’å…¥å…ƒç´ e size_type size()const è¿”å›é˜Ÿåˆ—ä¸­çš„å…ƒç´ æ•°ç›® ç”¨æ³•æ¼”ç¤º1234567891011121314151617181920212223#include &lt;stdio.h&gt; #include &lt;queue&gt; using namespace std; int main() &#123; int n, m, size; queue &lt;int&gt; q; //å®šä¹‰é˜Ÿåˆ—q q.push(1); q.push(2); //å°†1 ã€2å‹å…¥é˜Ÿåˆ— while (!q.empty()) //åˆ¤æ–­é˜Ÿåˆ—æ˜¯å¦ä¸ºç©º &#123; n = q.front(); //è¿”å›é˜Ÿåˆ—å¤´éƒ¨æ•°æ® m = q.back(); //è¿”å›é˜Ÿåˆ—å°¾éƒ¨æ•°æ® size = q.size(); //è¿”å›é˜Ÿåˆ—é‡Œçš„æ•°æ®ä¸ªæ•° q.pop(); //é˜Ÿåˆ—å¤´éƒ¨æ•°æ®å‡ºé˜Ÿ printf(\"%d %d %d\\n\", n, m, size); &#125; return 0; &#125;","categories":[{"name":"CPP","slug":"CPP","permalink":"http://codingdoge.cn/categories/CPP/"}],"tags":[{"name":"STL","slug":"STL","permalink":"http://codingdoge.cn/tags/STL/"}]},{"title":"æ’ä»¶ç®¡ç†â€”â€”Vundle","slug":"title: æ’ä»¶ç®¡ç†â€”â€”Vundle","date":"2017-07-17T03:18:00.000Z","updated":"2018-01-14T17:19:40.848Z","comments":true,"path":"2017/07/17/title: æ’ä»¶ç®¡ç†â€”â€”Vundle/","link":"","permalink":"http://codingdoge.cn/2017/07/17/title: æ’ä»¶ç®¡ç†â€”â€”Vundle/","excerpt":"","text":"éƒ½è¯´Vimæ˜¯ç¨‹åºå‘˜å†™ç»™è‡ªå·±çš„ç¼–è¾‘å™¨ï¼Œå…¶ä¸­çš„æƒ…ç»“å¯æƒ³è€ŒçŸ¥ã€‚ vimå› ä¸ºå…¶åºå¤§è€Œå¼ºåŠ²çš„æ’ä»¶å—åˆ°æ— æ¯”çš„æ¨å´‡ï¼Œè€Œæ’ä»¶çš„æŸ¥æ‰¾å’Œç®¡ç†ä¾¿æˆäº†ä¸€ä¸ªé—®é¢˜ã€‚ Vundleä¾¿æ˜¯ä¸€ä¸ªGithubä¸Šä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜çš„é¡¹ç›®(è‡´æ•¬è´¡çŒ®è€…ä»¬)ï¼Œä½¿ç”¨æ­¥éª¤å¦‚ä¸‹ï¼š å®‰è£…Vundleï¼Œåœ¨ç»ˆç«¯è¾“å…¥ä»¥ä¸‹ä»£ç å³å¯git clone http://github.com/gmarik/vundle.git ~/.vim/bundle/vundle ~/.vim æ¥è‡ªå“ª?åœ¨macä¸­Vimé…ç½®æ–‡ä»¶.vimrcåœ¨/usr/share/vim/ä¸‹ï¼Œä¸€èˆ¬æ˜¯æ²¡æœ‰æƒé™æ›´æ”¹çš„,ä½†æ˜¯è¿™ä¸ª.vimrcæ˜¯å…¨å±€é…ç½®æ–‡ä»¶ï¼Œæˆ‘ä»¬åªè¦æ›´æ”¹ç”¨æˆ·é…ç½®æ–‡ä»¶å³å¯ æ€ä¹ˆæŸ¥çœ‹/usr/? æ˜¾ç¤ºéšè—æ–‡ä»¶ï¼Œè‡ªè¡Œç™¾åº¦ï¼Œç»ˆç«¯ä¸­æ•²å…¥ä»£ç å³å¯ã€‚ Finderä¸‹æˆ–è€…æ¡Œé¢ä¸Šçš„Goï¼Œæ–‡ä»¶å¤¹è¾“å…¥/usr/ã€‚macä¸‹çš„Vimç”¨æˆ·é…ç½®æ–‡ä»¶é»˜è®¤æ˜¯æ²¡æœ‰çš„ï¼Œéœ€è¦æˆ‘ä»¬è‡ªè¡Œåˆ›å»ºç»ˆç«¯ä¸‹è¾“å…¥123&gt; mkdir ~/.vim&gt; touch ~/.vimrc&gt; ~/å³ä¸ºç”¨æˆ·æ ¹ç›®å½•ã€‚ åœ¨Vim Scripté€‰å¥½æ’ä»¶åœ¨.vimrcæ–‡ä»¶ä¸­åŠ ä¸€å¥Bundle plugin_name.vimrcç¤ºä¾‹:1234567891011set nocompatible \" be iMprovedfiletype off \" required!set rtp+=~/.vim/bundle/vundle/call vundle#rc()\" let Vundle manage Vundle\" required!Bundle 'gmarik/vundle'\" vim-scripts reposBundle 'vim-plugin-foo'Bundle 'vim-plugin-bar'filetype plugin indent on \" required! æ‰§è¡ŒVundleå®‰è£…å‘½ä»¤1:BundleInstall Vundleçš„å…¶å®ƒå‘½ä»¤ :BundleList åˆ—ä¸¾å‡ºåˆ—è¡¨ä¸­(.vimrcä¸­)é…ç½®çš„æ‰€æœ‰æ’ä»¶ :BundleInstall å®‰è£…åˆ—è¡¨ä¸­å…¨éƒ¨æ’ä»¶ :BundleInstall! æ›´æ–°åˆ—è¡¨ä¸­å…¨éƒ¨æ’ä»¶ :BundleSearch foo æŸ¥æ‰¾fooæ’ä»¶ :BundleSearch! foo åˆ·æ–°fooæ’ä»¶ç¼“å­˜ :BundleClean æ¸…é™¤åˆ—è¡¨ä¸­æ²¡æœ‰çš„æ’ä»¶ :BundleClean! æ¸…é™¤åˆ—è¡¨ä¸­æ²¡æœ‰çš„æ’ä»¶ å‚è€ƒGitæ—¶ä»£çš„VIMä¸å®Œå…¨ä½¿ç”¨æ•™ç¨‹ä½¿ç”¨Vundleæ¥ç®¡ç†vimçš„æ’ä»¶zhongcq çš„VIMé…ç½®","categories":[{"name":"Shell","slug":"Shell","permalink":"http://codingdoge.cn/categories/Shell/"}],"tags":[{"name":"Tool","slug":"Tool","permalink":"http://codingdoge.cn/tags/Tool/"}]},{"title":"æ¼«è°ˆiOSç³»åˆ—ä¹‹ï¼šå†…å­˜ç®¡ç†","slug":"title: æ¼«è°ˆiOSç³»åˆ—ä¹‹ï¼šå†…å­˜ç®¡ç†","date":"2017-07-17T03:18:00.000Z","updated":"2018-01-14T14:05:07.599Z","comments":true,"path":"2017/07/17/title: æ¼«è°ˆiOSç³»åˆ—ä¹‹ï¼šå†…å­˜ç®¡ç†/","link":"","permalink":"http://codingdoge.cn/2017/07/17/title: æ¼«è°ˆiOSç³»åˆ—ä¹‹ï¼šå†…å­˜ç®¡ç†/","excerpt":"","text":"å¼•ç”¨è®¡æ•°æ¨èä¸€ç¯‡æ¥è‡ª@æ¨è§ç‰çš„å¼•ç”¨è®¡æ•°åŸç†Blog ç®€ä»‹iOSä¸­å¯¹å†…å­˜ç®¡ç†çš„æœºåˆ¶ï¼ˆå †å†…å­˜ï¼‰ï¼Œæ¯ä¸€ä¸ªå¯¹è±¡éƒ½æœ‰ä¸€ä¸ªä¸ä¹‹å…³è”çš„å¼•ç”¨è®¡æ•°ï¼ˆReference Countingï¼‰ã€‚å½“ä¸€ä¸ªå¯¹è±¡â€œè¢«æ‹¥æœ‰â€çš„æ—¶å€™å¼•ç”¨è®¡æ•°+1ï¼Œå½“ä¸€ä¸ªå¯¹è±¡å¼•ç”¨è®¡æ•°ä¸ºé›¶æ—¶è¯¥å¯¹è±¡è¢«é‡Šæ”¾ã€‚ æ¯”æ‹Ÿæ¯”å¦‚ä¸Šç­ï¼Œæœ€æ—©è¿›å…¥åŠå…¬å®¤çš„äººéœ€è¦å¼€ç¯ï¼Œä¹‹åè¿›å…¥åŠå…¬å®¤çš„äººéœ€è¦ç…§æ˜ï¼Œ ä¸‹ç­ç¦»å¼€åŠå…¬å®¤çš„äººä¸éœ€è¦ç…§æ˜ï¼Œæœ€åç¦»å¼€åŠå…¬å®¤çš„äººéœ€è¦å…³ç¯ã€‚è¿™æ ·å¯¹åº”çš„å¼•ç”¨è®¡æ•°å°±æ˜¯ï¼šç¬¬ä¸€ä¸ªäººè¿›å…¥åŠå…¬å®¤å¼€ç¯ï¼Œå¼•ç”¨è®¡æ•°æ˜¯1ã€‚ä¹‹åè¿›å…¥åŠå…¬å®¤éœ€è¦ç…§æ˜å¼•ç”¨è®¡æ•°æ˜¯2ã€‚ä¸‹ç­ä¸€ä¸ªäººç¦»å¼€åŠå…¬å®¤å¼•ç”¨è®¡æ•°å˜æˆäº†1ï¼Œæœ€åä¸€ä¸ªç¦»å¼€äº†åŠå…¬å®¤ï¼Œå¼•ç”¨è®¡æ•°å˜æˆäº†0 ã€‚ å¼•ç”¨è®¡æ•°å¦‚ä½•å‚¨å­˜ TaggedPointerä¸€ç¯‡æå¥½çš„æ–‡ç« æ€»ä½“æ¥è¯´ï¼Œæˆ‘çš„ç†è§£æ˜¯å¦‚æœä¸€ä¸ªå¯¹è±¡ä½¿ç”¨äº†Tagged PointeræŠ€æœ¯ï¼ˆæ¯”å¦‚NSStringï¼ŒNSNumberç­‰ï¼‰ï¼ŒæŒ‡é’ˆé‡Œé¢ä¼šç›´æ¥å­˜æ•°æ®å†…å®¹ï¼Œä¸ä¼šå†ä½œä¸ºâ€œæŒ‡é’ˆâ€æŒ‡å‘å…¶å®ƒåœ°å€ï¼Œä»Runtimeæ¥ç†è§£å°±æ˜¯ä¸ä¼šä½¿ç”¨isaæŒ‡é’ˆï¼Œä¹Ÿå°±ä¸ä¼šç»§æ‰¿è‹¹æœçš„å†…å­˜ç®¡ç†æ–¹å¼ï¼ˆReference Countingï¼‰ã€‚åˆ¤æ–­å½“å‰å¯¹è±¡æ˜¯å¦åœ¨ä½¿ç”¨ TaggedPointer æ˜¯çœ‹æ ‡å¿—ä½æ˜¯å¦ä¸º1: 12345678910111213#if SUPPORT_MSB_TAGGED_POINTERS# define TAG_MASK (1ULL&lt;&lt;63)#else# define TAG_MASK 1inline bool objc_object::isTaggedPointer() &#123;#if SUPPORT_TAGGED_POINTERS return ((uintptr_t)this &amp; TAG_MASK);#else return false;#endif&#125; isa æŒ‡é’ˆæŒ‡é’ˆçš„å†…å­˜ç©ºé—´å¾ˆå¤§ï¼Œæœ‰æ—¶å€™å¯ä»¥ä¼˜åŒ–æŒ‡é’ˆï¼Œåœ¨æŒ‡é’ˆä¸­å­˜å‚¨ä¸€éƒ¨åˆ†å†…å®¹ã€‚ä¸‹é¢åˆ—å‡ºä¸åŒæ¶æ„ä¸‹çš„64ä½ç¯å¢ƒä¸­isaæŒ‡é’ˆç»“æ„: 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253union isa_t &#123; isa_t() &#123; &#125; isa_t(uintptr_t value) : bits(value) &#123; &#125; Class cls; uintptr_t bits;#if SUPPORT_NONPOINTER_ISA# if __arm64__# define ISA_MASK 0x00000001fffffff8ULL# define ISA_MAGIC_MASK 0x000003fe00000001ULL# define ISA_MAGIC_VALUE 0x000001a400000001ULL struct &#123; uintptr_t indexed : 1; uintptr_t has_assoc : 1; uintptr_t has_cxx_dtor : 1; uintptr_t shiftcls : 30; // MACH_VM_MAX_ADDRESS 0x1a0000000 uintptr_t magic : 9; uintptr_t weakly_referenced : 1; uintptr_t deallocating : 1; uintptr_t has_sidetable_rc : 1; uintptr_t extra_rc : 19;# define RC_ONE (1ULL&lt;&lt;45)# define RC_HALF (1ULL&lt;&lt;18) &#125;;# elif __x86_64__# define ISA_MASK 0x00007ffffffffff8ULL# define ISA_MAGIC_MASK 0x0000000000000001ULL# define ISA_MAGIC_VALUE 0x0000000000000001ULL struct &#123; uintptr_t indexed : 1; uintptr_t has_assoc : 1; uintptr_t has_cxx_dtor : 1; uintptr_t shiftcls : 44; // MACH_VM_MAX_ADDRESS 0x7fffffe00000 uintptr_t weakly_referenced : 1; uintptr_t deallocating : 1; uintptr_t has_sidetable_rc : 1; uintptr_t extra_rc : 14;# define RC_ONE (1ULL&lt;&lt;50)# define RC_HALF (1ULL&lt;&lt;13) &#125;;# else // Available bits in isa field are architecture-specific.# error unknown architecture# endif// SUPPORT_NONPOINTER_ISA#endif&#125;; åªæœ‰arm64æ¶æ„çš„è®¾å¤‡æ”¯æŒä¼˜åŒ–ï¼Œä¸‹é¢åˆ—å‡ºäº†isaæŒ‡é’ˆä¸­å˜é‡å¯¹åº”çš„å«ä¹‰: å˜é‡å å«ä¹‰ indexed 0 è¡¨ç¤ºæ™®é€šçš„isaæŒ‡é’ˆï¼Œ1 è¡¨ç¤ºä½¿ç”¨ä¼˜åŒ–ï¼Œå­˜å‚¨å¼•ç”¨è®¡æ•° has_assoc è¡¨ç¤ºè¯¥å¯¹è±¡æ˜¯å¦åŒ…å« associated objectï¼Œå¦‚æœæ²¡æœ‰ï¼Œåˆ™ææ„æ—¶ä¼šæ›´å¿« has_cxx_dtor è¡¨ç¤ºè¯¥å¯¹è±¡æ˜¯å¦æœ‰ C++ æˆ– ARC çš„ææ„å‡½æ•°ï¼Œå¦‚æœæ²¡æœ‰ï¼Œåˆ™ææ„æ—¶æ›´å¿« shiftcls ç±»çš„æŒ‡é’ˆ magic å›ºå®šå€¼ä¸º 0xd2ï¼Œç”¨äºåœ¨è°ƒè¯•æ—¶åˆ†è¾¨å¯¹è±¡æ˜¯å¦æœªå®Œæˆåˆå§‹åŒ– weakly_referenced è¡¨ç¤ºè¯¥å¯¹è±¡æ˜¯å¦æœ‰è¿‡weakå¯¹è±¡ï¼Œå¦‚æœæ²¡æœ‰ï¼Œåˆ™ææ„æ—¶æ›´å¿« deallocating è¡¨ç¤ºè¯¥å¯¹è±¡æ˜¯å¦æ­£åœ¨ææ„ has_sidetable_rc è¡¨ç¤ºè¯¥å¯¹è±¡çš„å¼•ç”¨è®¡æ•°å€¼æ˜¯å¦è¿‡å¤§æ— æ³•å­˜å‚¨åœ¨isaæŒ‡é’ˆ extra_rc å­˜å‚¨å¼•ç”¨è®¡æ•°å€¼å‡ä¸€åçš„ç»“æœ æ•£åˆ—è¡¨æ•£åˆ—è¡¨æ¥å­˜å‚¨å¼•ç”¨è®¡æ•°å…·ä½“æ˜¯ç”¨DenseMapç±»æ¥å®ç°ï¼Œå®ç°ä¸­æœ‰é”ä¿è¯å…¶å®‰å…¨æ€§ã€‚ è·å–å¼•ç”¨è®¡æ•°åœ¨MRCç¯å¢ƒä¸‹å¯ä»¥ä½¿ç”¨retainCountæ–¹æ³•è·å–æŸä¸ªå¯¹è±¡çš„å¼•ç”¨è®¡æ•°ã€‚åœ¨ARCç¯å¢ƒä¸‹å¯ä»¥ä½¿ç”¨Core Foundation åº“çš„CFGetRetainCount((__bridge CFTypeRef)(obj))æ–¹æ³•å’ŒRuntimeçš„_objc_rootRetainCount()æ–¹æ³•æ¥è·å–å¼•ç”¨è®¡æ•°ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨KVCæŠ€æœ¯æ¥è·å–valueForKey:@&quot;retainCount&quot;ã€‚æ³¨æ„ä»¥ä¸Šæ–¹æ³•ä¸æ˜¯çº¿ç¨‹å®‰å…¨çš„ã€‚ æ³¨æ„NSString å®šä¹‰çš„å¯¹è±¡æ˜¯ä¿å­˜åœ¨å­—ç¬¦ä¸²å¸¸é‡åŒºï¼Œæ²¡æœ‰ç”¨å¼•ç”¨è®¡æ•°ç®¡ç†å†…å­˜ï¼Œå¦‚æœè¾“å‡ºå…¶retainCountï¼Œä¸º-1ã€‚ retainCount æ³¨æ„å…¶ä¸­çš„Do not use this methodã€‚ MRC(Manual Reference Counting) MRCä»å­—é¢ä¸Šç†è§£å°±æ˜¯æ‰‹åŠ¨ç®¡ç†å¼•ç”¨è®¡æ•°ï¼Œä¹Ÿå°±æ˜¯æ‰‹åŠ¨ç®¡ç†å†…å­˜ã€‚ç›¸å…³çš„å†…å­˜ç®¡ç†æ–¹æ³•æœ‰retainï¼Œreleaseï¼Œautoreleaseï¼Œå…¶ä¸­retainæ–¹æ³•æ˜¯å¯¹å¼•ç”¨è®¡æ•°+1ï¼Œç›¸åº”çš„releaseæ˜¯å¯¹å¼•ç”¨è®¡æ•°-1ï¼Œautoreleaseæ˜¯å°†å¯¹è±¡åŠ å…¥è‡ªåŠ¨é‡Šæ”¾æ± ï¼Œä¸‹æ–‡ä¼šè®²åˆ°ã€‚ ç¤ºä¾‹ä»£ç  1234567// ä»¥é¢„å®šPersonç±»ä¸ºä¾‹Person* person = [[Person alloc] init]; // ç”³è¯·å¯¹è±¡ï¼Œæ­¤æ—¶å¼•ç”¨è®¡æ•°=1[person retain]; //æ­¤æ—¶å¼•ç”¨è®°æ•°+1ï¼Œç°ä¸º2[person release]; //å¼•ç”¨è®¡æ•°-1ï¼Œæ­¤æ—¶å¼•ç”¨è®¡æ•°=1[person release]; //å¼•ç”¨è®¡æ•°-1ï¼Œæ­¤æ—¶å¼•ç”¨è®¡æ•°=0ï¼Œå†…å­˜è¢«é‡Šæ”¾[person autorelease]; // å°†å¯¹è±¡åŠ å…¥è‡ªåŠ¨é‡Šæ”¾æ± Person *person = [[[Person alloc] init] autorelease]; // ä¹Ÿå¯ä»¥åœ¨åˆ›å»ºå¯¹è±¡æ—¶å°†å…¶åŠ å…¥è‡ªåŠ¨é‡Šæ”¾æ±  æŒ‰é“ç†æ¥è¯´åˆ›å»ºä¸€ä¸ªå¯¹è±¡ï¼Œç„¶åreleaseåè¯¥å¯¹è±¡å¼•ç”¨è®¡æ•°ä¸ºé›¶ï¼Œä½†æ˜¯å®é™…æƒ…å†µä¸­å¹¶ä¸ä¼šå‡ºç°è¿™ç§ç°è±¡ï¼Œreleaseåå†è¾“å‡ºå…¶å¼•ç”¨è®¡æ•°è¿˜æ˜¯ä¸º1ï¼Œåœ¨æˆ‘çš„ç†è§£ä¸­æœ‰ä¸¤ç§å¯èƒ½ï¼š è¯¥å¯¹è±¡åœ¨å¼•ç”¨è®¡æ•°ä¸º1çš„æ—¶å€™è¿›è¡Œreleaseåï¼Œå¯¹è±¡å·²ç»è¢«é‡Šæ”¾ï¼Œæ­¤æ—¶å†è°ƒç”¨retainCountæ¯«æ— æ„ä¹‰ï¼Œå› ä¸ºè¯¥å¯¹è±¡å·²ç»ä¸å­˜åœ¨äº†ï¼Œä¸ºäº†é˜²æ­¢æŸäº›é”™è¯¯ä¿æŠ¤è¿™ä¸ªretainCountæ–¹æ³•æ‰€ä»¥ç¼–è¯‘å™¨ä¸ä¼šæŠ¥é”™ï¼Œä½†æ˜¯è¾“å‡ºå€¼ä¸ºé‡Šæ”¾å‰çš„å€¼ï¼› ç¼–è¯‘å™¨ä¸ºæˆ‘ä»¬åšäº†å„ç§ä¼˜åŒ–ï¼Œä¹Ÿè®¸æ˜¯è®°å½•retainCountä¸ºé›¶æ¶ˆè€—è¿‡å¤§æˆ–è€…æ²¡æœ‰æ„ä¹‰ã€‚ é‡å†™äº†`dealloc`æ–¹ä¾¿æŸ¥çœ‹å¯¹è±¡æ˜¯å¦è¢«é‡Šæ”¾ è¾“å‡ºå…¶`retainCount`ç„¶åé‡Šæ”¾ å¯ä»¥çœ‹åˆ°å¹¶ä¸ä¼šå‡ºç°å¼•ç”¨è®¡æ•°ä¸ºé›¶çš„æƒ…å†µï¼Œä½†æ˜¯è¯¥å¯¹è±¡ç¡®å®è¢«é‡Šæ”¾äº† å°çŸ¥è¯†:æŒ‡é’ˆé”™è¯¯ï¼šè®¿é—®äº†ä¸€å—åçš„å†…å­˜ï¼ˆå·²ç»è¢«å›æ”¶çš„ï¼Œä¸å¯ç”¨çš„å†…å­˜ï¼‰ã€‚åƒµå°¸å¯¹è±¡ï¼šæ‰€å å†…å­˜å·²ç»è¢«å›æ”¶çš„å¯¹è±¡ï¼Œåƒµå°¸å¯¹è±¡ä¸èƒ½å†è¢«ä½¿ç”¨ã€‚ï¼ˆæ‰“å¼€åƒµå°¸å¯¹è±¡æ£€æµ‹ï¼‰ç©ºæŒ‡é’ˆï¼šæ²¡æœ‰æŒ‡å‘ä»»ä½•ä¸œè¥¿çš„æŒ‡é’ˆï¼ˆå­˜å‚¨çš„ä¸œè¥¿æ˜¯0, null, nilï¼‰ï¼Œç»™ç©ºæŒ‡é’ˆå‘é€æ¶ˆæ¯ä¸ä¼šæŠ¥é”™ã€‚æ³¨æ„ï¼šä¸èƒ½ä½¿ç”¨[p retaion]è®©åƒµå°¸å¯¹è±¡èµ·æ­»å¤ç”Ÿã€‚ åœ¨MRCç®¡ç†æ—¶ä»£æœ‰ä¸€ä¸ªé»„é‡‘æ³•åˆ™ï¼š è°åˆ›å»ºè°è´Ÿè´£ã€‚å¦‚æœä½ é€šè¿‡alloc,new,copyæ¥åˆ›å»ºäº†ä¸€ä¸ªå¯¹è±¡ï¼Œé‚£ä¹ˆä½ å°±å¿…é¡»è°ƒç”¨releaseæˆ–è€…autoreleaseæ–¹æ³•ï¼› è°retainï¼Œè°releaseã€‚åªè¦ä½ è°ƒç”¨äº†retainï¼Œæ— è®ºè¿™ä¸ªå¯¹è±¡æ—¶å¦‚ä½•ç”Ÿæˆçš„ï¼Œä½ éƒ½è¦è°ƒç”¨releaseï¼› ARC åŸç†å‰æ®µç¼–è¯‘å™¨ä¼šä¸ºâ€œæ‹¥æœ‰çš„â€æ¯ä¸€ä¸ªå¯¹è±¡åŠ å…¥ç›¸åº”çš„releaseè¯­å¥ï¼Œå¦‚æœå¯¹è±¡çš„æ‰€æœ‰æƒä¿®é¥°ç¬¦æ˜¯__strongï¼Œé‚£ä¹ˆå®ƒå°±æ˜¯è¢«æ‹¥æœ‰çš„ã€‚å¦‚æœå†æŸä¸ªæ–¹æ³•å†…åˆ›å»ºäº†ä¸€ä¸ªå¯¹è±¡ï¼Œå‰ç«¯ç¼–è¯‘å™¨ä¼šåœ¨æ–¹æ³•æœ«å°¾è‡ªåŠ¨æ’å…¥releaseè¯­å¥å·²é”€æ¯å®ƒã€‚è€Œç±»æ‹¥æœ‰çš„å¯¹è±¡ï¼ˆå®ä¾‹å˜é‡/å±æ€§ï¼‰ä¼šåœ¨deallocæ–¹æ³•å†…è¢«é‡Šæ”¾ã€‚ ç¼–è¯‘å™¨æ‰€ä¸º ç¼–è¯‘å™¨ä¸ºæˆ‘ä»¬åšçš„ï¼Œæˆ‘ä»¬å¯ä»¥æ‰‹åŠ¨å®Œæˆè¾¾åˆ°ä¼˜åŒ–æ¯”å¦‚ï¼š__autoreleasingåœ¨ARCä¸­ä¸»è¦ç”¨åœ¨å‚æ•°ä¼ é€’è¿”å›å€¼ï¼ˆout-parametersï¼‰å’Œå¼•ç”¨ä¼ é€’å‚æ•°ï¼ˆpass-by-referenceï¼‰çš„æƒ…å†µä¸‹ï¼Œæœ‰è¿™ç§æŒ‡é’ˆï¼ˆNSError **ï¼‰çš„å‡½æ•°å‚æ•°å¦‚æœä¸åŠ ä¿®é¥°ç¬¦ï¼Œç¼–è¯‘å™¨ä¼šé»˜è®¤å°†ä»–ä»¬è®¤å®šä¸º__autoreleasingç±»å‹ã€‚æ¯”å¦‚å¸¸ç”¨çš„NSErrorçš„ä½¿ç”¨ï¼š 12345NSError *__autoreleasing error;if (![data writeToFile:filename options:NSDataWritingAtomic error:&amp;error])&#123; NSLog(@\"Error: %@\", error);&#125; å¦‚æœä½ æŠŠerrorå®šä¹‰ä¸ºäº†strongå‹ï¼Œç¼–è¯‘å™¨ä¼šéšå¼åœ°åšå¦‚ä¸‹äº‹æƒ…ï¼Œä¿è¯æœ€ç»ˆä¼ å…¥å‡½æ•°çš„å‚æ•°ä¾ç„¶æ˜¯ä¸ª__autoreleasingç±»å‹çš„å¼•ç”¨ã€‚ 1234567NSError *error;NSError *__autoreleasing tempError = error; // ç¼–è¯‘å™¨æ·»åŠ if (![data writeToFile:filename options:NSDataWritingAtomic error:&amp;tempError])&#123; error = tempError; // ç¼–è¯‘å™¨æ·»åŠ  NSLog(@\"Error :%@\", error);&#125; æ‰€ä»¥ä¸ºäº†æé«˜æ•ˆç‡ï¼Œé¿å…è¿™ç§æƒ…å†µï¼Œæˆ‘ä»¬ä¸€èˆ¬åœ¨å®šä¹‰errorçš„æ—¶å€™å°†å…¶è€è€å®å®åœ°å£°æ˜ä¸º__autoreleasingç±»å‹ã€‚ å¾ªç¯å¼•ç”¨ å¹³å¸¸æˆ‘ä»¬å®¹æ˜“é€ æˆå¾ªç¯å¼•ç”¨çš„ä¸‰ç§æƒ…å†µï¼š NSTimer å…ˆçœ‹NSTimerä½¿ç”¨çš„ä»£ç : 1_timer = [NSTimer scheduledTimerWithTimeInterval:1.0 target:self selector:@selector(runTimer) userInfo:nil repeats:YES]; å…¶ä¸­_timeræ˜¯å®ä¾‹å˜é‡è¢«selfä¿ç•™ï¼Œ_timerçš„targetæ˜¯selfï¼Œselfè¢«_timerä¿ç•™ï¼Œå¼•å‘å¾ªç¯å¼•ç”¨ã€‚ å¾ªç¯å¼•ç”¨ è§£é™¤æ–¹æ³•å°±æ˜¯ä½¿targetä¸­çš„å¯¹è±¡ä¸æ˜¯viewControllerä»è€Œæ–­å¼€å¼•ç”¨ï¼ŒiOS10ä¹‹å‰æˆ‘ä»¬å¯ä»¥å†™ä¸ªç±»åˆ«é‡æ–°å°è£…targetæ¥å®ç°ï¼ŒiOS10ä¹‹åç³»ç»Ÿç»™äº†æ–°æ–¹æ³•ï¼š 1+ (NSTimer *)scheduledTimerWithTimeInterval:(NSTimeInterval)interval repeats:(BOOL)repeats block:(void (^)(NSTimer *timer))block; ä¸å†éœ€è¦targetï¼Œè€Œæ˜¯ä¼ å…¥ä¸€ä¸ªblockï¼Œåœ¨blocké‡Œé¢è¿›è¡Œå¾ªç¯è°ƒç”¨æ–¹æ³• å…³äºblockæ€ä¹ˆè§£å†³å¾ªç¯å¼•ç”¨è¯·çœ‹ä¸‹é¢ block ç®€ä»‹blockå’Œå…¶ä»–è¯­è¨€çš„é—­åŒ…æˆ–lambdaè¡¨è¾¾å¼æ˜¯ä¸€å›äº‹,blockçš„ä½¿ç”¨å¾ˆåƒå‡½æ•°æŒ‡é’ˆï¼Œä¸è¿‡ä¸å‡½æ•°æœ€å¤§çš„ä¸åŒæ˜¯ï¼šblockå¯ä»¥è®¿é—®å‡½æ•°ä»¥å¤–ã€è¯æ³•ä½œç”¨åŸŸä»¥å†…çš„å¤–éƒ¨å˜é‡çš„å€¼ã€‚æ¢å¥è¯è¯´ï¼Œblockä¸ä»…å®ç°å‡½æ•°çš„åŠŸèƒ½ï¼Œè¿˜èƒ½æºå¸¦å‡½æ•°çš„æ‰§è¡Œç¯å¢ƒã€‚ blockåŸºæœ¬è¯­æ³• 123456789// å£°æ˜ä¸€ä¸ªblockå˜é‡long (^sum) (int, int) = nil;// sumæ˜¯ä¸ªblockå˜é‡ï¼Œè¯¥blockç±»å‹æœ‰ä¸¤ä¸ªintå‹å‚æ•°ï¼Œè¿”å›ç±»å‹æ˜¯longã€‚// å®šä¹‰blockå¹¶èµ‹ç»™å˜é‡sumsum = ^ long (int a, int b) &#123; return a + b;&#125;;// è°ƒç”¨blockï¼šlong s = sum(1, 2); å®šä¹‰ä¸€ä¸ªå®ä¾‹å‡½æ•°ï¼Œè¯¥å‡½æ•°è¿”å›blockï¼š 12345678- (long (^)(int, int)) sumBlock &#123; int base = 100; return [[ ^ long (int a, int b) &#123; return base + a + b; &#125; copy] autorelease]; &#125;// è°ƒç”¨block[self sumBlock](1,2); æ ¹æ®åœ¨å†…å­˜ä¸­çš„ä½ç½®å°†blockåˆ†ä¸ºä¸‰ç§ç±»å‹ï¼š * `NSGlobalBlock`: ç±»ä¼¼å‡½æ•°ï¼Œä½äºtextæ®µï¼› * `NSStackBlock`: ä½äºæ ˆå†…å­˜ï¼Œå‡½æ•°è¿”å›åblockå°†æ— æ•ˆï¼› * `NSMallocBlock`: ä½äºå †å†…å­˜ã€‚ blockå…¶å®åŒ…å«ä¸¤ä¸ªéƒ¨åˆ†å†…å®¹ï¼š blockæ‰§è¡Œçš„ä»£ç ï¼Œè¿™æ˜¯åœ¨ç¼–è¯‘çš„æ—¶å€™å·²ç»ç”Ÿæˆå¥½çš„ï¼› ä¸€ä¸ªåŒ…å«blockæ‰§è¡Œæ—¶éœ€è¦çš„æ‰€æœ‰å¤–éƒ¨å˜é‡å€¼çš„æ•°æ®ç»“æ„ã€‚ blockå°†ä½¿ç”¨åˆ°çš„ã€ä½œç”¨åŸŸé™„è¿‘åˆ°çš„å˜é‡çš„å€¼å»ºç«‹ä¸€ä»½å¿«ç…§æ‹·è´åˆ°æ ˆä¸Šã€‚ blockçš„æ•°æ®ç»“æ„ å¯¹äº block å¤–çš„å˜é‡å¼•ç”¨ï¼Œblock é»˜è®¤æ˜¯å°†å…¶å¤åˆ¶åˆ°å…¶æ•°æ®ç»“æ„ä¸­æ¥å®ç°è®¿é—®çš„ï¼š ä¼ å…¥å¤–éƒ¨å˜é‡ å¯¹äºç”¨ __block ä¿®é¥°çš„å¤–éƒ¨å˜é‡å¼•ç”¨ï¼Œblock æ˜¯å¤åˆ¶å…¶å¼•ç”¨åœ°å€æ¥å®ç°è®¿é—®çš„ï¼š ç”¨__blockä¿®é¥° åˆæ­¥äº†è§£äº†blockåçœ‹çœ‹å®ƒæ€ä¹ˆæ„æˆå¾ªç¯å¼•ç”¨å¹¶æ€ä¹ˆè§£å†³çš„å§ 12345678910111213typedef void(^block)();@property (copy, nonatomic) block myBlock;@property (copy, nonatomic) NSString *blockString;- (void)testBlock &#123; self.myBlock = ^() &#123; //å…¶å®æ³¨é‡Šä¸­çš„ä»£ç ï¼ŒåŒæ ·ä¼šé€ æˆå¾ªç¯å¼•ç”¨ NSString *localString = self.blockString; //NSString *localString = _blockString; //[self doSomething]; &#125;;&#125; çœ‹äº†å‰é¢å…³äºblockçš„ä¸€äº›ä»‹ç»åº”è¯¥å®¹æ˜“çœ‹å‡ºæ¥ï¼Œå½“æˆ‘ä»¬å¾€blockä¸­ä¼ å…¥æ•°æ®æ—¶æ˜¯ä¿å­˜åœ¨äº†blockçš„å †ä¸­ï¼Œå¦‚ä¸Šè¿°ä»£ç ä¸­å¼•ç”¨äº†selfç›¸å½“äºå¯¹selfè¿›è¡Œäº†ä¸€æ¬¡retainï¼Œè€Œselfæœ¬èº«æŒæœ‰blockäºæ˜¯é€ æˆäº†å¾ªç¯å¼•ç”¨ï¼ŒåŒæ—¶åœ¨blockä¸­release``selfæ²¡æœ‰ç”¨ï¼Œå› ä¸ºåœ¨blockä¸­æ“ä½œä½œç”¨èŒƒå›´ä»…ä»…æ¥blockçš„å‡½æ•°æ ˆï¼Œå½±å“ä¸åˆ°å †ä¸­çš„selfï¼Œè§£å†³æ–¹æ³•å¦‚ä¸‹ï¼š 12345__weak typeof(self) weakSelf = self;self.myBlock = ^()&#123; __strong typeof(weakSelf) = strongSelf; NSString *localString = strongSelf;&#125; å…¶ä¸­ä¼ å…¥ä¸€ä¸ªè‹¥å¼•ç”¨å°±ä¸ä¼šé€ æˆå¾ªç¯å¼•ç”¨ï¼Œç„¶ååœ¨blockçš„å‡½æ•°æ ˆä¸­ç”¨ä¸€ä¸ªå¼ºæŒ‡é’ˆæ¥æ¥å—ä¼ è¿›æ¥çš„å¼±æŒ‡é’ˆï¼Œé˜²æ­¢å¼±æŒ‡é’ˆè¢«æå‰é‡Šæ”¾äº§ç”Ÿé‡æŒ‡é’ˆã€‚ å‚è€ƒæ–‡ç« ï¼šCooper â€“ æ­£ç¡®ä½¿ç”¨Blocké¿å…Cycle Retainå’ŒCrashå”å·§ â€“ è°ˆObjective-C blockçš„å®ç°Dev Talking â€“ Objective-Cä¸­çš„Block delegateæˆ‘ä»¬å¯¹ä»£ç†çš„å†™æ³•ä¸€èˆ¬éƒ½æ˜¯ï¼š1@property (nonatomic, weak) id&lt;TestDelegate&gt; delegate; å¦‚æœä½¿ç”¨strongçš„è¯å¾ˆæ˜æ˜¾ä¼šé€ æˆå¾ªç¯å¼•ç”¨ï¼ˆdelegateè°ƒç”¨selfçš„ä¸€äº›ä¸œè¥¿ï¼‰ï¼Œä»Šå¤©è¢«é¢è¯•å®˜é—®é“å¦‚æœä½¿ç”¨delegateå‡ºç°äº†å¾ªç¯å¼•ç”¨æ€ä¹ˆè§£å†³ï¼Œæˆ‘è¯´ç”¨weakï¼Œä»–è¯´æ¢ä¸€ä¸ªï¼Œç„¶åå°±æ‡µä½äº†ï¼Œåªå›ç­”äº†æ€è·¯ï¼Œæ‰¾åˆ°äº’ç›¸å¼•ç”¨çš„å¯¹è±¡(å¯ä»¥ç”¨Instruments)ç„¶åæ–­å¼€å¼•ç”¨ã€‚ Autorelease ç®€ä»‹å¾ˆå¥½ç†è§£ï¼Œå­—é¢æ„æ€ä¸Šçœ‹å°±æ˜¯è‡ªåŠ¨é‡Šæ”¾ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ä½¿ç”¨autoreleaseè®©ç¼–è¯‘å™¨å¸®æˆ‘ä»¬åœ¨æŸä¸ªæ—¶åˆ»è‡ªåŠ¨é‡Šæ”¾å†…å­˜ã€‚åœ¨MRCæ—¶æˆ‘ä»¬ä½¿ç”¨NSAutoreleaseç±»æ¥ä½¿ç”¨è‡ªåŠ¨é‡Šæ”¾æœºåˆ¶ï¼Œä»£ç å¦‚ä¸‹ï¼š 123NSAutoreleasePool pool = [[NSAutoreleasePool alloc] init];// Code benefitting from a local autorelease pool.[pool release]; ä¹Ÿå¯ä»¥ç›´æ¥ä½¿ç”¨[obj autorelease]ã€‚ç°åœ¨åŸºæœ¬ä¸Šéƒ½æ˜¯ARCç¯å¢ƒï¼Œè¿™ä¸ªæ—¶å€™æˆ‘ä»¬ä½¿ç”¨çš„æ˜¯autoreleasepoolï¼ˆè‡ªåŠ¨é‡Šæ”¾æ± ï¼‰ï¼Œæ¯”å¦‚å¸¸è§çš„ï¼š 12345678910111213//iOS programint main(int argc, char * argv[]) &#123; @autoreleasepool &#123; return UIApplicationMain(argc, argv, nil, NSStringFromClass([AppDelegate class])); &#125;&#125;//Command line programint main(int argc, const char *argv[]) &#123; @autoreleasepool &#123; //... &#125; return 0;&#125; å®ƒçš„ä½œç”¨æ˜¯æŠŠæˆ‘ä»¬åœ¨{}ä¸­ç”³è¯·çš„å¯¹è±¡åœ¨äº‹ä»¶å¤„ç†å®Œæ—¶è‡ªåŠ¨é‡Šæ”¾æ‰ï¼Œå…¶ä¸­çš„åŸç†æ¨èé˜…è¯»Qi Tangçš„iOS ä¸­çš„ Autorelease Poolã€‚å‰é¢è¯´åˆ°çš„äº‹ä»¶å¤„ç†å®Œæ—¶å…¶å®å°±æ˜¯ä¸€æ¬¡runloopç»“æŸæ—¶ã€‚ runloopå’Œautorelease ç¨‹åºè¿è¡Œ -&gt; å¼€å¯äº‹ä»¶å¾ªç¯ -&gt; å‘ç”Ÿè§¦æ‘¸äº‹ä»¶ -&gt; åˆ›å»ºè‡ªåŠ¨é‡Šæ”¾æ±  -&gt; å¤„ç†è§¦æ‘¸äº‹ä»¶ -&gt; äº‹ä»¶å¯¹è±¡åŠ å…¥è‡ªåŠ¨é‡Šæ”¾æ±  -&gt; ä¸€æ¬¡äº‹ä»¶å¾ªç¯ç»“æŸ, é”€æ¯è‡ªåŠ¨é‡Šæ”¾æ±  ä»€ä¹ˆæ—¶å€™ç”¨@autoreleasepool å†™åŸºäºå‘½ä»¤è¡Œçš„çš„ç¨‹åºæ—¶ï¼Œå°±æ˜¯æ²¡æœ‰UIæ¡†æ¶ï¼Œå¦‚AppKitç­‰Cocoaæ¡†æ¶æ—¶ã€‚ å†™å¾ªç¯ï¼Œå¾ªç¯é‡Œé¢åŒ…å«äº†å¤§é‡ä¸´æ—¶åˆ›å»ºçš„å¯¹è±¡ã€‚ï¼ˆæœ¬æ–‡çš„ä¾‹å­ï¼‰ åˆ›å»ºäº†æ–°çš„çº¿ç¨‹ã€‚ï¼ˆéCocoaç¨‹åºåˆ›å»ºçº¿ç¨‹æ—¶æ‰éœ€è¦ï¼‰ é•¿æ—¶é—´åœ¨åå°è¿è¡Œçš„ä»»åŠ¡ã€‚ åˆ©ç”¨@autoreleasepoolä¼˜åŒ–å¾ªç¯å½“æˆ‘ä»¬ä¸€ä¸ªå¾ªç¯å†…åˆ›å»ºäº†å¾ˆå¤šä¸´æ—¶å¯¹è±¡æ—¶ï¼Œå¯ä»¥é€šè¿‡ä½¿ç”¨@autoreleasepoolåœ¨æ¯æ¬¡å¾ªç¯ç»“æŸæ—¶é‡Šæ”¾å†…å­˜ï¼š 12345678910//æ¥è‡ªAppleæ–‡æ¡£ï¼Œè§å‚è€ƒNSArray *urls = &lt;# An array of file URLs #&gt;;for (NSURL *url in urls) &#123; @autoreleasepool &#123; NSError *error; NSString *fileContents = [NSString stringWithContentsOfURL:url encoding:NSUTF8StringEncoding error:&amp;error]; /* Process the string, creating and autoreleasing more objects. */ &#125;&#125; å‚è€ƒæ–‡ç« ï¼šsunnyxx â€”â€” é»‘å¹•èƒŒåçš„AutoreleaseJerry4me â€”â€” iOSä¸­autoreleaseçš„é‚£äº›äº‹å„¿tutuge â€”â€” @autoreleasepool-å†…å­˜çš„åˆ†é…ä¸é‡Šæ”¾ ä¿®é¥°è¯","categories":[{"name":"iOS","slug":"iOS","permalink":"http://codingdoge.cn/categories/iOS/"}],"tags":[{"name":"Swift","slug":"Swift","permalink":"http://codingdoge.cn/tags/Swift/"},{"name":"OC","slug":"OC","permalink":"http://codingdoge.cn/tags/OC/"}]},{"title":"æ¼«è°ˆiOSç³»åˆ—ä¹‹ï¼šå¤šçº¿ç¨‹","slug":"title: æ¼«è°ˆiOSç³»åˆ—ä¹‹ï¼šå¤šçº¿ç¨‹","date":"2017-07-17T03:17:00.000Z","updated":"2018-01-13T05:08:06.362Z","comments":true,"path":"2017/07/17/title: æ¼«è°ˆiOSç³»åˆ—ä¹‹ï¼šå¤šçº¿ç¨‹/","link":"","permalink":"http://codingdoge.cn/2017/07/17/title: æ¼«è°ˆiOSç³»åˆ—ä¹‹ï¼šå¤šçº¿ç¨‹/","excerpt":"","text":"çº¿ç¨‹åŸºæœ¬æ¦‚å¿µçº¿ç¨‹ï¼ˆthreadï¼‰æ˜¯æ“ä½œç³»ç»Ÿèƒ½å¤Ÿè¿›è¡Œè¿ç®—è°ƒåº¦çš„æœ€å°å•ä½ã€‚å®ƒè¢«åŒ…å«åœ¨è¿›ç¨‹ä¹‹ä¸­ï¼Œæ˜¯è¿›ç¨‹ä¸­çš„å®é™…è¿ä½œå•ä½ã€‚ä¸€æ¡çº¿ç¨‹æŒ‡çš„æ˜¯è¿›ç¨‹ä¸­ä¸€ä¸ªå•ä¸€é¡ºåºçš„æ§åˆ¶æµï¼Œä¸€ä¸ªè¿›ç¨‹ä¸­å¯ä»¥å¹¶å‘å¤šä¸ªçº¿ç¨‹ï¼Œæ¯æ¡çº¿ç¨‹å¹¶è¡Œæ‰§è¡Œä¸åŒçš„ä»»åŠ¡ã€‚åŒä¸€è¿›ç¨‹ä¸­çš„å¤šæ¡çº¿ç¨‹å°†å…±äº«è¯¥è¿›ç¨‹ä¸­çš„å…¨éƒ¨ç³»ç»Ÿèµ„æºï¼Œå¦‚è™šæ‹Ÿåœ°å€ç©ºé—´ï¼Œæ–‡ä»¶æè¿°ç¬¦å’Œä¿¡å·å¤„ç†ç­‰ç­‰ã€‚ä½†åŒä¸€è¿›ç¨‹ä¸­çš„å¤šä¸ªçº¿ç¨‹æœ‰å„è‡ªçš„è°ƒç”¨æ ˆï¼ˆcall stackï¼‰ï¼Œè‡ªå·±çš„å¯„å­˜å™¨ç¯å¢ƒï¼ˆregister contextï¼‰ï¼Œè‡ªå·±çš„çº¿ç¨‹æœ¬åœ°å­˜å‚¨ï¼ˆthread-local storageï¼‰ã€‚çº¿ç¨‹çš„çŠ¶æ€ï¼š æ–°ç”Ÿæ€ï¼ˆNew Threadï¼‰ å¯è¿è¡Œæ€ï¼ˆRunnableï¼‰ é˜»å¡/éè¿è¡Œæ€ï¼ˆNot Runnableï¼‰ æ­»äº¡æ€ï¼ˆDeadï¼‰ æ­»é”ï¼šæ˜¯æŒ‡ä¸¤ä¸ªæˆ–ä¸¤ä¸ªä»¥ä¸Šçš„è¿›ç¨‹åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œç”±äºç«äº‰èµ„æºæˆ–è€…ç”±äºå½¼æ­¤é€šä¿¡è€Œé€ æˆçš„ä¸€ç§é˜»å¡çš„ç°è±¡ï¼Œè‹¥æ— å¤–åŠ›ä½œç”¨ï¼Œå®ƒä»¬éƒ½å°†æ— æ³•æ¨è¿›ä¸‹å»ã€‚ æ­»é”æ¡ä»¶ï¼š äº’æ–¥æ¡ä»¶ï¼šæ‰€è°“äº’æ–¥å°±æ˜¯è¿›ç¨‹åœ¨æŸä¸€æ—¶é—´å†…ç‹¬å èµ„æºã€‚ è¯·æ±‚ä¸ä¿æŒæ¡ä»¶ï¼šä¸€ä¸ªè¿›ç¨‹å› è¯·æ±‚èµ„æºè€Œé˜»å¡æ—¶ï¼Œå¯¹å·²è·å¾—çš„èµ„æºä¿æŒä¸æ”¾ã€‚ ä¸å‰¥å¤ºæ¡ä»¶:è¿›ç¨‹å·²è·å¾—èµ„æºï¼Œåœ¨æœ«ä½¿ç”¨å®Œä¹‹å‰ï¼Œä¸èƒ½å¼ºè¡Œå‰¥å¤ºã€‚ å¾ªç¯ç­‰å¾…æ¡ä»¶:è‹¥å¹²è¿›ç¨‹ä¹‹é—´å½¢æˆä¸€ç§å¤´å°¾ç›¸æ¥çš„å¾ªç¯ç­‰å¾…èµ„æºå…³ç³»ã€‚ åˆ›å»ºçº¿ç¨‹çš„å¼€é”€å¤šçº¿ç¨‹çš„ä»£ä»·åŠä¸Šä¸‹æ–‡åˆ‡æ¢ pThreadPOSIXçº¿ç¨‹ï¼ˆPOSIX Threadsï¼Œå¸¸è¢«ç¼©å†™ä¸ºPthreadsï¼‰æ˜¯POSIXçš„çº¿ç¨‹æ ‡å‡†ï¼Œè·¨å¹³å°ï¼Œé€‚ç”¨äºå¤šç§æ“ä½œç³»ç»Ÿï¼ˆç±»Unixæ“ä½œç³»ç»Ÿä¸­ï¼Œéƒ½ä½¿ç”¨Pthreadsä½œä¸ºæ“ä½œç³»ç»Ÿçš„çº¿ç¨‹ï¼ŒWindowsæ“ä½œç³»ç»Ÿä¹Ÿæœ‰å…¶ç§»æ¤ç‰ˆpthreads-win32ï¼‰ï¼Œå¯ç§»æ¤æ€§å¼ºï¼Œæ˜¯ä¸€å¥—çº¯Cè¯­è¨€çš„é€šç”¨APIï¼Œä¸”çº¿ç¨‹çš„ç”Ÿå‘½å‘¨æœŸéœ€è¦ç¨‹åºå‘˜è‡ªå·±ç®¡ç†ï¼Œä½¿ç”¨éš¾åº¦è¾ƒå¤§ï¼Œæ‰€ä»¥åœ¨å®é™…å¼€å‘ä¸­é€šå¸¸ä¸ä½¿ç”¨ã€‚Pthreads APIä¸­å¤§è‡´å…±æœ‰100ä¸ªå‡½æ•°è°ƒç”¨ï¼Œå…¨éƒ½ä»¥â€pthread_â€å¼€å¤´ï¼Œå¹¶å¯ä»¥åˆ†ä¸ºå››ç±»ï¼š çº¿ç¨‹ç®¡ç†ï¼Œä¾‹å¦‚åˆ›å»ºçº¿ç¨‹ï¼Œç­‰å¾…(join)çº¿ç¨‹ï¼ŒæŸ¥è¯¢çº¿ç¨‹çŠ¶æ€ç­‰ã€‚ äº’æ–¥é”ï¼ˆMutexï¼‰ï¼šåˆ›å»ºã€æ‘§æ¯ã€é”å®šã€è§£é”ã€è®¾ç½®å±æ€§ç­‰æ“ä½œã€‚ æ¡ä»¶å˜é‡ï¼ˆCondition Variableï¼‰ï¼šåˆ›å»ºã€æ‘§æ¯ã€ç­‰å¾…ã€é€šçŸ¥ã€è®¾ç½®ä¸æŸ¥è¯¢å±æ€§ç­‰æ“ä½œã€‚ ä½¿ç”¨äº†äº’æ–¥é”çš„çº¿ç¨‹é—´çš„åŒæ­¥ç®¡ç†ã€‚ pThreadåœ¨å®é™…å¼€å‘ä¸­åŸºæœ¬ä¸ä½¿ç”¨ï¼Œæ‰€ä»¥å¤§æ¦‚äº†è§£ä¸‹å°±å¥½äº†ã€‚ NSThreadGCDdispatch_barrier_async&amp;dispatch_barrier_syncåœ¨é˜Ÿåˆ—ä¸­ï¼Œbarrierå—å¿…é¡»å•ç‹¬æ‰§è¡Œï¼Œä¸èƒ½ä¸å…¶ä»–blockå¹¶è¡Œã€‚è¿™åªå¯¹å¹¶å‘é˜Ÿåˆ—æœ‰æ„ä¹‰ï¼Œå¹¶å‘é˜Ÿåˆ—å¦‚æœå‘ç°æ¥ä¸‹æ¥è¦æ‰§è¡Œçš„blockæ˜¯ä¸ªbarrier blockï¼Œé‚£ä¹ˆå°±ä¸€ç›´è¦ç­‰åˆ°å½“å‰æ‰€æœ‰å¹¶å‘çš„blockéƒ½æ‰§è¡Œå®Œæ¯•ï¼Œæ‰ä¼šå•ç‹¬æ‰§è¡Œè¿™ä¸ªbarrier blockä»£ç å—ï¼Œç­‰åˆ°è¿™ä¸ªbarrier blockæ‰§è¡Œå®Œæ¯•ï¼Œå†ç»§ç»­æ­£å¸¸å¤„ç†å…¶ä»–å¹¶å‘blockã€‚ async, syncä¸¤è€…åŒºåˆ«åœ¨äºasyncå°†è‡ªå·±çš„ä»»åŠ¡æ’å…¥é˜Ÿåˆ—å, ä¸ç”¨ç­‰å¾…è‡ªå·±çš„ä»»åŠ¡ç»“æŸ, ç»§ç»­æŠŠåé¢çš„ä»»åŠ¡æ’å…¥é˜Ÿåˆ—, ç„¶åç­‰å¾…è‡ªå·±çš„ä»»åŠ¡è¿è¡Œç»“æŸæ‰æ‰§è¡Œåé¢çš„ä»»åŠ¡, syncå°†è‡ªå·±çš„ä»»åŠ¡æ’å…¥é˜Ÿåˆ—åï¼Œéœ€è¦ç­‰å¾…è‡ªå·±çš„ä»»åŠ¡è¿è¡Œç»“æŸæ‰èƒ½å°†åé¢çš„ä»»åŠ¡æ’å…¥é˜Ÿåˆ—ã€‚ 12345678910111213141516171819202122232425262728293031323334353637#import &lt;Foundation/Foundation.h&gt; @interface Person : NSObject@property (nonatomic, copy) NSString *name;@end #import \"Person.h\" @interface Person ()@end static NSString *_name;static dispatch_queue_t _concurrentQueue;@implementation Person- (instancetype)init&#123; if (self = [super init]) &#123; _concurrentQueue = dispatch_queue_create(\"com.person.syncQueue\", DISPATCH_QUEUE_CONCURRENT); &#125; return self;&#125;- (void)setName:(NSString *)name&#123; dispatch_barrier_async(_concurrentQueue, ^&#123; _name = [name copy]; &#125;);&#125;- (NSString *)name&#123; __block NSString *tempName; dispatch_sync(_concurrentQueue, ^&#123; tempName = _name; &#125;); return tempName;&#125;@end NSOperationNSOperationé»˜è®¤æ˜¯éå¹¶å‘çš„ï¼Œå½“ä½ è°ƒç”¨-[NSOperation start]æ–¹æ³•æ—¶ï¼Œè¯¥æ–¹æ³•ä¼šç­‰ä»»åŠ¡ç»“æŸæ‰ä¼šè¿”å›ï¼›å¹¶å‘çš„NSOperationæ˜¯æŒ‡,å½“ä½ è°ƒç”¨-[NSOperation start]åï¼ŒNSOperationä¼šåœ¨éå½“å‰çº¿ç¨‹(å»ºç«‹ä¸€ä¸ªNSThreadï¼Œæˆ–æ˜¯dispatch asyncç­‰)æ‰§è¡Œä»»åŠ¡ï¼Œå¹¶åœ¨ä»»åŠ¡ç»“æŸä¹‹å‰å°±è¿”å›; éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå¹¶å‘è¡Œä¸ºéƒ½éœ€è¦ä½ è‡ªå·±å®ç°ï¼Œè‹¥è¦å®ç°å¹¶å‘ï¼Œä½ éœ€è¦åšå¾ˆå¤šé¢å¤–çš„å·¥ä½œï¼š ä½ éœ€è¦åˆ›å»ºä¸€ä¸ªsubclassï¼› é™¤äº†é‡è½½mainæ–¹æ³•ï¼Œå®ç°å¹¶å‘ä½ è¿˜éœ€è¦è‡³å°‘é‡è½½ï¼›start,isConcurrent,isExecuting,isFinishedå››ä¸ªæ–¹æ³•ï¼› åœ¨starté‡Œï¼Œåˆ›å»ºThreadæˆ–è€…è°ƒç”¨ä¸€ä¸ªå¼‚æ­¥å‡½æ•°ï¼› æ›´æ–°isExecutingï¼Œå¹¶ä¸”å‘é€ç›¸åº”KVOæ¶ˆæ¯ï¼› ä»»åŠ¡ç»“æŸåï¼Œä½ è¿˜å¾—æ›´æ–°isExecutingå’ŒisFinishedï¼Œå‘é€ç›¸åº”KVOæ¶ˆæ¯ã€‚å®ç°ä¸€ä¸ªå¹¶å‘çš„NSOperationæ¯”è¾ƒå°‘è§ï¼Œå…·ä½“å¦‚ä½•å®ç°ï¼Œå¯ä»¥è¯»è¯»æ–‡æ¡£: NSOperation Class Reference å¤§å¤šæ•°æƒ…å†µä¸‹NSOperationéƒ½è®¾è®¡æˆéå¹¶å‘ï¼Œè¿™æ ·å®ç°èµ·æ¥ä¼šç®€å•å¾ˆå¤š;å¹¶ä¸”ï¼Œä¸€èˆ¬ä¼šé…åˆNSOperationQueueä½¿ç”¨ï¼Œç”±NSOperationQueueæ¥è´Ÿè´£æ‰§è¡ŒNSOperationï¼Œè€Œéç›´æ¥è°ƒç”¨-[NSOperation start]ã€‚ è‹¥æœ‰å¤æ‚ä»»åŠ¡éœ€è¦å¹¶å‘æ‰§è¡Œï¼Œä¸€èˆ¬ä¹Ÿæ˜¯æ‹†æˆå¤šä¸ªNSOperationï¼Œç”±NSOperationQueueæ¥å¹¶å‘çš„æ‰§è¡Œå¤šä¸ªNSOperationã€‚ å‚è€ƒ:å…³äºiOSå¤šçº¿ç¨‹ï¼Œä½ çœ‹æˆ‘å°±å¤Ÿäº† dispatch_barrier_syncå’Œdispatch_barrier_asynciOSå¼€å‘ï¼šæ·±å…¥ç†è§£GCD ç¬¬äºŒç¯‡ï¼ˆdispatch_groupã€dispatch_barrierã€åŸºäºçº¿ç¨‹å®‰å…¨çš„å¤šè¯»å•å†™ï¼‰NSOperationçš„å¹¶å‘å’Œéå¹¶å‘æœ‰ä»€ä¹ˆåŒºåˆ«å‘€ï¼Ÿ","categories":[{"name":"iOS","slug":"iOS","permalink":"http://codingdoge.cn/categories/iOS/"}],"tags":[{"name":"OC","slug":"OC","permalink":"http://codingdoge.cn/tags/OC/"}]},{"title":"å‰‘æŒ‡Offer â€”â€” å¤æ‚é“¾è¡¨çš„å¤åˆ¶","slug":"title: å‰‘æŒ‡Offer â€”â€” å¤æ‚é“¾è¡¨çš„å¤åˆ¶","date":"2017-07-06T02:44:00.000Z","updated":"2018-01-14T17:25:14.000Z","comments":true,"path":"2017/07/06/title: å‰‘æŒ‡Offer â€”â€” å¤æ‚é“¾è¡¨çš„å¤åˆ¶/","link":"","permalink":"http://codingdoge.cn/2017/07/06/title: å‰‘æŒ‡Offer â€”â€” å¤æ‚é“¾è¡¨çš„å¤åˆ¶/","excerpt":"","text":"é¢˜ç›®æ¥æºç‰›å®¢ç½‘ï¼šå¤æ‚é“¾è¡¨çš„å¤åˆ¶ é¢˜ç›®æè¿°è¾“å…¥ä¸€ä¸ªå¤æ‚é“¾è¡¨ï¼ˆæ¯ä¸ªèŠ‚ç‚¹ä¸­æœ‰èŠ‚ç‚¹å€¼ï¼Œä»¥åŠä¸¤ä¸ªæŒ‡é’ˆï¼Œä¸€ä¸ªæŒ‡å‘ä¸‹ä¸€ä¸ªèŠ‚ç‚¹ï¼Œå¦ä¸€ä¸ªç‰¹æ®ŠæŒ‡é’ˆæŒ‡å‘ä»»æ„ä¸€ä¸ªèŠ‚ç‚¹ï¼‰ï¼Œè¿”å›ç»“æœä¸ºå¤åˆ¶åå¤æ‚é“¾è¡¨çš„headã€‚ï¼ˆæ³¨æ„ï¼Œè¾“å‡ºç»“æœä¸­è¯·ä¸è¦è¿”å›å‚æ•°ä¸­çš„èŠ‚ç‚¹å¼•ç”¨ï¼Œå¦åˆ™åˆ¤é¢˜ç¨‹åºä¼šç›´æ¥è¿”å›ç©ºï¼‰ æ•°æ®ç»“æ„123456789101112131415/*struct RandomListNode &#123; int label; struct RandomListNode *next, *random; RandomListNode(int x) : label(x), next(NULL), random(NULL) &#123; &#125;&#125;;*/class Solution &#123;public: RandomListNode* Clone(RandomListNode* pHead) &#123; &#125;&#125;; è§£é¢˜æ€è·¯ä¸€ã€é€’å½’æ€æƒ³ï¼šæŠŠå¤§é—®é¢˜è½¬åŒ–è‹¥å¹²å­é—®é¢˜æ­¤é¢˜è½¬åŒ–ä¸ºä¸€ä¸ªå¤´ç»“ç‚¹å’Œé™¤å»å¤´ç»“ç‚¹å‰©ä½™éƒ¨åˆ†ï¼Œå‰©ä½™éƒ¨åˆ†æ“ä½œå’ŒåŸé—®é¢˜ä¸€è‡´ 123456789101112131415RandomListNode* Clone(RandomListNode* pHead) &#123; if(pHead==NULL) return NULL; //å¼€è¾Ÿä¸€ä¸ªæ–°èŠ‚ç‚¹ RandomListNode* pClonedHead=new RandomListNode(pHead-&gt;label); pClonedHead-&gt;next = pHead-&gt;next; pClonedHead-&gt;random = pHead-&gt;random; //é€’å½’å…¶ä»–èŠ‚ç‚¹ pClonedHead-&gt;next=Clone(pHead-&gt;next); return pClonedHead; &#125; äºŒã€ å¤åˆ¶æ¯ä¸ªèŠ‚ç‚¹ï¼Œå¦‚ï¼šå¤åˆ¶èŠ‚ç‚¹Aå¾—åˆ°A1ï¼Œå°†A1æ’å…¥èŠ‚ç‚¹Aåé¢ éå†é“¾è¡¨ï¼ŒA1-&gt;random = A-&gt;random-&gt;next; å°†é“¾è¡¨æ‹†åˆ†æˆåŸé“¾è¡¨å’Œå¤åˆ¶åçš„é“¾è¡¨ 1234567891011121314151617181920212223242526272829RandomListNode* Clone(RandomListNode* pHead)&#123; if(!pHead) return NULL; RandomListNode *currNode = pHead; while(currNode)&#123; RandomListNode *node = new RandomListNode(currNode-&gt;label); node-&gt;next = currNode-&gt;next; currNode-&gt;next = node; currNode = node-&gt;next; &#125; currNode = pHead; while(currNode)&#123; RandomListNode *node = currNode-&gt;next; if(currNode-&gt;random)&#123; node-&gt;random = currNode-&gt;random-&gt;next; &#125; currNode = node-&gt;next; &#125; //æ‹†åˆ† RandomListNode *pCloneHead = pHead-&gt;next; RandomListNode *tmp; currNode = pHead; while(currNode-&gt;next)&#123; tmp = currNode-&gt;next; currNode-&gt;next =tmp-&gt;next; currNode = tmp; &#125; return pCloneHead; &#125; ä¸‰ã€å“ˆå¸Œè¡¨æ³•æ—¶é—´ç©ºé—´å¤æ‚åº¦éƒ½æ˜¯O(n) 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061RandomListNode* Clone(RandomListNode* pHead)&#123; if(pHead==NULL) return NULL; //å®šä¹‰ä¸€ä¸ªå“ˆå¸Œè¡¨ unordered_multimap&lt;RandomListNode*,RandomListNode*&gt; table; // å¼€è¾Ÿä¸€ä¸ªå¤´ç»“ç‚¹ RandomListNode* pClonedHead=new RandomListNode(pHead-&gt;label); pClonedHead-&gt;next=NULL; pClonedHead-&gt;random=NULL; // å°†å¤´ç»“ç‚¹æ”¾å…¥mapä¸­ table.insert(make_pair(pHead,pClonedHead)); //è®¾ç½®æ“ä½œæŒ‡é’ˆ RandomListNode* pNode=pHead-&gt;next; RandomListNode* pClonedNode=pClonedHead; // ç¬¬ä¸€éå…ˆå°†ç®€å•é“¾è¡¨å¤åˆ¶ä¸€ä¸‹ while(pNode!=NULL) &#123; // ä¸æ–­å¼€è¾ŸpNodeçš„æ‹·è´ç»“ç‚¹ RandomListNode* pClonedTail=new RandomListNode(pNode-&gt;label); pClonedTail-&gt;next=NULL; pClonedTail-&gt;random=NULL; //è¿æ¥æ–°èŠ‚ç‚¹ï¼Œæ›´æ–°å½“å‰èŠ‚ç‚¹ pClonedNode-&gt;next=pClonedTail; pClonedNode=pClonedTail; //å°†å¯¹åº”å…³ç³» æ’å…¥åˆ°å“ˆå¸Œè¡¨ä¸­ table.insert(make_pair(pNode,pClonedTail)); //å‘åç§»åŠ¨æ“ä½œèŠ‚ç‚¹ pNode=pNode-&gt;next; &#125; //éœ€ä»å¤´å¼€å§‹è®¾ç½®randomèŠ‚ç‚¹ï¼Œè®¾ç½®æ“ä½œæŒ‡é’ˆ pNode=pHead; pClonedNode=pClonedHead; // æ ¹æ®mapä¸­ä¿å­˜çš„æ•°æ®ï¼Œæ‰¾åˆ°å¯¹åº”çš„èŠ‚ç‚¹ while(pNode!=NULL) &#123; if(pNode-&gt;random!=NULL) &#123; //æ‰¾åˆ°å¯¹åº”èŠ‚ç‚¹ï¼Œæ›´æ–°å¤åˆ¶é“¾è¡¨ pClonedNode-&gt;random=table.find(pNode-&gt;random)-&gt;second; &#125; //å‘åç§»åŠ¨æ“ä½œèŠ‚ç‚¹ pNode=pNode-&gt;next; pClonedNode=pClonedNode-&gt;next; &#125; return pClonedHead; &#125;","categories":[{"name":"Algorithm","slug":"Algorithm","permalink":"http://codingdoge.cn/categories/Algorithm/"}],"tags":[{"name":"å‰‘æŒ‡Offer","slug":"å‰‘æŒ‡Offer","permalink":"http://codingdoge.cn/tags/å‰‘æŒ‡Offer/"}]},{"title":"åŠ¨æ€è§„åˆ’ï¼ˆDynamic Programmingï¼‰","slug":"title: åŠ¨æ€è§„åˆ’ï¼ˆDynamic Programmingï¼‰","date":"2017-05-13T11:39:00.000Z","updated":"2018-01-12T14:27:10.181Z","comments":true,"path":"2017/05/13/title: åŠ¨æ€è§„åˆ’ï¼ˆDynamic Programmingï¼‰/","link":"","permalink":"http://codingdoge.cn/2017/05/13/title: åŠ¨æ€è§„åˆ’ï¼ˆDynamic Programmingï¼‰/","excerpt":"","text":"ï¼ˆä»¥ä¸‹ç®€ç§°DPï¼‰ åŸºæœ¬æ€æƒ³å°†å¾…æ±‚è§£é—®é¢˜åˆ†è§£æˆè‹¥å¹²ä¸ªå­é—®é¢˜ï¼Œå…ˆæ±‚è§£å­é—®é¢˜ï¼Œç„¶åä»è¿™äº›å­é—®é¢˜çš„è§£å¾—åˆ°åŸé—®é¢˜çš„è§£ã€‚é€‚åˆç”¨DPæ±‚è§£çš„é—®é¢˜ï¼Œç»åˆ†è§£å¾—åˆ°çš„å­é—®é¢˜ä¸€èˆ¬ä¸æ˜¯ç›¸äº’ç‹¬ç«‹çš„ï¼Œå¦‚æœä½¿ç”¨åˆ†æ²»æ³•æ±‚è§£ï¼Œæœ‰äº›å­é—®é¢˜ä¼šè¢«é‡å¤è®¡ç®—å¤šæ¬¡ï¼Œå¯ä»¥ç”¨ä¸€ä¸ªè¡¨æ¥è®°å½•æ‰€æœ‰å·²è§£å†³çš„å­é—®é¢˜çš„ç­”æ¡ˆï¼Œä¸ç®¡è¯¥å­é—®é¢˜ä»¥åæ˜¯å¦è¢«ç”¨åˆ°ï¼Œåªè¦å®ƒè¢«è®¡ç®—è¿‡ï¼Œå°±å°†å…¶ç»“æœå¡«å…¥è¡¨ä¸­ã€‚ DPç®—æ³•é€‚ç”¨äºè§£æœ€ä¼˜åŒ–é—®é¢˜ã€‚é€šå¸¸å¯ä»¥æŒ‰ä»¥ä¸‹æ­¥éª¤è®¾è®¡ï¼š æ‰¾å‡ºæœ€ä¼˜è§£çš„æ€§è´¨ï¼Œå¹¶åˆ»ç”»å…¶ç»“æ„ç‰¹å¾ï¼› é€’å½’åœ°å®šä¹‰æœ€ä¼˜å€¼ï¼› ä»¥è‡ªåº•å‘ä¸Šçš„æ–¹å¼è®¡ç®—å‡ºæœ€ä¼˜å€¼ï¼› æ ¹æ®è®¡ç®—æœ€ä¼˜å€¼æ—¶å¾—åˆ°çš„ä¿¡æ¯ï¼Œæ„é€ æœ€ä¼˜è§£ åŸºæœ¬è¦ç´  æœ€ä¼˜å­ç»“æ„é—®é¢˜çš„æœ€ä¼˜è§£åŒ…å«äº†å…¶å­é—®é¢˜çš„æœ€ä¼˜è§£ã€‚ é‡å å­é—®é¢˜åœ¨ç”¨é€’å½’ç®—æ³•è‡ªé¡¶å‘ä¸‹æ±‚è§£é—®é¢˜æ—¶ï¼Œæ¯æ¬¡äº§ç”Ÿçš„å­é—®é¢˜å¹¶ä¸æ€»æ˜¯æ–°é—®é¢˜ï¼Œæœ‰äº›å­é—®é¢˜è¢«è®¡ç®—å¤šæ¬¡ã€‚DPç®—æ³•æ­£å¼åˆ©ç”¨äº†è¿™ç§å­é—®é¢˜çš„é‡å æ€§è´¨ï¼Œå¯¹æ¯ä¸€ä¸ªå­é—®é¢˜åªè§£ä¸€æ¬¡ï¼Œè€Œåå°†å…¶è§£ä¿å­˜åœ¨ä¸€ä¸ªè¡¨æ ¼ä¸­ï¼Œå½“å†æ¬¡éœ€è¦è§£æ­¤é—®é¢˜æ—¶ï¼Œåªæ˜¯ç®€å•åœ°ç”¨å¸¸æ•°æ—¶é—´æŸ¥çœ‹ä¸€ä¸‹ç»“æœã€‚é€šå¸¸ä¸åŒçš„å­é—®é¢˜ä¸ªæ•°éšé—®é¢˜çš„å¤§å°å‘ˆå¤šé¡¹å¼å¢é•¿ï¼Œå› æ­¤ç”¨DPç®—æ³•é€šå¸¸åªéœ€è¦å¤šé¡¹å¼æ—¶é—´ï¼Œä»è€Œè·å¾—è¾ƒé«˜çš„è§£é¢˜æ•ˆç‡ã€‚ æœ€é•¿å…¬å…±å­åºåˆ—é—®é¢˜æè¿°ä¸€ä¸ªç»™å®šåºåˆ—çš„å­åºåˆ—æ˜¯åœ¨è¯¥åºåˆ—ä¸­åˆ å»è‹¥å¹²å…ƒç´ åå¾—åˆ°çš„åºåˆ—ã€‚ç¡®åˆ‡çš„è¯´ï¼Œè‹¥ç»™å®šåºåˆ—X = {x1, x2, ..., xm}ï¼Œåˆ™å¦ä¸€åºåˆ—Z = {z1, z2, ..., zk}ï¼ŒXçš„å­åºåˆ—æ˜¯æŒ‡å­˜åœ¨ä¸€ä¸ªä¸¥æ ¼é€’å¢ä¸‹æ ‡åºåˆ—{i1, i2, ..., ik}ä½¿å¾—å¯¹äºæ‰€æœ‰j = 1, 2, ..., kæœ‰zj = xijã€‚ä¾‹å¦‚ï¼Œåºåˆ—Z = {B, C, D, B}æ˜¯åºåˆ—X = {A, B, C, B, D, A, B}çš„å­åºåˆ—ï¼Œç›¸åº”çš„é€’å¢ä¸‹æ ‡åºåˆ—ä¸º{2, 3, 5, 7}ã€‚ç»™å®šä¸¤ä¸ªåºåˆ—Xå’ŒYï¼Œå½“å¦ä¸€åºåˆ—Zæ—¢æ˜¯Xçš„å­åºåˆ—åˆæ˜¯Yçš„å­åºåˆ—æ—¶ï¼Œç§°Zæ˜¯åºåˆ—Xå’ŒYçš„å…¬å…±å­åºåˆ—ã€‚ä¾‹å¦‚ï¼Œè‹¥X = {A, B, C, B, D, A, B}ï¼ŒY = {B, D, C, A, B, A}ï¼Œåºåˆ—{B, C, A}æ˜¯Xå’ŒYçš„ä¸€ä¸ªå…¬å…±å­åºåˆ—ï¼Œä½†å®ƒä¸æ˜¯Xå’ŒYçš„æœ€é•¿å…¬å…±å­åºåˆ—ã€‚åºåˆ—{B, C, B, A}ä¹Ÿæ˜¯Xå’ŒYçš„ä¸€ä¸ªå…¬å…±å­åºåˆ—ï¼Œå®ƒçš„é•¿åº¦ä¸º4ï¼Œè€Œä¸”å®ƒæ˜¯Xå’ŒYçš„æœ€é•¿å…¬å…±å­åºåˆ—ï¼Œå› ä¸ºXå’ŒYæ²¡æœ‰é•¿åº¦å¤§äº4çš„å…¬å…±å­åºåˆ—ã€‚ æœ€é•¿å…¬å…±å­åºåˆ—é—®é¢˜ç»™å®šä¸¤ä¸ªåºåˆ—X = {x1, x2, ..., xm}å’ŒY = {y1, y2, ..., ym}ï¼Œæ‰¾å‡ºXå’ŒYçš„æœ€é•¿å…¬å…±å­åºåˆ—ã€‚ æŒ‰ç…§DPç®—æ³•è®¾è®¡çš„å„ä¸ªæ­¥éª¤æ±‚è§£ æœ€é•¿å…¬å…±å­åºåˆ—ç»“æ„è®¾åºåˆ—X = {x1, x2, ..., xm}å’ŒY = {y1, y2, ..., yn}çš„æœ€é•¿å…¬å…±å­åºåˆ—ä¸ºZ = {z1, z2, ..., zk}ï¼Œåˆ™ è‹¥xm = ynï¼Œåˆ™zk = xm = ynï¼Œä¸”Z å­é—®é¢˜çš„é€’å½’ç»“æ„ è®¡ç®—æœ€ä¼˜å€¼ æ„é€ æœ€é•¿å…¬å…±å­åºåˆ— ç®—æ³•çš„æ”¹è¿›","categories":[{"name":"Algorithm","slug":"Algorithm","permalink":"http://codingdoge.cn/categories/Algorithm/"}],"tags":[]}]}